window.__require=function e(t,o,i){function a(s,n){if(!o[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!n&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){return a(t[s][1][e]||e)},d,d.exports,e,t,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({AnimFlashStatusIn:[function(e,t,o){"use strict";cc._RF.push(t,"ce098Q1mthCxIMwf/+BX9RS","AnimFlashStatusIn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimFlashStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relAnimFlash=t,o}OnStep(e){this.relAnimFlash.rateVisibility+=e/this.relAnimFlash.msFadeIn,this.relAnimFlash.rateVisibility=Math.min(this.relAnimFlash.rateVisibility,1),1==this.relAnimFlash.rateVisibility&&this.relAnimFlash.Enter(this.relAnimFlash.statusOut)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"AnimFlashStatusIn"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimFlashStatus":"AnimFlashStatus"}],AnimFlashStatusOut:[function(e,t,o){"use strict";cc._RF.push(t,"85e18sSSP9Ouq+uws19jqMd","AnimFlashStatusOut"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimFlashStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relAnimFlash=t,o}OnStep(e){this.relAnimFlash.rateVisibility-=e/this.relAnimFlash.msFadeOut,this.relAnimFlash.rateVisibility=Math.max(this.relAnimFlash.rateVisibility,0)}OnFlash(){this.relAnimFlash.Enter(this.relAnimFlash.statusIn)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"AnimFlashStatusOut"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimFlashStatus":"AnimFlashStatus"}],AnimFlashStatus:[function(e,t,o){"use strict";cc._RF.push(t,"3a9caqlZ15IIZvmrveQnIKy","AnimFlashStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnFlash(){}},cc._RF.pop()},{}],AnimFlash:[function(e,t,o){"use strict";cc._RF.push(t,"92d40uD/eNIm4Sx4o5ULAul","AnimFlash"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimFlashStatusIn"),s=e("./AnimFlashStatusOut");class n{constructor(){this.rateVisibility=0}static Pop(e,t,o){let a=i.default.Pop(n._t,e);return a.msFadeIn=t,a.msFadeOut=o,a.statusIn=r.default.Pop(e,a),a.statusOut=s.default.Pop(e,a),a.Enter(a.statusOut),a}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}Get255(){return 255*this.rateVisibility}GetRateTotal(){let e=0;return this.currStatus==this.statusIn&&(e+=this.rateVisibility*this.msFadeIn),this.currStatus==this.statusOut&&(e+=this.msFadeIn,e+=(1-this.rateVisibility)*this.msFadeOut),e/(this.msFadeIn+this.msFadeOut)}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"AnimFlash"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimFlashStatusIn":"AnimFlashStatusIn","./AnimFlashStatusOut":"AnimFlashStatusOut"}],AnimKeepStatusIn:[function(e,t,o){"use strict";cc._RF.push(t,"0b3cdd5BwpGdIga6YiaCu/+","AnimKeepStatusIn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimKeepStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relGameFade=t,o}OnStep(e){this.relGameFade.rateVisibility+=e/this.relGameFade.msFadeIn,this.relGameFade.rateVisibility=Math.min(this.relGameFade.rateVisibility,1)}OnFadeOut(){this.relGameFade.Enter(this.relGameFade.statusOut)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"AnimKeepStatusIn"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimKeepStatus":"AnimKeepStatus"}],AnimKeepStatusOut:[function(e,t,o){"use strict";cc._RF.push(t,"a64b9WOKrRAtoj06Y3afZQd","AnimKeepStatusOut"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimKeepStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relGameFade=t,o}OnStep(e){this.relGameFade.rateVisibility-=e/this.relGameFade.msFadeOut,this.relGameFade.rateVisibility=Math.max(this.relGameFade.rateVisibility,0)}OnFadeIn(){this.relGameFade.Enter(this.relGameFade.statusIn)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"AnimKeepStatusOut"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimKeepStatus":"AnimKeepStatus"}],AnimKeepStatus:[function(e,t,o){"use strict";cc._RF.push(t,"f58e2ysHNBOZ7/J/SCUnaZ/","AnimKeepStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnFadeIn(){}OnFadeOut(){}},cc._RF.pop()},{}],AnimKeep:[function(e,t,o){"use strict";cc._RF.push(t,"371f3ZS/lpPn507ZCnEt1lC","AnimKeep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./AnimKeepStatusIn"),s=e("./AnimKeepStatusOut");class n{constructor(){this.rateVisibility=0}static Pop(e,t,o){let a=i.default.Pop(n._t,e);return a.msFadeIn=t,a.msFadeOut=o,a.statusIn=r.default.Pop(e,a),a.statusOut=s.default.Pop(e,a),a.Enter(a.statusOut),a}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}Get255(){return 255*this.rateVisibility}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"AnimKeep"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./AnimKeepStatusIn":"AnimKeepStatusIn","./AnimKeepStatusOut":"AnimKeepStatusOut"}],B2ControllerRS:[function(e,t,o){"use strict";cc._RF.push(t,"676c5OIft9DmL7CdgPHZjab","B2ControllerRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../box2d_ts/Box2D"),a=e("../../basic/UtilObjPool"),r=e("../../basic/UtilObjPoolType"),s=e("./B2EleSetting"),n="B2ControllerRS";class l{constructor(){}static Pop(e,t,o){let i=a.default.Pop(l._t,e);return i.type=t,i.drawer=o,l._mapInst.set(t,i),i}}l._t=new r.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),function(e){e._mapInst=a.default.Pop(a.default.typeMap,n),e.buoyancy=e.Pop(n,i.b2BuoyancyController,(e,t)=>{const o=s.default.farLen;let i=a.default.Pop(a.default.typeB2Vec2,n);i.x=e.normal.x,i.y=e.normal.y,i.Normalize();const r=a.default.Pop(a.default.typeB2Vec2,n),l=a.default.Pop(a.default.typeB2Vec2,n);r.x=i.x*e.offset+i.y*o,r.y=i.y*e.offset-i.x*o,l.x=i.x*e.offset-i.y*o,l.y=i.y*e.offset+i.x*o,t.StraightLine(r.x,r.y,l.x,l.y,t.Pixel(s.default.lineWidth),s.default.color.controller.b2BuoyancyController),a.default.Push(i),a.default.Push(r),a.default.Push(l)})}(l||(l={})),o.default=l,cc._RF.pop()},{"../../../../box2d_ts/Box2D":"Box2D","../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","./B2EleSetting":"B2EleSetting"}],B2DrableWorld:[function(e,t,o){"use strict";cc._RF.push(t,"fee25q1ncxA4qV8YcuSFtXh","B2DrableWorld"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../box2d_ts/Box2D"),a=e("../../basic/UtilObjPool"),r=e("../../basic/UtilObjPoolType"),s="B2DrableWorld";class n{constructor(){}static Pop(e,t){let o=a.default.Pop(n._t,e);o._b2w=t;const i=a.default.Pop(a.default.typeBodyDef,s);return o._ground=o._b2w.CreateBody(i),o}MouseDown(e){let t;if(this._b2w.QueryPointAABB(e,o=>o.GetBody().GetType()!==i.b2BodyType.b2_dynamicBody||!o.TestPoint(e)||(t=o,!1)),t){const o=t.GetBody(),i=a.default.Pop(a.default.typeB2MouseJointDef,s);i.bodyA=this._ground,i.bodyB=o,i.target.Copy(e),i.maxForce=1e3*o.GetMass(),this._mouseJoint=this._b2w.CreateJoint(i),o.SetAwake(!0)}}MouseMove(e){this._mouseJoint&&this._mouseJoint.SetTarget(e)}MouseUp(e){this._mouseJoint&&(this._b2w.DestroyJoint(this._mouseJoint),this._mouseJoint=null)}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../box2d_ts/Box2D":"Box2D","../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],B2EleSetting:[function(e,t,o){"use strict";cc._RF.push(t,"d68fdJx53pE3KA515knK+6Y","B2EleSetting"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a="b2EleSetting",r=i.default.Pop(i.default.typeB2Vec2,a),s=i.default.Pop(i.default.typeB2Vec2,a);s.x=1;const n=i.default.Pop(i.default.typeB2Vec2,a);var l;n.y=1,function(e){e.lineWidth=3,e.dotRadius=6,e.farLen=100,e.color={shape:{outline:i.default.PopCCColor(a,100,255,100,255),body:i.default.PopCCColor(a,100,255,100,100)},aabb:i.default.PopCCColor(a,0,0,255,255),joint:{areaBegin:i.default.PopCCColor(a,255,0,0,255),areaEnd:i.default.PopCCColor(a,255,100,100,255),dot:i.default.PopCCColor(a,255,255,255,255)},transform:{xColor:i.default.PopCCColor(a,255,0,0,255),yColor:i.default.PopCCColor(a,0,255,0,255)},contactPoint:{dot:i.default.PopCCColor(a,255,255,100,255)},particle:{fill:i.default.PopCCColor(a,100,100,255,100),stroke:i.default.PopCCColor(a,100,100,255,255)},controller:{b2BuoyancyController:i.default.PopCCColor(a,255,100,100,100)}},e.transformLen=1,e.posO=r,e.xAxis=s,e.yAxis=n}(l||(l={})),o.default=l,cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool"}],B2ElementRS:[function(e,t,o){"use strict";cc._RF.push(t,"e3631HvZVRBKp+fXBxlSZ/P","B2ElementRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("./B2ControllerRS"),r=e("./B2EleSetting"),s=e("./B2JointRS"),n=e("./B2ShapeRS"),l=e("../../basic/UtilObjPoolType"),c="B2ElementRS";class d{}const u=new l.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"ShapeRecord"});class m{constructor(){}static Pop(e,t,o,a){let r=i.default.Pop(m._t,e);return r.drawAbleTag=t,r.arrayGetter=o,r.tDrawer=a,m.eleDrawFuncList.push((e,r,s)=>{if(!(s&t))return;let n=i.default.Pop(i.default.typeArray,c);o(e,n),n.forEach(e=>{a(e,r)}),i.default.Push(n)}),r}}m._t=new l.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:c}),m.eleDrawFuncList=i.default.Pop(i.default.typeArray,c),function(e){e.joint=e.Pop(c,Math.pow(2,0),(e,t)=>{for(let o=e.GetJointList();o;o=o.GetNext())t.push(o);return t},(e,t)=>{if(null==e)return;let o=e.GetBodyA(),a=e.GetBodyB();const n=o.m_xf,l=a.m_xf,d=n.p,u=l.p,m=i.default.Pop(i.default.typeB2Vec2,c);e.GetAnchorA(m);const p=i.default.Pop(i.default.typeB2Vec2,c);e.GetAnchorB(p),s.default._instMap.has(e.m_type)?s.default._instMap.get(e.m_type).drawer(e,m,p,t):(t.StraightLine(d.x,d.y,m.x,m.y,t.Pixel(r.default.lineWidth),r.default.color.joint.areaBegin),t.StraightLine(m.x,m.y,p.x,p.y,t.Pixel(r.default.lineWidth),r.default.color.joint.areaBegin),t.StraightLine(u.x,u.y,p.x,p.y,t.Pixel(r.default.lineWidth),r.default.color.joint.areaEnd)),i.default.Push(m),i.default.Push(p)}),e.bodyTransform=e.Pop(c,Math.pow(2,1),(e,t)=>{for(let o=e.GetBodyList();o;o=o.GetNext())t.push(o);return t},(e,t)=>{let o=i.default.Pop(i.default.typeB2Vec2,c);e.GetWorldPoint(r.default.xAxis,o);let a=i.default.Pop(i.default.typeB2Vec2,c);e.GetWorldPoint(r.default.yAxis,a);let s=i.default.Pop(i.default.typeB2Vec2,c);e.GetWorldPoint(r.default.posO,s),t.StraightLine(s.x,s.y,o.x,o.y,t.Pixel(r.default.lineWidth),r.default.color.transform.xColor),t.StraightLine(s.x,s.y,a.x,a.y,t.Pixel(r.default.lineWidth),r.default.color.transform.yColor),i.default.Push(o),i.default.Push(a),i.default.Push(s)}),e.aabb=e.Pop(c,Math.pow(2,2),(e,t)=>{for(let o=e.GetBodyList();o;o=o.GetNext())for(let e=o.GetFixtureList();e;e=e.GetNext())for(let o=0;o<e.m_proxyCount;o++){let i=e.m_proxies[o];t.push(i.treeNode.aabb)}return t},(e,t)=>{let o=i.default.Pop(i.default.typeArray,c),a=i.default.Pop(i.default.typeB2Vec2,c);a.Set(e.lowerBound.x,e.lowerBound.y),o.push(a);let s=i.default.Pop(i.default.typeB2Vec2,c);s.Set(e.upperBound.x,e.lowerBound.y),o.push(s);let n=i.default.Pop(i.default.typeB2Vec2,c);n.Set(e.upperBound.x,e.upperBound.y),o.push(n);let l=i.default.Pop(i.default.typeB2Vec2,c);l.Set(e.lowerBound.x,e.upperBound.y),o.push(l),t.CyclePosSetAll(o,t.Pixel(r.default.lineWidth),r.default.color.aabb);for(let r=0;r<o.length;r++)i.default.Push(o[r]);i.default.Push(o)}),e.shape=e.Pop(c,Math.pow(2,3),(e,t)=>{for(let a=e.GetBodyList();a;a=a.GetNext())for(let e=a.GetFixtureList();e;e=e.GetNext()){var o=i.default.Pop(u,c);o.shape=e.GetShape(),o.body=a,t.push(o)}return t},(e,t)=>{n.default._mapInst.has(e.shape.m_type)&&n.default._mapInst.get(e.shape.m_type).drawer(e.shape,e.body,t),i.default.Push(e)}),e.particle=e.Pop(c,Math.pow(2,4),(e,t)=>{for(let o=e.GetParticleSystemList();o;o=o.GetNext())t.push(o);return t},(e,t)=>{let o=e.GetRadius(),i=e.GetParticleCount(),a=e.GetPositionBuffer();for(let s=0;s<i;s++){let e=a[s];t.RoundFill(e.x,e.y,o,r.default.color.particle.fill),t.RoundLine(e.x,e.y,o,t.Pixel(r.default.lineWidth),r.default.color.particle.fill)}}),e.controller=e.Pop(c,Math.pow(2,5),(e,t)=>{for(let o=e.m_controllerList;o;o=o.GetNext())t.push(o);return t},(e,t)=>{a.default._mapInst.has(e.constructor)&&a.default._mapInst.get(e.constructor).drawer(e,t)}),e.contact=e.Pop(c,Math.pow(2,6),(e,t)=>{let o=i.default.Pop(i.default.typeB2WorldManifold,c);for(let i=e.GetContactManager().m_contactList;i;i=i.GetNext())i.GetWorldManifold(o),t.push(...o.points);return i.default.Push(o),t},(e,t)=>{t.RoundFill(e.x,e.y,t.Pixel(r.default.dotRadius),r.default.color.contactPoint.dot)})}(m||(m={})),o.default=m,cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","./B2ControllerRS":"B2ControllerRS","./B2EleSetting":"B2EleSetting","./B2JointRS":"B2JointRS","./B2ShapeRS":"B2ShapeRS"}],B2Extend:[function(e,t,o){"use strict";cc._RF.push(t,"f842eUKQ9JHwaeSElsJ17t3","B2Extend"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../box2d_ts/Box2D"),a=e("../../basic/UtilObjPool"),r="b2Extend";var s;(function(e){function t(e){let t=Math.cos(e),o=Math.sin(e),i=a.default.Pop(a.default.typeB2Mat33,r);return i.SetVVV({x:t,y:o,z:0},{x:-o,y:t,z:0},{x:0,y:0,z:1}),i}function o(e,t){let o=a.default.Pop(a.default.typeB2Mat33,r);return o.SetVVV({x:1,y:0,z:0},{x:0,y:1,z:0},{x:e,y:t,z:1}),o}function s(e,t){let o=a.default.Pop(a.default.typeB2Vec3,r),s=a.default.Pop(a.default.typeB2Vec3,r),n=a.default.Pop(a.default.typeB2Vec3,r);i.b2Mat33.MulM33V3(e,t.ex,o),i.b2Mat33.MulM33V3(e,t.ey,s),i.b2Mat33.MulM33V3(e,t.ez,n);var l=a.default.Pop(a.default.typeB2Mat33,r);return l.SetVVV(o,s,n),l}e.GetDistanceJoint=function(e){if(null!=e)return e.m_type==i.b2JointType.e_distanceJoint?e:void 0},e.GetPulleyJoint=function(e){if(null!=e)return e.m_type==i.b2JointType.e_pulleyJoint?e:void 0},e.GetMouseJoint=function(e){if(null!=e)return e.m_type==i.b2JointType.e_motorJoint?e:void 0},e.Getb2BuoyancyController=function(e){if(null!=e)return e instanceof i.b2BuoyancyController?e:void 0},e.GetChainShape=function(e){if(null!=e)return e.GetType()==i.b2ShapeType.e_chainShape?e:void 0},e.GetEdgeShape=function(e){if(null!=e)return e.GetType()==i.b2ShapeType.e_edgeShape?e:void 0},e.GetPolygonShape=function(e){if(null!=e)return e.GetType()==i.b2ShapeType.e_polygonShape?e:null},e.GetCircleShape=function(e){if(null!=e)return e.GetType()==i.b2ShapeType.e_circleShape?e:null},e.GetTransMat=function(e){var i=e.GetAngle(),a=e.GetPosition();return s(o(a.x,a.y),t(i))},e.GetRotateMat=t,e.GetPosMat=o,e.MergeMat=s,e.GetMatStr=function(e){return`${e.ex.x}, ${e.ey.x}, ${e.ez.x}\n${e.ex.y}, ${e.ey.y}, ${e.ez.y}\n${e.ex.z}, ${e.ey.z}, ${e.ez.z}`},e.GetV3Str=function(e){return`${e.x}, ${e.y}, ${e.z}`},e.leftMat=t(Math.PI/2),e.rightMat=t(-Math.PI/2)})(s||(s={})),o.default=s,cc._RF.pop()},{"../../../../box2d_ts/Box2D":"Box2D","../../basic/UtilObjPool":"UtilObjPool"}],B2JointRS:[function(e,t,o){"use strict";cc._RF.push(t,"d149bPy4pRDcoCiuqbELp/j","B2JointRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../box2d_ts/Box2D"),a=e("../../basic/UtilObjPool"),r=e("../../basic/UtilObjPoolType"),s=e("./B2EleSetting"),n="B2JointRS";class l{constructor(){}static Pop(e,t,o){let i=a.default.Pop(l._t,e);return i.type=t,i.drawer=o,l._instMap.set(t,i),i}}l._t=new r.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),function(e){e._instMap=a.default.Pop(a.default.typeMap,n),e.distance=e.Pop(n,i.b2JointType.e_distanceJoint,(e,t,o,i)=>{i.StraightLine(t.x,t.y,o.x,o.y,i.Pixel(s.default.lineWidth),s.default.color.joint.areaBegin)}),e.pulley=e.Pop(n,i.b2JointType.e_pulleyJoint,(e,t,o,i)=>{const a=e.GetGroundAnchorA(),r=e.GetGroundAnchorB();i.StraightLine(a.x,a.y,t.x,t.y,i.Pixel(s.default.lineWidth),s.default.color.joint.areaBegin),i.StraightLine(r.x,r.y,o.x,o.y,i.Pixel(s.default.lineWidth),s.default.color.joint.areaBegin),i.StraightLine(a.x,a.y,r.x,r.y,i.Pixel(s.default.lineWidth),s.default.color.joint.areaEnd)}),e.mouse=e.Pop(n,i.b2JointType.e_mouseJoint,(e,t,o,i)=>{i.RoundFill(t.x,t.y,i.Pixel(s.default.dotRadius),s.default.color.joint.dot),i.RoundFill(o.x,o.y,i.Pixel(s.default.dotRadius),s.default.color.joint.dot),i.StraightLine(t.x,t.y,o.x,o.y,i.Pixel(s.default.dotRadius),s.default.color.joint.areaBegin)})}(l||(l={})),o.default=l,cc._RF.pop()},{"../../../../box2d_ts/Box2D":"Box2D","../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","./B2EleSetting":"B2EleSetting"}],B2ShapeRS:[function(e,t,o){"use strict";cc._RF.push(t,"0ebbd2ypkhAw4ktJPDSiVqs","B2ShapeRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../../../box2d_ts/Box2D"),r=e("./B2EleSetting"),s=e("../../basic/UtilObjPoolType"),n="B2ShapeRS";class l{constructor(){}static Pop(e,t,o){let a=i.default.Pop(l._t,e);return a.type=t,a.drawer=o,l._mapInst.set(t,a),a}}l._t=new s.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),function(e){e._mapInst=i.default.Pop(i.default.typeMap,n),e.circle=e.Pop(n,a.b2ShapeType.e_circleShape,(e,t,o)=>{const a=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(e.m_p,a);const s=e.m_radius;o.RoundFill(a.x,a.y,s,r.default.color.shape.body),o.RoundLine(a.x,a.y,s,o.Pixel(r.default.lineWidth),r.default.color.shape.outline),i.default.Push(a)}),e.edge=e.Pop(n,a.b2ShapeType.e_edgeShape,(e,t,o)=>{const a=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(e.m_vertex1,i.default.Pop(i.default.typeB2Vec2,n));const s=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(e.m_vertex2,i.default.Pop(i.default.typeB2Vec2,n)),o.StraightLine(a.x,a.y,s.x,s.y,o.Pixel(r.default.lineWidth),r.default.color.shape.outline),i.default.Push(a),i.default.Push(s)}),e.chain=e.Pop(n,a.b2ShapeType.e_chainShape,(e,t,o)=>{const a=e.m_count,s=e.m_vertices;let l=i.default.Pop(i.default.typeB2Vec2,n);if(t.GetWorldPoint(s[0],l),o.RoundFill(l.x,l.y,o.Pixel(r.default.dotRadius),r.default.color.shape.outline),e.m_hasPrevVertex){const a=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(e.m_prevVertex,a),o.StraightLine(a.x,a.y,l.x,l.y,o.Pixel(r.default.lineWidth),r.default.color.shape.outline),o.RoundFill(a.x,a.y,o.Pixel(r.default.dotRadius),r.default.color.shape.outline),i.default.Push(a)}for(let c=1;c<a;c++){const e=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(s[c],e),o.StraightLine(l.x,l.y,e.x,e.y,o.Pixel(r.default.lineWidth),r.default.color.shape.outline),o.RoundFill(e.x,e.y,o.Pixel(r.default.dotRadius),r.default.color.shape.outline),l.Set(e.x,e.y),i.default.Push(e)}if(e.m_hasNextVertex){const a=i.default.Pop(i.default.typeB2Vec2,n);t.GetWorldPoint(e.m_nextVertex,a),o.StraightLine(a.x,a.y,l.x,l.y,o.Pixel(r.default.lineWidth),r.default.color.shape.outline),o.RoundFill(a.x,a.y,o.Pixel(r.default.dotRadius),r.default.color.shape.outline),i.default.Push(a)}i.default.Push(l)}),e.polygon=e.Pop(n,a.b2ShapeType.e_polygonShape,(e,t,o)=>{const a=e.m_vertices;let s=i.default.Pop(i.default.typeArray,n);for(let r=0;r<e.m_count;r++){let e=a[r];s.push(t.GetWorldPoint(e,i.default.Pop(i.default.typeB2Vec2,n)))}o.FillPosSetAll(s,r.default.color.shape.body),o.CyclePosSetAll(s,o.Pixel(r.default.lineWidth),r.default.color.shape.outline);for(let r=0;r<s.length;r++)i.default.Push(s[r]);i.default.Push(s)})}(l||(l={})),o.default=l,cc._RF.pop()},{"../../../../box2d_ts/Box2D":"Box2D","../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","./B2EleSetting":"B2EleSetting"}],BCBigInt:[function(e,t,o){"use strict";cc._RF.push(t,"41fa6HgdU5BPp1lSywodhMT","BCBigInt"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCBigInt";class s{constructor(){this.listVal=i.default.Pop(i.default.typeArray,r)}static Pop(e,t){let o=i.default.Pop(s._t,e);return o._inc=t,o}Add(e,t){if(0==t)return;for(;this.listVal.length<=e;)this.listVal.push(0);this.listVal[e]+=t;let o=Math.floor(this.listVal[e]/this._inc);this.listVal[e]-=o*this._inc,this.Add(e+1,o)}AddBasic(e){this.Add(0,e)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCCollection:[function(e,t,o){"use strict";cc._RF.push(t,"0b85bWg1etAfL/oMC9d92Qi","BCCollection"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCCollection";class s{constructor(){this._list=i.default.Pop(i.default.typeArray,r),this._map=i.default.Pop(i.default.typeMap,r)}static Pop(e){return i.default.Pop(s._t,e)}add(e){this._list.push(e),this._map.forEach((t,o)=>{t.forEach((t,i)=>{o(e)==i&&t.add(e)})})}rem(e){this._list.splice(this._list.indexOf(e),1),this._map.forEach((t,o)=>{t.forEach((t,i)=>{o(e)==i&&t.rem(e)})})}select(e,t){if(!this._map.has(e)){this._map.set(e,i.default.Pop(i.default.typeMap,r));for(let t=0;t<this._list.length;t++){let o=this._list[t],i=e(o);this._map.get(e).get(i)||this._map.get(e).set(i,s.Pop(r)),this._map.get(e).get(i).add(o)}}return this._map.get(e).has(t)||this._map.get(e).set(t,s.Pop(r)),this._map.get(e).get(t)}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),o.default=s,cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCCounter:[function(e,t,o){"use strict";cc._RF.push(t,"8ec7dUO5o5CH6A84d5AWHWd","BCCounter"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCCounter";class s{constructor(){this._genId=0,this._set=i.default.Pop(i.default.typeSet,r)}static Pop(e){return i.default.Pop(s._t,e)}get active(){return 0<this._set.size}Apply(){let e=++this._genId;return this._set.add(e),e}Cancel(e){this._set.delete(e)}Clear(){this._set.clear()}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCEventer:[function(e,t,o){"use strict";cc._RF.push(t,"b5388YmNaFNzY+R+HH1lDgr","BCEventer"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./BCIdGeneration"),a=e("./UtilObjPool"),r=e("./UtilObjPoolType"),s="BCEventer";class n{constructor(){this.idGen=i.default.Pop(s),this.listenMap=a.default.Pop(a.default.typeMap,s)}static Pop(e){return a.default.Pop(n._t,e)}Once(e){let t;t=this.On(o=>{this.Off(t),e(o)})}On(e){let t=this.idGen.GenId();return this.listenMap.set(t,e),t}Off(e){this.listenMap.delete(e)}Call(e){this.listenMap.forEach(t=>{t(e)})}Clear(){this.listenMap.clear()}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:e=>{e.listenMap.clear()},tag:s}),cc._RF.pop()},{"./BCIdGeneration":"BCIdGeneration","./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCIdGeneration:[function(e,t,o){"use strict";cc._RF.push(t,"03c80AIcldGY4PjozY/A9Ud","BCIdGeneration"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType");class r{constructor(){this._genId=0}static Pop(e){return i.default.Pop(r._t,e)}GenId(){return++this._genId}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"BCIdGeneration"}),cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCProgressNum:[function(e,t,o){"use strict";cc._RF.push(t,"56408L6q2ZLNL2Nv64c6J7X","BCProgressNum"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCProgressNum";class s{constructor(){this.listVal=i.default.Pop(i.default.typeArray,r)}static Pop(e,t){let o=i.default.Pop(s._t,e);return o._inc=t,o}get sum(){let e=0;for(let t=0;t<this.listVal.length;t++)e+=this.listVal[t]*Math.pow(this._inc,t);return e}get sumFull(){let e=0;for(let t=0;t<this.listVal.length;t++){let o=this.listVal[t];if(o<this._inc)break;e+=o*Math.pow(this._inc,t)}return e}Add(e,t){this.listVal.length<=e&&this.listVal.push(0),this.listVal[e]+=t,this._inc<this.listVal[e]&&(this.Add(e+1,(this.listVal[e]-this._inc)/this._inc),this.listVal[e]=this._inc)}AddBasic(e){this.Add(0,e)}Clone(e){let t=s.Pop(e,this._inc);return t.listVal.push(...this.listVal),t}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCPromiseCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"2f435eW6CtGfItyonQVymPU","BCPromiseCtrl"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCPromiseCtrl";class s{constructor(){this.isResulted=!1,this.isResolved=!1,this._resolve=null,this.isRejected=!1,this._reject=null}static Pop(e){let t=i.default.Pop(s._t,e);return t._promise=i.default.PopPromise(r,(e,o)=>{t._resolve=e,t._reject=o}),t}resolve(e){this.isResulted||(this.isResulted=!0,this.isResolved=!0,this._resolve(e))}reject(e){this.isResulted||(this.isResulted=!0,this.isRejected=!0,this._reject(e))}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BCType:[function(e,t,o){"use strict";cc._RF.push(t,"80224+JQH9KB46Bmw8eQ0z8","BCType"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a=e("./UtilObjPoolType"),r="BCType";class s{constructor(){}static Pop(e,t,o,a){let r=i.default.Pop(s._t,e);return r._equal=t,r._release=o,r._clone=a,r}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),function(e){e.typeNumber=e.Pop(r,(e,t)=>e==t,()=>{},e=>e),e.typeString=e.Pop(r,(e,t)=>e==t,()=>{},e=>e),e.typeBoolean=e.Pop(r,(e,t)=>e==t,()=>{},e=>e),e.typeArray=e.Pop(r,(e,t)=>{if(null==e&&null==t)return!1;if(null==e)return!1;if(null==t)return!1;if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!=t[o])return!1;return!0},e=>{i.default.Push(e)},e=>{let t=i.default.Pop(i.default.typeArray,r);return t.push(...e),t})}(s||(s={})),o.default=s,cc._RF.pop()},{"./UtilObjPool":"UtilObjPool","./UtilObjPoolType":"UtilObjPoolType"}],BackpackPropPreviewViewState:[function(e,t,o){"use strict";cc._RF.push(t,"5ced47BFFZGe7ImRa6GRYN+","BackpackPropPreviewViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexLayer"),l=e("../../GameCommon"),c=e("../voice_ogg/VoiceOggViewState");class d extends s.default{constructor(){super(n.default.GAME,s.default.BG_TYPE.MASK,!0)}static Pop(e,t,o){let a=i.default.Pop(d._t,e);return a.idCfg=t,a.count=o,a}OnMaskTouch(){c.default.inst.VoiceSet(l.default.BTN_VOICE),r.default.mgrUI.Close(this._idView)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"BackpackPropPreviewViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],BackpackPropPreviewView:[function(e,t,o){"use strict";cc._RF.push(t,"5ac52L5lstNeZyLh1R8juNi","BackpackPropPreviewView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/config/src/CfgBackpackProp"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../../IndexStorageItem"),h=e("../../GameCommon"),f=e("../equipment_view/EquipmentViewBackpackProp"),{ccclass:y,property:_}=cc._decorator,g="BackpackPropPreviewView";let b=i=class extends u.default{constructor(){super(...arguments),this.txtName=null,this.txtInfo=null,this.containerProp=null}};b.nodeType=d.default.Pop(g,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/item_backpack_prop_reward_preview_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT],propsFilter:(e,t)=>{let o;for(let a=0;a<n.default.mgrData.Get(p.default.listEquipment).length;a++)n.default.mgrData.Get(p.default.listEquipment)[a].idCfg==t.idCfg&&(o=n.default.mgrData.Get(p.default.listEquipment)[a]);let i=n.default.mgrCfg.cfgBackpackProp.select(s.default.idGetter,t.idCfg)._list[0];e.txtName.string=`${i.name}`,e.txtInfo.string=i.txt_info}})],childrenCreator:[d.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerProp,uiNodeCreator:(e,t,o)=>{o.push(f.default.GetNodeTypeForUI(e.idCfg).CreateNode(e,e.idCfg,e.idCfg))}})],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.scaleInForTemp200}),a([_(cc.Label)],b.prototype,"txtName",void 0),a([_(cc.Label)],b.prototype,"txtInfo",void 0),a([_(cc.Node)],b.prototype,"containerProp",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp"}],BlurViewScreenShot:[function(e,t,o){"use strict";cc._RF.push(t,"1af2ah5lIFBfbXMtKyNe5Xk","BlurViewScreenShot");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),m=e("../screen_shot_view/ScreenShotViewState"),p=e("./BlurViewState"),{ccclass:h,property:f}=cc._decorator,y="BlurViewScreenShot";let _=i=class extends d.default{constructor(){super(...arguments),this.sprScreenShot=null,this.cameraScreenshot=null}};_.nodeType=c.default.Pop(y,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/blur_view_screenshot`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(y,{listRefModule:[r.default.BLUR],propsFilter:(e,t,o)=>{let i=t.mapIdxToRT.get(o);e.node.x=i.posX,e.sprScreenShot.node.width=i.width,e.sprScreenShot.node.height=i.height,e.sprScreenShot.getMaterial(0).setProperty("textureScreenshot",m.default.inst.rtScreen),e.cameraScreenshot.targetTexture=i.rt;let a=p.default.SCALE*Math.pow(.5,o-1);e.cameraScreenshot.node.x=i.width/2,e.cameraScreenshot.node.y=i.height/2,e.cameraScreenshot.zoomRatio=1/a,e.cameraScreenshot.node.active=t.isRendering}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([f(cc.Sprite)],_.prototype,"sprScreenShot",void 0),a([f(cc.Camera)],_.prototype,"cameraScreenshot",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../screen_shot_view/ScreenShotViewState":"ScreenShotViewState","./BlurViewState":"BlurViewState"}],BlurViewStateIdxData:[function(e,t,o){"use strict";cc._RF.push(t,"d9d38hCx3xMyoZQ03ZUK1Di","BlurViewStateIdxData"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:a}=cc._decorator;cc._RF.pop()},{}],BlurViewState:[function(e,t,o){"use strict";cc._RF.push(t,"452b9y5osdJRroAR3s/Mmga","BlurViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/ViewState"),l="BlurViewState";class c extends n.default{constructor(){super(i.default.SYSTEM,n.default.BG_TYPE.NONE,!1),this.mapIdxToRT=a.default.Pop(a.default.typeMap,l),this.isRendering=!1,c.inst=this}static Pop(e){return a.default.Pop(c._t,e)}OnInit(){for(let e=1;e<=c.SCREEN_SHOOT_COUNT;e++){let t=(1-Math.pow(.5,e))/.5*s.default.mgrUI._containerUI.width*c.SCALE,o=s.default.mgrUI._containerUI.width*c.SCALE*Math.pow(.5,e-1),i=s.default.mgrUI._containerUI.height*c.SCALE*Math.pow(.5,e-1),a=t-o,r=c.SCALE*Math.pow(.5,e-1),n=new cc.RenderTexture;n.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),n.initWithSize(o,i,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),n.setPremultiplyAlpha(!1);let l={idx:e,width:o,height:i,posX:a,scale:r,rt:n};this.mapIdxToRT.set(e,l)}}}c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),function(e){e.SCALE=.1,e.SCREEN_SHOOT_COUNT=5}(c||(c={})),o.default=c,cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState"}],BlurView:[function(e,t,o){"use strict";cc._RF.push(t,"b40b31eiP9A9qZHmlk1VLOv","BlurView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),m=e("./BlurViewScreenShot"),p=e("./BlurViewState"),{ccclass:h,property:f}=cc._decorator,y="BlurView";let _=i=class extends d.default{constructor(){super(...arguments),this.containerScreenShot=null}};_.nodeType=c.default.Pop(y,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/blur_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(y,{listRefModule:[r.default.BLUR],propsFilter:()=>{}})],childrenCreator:[c.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerScreenShot,uiNodeCreator:(e,t,o)=>{for(let i=1;i<=p.default.SCREEN_SHOOT_COUNT;i++)o.push(m.default.nodeType.CreateNode(e,i,i))}})],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([f(cc.Node)],_.prototype,"containerScreenShot",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./BlurViewScreenShot":"BlurViewScreenShot","./BlurViewState":"BlurViewState"}],BookViewDropBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"d7df3BVTi5DsK2YPBDykg+y","BookViewDropBackpackProp");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../equipment_view/EquipmentViewBackpackProp"),p=e("../backpack_prop_preview_view/BackpackPropPreviewViewState"),h=e("../backpack_prop_preview_view/BackpackPropPreviewView"),f=e("../voice_ogg/VoiceOggViewState"),y=e("../../GameCommon"),_=e("../../../frame/ui/UINodeInstEnterRS"),{ccclass:g,property:b}=cc._decorator,S="BookViewDropBackpackProp";let P=i=class extends c.default{constructor(){super(...arguments),this.containerDrop=null,this.txtCount=null,this.txtRate=null,this.btnWatchDrop=null}};P.nodeType=l.default.Pop(S,{prefabPath:`${y.default.SUB_MAIN}/prefab_ui/item_backpack_prop_book_view_drop`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(S,{listRefModule:[d.default.DEFAULT,d.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t,o)=>{let i=o[0],a=o[1],r=o[2];e.txtCount.string=`${Math.floor(a)}`,e.txtRate.string=100==r?"\u6389\u843d":`${r}% \u6389\u843d`,e.btnWatchDrop.evterTouchStart.On(()=>{f.default.inst.VoiceSet(y.default.BTN_VOICE)}),e.btnWatchDrop.evterTouchEnd.On(()=>{n.default.mgrUI.Open(h.default.nodeType,p.default.Pop(S,i,a))})}})],childrenCreator:[l.default.ChildrenGeneration.Pop(S,{containerGetter:e=>e.containerDrop,uiNodeCreator:(e,t,o)=>{let i=t[0];o.push(m.default.GetNodeTypeForUI(i).CreateNode(e,i,i))}})],propsType:r.default.typeArray,hideRS:u.default.localScale0,enterRS:_.default.none}),a([b(cc.Node)],P.prototype,"containerDrop",void 0),a([b(cc.Label)],P.prototype,"txtCount",void 0),a([b(cc.Label)],P.prototype,"txtRate",void 0),a([b(s.default)],P.prototype,"btnWatchDrop",void 0),P=i=a([g],P),o.default=P,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../backpack_prop_preview_view/BackpackPropPreviewView":"BackpackPropPreviewView","../backpack_prop_preview_view/BackpackPropPreviewViewState":"BackpackPropPreviewViewState","../equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],BookViewDropEquipment:[function(e,t,o){"use strict";cc._RF.push(t,"0f1dcwVm1VFv46ENRN8jRPb","BookViewDropEquipment");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../equipment_preview_view/EquipmentPreviewView"),m=e("../equipment_preview_view/EquipmentPreviewViewState"),p=e("../../../frame/ui/UINodeInstHideRS"),h=e("../equipment_view/EquipmentViewEquip"),f=e("../voice_ogg/VoiceOggViewState"),y=e("../../GameCommon"),_=e("../../../frame/ui/UINodeInstEnterRS"),{ccclass:g,property:b}=cc._decorator,S="BookViewDropEquipment";let P=i=class extends c.default{constructor(){super(...arguments),this.containerDrop=null,this.txtCount=null,this.txtRate=null,this.btnWatchDrop=null}};P.nodeType=l.default.Pop(S,{prefabPath:`${y.default.SUB_MAIN}/prefab_ui/item_equipment_book_view_drop`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(S,{listRefModule:[d.default.DEFAULT,d.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t,o)=>{let i=o[0],a=o[1],r=o[2];e.txtCount.string=`${Math.floor(a)}`,e.txtRate.string=`${r}% \u6389\u843d`,e.btnWatchDrop.evterTouchStart.On(()=>{f.default.inst.VoiceSet(y.default.BTN_VOICE)}),e.btnWatchDrop.evterTouchEnd.On(()=>{n.default.mgrUI.Open(u.default.nodeType,m.default.Pop(S,i,a))})}})],childrenCreator:[l.default.ChildrenGeneration.Pop(S,{containerGetter:e=>e.containerDrop,uiNodeCreator:(e,t,o)=>{let i=t[0];o.push(h.default.GetNodeTypeForIconUI(i).CreateNode(e,null,i))}})],propsType:r.default.typeArray,hideRS:p.default.localScale0,enterRS:_.default.none}),a([b(cc.Node)],P.prototype,"containerDrop",void 0),a([b(cc.Label)],P.prototype,"txtCount",void 0),a([b(cc.Label)],P.prototype,"txtRate",void 0),a([b(s.default)],P.prototype,"btnWatchDrop",void 0),P=i=a([g],P),o.default=P,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],BookViewMonster:[function(e,t,o){"use strict";cc._RF.push(t,"4f5d9CFE1RGqIcUuzXMOWNN","BookViewMonster");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../../IndexDataModule"),{ccclass:m,property:p}=cc._decorator,h="BookViewMonster";let f=i=class extends d.default{static GetNodeTypeByRes(e){return i._map.has(e)||i._map.set(e,c.default.Pop(h,{prefabPath:e,componentGetter:e=>e.getComponent(d.default),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[u.default.DEFAULT,u.default.INDEXVIEW_CHALLENGE],propsFilter:e=>{e.node.x=0,e.node.y=0}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:l.default.localScale0,enterRS:n.default.opacityInForPrefab200})),this._map.get(e)}};f._map=s.default.Pop(s.default.typeMap,h),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],Box2D:[function(e,t,o){"use strict";cc._RF.push(t,"9e550hkQyNNkYZO/YiigcTl","Box2D");var i=this&&this.__createBinding||(Object.create?function(e,t,o,i){void 0===i&&(i=o),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,i){void 0===i&&(i=o),e[i]=t[o]}),a=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||i(t,e,o)};Object.defineProperty(o,"__esModule",{value:!0}),a(e("./Common/b2Settings"),o),a(e("./Common/b2Math"),o),a(e("./Common/b2Draw"),o),a(e("./Common/b2Timer"),o),a(e("./Common/b2GrowableStack"),o),a(e("./Common/b2BlockAllocator"),o),a(e("./Common/b2StackAllocator"),o),a(e("./Collision/b2Collision"),o),a(e("./Collision/b2Distance"),o),a(e("./Collision/b2BroadPhase"),o),a(e("./Collision/b2DynamicTree"),o),a(e("./Collision/b2TimeOfImpact"),o),a(e("./Collision/b2CollideCircle"),o),a(e("./Collision/b2CollidePolygon"),o),a(e("./Collision/b2CollideEdge"),o),a(e("./Collision/Shapes/b2Shape"),o),a(e("./Collision/Shapes/b2CircleShape"),o),a(e("./Collision/Shapes/b2PolygonShape"),o),a(e("./Collision/Shapes/b2EdgeShape"),o),a(e("./Collision/Shapes/b2ChainShape"),o),a(e("./Dynamics/b2Fixture"),o),a(e("./Dynamics/b2Body"),o),a(e("./Dynamics/b2World"),o),a(e("./Dynamics/b2WorldCallbacks"),o),a(e("./Dynamics/b2Island"),o),a(e("./Dynamics/b2TimeStep"),o),a(e("./Dynamics/b2ContactManager"),o),a(e("./Dynamics/Contacts/b2Contact"),o),a(e("./Dynamics/Contacts/b2ContactFactory"),o),a(e("./Dynamics/Contacts/b2ContactSolver"),o),a(e("./Dynamics/Contacts/b2CircleContact"),o),a(e("./Dynamics/Contacts/b2PolygonContact"),o),a(e("./Dynamics/Contacts/b2PolygonAndCircleContact"),o),a(e("./Dynamics/Contacts/b2EdgeAndCircleContact"),o),a(e("./Dynamics/Contacts/b2EdgeAndPolygonContact"),o),a(e("./Dynamics/Contacts/b2ChainAndCircleContact"),o),a(e("./Dynamics/Contacts/b2ChainAndPolygonContact"),o),a(e("./Dynamics/Joints/b2Joint"),o),a(e("./Dynamics/Joints/b2AreaJoint"),o),a(e("./Dynamics/Joints/b2DistanceJoint"),o),a(e("./Dynamics/Joints/b2FrictionJoint"),o),a(e("./Dynamics/Joints/b2GearJoint"),o),a(e("./Dynamics/Joints/b2MotorJoint"),o),a(e("./Dynamics/Joints/b2MouseJoint"),o),a(e("./Dynamics/Joints/b2PrismaticJoint"),o),a(e("./Dynamics/Joints/b2PulleyJoint"),o),a(e("./Dynamics/Joints/b2RevoluteJoint"),o),a(e("./Dynamics/Joints/b2RopeJoint"),o),a(e("./Dynamics/Joints/b2WeldJoint"),o),a(e("./Dynamics/Joints/b2WheelJoint"),o),a(e("./Controllers/b2Controller"),o),a(e("./Controllers/b2BuoyancyController"),o),a(e("./Controllers/b2ConstantAccelController"),o),a(e("./Controllers/b2ConstantForceController"),o),a(e("./Controllers/b2GravityController"),o),a(e("./Controllers/b2TensorDampingController"),o),a(e("./Particle/b2Particle"),o),a(e("./Particle/b2ParticleGroup"),o),a(e("./Particle/b2ParticleSystem"),o),a(e("./Rope/b2Rope"),o),cc._RF.pop()},{"./Collision/Shapes/b2ChainShape":"b2ChainShape","./Collision/Shapes/b2CircleShape":"b2CircleShape","./Collision/Shapes/b2EdgeShape":"b2EdgeShape","./Collision/Shapes/b2PolygonShape":"b2PolygonShape","./Collision/Shapes/b2Shape":"b2Shape","./Collision/b2BroadPhase":"b2BroadPhase","./Collision/b2CollideCircle":"b2CollideCircle","./Collision/b2CollideEdge":"b2CollideEdge","./Collision/b2CollidePolygon":"b2CollidePolygon","./Collision/b2Collision":"b2Collision","./Collision/b2Distance":"b2Distance","./Collision/b2DynamicTree":"b2DynamicTree","./Collision/b2TimeOfImpact":"b2TimeOfImpact","./Common/b2BlockAllocator":"b2BlockAllocator","./Common/b2Draw":"b2Draw","./Common/b2GrowableStack":"b2GrowableStack","./Common/b2Math":"b2Math","./Common/b2Settings":"b2Settings","./Common/b2StackAllocator":"b2StackAllocator","./Common/b2Timer":"b2Timer","./Controllers/b2BuoyancyController":"b2BuoyancyController","./Controllers/b2ConstantAccelController":"b2ConstantAccelController","./Controllers/b2ConstantForceController":"b2ConstantForceController","./Controllers/b2Controller":"b2Controller","./Controllers/b2GravityController":"b2GravityController","./Controllers/b2TensorDampingController":"b2TensorDampingController","./Dynamics/Contacts/b2ChainAndCircleContact":"b2ChainAndCircleContact","./Dynamics/Contacts/b2ChainAndPolygonContact":"b2ChainAndPolygonContact","./Dynamics/Contacts/b2CircleContact":"b2CircleContact","./Dynamics/Contacts/b2Contact":"b2Contact","./Dynamics/Contacts/b2ContactFactory":"b2ContactFactory","./Dynamics/Contacts/b2ContactSolver":"b2ContactSolver","./Dynamics/Contacts/b2EdgeAndCircleContact":"b2EdgeAndCircleContact","./Dynamics/Contacts/b2EdgeAndPolygonContact":"b2EdgeAndPolygonContact","./Dynamics/Contacts/b2PolygonAndCircleContact":"b2PolygonAndCircleContact","./Dynamics/Contacts/b2PolygonContact":"b2PolygonContact","./Dynamics/Joints/b2AreaJoint":"b2AreaJoint","./Dynamics/Joints/b2DistanceJoint":"b2DistanceJoint","./Dynamics/Joints/b2FrictionJoint":"b2FrictionJoint","./Dynamics/Joints/b2GearJoint":"b2GearJoint","./Dynamics/Joints/b2Joint":"b2Joint","./Dynamics/Joints/b2MotorJoint":"b2MotorJoint","./Dynamics/Joints/b2MouseJoint":"b2MouseJoint","./Dynamics/Joints/b2PrismaticJoint":"b2PrismaticJoint","./Dynamics/Joints/b2PulleyJoint":"b2PulleyJoint","./Dynamics/Joints/b2RevoluteJoint":"b2RevoluteJoint","./Dynamics/Joints/b2RopeJoint":"b2RopeJoint","./Dynamics/Joints/b2WeldJoint":"b2WeldJoint","./Dynamics/Joints/b2WheelJoint":"b2WheelJoint","./Dynamics/b2Body":"b2Body","./Dynamics/b2ContactManager":"b2ContactManager","./Dynamics/b2Fixture":"b2Fixture","./Dynamics/b2Island":"b2Island","./Dynamics/b2TimeStep":"b2TimeStep","./Dynamics/b2World":"b2World","./Dynamics/b2WorldCallbacks":"b2WorldCallbacks","./Particle/b2Particle":"b2Particle","./Particle/b2ParticleGroup":"b2ParticleGroup","./Particle/b2ParticleSystem":"b2ParticleSystem","./Rope/b2Rope":"b2Rope"}],CfgBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"ba64a2LuKZJB4QXjt/eo19x","CfgBackpackProp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.name=t[1],o.res_ui=t[2],o.res_scene=t[3],o.txt_info=t[4],o}static idGetter(e){return e.id}static nameGetter(e){return e.name}static res_uiGetter(e){return e.res_ui}static res_sceneGetter(e){return e.res_scene}static txt_infoGetter(e){return e.txt_info}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgBackpackProp"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgBuffProps:[function(e,t,o){"use strict";cc._RF.push(t,"3f34dSkZoFHUqV0GwxgV0nP","CfgBuffProps"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.res_display=t[1],o.layer_max=t[2],o.layer_keep_ms=t[3],o.logic=t[4],o}static idGetter(e){return e.id}static res_displayGetter(e){return e.res_display}static layer_maxGetter(e){return e.layer_max}static layer_keep_msGetter(e){return e.layer_keep_ms}static logicGetter(e){return e.logic}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgBuffProps"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgCacheChapterLevel:[function(e,t,o){"use strict";var i;cc._RF.push(t,"1f9bfYpvwtN2ZkilKZsezDr","CfgCacheChapterLevel"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.idToCacheMap=new Map}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheChapter:[function(e,t,o){"use strict";cc._RF.push(t,"e3e15K0a3dJ57VloWW2oCY+","CfgCacheChapter"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexStorageItem"),a=e("../../frame/global/Jiang");var r;(function(e){const t=Symbol("CfgCacheTheme");e.SetCache=function(e,o){e[t]=o},e.GetCache=function(e){return null==e?null:e[t]},e.GetChallengeChapter=function(){let t=1;for(let o=0;o<a.default.mgrCfg.cfgChapter._list.length;o++){let r=a.default.mgrCfg.cfgChapter._list[o],s=e.GetCache(r);s.levelMin<=a.default.mgrData.Get(i.default.challengeLev)&&(t=s.idCfg)}return t}})(r||(r={})),o.default=r,cc._RF.pop()},{"../../IndexStorageItem":"IndexStorageItem","../../frame/global/Jiang":"Jiang"}],CfgCacheEquipment:[function(e,t,o){"use strict";var i;cc._RF.push(t,"61bcfwMu4RJ+KcKfG8ZAJ0h","CfgCacheEquipment"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.SYM_REC=Symbol("CfgCacheEquipment"),e.SetCache=function(t,o){t[e.SYM_REC]=o},e.GetCache=function(t){return null==t?null:t[e.SYM_REC]}}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheGameElement:[function(e,t,o){"use strict";var i;cc._RF.push(t,"83900p1Yx9H6LmPT8hSuQFn","CfgCacheGameElement"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=Symbol("CfgCacheGameElement");e.SetCache=function(e,o){e[t]=o},e.GetCache=function(e){if(null!=e)return e[t]}}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheLotteryUnlockRS:[function(e,t,o){"use strict";cc._RF.push(t,"e1e94QoXT9Lt51ypKWstPGz","CfgCacheLotteryUnlockRS"),Object.defineProperty(o,"__esModule",{value:!0});class i{constructor(e){this.code=e.code,this.propsCreator=e.propsCreator,this.checkIsUnlocked=e.checkIsUnlocked,i.mapIdToRS.set(e.code,this)}}(function(e){e.mapIdToRS=new Map,e.unlockByStep=new e({code:1,propsCreator:e=>({step:e.unlock_val_0}),checkIsUnlocked:(e,t,o)=>o.step<=t})})(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheLottery:[function(e,t,o){"use strict";var i;cc._RF.push(t,"91a2cIi6lZKHZgF6UU76ba6","CfgCacheLottery"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=Symbol("CfgCacheLottery");function o(e){return null==e?null:e[t]}e.SetCache=function(e,o){e[t]=o},e.GetCache=o,e.CheckUsUnlocked=function(e,t){let i=o(t);return i.unlockRS.checkIsUnlocked(t,e,i.unlockRSProps)}}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheScene:[function(e,t,o){"use strict";var i;cc._RF.push(t,"2e0d9h8FYRFjZvbbepYoOzL","CfgCacheScene"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=Symbol("CfgCacheScene");e.SetCache=function(e,o){e[t]=o},e.GetCache=function(e){return null==e?null:e[t]}}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheStoreUnlockRS:[function(e,t,o){"use strict";cc._RF.push(t,"00c2cB0SBBL3pQabnLqqQHJ","CfgCacheStoreUnlockRS"),Object.defineProperty(o,"__esModule",{value:!0});class i{constructor(e){this.code=e.code,this.propsCreator=e.propsCreator,this.checkIsUnlocked=e.checkIsUnlocked,i.mapIdToRS.set(e.code,this)}}(function(e){e.mapIdToRS=new Map,e.unlockByStep=new e({code:1,propsCreator:e=>({step:e.unlock_val_0}),checkIsUnlocked:(e,t,o)=>o.step<=t.challengeChapter})})(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgCacheStore:[function(e,t,o){"use strict";var i;cc._RF.push(t,"e6f42ysCo5CxZ6vn811H+4X","CfgCacheStore"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=Symbol("CfgCacheStore");function o(e){return null==e?null:e[t]}e.SetCache=function(e,o){e[t]=o},e.GetCache=o,e.CheckIsUnlocked=function(e,t){let i=o(t);return i.unlockRS.checkIsUnlocked(t,e,i.unlockRSProps)}}(i||(i={})),o.default=i,cc._RF.pop()},{}],CfgChapter:[function(e,t,o){"use strict";cc._RF.push(t,"3be7aqrCG5BuoUm3IqfTjyt","CfgChapter"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.list_equip_unlock=t[1],o.bg_left=t[2],o.bg_right=t[3],o}static idGetter(e){return e.id}static list_equip_unlockGetter(e){return e.list_equip_unlock}static bg_leftGetter(e){return e.bg_left}static bg_rightGetter(e){return e.bg_right}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgChapter"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgCommon:[function(e,t,o){"use strict";cc._RF.push(t,"df21bdelv5Lb70WJsGBYWtV","CfgCommon"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.monster_power_to_drop=t[0],o.inc_for_level=t[1],o.inc_for_chapter=t[2],o.coin_count_to_power=t[3],o.equip_count_to_power=t[4],o.standard_chapter_power_sum=t[5],o}static monster_power_to_dropGetter(e){return e.monster_power_to_drop}static inc_for_levelGetter(e){return e.inc_for_level}static inc_for_chapterGetter(e){return e.inc_for_chapter}static coin_count_to_powerGetter(e){return e.coin_count_to_power}static equip_count_to_powerGetter(e){return e.equip_count_to_power}static standard_chapter_power_sumGetter(e){return e.standard_chapter_power_sum}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgCommon"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgEff:[function(e,t,o){"use strict";cc._RF.push(t,"5feedRuw39BWp5ap/YfnoTd","CfgEff"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.res=t[1],o.life=t[2],o}static idGetter(e){return e.id}static resGetter(e){return e.res}static lifeGetter(e){return e.life}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgEff"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgEquipmentProps:[function(e,t,o){"use strict";cc._RF.push(t,"85cedxMTfJItY7qutGdjAd3","CfgEquipmentProps"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.name=t[1],o.info=t[2],o.props_cost=t[3],o.res=t[4],o.style=t[5],o.icon_ui=t[6],o.icon_scene=t[7],o.icon_play_view=t[8],o.distance_o_to_output=t[9],o.arrow=t[10],o.logic=t[11],o.prop_0=t[12],o.prop_1=t[13],o.prop_2=t[14],o.prop_3=t[15],o.prop_4=t[16],o.prop_5=t[17],o.prop_6=t[18],o.prop_7=t[19],o.prop_8=t[20],o.prop_9=t[21],o.prop_10=t[22],o.prop_11=t[23],o.prop_12=t[24],o.prop_13=t[25],o.prop_14=t[26],o.prop_15=t[27],o.prop_16=t[28],o.prop_17=t[29],o.prop_18=t[30],o.prop_19=t[31],o.prop_20=t[32],o.prop_21=t[33],o.prop_22=t[34],o.prop_23=t[35],o.prop_24=t[36],o.prop_25=t[37],o.prop_26=t[38],o.prop_27=t[39],o.prop_28=t[40],o.prop_29=t[41],o.prop_30=t[42],o.prop_31=t[43],o}static idGetter(e){return e.id}static nameGetter(e){return e.name}static infoGetter(e){return e.info}static props_costGetter(e){return e.props_cost}static resGetter(e){return e.res}static styleGetter(e){return e.style}static icon_uiGetter(e){return e.icon_ui}static icon_sceneGetter(e){return e.icon_scene}static icon_play_viewGetter(e){return e.icon_play_view}static distance_o_to_outputGetter(e){return e.distance_o_to_output}static arrowGetter(e){return e.arrow}static logicGetter(e){return e.logic}static prop_0Getter(e){return e.prop_0}static prop_1Getter(e){return e.prop_1}static prop_2Getter(e){return e.prop_2}static prop_3Getter(e){return e.prop_3}static prop_4Getter(e){return e.prop_4}static prop_5Getter(e){return e.prop_5}static prop_6Getter(e){return e.prop_6}static prop_7Getter(e){return e.prop_7}static prop_8Getter(e){return e.prop_8}static prop_9Getter(e){return e.prop_9}static prop_10Getter(e){return e.prop_10}static prop_11Getter(e){return e.prop_11}static prop_12Getter(e){return e.prop_12}static prop_13Getter(e){return e.prop_13}static prop_14Getter(e){return e.prop_14}static prop_15Getter(e){return e.prop_15}static prop_16Getter(e){return e.prop_16}static prop_17Getter(e){return e.prop_17}static prop_18Getter(e){return e.prop_18}static prop_19Getter(e){return e.prop_19}static prop_20Getter(e){return e.prop_20}static prop_21Getter(e){return e.prop_21}static prop_22Getter(e){return e.prop_22}static prop_23Getter(e){return e.prop_23}static prop_24Getter(e){return e.prop_24}static prop_25Getter(e){return e.prop_25}static prop_26Getter(e){return e.prop_26}static prop_27Getter(e){return e.prop_27}static prop_28Getter(e){return e.prop_28}static prop_29Getter(e){return e.prop_29}static prop_30Getter(e){return e.prop_30}static prop_31Getter(e){return e.prop_31}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgEquipmentProps"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgGameElement:[function(e,t,o){"use strict";cc._RF.push(t,"d5db6fHyQpByba6J6XUHFPo","CfgGameElement"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.name=t[1],o.txt_info=t[2],o.color_main=t[3],o.size_mark=t[4],o.is_boss=t[5],o.style_code=t[6],o.gravity_scale=t[7],o.book=t[8],o.drop_0_type=t[9],o.drop_0_val=t[10],o.drop_1_type=t[11],o.drop_1_val=t[12],o.props_influence_count=t[13],o.props_repel=t[14],o.res_scene=t[15],o.res_ui=t[16],o.power=t[17],o.logic=t[18],o.prop_0=t[19],o.lv_inc_0=t[20],o.prop_1=t[21],o.lv_inc_1=t[22],o.prop_2=t[23],o.lv_inc_2=t[24],o.prop_3=t[25],o.lv_inc_3=t[26],o.prop_4=t[27],o.lv_inc_4=t[28],o.prop_5=t[29],o.lv_inc_5=t[30],o.prop_6=t[31],o.lv_inc_6=t[32],o.prop_7=t[33],o.lv_inc_7=t[34],o.prop_8=t[35],o.lv_inc_8=t[36],o.prop_9=t[37],o.lv_inc_9=t[38],o.prop_10=t[39],o.lv_inc_10=t[40],o.prop_11=t[41],o.lv_inc_11=t[42],o.prop_12=t[43],o.lv_inc_12=t[44],o.prop_13=t[45],o.lv_inc_13=t[46],o.prop_14=t[47],o.lv_inc_14=t[48],o.prop_15=t[49],o.lv_inc_15=t[50],o.prop_16=t[51],o.lv_inc_16=t[52],o.prop_17=t[53],o.lv_inc_17=t[54],o.prop_18=t[55],o.lv_inc_18=t[56],o.prop_19=t[57],o.lv_inc_19=t[58],o.prop_20=t[59],o.lv_inc_20=t[60],o.prop_21=t[61],o.lv_inc_21=t[62],o.prop_22=t[63],o.lv_inc_22=t[64],o.prop_23=t[65],o.lv_inc_23=t[66],o.prop_24=t[67],o.lv_inc_24=t[68],o.prop_25=t[69],o.lv_inc_25=t[70],o.prop_26=t[71],o.lv_inc_26=t[72],o.prop_27=t[73],o.lv_inc_27=t[74],o.prop_28=t[75],o.lv_inc_28=t[76],o.prop_29=t[77],o.lv_inc_29=t[78],o.prop_30=t[79],o.lv_inc_30=t[80],o.prop_31=t[81],o.lv_inc_31=t[82],o}static idGetter(e){return e.id}static nameGetter(e){return e.name}static txt_infoGetter(e){return e.txt_info}static color_mainGetter(e){return e.color_main}static size_markGetter(e){return e.size_mark}static is_bossGetter(e){return e.is_boss}static style_codeGetter(e){return e.style_code}static gravity_scaleGetter(e){return e.gravity_scale}static bookGetter(e){return e.book}static drop_0_typeGetter(e){return e.drop_0_type}static drop_0_valGetter(e){return e.drop_0_val}static drop_1_typeGetter(e){return e.drop_1_type}static drop_1_valGetter(e){return e.drop_1_val}static props_influence_countGetter(e){return e.props_influence_count}static props_repelGetter(e){return e.props_repel}static res_sceneGetter(e){return e.res_scene}static res_uiGetter(e){return e.res_ui}static powerGetter(e){return e.power}static logicGetter(e){return e.logic}static prop_0Getter(e){return e.prop_0}static lv_inc_0Getter(e){return e.lv_inc_0}static prop_1Getter(e){return e.prop_1}static lv_inc_1Getter(e){return e.lv_inc_1}static prop_2Getter(e){return e.prop_2}static lv_inc_2Getter(e){return e.lv_inc_2}static prop_3Getter(e){return e.prop_3}static lv_inc_3Getter(e){return e.lv_inc_3}static prop_4Getter(e){return e.prop_4}static lv_inc_4Getter(e){return e.lv_inc_4}static prop_5Getter(e){return e.prop_5}static lv_inc_5Getter(e){return e.lv_inc_5}static prop_6Getter(e){return e.prop_6}static lv_inc_6Getter(e){return e.lv_inc_6}static prop_7Getter(e){return e.prop_7}static lv_inc_7Getter(e){return e.lv_inc_7}static prop_8Getter(e){return e.prop_8}static lv_inc_8Getter(e){return e.lv_inc_8}static prop_9Getter(e){return e.prop_9}static lv_inc_9Getter(e){return e.lv_inc_9}static prop_10Getter(e){return e.prop_10}static lv_inc_10Getter(e){return e.lv_inc_10}static prop_11Getter(e){return e.prop_11}static lv_inc_11Getter(e){return e.lv_inc_11}static prop_12Getter(e){return e.prop_12}static lv_inc_12Getter(e){return e.lv_inc_12}static prop_13Getter(e){return e.prop_13}static lv_inc_13Getter(e){return e.lv_inc_13}static prop_14Getter(e){return e.prop_14}static lv_inc_14Getter(e){return e.lv_inc_14}static prop_15Getter(e){return e.prop_15}static lv_inc_15Getter(e){return e.lv_inc_15}static prop_16Getter(e){return e.prop_16}static lv_inc_16Getter(e){return e.lv_inc_16}static prop_17Getter(e){return e.prop_17}static lv_inc_17Getter(e){return e.lv_inc_17}static prop_18Getter(e){return e.prop_18}static lv_inc_18Getter(e){return e.lv_inc_18}static prop_19Getter(e){return e.prop_19}static lv_inc_19Getter(e){return e.lv_inc_19}static prop_20Getter(e){return e.prop_20}static lv_inc_20Getter(e){return e.lv_inc_20}static prop_21Getter(e){return e.prop_21}static lv_inc_21Getter(e){return e.lv_inc_21}static prop_22Getter(e){return e.prop_22}static lv_inc_22Getter(e){return e.lv_inc_22}static prop_23Getter(e){return e.prop_23}static lv_inc_23Getter(e){return e.lv_inc_23}static prop_24Getter(e){return e.prop_24}static lv_inc_24Getter(e){return e.lv_inc_24}static prop_25Getter(e){return e.prop_25}static lv_inc_25Getter(e){return e.lv_inc_25}static prop_26Getter(e){return e.prop_26}static lv_inc_26Getter(e){return e.lv_inc_26}static prop_27Getter(e){return e.prop_27}static lv_inc_27Getter(e){return e.lv_inc_27}static prop_28Getter(e){return e.prop_28}static lv_inc_28Getter(e){return e.lv_inc_28}static prop_29Getter(e){return e.prop_29}static lv_inc_29Getter(e){return e.lv_inc_29}static prop_30Getter(e){return e.prop_30}static lv_inc_30Getter(e){return e.lv_inc_30}static prop_31Getter(e){return e.prop_31}static lv_inc_31Getter(e){return e.lv_inc_31}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgGameElement"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgLevel:[function(e,t,o){"use strict";cc._RF.push(t,"fa6a3OLozhCGLXn2iHM6CPo","CfgLevel"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.relChapter=t[1],o.idx=t[2],o.theme=t[3],o.part_0_triger_ms=t[4],o.part_0_monster_id=t[5],o.part_0_monster_delay=t[6],o.part_0_monster_x=t[7],o.part_1_triger_ms=t[8],o.part_1_monster_id=t[9],o.part_1_monster_delay=t[10],o.part_1_monster_x=t[11],o.part_2_triger_ms=t[12],o.part_2_monster_id=t[13],o.part_2_monster_delay=t[14],o.part_2_monster_x=t[15],o}static idGetter(e){return e.id}static relChapterGetter(e){return e.relChapter}static idxGetter(e){return e.idx}static themeGetter(e){return e.theme}static part_0_triger_msGetter(e){return e.part_0_triger_ms}static part_0_monster_idGetter(e){return e.part_0_monster_id}static part_0_monster_delayGetter(e){return e.part_0_monster_delay}static part_0_monster_xGetter(e){return e.part_0_monster_x}static part_1_triger_msGetter(e){return e.part_1_triger_ms}static part_1_monster_idGetter(e){return e.part_1_monster_id}static part_1_monster_delayGetter(e){return e.part_1_monster_delay}static part_1_monster_xGetter(e){return e.part_1_monster_x}static part_2_triger_msGetter(e){return e.part_2_triger_ms}static part_2_monster_idGetter(e){return e.part_2_monster_id}static part_2_monster_delayGetter(e){return e.part_2_monster_delay}static part_2_monster_xGetter(e){return e.part_2_monster_x}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgLevel"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgLottery:[function(e,t,o){"use strict";cc._RF.push(t,"9a8a6d5jyFPaquqU/zSFEVg","CfgLottery"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.item_type=t[1],o.item_id=t[2],o.unlock_logic=t[3],o.unlock_val_0=t[4],o.unlock_val_1=t[5],o}static idGetter(e){return e.id}static item_typeGetter(e){return e.item_type}static item_idGetter(e){return e.item_id}static unlock_logicGetter(e){return e.unlock_logic}static unlock_val_0Getter(e){return e.unlock_val_0}static unlock_val_1Getter(e){return e.unlock_val_1}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgLottery"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgNumStringify:[function(e,t,o){"use strict";cc._RF.push(t,"36bd2bV3zVGi4YxTRhzC9Ez","CfgNumStringify"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.count=t[0],o.tag=t[1],o}static countGetter(e){return e.count}static tagGetter(e){return e.tag}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgNumStringify"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgScene:[function(e,t,o){"use strict";cc._RF.push(t,"c991dpM1utC9InyAkgWA/lD","CfgScene"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.name=t[1],o.rain_speed_x=t[2],o.rain_speed_y=t[3],o.rain_count_per_ms=t[4],o.snow_speed_x=t[5],o.snow_speed_y=t[6],o.snow_count_per_ms=t[7],o.bg_y_offset=t[8],o.color_light=t[9],o.color_shadow=t[10],o.res=t[11],o.bgm=t[12],o.card=t[13],o}static idGetter(e){return e.id}static nameGetter(e){return e.name}static rain_speed_xGetter(e){return e.rain_speed_x}static rain_speed_yGetter(e){return e.rain_speed_y}static rain_count_per_msGetter(e){return e.rain_count_per_ms}static snow_speed_xGetter(e){return e.snow_speed_x}static snow_speed_yGetter(e){return e.snow_speed_y}static snow_count_per_msGetter(e){return e.snow_count_per_ms}static bg_y_offsetGetter(e){return e.bg_y_offset}static color_lightGetter(e){return e.color_light}static color_shadowGetter(e){return e.color_shadow}static resGetter(e){return e.res}static bgmGetter(e){return e.bgm}static cardGetter(e){return e.card}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgScene"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgStore:[function(e,t,o){"use strict";cc._RF.push(t,"3c8f46XKuVM14qf57fOksFu","CfgStore"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.item_type=t[1],o.item_id=t[2],o.unlock_logic=t[3],o.unlock_val_0=t[4],o.unlock_val_1=t[5],o}static idGetter(e){return e.id}static item_typeGetter(e){return e.item_type}static item_idGetter(e){return e.item_id}static unlock_logicGetter(e){return e.unlock_logic}static unlock_val_0Getter(e){return e.unlock_val_0}static unlock_val_1Getter(e){return e.unlock_val_1}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgStore"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],CfgVoiceOgg:[function(e,t,o){"use strict";cc._RF.push(t,"07014jfevZMk7imrPAeXh8y","CfgVoiceOgg"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.id=t[0],o.name=t[1],o.res=t[2],o}static idGetter(e){return e.id}static nameGetter(e){return e.name}static resGetter(e){return e.res}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"CfgVoiceOgg"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],ChallengeSelectViewBgLeft:[function(e,t,o){"use strict";cc._RF.push(t,"77be5kaTStEp7Dh9TeLEAAZ","ChallengeSelectViewBgLeft");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/config/src/CfgChapter"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),{ccclass:p,property:h}=cc._decorator,f="ChallengeSelectViewBgLeft";let y=i=class extends u.default{static GetNodeTypeByRes(e){return this._mapResToNodeType.has(e)||this._mapResToNodeType.set(e,d.default.Pop(f,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(f,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_CHALLENGE],propsFilter:e=>{e.node.x=0,e.node.y=0}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.opacityInForPrefab200})),this._mapResToNodeType.get(e)}static GetNodeTypeByIdCfg(e){let t=n.default.mgrCfg.cfgChapter.select(s.default.idGetter,e)._list[0];return this.GetNodeTypeByRes(t.bg_left)}};y._mapResToNodeType=new Map,y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgChapter":"CfgChapter","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],ChallengeSelectViewBgRight:[function(e,t,o){"use strict";cc._RF.push(t,"181412/LCxFBZuyiBHp71GB","ChallengeSelectViewBgRight");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/config/src/CfgChapter"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),{ccclass:p,property:h}=cc._decorator,f="ChallengeSelectViewBgRight";let y=i=class extends u.default{static GetNodeTypeByRes(e){return this._mapResToNodeType.has(e)||this._mapResToNodeType.set(e,d.default.Pop(f,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(f,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_CHALLENGE],propsFilter:e=>{e.node.x=0,e.node.y=0}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.opacityInForPrefab200})),this._mapResToNodeType.get(e)}static GetNodeTypeByIdCfg(e){let t=n.default.mgrCfg.cfgChapter.select(s.default.idGetter,e)._list[0];return this.GetNodeTypeByRes(t.bg_right)}};y._mapResToNodeType=new Map,y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgChapter":"CfgChapter","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],ChallengeSelectViewBook:[function(e,t,o){"use strict";cc._RF.push(t,"cba2eMqyGdKWI5kCAPdvUoI","ChallengeSelectViewBook");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../IndexStorageItem"),n=e("../../../frame/basic/BCType"),l=e("../../../frame/config/src/CfgGameElement"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../../GameMath"),f=e("../book_view/BookViewMonster"),y=e("../../../frame/config/src/CfgScene"),_=e("../../cfg_cache/CfgCacheScene"),g=e("../../../frame/ui/UINodeInstEnterRS"),{ccclass:b,property:S}=cc._decorator,P="ChallengeSelectViewBook";let B=i=class extends m.default{constructor(){super(...arguments),this.containerMonster=null,this.txtName=null,this.txtMsg=null,this.txtInfo=null,this.nodeLight=null,this.nodeDark=null}};B.nodeType=u.default.Pop(P,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/challenge_select_view_book`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(P,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t,o)=>{let i=c.default.mgrCfg.cfgScene.select(y.default.idGetter,c.default.mgrData.Get(s.default.selectedChapter))._list[0],a=_.default.GetCache(i);e.nodeDark.color=a.colorDark,t.stateChallenge.bookLayout.SetElePos(e.node,o);let r=c.default.mgrCfg.cfgGameElement.select(l.default.idGetter,o)._list[0];e.txtName.string=r.name,e.txtMsg.string=`\u7b49\u7ea7: ${h.default.ParsePowerToLev(r.power)}`,e.txtInfo.string=r.txt_info}})],childrenCreator:[u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerMonster,uiNodeCreator:(e,t,o)=>{let i=c.default.mgrCfg.cfgGameElement.select(l.default.idGetter,t)._list[0];o.push(f.default.GetNodeTypeByRes(i.res_ui).CreateNode(e,null,null))}})],propsType:n.default.typeNumber,hideRS:d.default.localScale0,enterRS:g.default.opacityInForPrefab200}),a([S(cc.Node)],B.prototype,"containerMonster",void 0),a([S(cc.Label)],B.prototype,"txtName",void 0),a([S(cc.Label)],B.prototype,"txtMsg",void 0),a([S(cc.Label)],B.prototype,"txtInfo",void 0),a([S(cc.Node)],B.prototype,"nodeLight",void 0),a([S(cc.Node)],B.prototype,"nodeDark",void 0),B=i=a([b],B),o.default=B,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheScene":"CfgCacheScene","../book_view/BookViewMonster":"BookViewMonster"}],ChallengeSelectViewChapterUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"de4cfQoBShNY6iEMCQHQs6G","ChallengeSelectViewChapterUnlock");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/config/src/CfgChapter"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../equipment_preview_view/EquipmentPreviewView"),f=e("../equipment_preview_view/EquipmentPreviewViewState"),y=e("../equipment_view/EquipmentViewEquip"),_=e("../tips_view/TipsViewState"),g=e("../voice_ogg/VoiceOggViewState"),b=e("../../../frame/ui/UINodeInstEnterRS"),S="ChallengeSelectViewChapterUnlock",{ccclass:P,property:B}=cc._decorator;let C=i=class extends m.default{constructor(){super(...arguments),this.containerEquip=null,this.evterDetail=null}};C.nodeType=u.default.Pop(S,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/challenge_select_view_chapter_unlock`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(S,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t,o)=>{e.node.x=0,e.node.y=0;let i=o[0],a=o[1],r=c.default.mgrCfg.cfgChapter.select(l.default.idGetter,i)._list[0].list_equip_unlock[a],s=i<=t.stateChallenge.challengeChapter;e.evterDetail.evterTouchStart.On(()=>{g.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.evterDetail.evterTouchEnd.On(()=>{s?c.default.mgrUI.Open(h.default.nodeType,f.default.Pop(S,r,0)):_.default.inst.Tip("\u5b8c\u6210\u4e0a\u4e00\u7ae0\u8282\u4ee5\u89e3\u9501")})}})],childrenCreator:[u.default.ChildrenGeneration.Pop(S,{containerGetter:e=>e.containerEquip,uiNodeCreator:(e,t,o)=>{let i=t[0],a=t[1],r=c.default.mgrCfg.cfgChapter.select(l.default.idGetter,i)._list[0].list_equip_unlock[a];o.push(y.default.GetNodeTypeForIconUI(r).CreateNode(e,null,a))}})],propsType:s.default.typeArray,hideRS:d.default.localScale0,enterRS:b.default.opacityInForPrefab200}),a([B(cc.Node)],C.prototype,"containerEquip",void 0),a([B(n.default)],C.prototype,"evterDetail",void 0),C=i=a([P],C),o.default=C,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgChapter":"CfgChapter","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../tips_view/TipsViewState":"TipsViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],ChallengeSelectViewChapter:[function(e,t,o){"use strict";cc._RF.push(t,"2b62cu2aHhKK5JTafx82zeO","ChallengeSelectViewChapter");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/config/src/CfgChapter"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../../IndexDataModule"),h=e("../../../IndexStorageItem"),f=e("../../GameCommon"),y=e("../tips_view/TipsViewState"),_=e("../voice_ogg/VoiceOggViewState"),g=e("./ChallengeSelectViewChapterUnlock"),b=e("../../../frame/config/src/CfgScene"),S=e("../../../frame/ui/UINodeInstEnterRS"),P="ChallengeSelectViewChapter",{ccclass:B,property:C}=cc._decorator;let M=i=class extends m.default{constructor(){super(...arguments),this.listTxtInfo=[],this.btnSelect=null,this.nodeSelected=null,this.containerUnlock=null,this.nodeMaskBg=null,this.nodeMaskPrevious=null}};M.nodeType=u.default.Pop(P,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/challenge_select_view_chapter`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(P,{listRefModule:[p.default.DEFAULT,p.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t,o)=>{c.default.mgrCfg.cfgChapter.select(l.default.idGetter,o)._list[0];let i=c.default.mgrCfg.cfgScene.select(b.default.idGetter,o)._list[0];t.stateChallenge.chapterLayout.SetElePos(e.node,o);let a,r=o<=t.stateChallenge.challengeChapter;a=r?`${i.name}`:`\u7ae0\u8282 ${o} \u89e3\u9501:`;for(let s=0;s<e.listTxtInfo.length;s++)e.listTxtInfo[s].string=a;e.nodeSelected.scale=c.default.mgrData.Get(h.default.selectedChapter)==o?1:0,e.btnSelect.evterTouchStart.On(()=>{_.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnSelect.evterTouchEnd.On(()=>{if(r){if(c.default.mgrData.Get(h.default.selectedChapter)==o)return;_.default.inst.BgmSet(i.bgm),t.stateChallenge.SelectChapter(o)}else y.default.inst.Tip("\u5b8c\u6210\u4e0a\u4e00\u7ae0\u8282\u4ee5\u89e3\u9501")}),e.nodeMaskBg.scale=r?1:0,e.nodeMaskPrevious.scale=r?0:1}})],childrenCreator:[u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerUnlock,uiNodeCreator:(e,t,o)=>{let i=c.default.mgrCfg.cfgChapter.select(l.default.idGetter,t)._list[0];for(let a=0;a<i.list_equip_unlock.length;a++){let i=s.default.Pop(s.default.typeArray,P);i.push(t,a),o.push(g.default.nodeType.CreateNode(e,i,a))}}})],propsType:r.default.typeNumber,hideRS:d.default.localScale0,enterRS:S.default.opacityInForPrefab200}),M.nodeTypeForNoUnlock=u.default.Pop(P,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/challenge_select_view_chapter_plus`,componentGetter:e=>e.getComponent(i),listModuleStyle:[...i.nodeType._listModuleStyle],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.localScale0,enterRS:S.default.opacityInForPrefab200}),a([C([cc.Label])],M.prototype,"listTxtInfo",void 0),a([C(n.default)],M.prototype,"btnSelect",void 0),a([C(cc.Node)],M.prototype,"nodeSelected",void 0),a([C(cc.Node)],M.prototype,"containerUnlock",void 0),a([C(cc.Node)],M.prototype,"nodeMaskBg",void 0),a([C(cc.Node)],M.prototype,"nodeMaskPrevious",void 0),M=i=a([B],M),o.default=M,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgChapter":"CfgChapter","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../tips_view/TipsViewState":"TipsViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./ChallengeSelectViewChapterUnlock":"ChallengeSelectViewChapterUnlock"}],ChallengeSelectViewStateRS:[function(e,t,o){"use strict";cc._RF.push(t,"c9c21MDDKhHxZ/uhwNcqc6v","ChallengeSelectViewStateRS"),Object.defineProperty(o,"__esModule",{value:!0});class i{constructor(e){this.code=e.code,this.nodeActiveGetter=e.nodeActiveGetter,this.btnSelectGetter=e.btnSelectGetter,this.scrollGetter=e.scrollGetter,i.mapCodeToRS.set(e.code,this),i.listRS.push(this)}}(function(e){e.mapCodeToRS=new Map,e.listRS=[],e.level=new e({code:1,nodeActiveGetter:e=>e.levelNodeActive,btnSelectGetter:e=>e.levelBtnSelect,scrollGetter:e=>e.levelScroll}),e.book=new e({code:2,nodeActiveGetter:e=>e.bookNodeActive,btnSelectGetter:e=>e.bookBtnSelect,scrollGetter:e=>e.bookScroll})})(i||(i={})),o.default=i,cc._RF.pop()},{}],ChallengeSelectViewState:[function(e,t,o){"use strict";cc._RF.push(t,"afab8asUgdCD5yR5jfEbwAa","ChallengeSelectViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/layout/Layout"),a=e("../../../frame/basic/layout/LayoutAlignmentHorCenter"),r=e("../../../frame/basic/layout/LayoutAlignmentVerMiddle"),s=e("../../../frame/basic/layout/LayoutConstraintColumn"),n=e("../../../frame/basic/layout/LayoutStartAxisVer"),l=e("../../../frame/basic/layout/LayoutStartCornerHorLeft"),c=e("../../../frame/basic/layout/LayoutStartCornerVerUpper"),d=e("../../../frame/basic/UtilObjPool"),u=e("../../../frame/basic/UtilObjPoolType"),m=e("../../../frame/config/src/CfgChapter"),p=e("../../../frame/global/Jiang"),h=e("../../../IndexDataModule"),f=e("../../../IndexStorageItem"),y=e("../../cfg_cache/CfgCacheChapter"),_=e("../../game_element/common/ScrollStop"),g=e("./ChallengeSelectViewStateRS"),b="ChallengeSelectViewState";class S{constructor(){this.scrollEnable=!1,this.childrenAble=!1,this.rsCurrent=g.default.book,this.challengeChapter=y.default.GetChallengeChapter(),this.scrollStop=_.default.Pop(b,h.default.INDEXVIEW_CHALLENGE),this.chapterLayout=i.default.Pop(b,{paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,spacingColumn:S.CHAPTER_SPACING,spacingRow:S.CHAPTER_SPACING,defSizeWidth:0,defSizeHeight:0,startCornerHor:l.default.inst,startCornerVer:c.default.inst,startAxis:n.default.inst,constraint:s.default.one,alignmentHor:a.default.inst,alignmentVer:r.default.inst});for(let e=0;e<p.default.mgrCfg.cfgChapter._list.length;e++){let t=p.default.mgrCfg.cfgChapter._list[e];this.chapterLayout.Create(S.CHAPTER_ITEM_WIDTH,S.CHAPTER_ITEM_HEIGHT,t.id)}this.chapterLayout.UpdatePos(),this.bookLayout=i.default.Pop(b,{paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,spacingColumn:S.BOOK_SPACING,spacingRow:S.BOOK_SPACING,defSizeWidth:0,defSizeHeight:0,startCornerHor:l.default.inst,startCornerVer:c.default.inst,startAxis:n.default.inst,constraint:s.default.one,alignmentHor:a.default.inst,alignmentVer:r.default.inst}),this.SelectChapter(p.default.mgrData.Get(f.default.selectedChapter))}UpdateActiveChapter(){this.chapterLayout.UpdateActive(0,this.chapterScrollViewY,S.CHAPTER_VIEW_WIDTH,S.CHAPTER_VIEW_HEIGHT),p.default.mgrUI.ModuleRefresh(h.default.RELOAD)}UpdateActiveBook(){this.bookLayout.UpdateActive(0,this.bookScrollViewY,S.BOOK_VIEW_WIDTH,S.BOOK_VIEW_HEIGHT),p.default.mgrUI.ModuleRefresh(h.default.RELOAD)}static Pop(e){return d.default.Pop(S._t,e)}SelectChapter(e){this.chapterPrevious=p.default.mgrData.Get(f.default.selectedChapter),p.default.mgrData.Set(f.default.selectedChapter,e);let t=p.default.mgrCfg.cfgChapter.select(m.default.idGetter,e)._list[0],o=y.default.GetCache(t);this.bookLayout.Clear();for(let i=0;i<o.listMonsterSortByIdCfg.length;i++)this.bookLayout.Create(S.BOOK_VIEW_ITEM_WIDTH,S.BOOK_VIEW_ITEM_HEIGHT,o.listMonsterSortByIdCfg[i]);this.bookLayout.UpdatePos(),this.bookScrollViewY=this.bookLayout.containerHeight-S.BOOK_VIEW_HEIGHT,this.bookLayout.UpdateActive(0,this.bookScrollViewY,S.BOOK_VIEW_WIDTH,S.BOOK_VIEW_HEIGHT),this.scrollStop.currStatus.OnStop(),p.default.mgrUI.ModuleRefresh(h.default.INDEXVIEW_CHALLENGE)}}S._t=new u.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),function(e){e.CHAPTER_VIEW_WIDTH=290,e.CHAPTER_VIEW_HEIGHT=446.28,e.CHAPTER_SPACING=10,e.CHAPTER_ITEM_WIDTH=290,e.CHAPTER_ITEM_HEIGHT=70,e.LEVEL_VIEW_WIDTH=520,e.LEVEL_VIEW_HEIGHT=446.28,e.LEVEL_SPACING=10,e.LEVEL_ITEM_WIDTH=255,e.LEVEL_ITEM_HEIGHT=70,e.BOOK_VIEW_WIDTH=520,e.BOOK_VIEW_HEIGHT=446.28,e.BOOK_SPACING=10,e.BOOK_VIEW_ITEM_WIDTH=520,e.BOOK_VIEW_ITEM_HEIGHT=184.24}(S||(S={})),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/basic/layout/Layout":"Layout","../../../frame/basic/layout/LayoutAlignmentHorCenter":"LayoutAlignmentHorCenter","../../../frame/basic/layout/LayoutAlignmentVerMiddle":"LayoutAlignmentVerMiddle","../../../frame/basic/layout/LayoutConstraintColumn":"LayoutConstraintColumn","../../../frame/basic/layout/LayoutStartAxisVer":"LayoutStartAxisVer","../../../frame/basic/layout/LayoutStartCornerHorLeft":"LayoutStartCornerHorLeft","../../../frame/basic/layout/LayoutStartCornerVerUpper":"LayoutStartCornerVerUpper","../../../frame/config/src/CfgChapter":"CfgChapter","../../../frame/global/Jiang":"Jiang","../../cfg_cache/CfgCacheChapter":"CfgCacheChapter","../../game_element/common/ScrollStop":"ScrollStop","./ChallengeSelectViewStateRS":"ChallengeSelectViewStateRS"}],ChallengeSelectView:[function(e,t,o){"use strict";cc._RF.push(t,"8c645bjAttJKbKfBcwHtBOa","ChallengeSelectView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/UINodeType"),l=e("../../../frame/ui/UIViewComponent"),c=e("../../../IndexDataModule"),d=e("../../../IndexStorageItem"),u=e("./ChallengeSelectViewChapter"),m=e("../../../frame/component/ComponentNodeEventer"),p=e("./ChallengeSelectViewState"),h=e("../../../frame/ui/UIRoot"),f=e("../../../frame/ui/UINodeInstHideRS"),y=e("./ChallengeSelectViewBgLeft"),_=e("./ChallengeSelectViewBgRight"),g=e("./ChallengeSelectViewStateRS"),b=e("./ChallengeSelectViewBook"),S=e("../voice_ogg/VoiceOggViewState"),P=e("../../GameCommon"),B=e("../../../frame/ui/UINodeInstEnterRS"),{ccclass:C,property:M}=cc._decorator,x="ChallengeSelectView";let V=i=class extends l.default{constructor(){super(...arguments),this.levelNodeActive=null,this.levelBtnSelect=null,this.levelScroll=null,this.levelContainer=null,this.bookNodeActive=null,this.bookBtnSelect=null,this.bookScroll=null,this.bookContainer=null,this.chapterScroll=null,this.chapterContainer=null,this.containerBgLeft=null,this.containerBgRight=null,this.nodeTitle=null,this.nodeCycle=null,this.containerCycle=null}};V.nodeType=n.default.Pop(x,{prefabPath:`${P.default.SUB_MAIN}/prefab_ui/challenge_select_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(x,{listRefModule:[c.default.DEFAULT,c.default.INDEXVIEW_CHALLENGE],propsFilter:(e,t)=>{let o=t.stateChallenge.scrollStop.currStatus.OnScrollAble();e.chapterScroll.scroll.content.width=t.stateChallenge.chapterLayout.containerWidth,e.chapterScroll.scroll.content.height=t.stateChallenge.chapterLayout.containerHeight,e.chapterScroll.scroll.enabled=o,e.chapterScroll.scroll.content.y=t.stateChallenge.chapterLayout.containerHeight-t.stateChallenge.chapterScrollViewY-p.default.CHAPTER_VIEW_HEIGHT,e.chapterScroll.evterScrolling.On(()=>{t.stateChallenge.chapterScrollViewY=t.stateChallenge.chapterLayout.containerHeight-e.chapterScroll.scroll.content.y-p.default.CHAPTER_VIEW_HEIGHT,t.stateChallenge.UpdateActiveChapter(),h.default.inst.update(0)}),e.bookScroll.scroll.content.width=t.stateChallenge.bookLayout.containerWidth,e.bookScroll.scroll.content.height=t.stateChallenge.bookLayout.containerHeight,e.bookScroll.scroll.enabled=o,e.bookScroll.scroll.content.y=t.stateChallenge.bookLayout.containerHeight-t.stateChallenge.bookScrollViewY-p.default.BOOK_VIEW_HEIGHT,e.bookScroll.evterScrolling.On(()=>{t.stateChallenge.bookScrollViewY=t.stateChallenge.bookLayout.containerHeight-e.bookScroll.scroll.content.y-p.default.BOOK_VIEW_HEIGHT,t.stateChallenge.UpdateActiveBook(),h.default.inst.update(0)});for(let i=0;i<g.default.listRS.length;i++){let o=g.default.listRS[i],a=o.nodeActiveGetter(e),r=o.btnSelectGetter(e),n=o.scrollGetter(e);a.active=t.stateChallenge.rsCurrent==o,n.node.active=t.stateChallenge.rsCurrent==o,t.stateChallenge.rsCurrent!=o&&r.evterTouchStart.On(()=>{S.default.inst.VoiceSet(P.default.BTN_VOICE),t.stateChallenge.rsCurrent=o,s.default.mgrUI.ModuleRefresh(c.default.INDEXVIEW_CHALLENGE)})}e.nodeTitle.active=!0,e.nodeCycle.active=!1,t.stateChallenge.scrollStop.currStatus.OnApply()}}),n.default.ModuleStyle.Pop(x,{listRefModule:[c.default.DEFAULT,c.default.INDEXVIEW_CHILDREN_ABLE],propsFilter:()=>{}})],childrenCreator:[n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.bookContainer,uiNodeCreator:(e,t,o)=>{if(e.stateChallenge.childrenAble&&e.stateChallenge.rsCurrent==g.default.book)for(let i=e.stateChallenge.bookLayout._recHorEnd;e.stateChallenge.bookLayout._recHorStart<=i;i--){let t=e.stateChallenge.bookLayout.listColumn[i];for(let i=e.stateChallenge.bookLayout._recVerEnd;e.stateChallenge.bookLayout._recVerStart<=i;i--){let a=t.listEle[i];null!=a&&o.push(b.default.nodeType.CreateNode(e,a.id,a.id))}}}}),n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.containerCycle,uiNodeCreator:()=>{}}),n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.chapterContainer,uiNodeCreator:(e,t,o)=>{if(!e.stateChallenge.childrenAble)return;let i=u.default.nodeType;for(let a=e.stateChallenge.chapterLayout._recHorEnd;e.stateChallenge.chapterLayout._recHorStart<=a;a--){let t=e.stateChallenge.chapterLayout.listColumn[a];for(let a=e.stateChallenge.chapterLayout._recVerEnd;e.stateChallenge.chapterLayout._recVerStart<=a;a--){let r=t.listEle[a];o.push(i.CreateNode(e,r.id,r.id))}}}}),n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.levelContainer,uiNodeCreator:()=>{}}),n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.containerBgLeft,uiNodeCreator:(e,t,o)=>{null!=e.stateChallenge.chapterPrevious&&e.stateChallenge.chapterPrevious!=s.default.mgrData.Get(d.default.selectedChapter)&&o.push(y.default.GetNodeTypeByIdCfg(e.stateChallenge.chapterPrevious).CreateNode(e,e.stateChallenge.chapterPrevious,e.stateChallenge.chapterPrevious));let i=s.default.mgrData.Get(d.default.selectedChapter);o.push(y.default.GetNodeTypeByIdCfg(s.default.mgrData.Get(d.default.selectedChapter)).CreateNode(e,i,i))}}),n.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.containerBgRight,uiNodeCreator:(e,t,o)=>{null!=e.stateChallenge.chapterPrevious&&e.stateChallenge.chapterPrevious!=s.default.mgrData.Get(d.default.selectedChapter)&&o.push(_.default.GetNodeTypeByIdCfg(e.stateChallenge.chapterPrevious).CreateNode(e,e.stateChallenge.chapterPrevious,e.stateChallenge.chapterPrevious));let i=s.default.mgrData.Get(d.default.selectedChapter);o.push(_.default.GetNodeTypeByIdCfg(s.default.mgrData.Get(d.default.selectedChapter)).CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:f.default.setParentNull,enterRS:B.default.none}),a([M(cc.Node)],V.prototype,"levelNodeActive",void 0),a([M(m.default)],V.prototype,"levelBtnSelect",void 0),a([M(m.default)],V.prototype,"levelScroll",void 0),a([M(cc.Node)],V.prototype,"levelContainer",void 0),a([M(cc.Node)],V.prototype,"bookNodeActive",void 0),a([M(m.default)],V.prototype,"bookBtnSelect",void 0),a([M(m.default)],V.prototype,"bookScroll",void 0),a([M(cc.Node)],V.prototype,"bookContainer",void 0),a([M(m.default)],V.prototype,"chapterScroll",void 0),a([M(cc.Node)],V.prototype,"chapterContainer",void 0),a([M(cc.Node)],V.prototype,"containerBgLeft",void 0),a([M(cc.Node)],V.prototype,"containerBgRight",void 0),a([M(cc.Node)],V.prototype,"nodeTitle",void 0),a([M(cc.Node)],V.prototype,"nodeCycle",void 0),a([M(cc.Node)],V.prototype,"containerCycle",void 0),V=i=a([C],V),o.default=V,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIRoot":"UIRoot","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./ChallengeSelectViewBgLeft":"ChallengeSelectViewBgLeft","./ChallengeSelectViewBgRight":"ChallengeSelectViewBgRight","./ChallengeSelectViewBook":"ChallengeSelectViewBook","./ChallengeSelectViewChapter":"ChallengeSelectViewChapter","./ChallengeSelectViewState":"ChallengeSelectViewState","./ChallengeSelectViewStateRS":"ChallengeSelectViewStateRS"}],ChapterUnlockViewCard:[function(e,t,o){"use strict";cc._RF.push(t,"477349KDzJB+IXa4OEDo/pH","ChapterUnlockViewCard");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/config/src/CfgScene"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),{ccclass:p,property:h}=cc._decorator,f="ChapterUnlockViewCard";let y=i=class extends m.default{static GetNodeTypeByChapterIdCfg(e){let t=l.default.mgrCfg.cfgScene.select(n.default.idGetter,e)._list[0];return i._mapPathToNodeType.has(t.card)||i._mapPathToNodeType.set(t.card,u.default.Pop(f,{prefabPath:t.card,componentGetter:e=>e.getComponent(i),listModuleStyle:[],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none})),i._mapPathToNodeType.get(t.card)}};y._mapPathToNodeType=s.default.Pop(s.default.typeMap,f),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],ChapterUnlockViewState:[function(e,t,o){"use strict";cc._RF.push(t,"8656aMMHVlE7oN7ZSZyaKs9","ChapterUnlockViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/config/src/CfgScene"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c=e("../../GameCommon"),d=e("../../game_element/body/DefineVoice"),u=e("../voice_ogg/VoiceOggViewState");class m extends l.default{constructor(){super(i.default.GAME,l.default.BG_TYPE.MASK,!0)}static Pop(e,t){let o=a.default.Pop(m._t,e);return o.idCfgScene=t,o}OnMaskTouch(){u.default.inst.VoiceSet(c.default.BTN_VOICE),n.default.mgrUI.Close(this._idView)}OnDisplay(){let e=n.default.mgrCfg.cfgScene.select(s.default.idGetter,this.idCfgScene)._list[0];u.default.inst.BgmSet(e.bgm),u.default.inst.VoiceSet(d.default.NEW)}}o.default=m,m._t=new r.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:"ChapterUnlockViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],ChapterUnlockView:[function(e,t,o){"use strict";cc._RF.push(t,"229b9kY+hRN1qC+nq98R1uv","ChapterUnlockView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/config/src/CfgScene"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../../cfg_cache/CfgCacheScene"),f=e("./ChapterUnlockViewCard"),{ccclass:y,property:_}=cc._decorator,g="ChapterUnlockView";let b=i=class extends m.default{constructor(){super(...arguments),this.txtTitle=null,this.containerCard=null,this.listNodeLight=[],this.listNodeDark=[]}};b.nodeType=u.default.Pop(g,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/chapter_unlock_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(g,{listRefModule:[r.default.DEFAULT,r.default.CHAPTER_UNLOCK],propsFilter:(e,t)=>{let o=l.default.mgrCfg.cfgScene.select(n.default.idGetter,t.idCfgScene)._list[0];e.txtTitle.string=`\u5df2\u5230\u8fbe${o.name}\uff01`;let i=h.default.GetCache(o);for(let a=0;a<e.listNodeLight.length;a++)e.listNodeLight[a].color=i.colorLight;for(let a=0;a<e.listNodeDark.length;a++)e.listNodeDark[a].color=i.colorDark}})],childrenCreator:[u.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerCard,uiNodeCreator:(e,t,o)=>{o.push(f.default.GetNodeTypeByChapterIdCfg(e.idCfgScene).CreateNode(e,e.idCfgScene,e.idCfgScene))}})],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.scaleInForTemp200}),a([_(cc.Label)],b.prototype,"txtTitle",void 0),a([_(cc.Node)],b.prototype,"containerCard",void 0),a([_([cc.Node])],b.prototype,"listNodeLight",void 0),a([_([cc.Node])],b.prototype,"listNodeDark",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../cfg_cache/CfgCacheScene":"CfgCacheScene","./ChapterUnlockViewCard":"ChapterUnlockViewCard"}],ComponentNodeEventer:[function(e,t,o){"use strict";cc._RF.push(t,"13b03wcJfhIz7oowVY52rFx","ComponentNodeEventer");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const a=e("../basic/BCEventer"),{ccclass:r,property:s}=cc._decorator,n="ComponentNodeEventer";let l=class extends cc.Component{constructor(){super(...arguments),this.evterTouchStart=a.default.Pop(n),this.evterTouchMove=a.default.Pop(n),this.evterTouchEnd=a.default.Pop(n),this.evterEditDidBegan=a.default.Pop(n),this.evterEditDidChanged=a.default.Pop(n),this.evterEditDidEnd=a.default.Pop(n),this.evterEditReturn=a.default.Pop(n),this.evterSlide=a.default.Pop(n),this.evterScrolling=a.default.Pop(n),this.evterAnimFinished=a.default.Pop(n),this._enable=!0}onLoad(){this.node.on(cc.Node.EventType.TOUCH_START,e=>{this._enable&&this.evterTouchStart.Call(e)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,e=>{this._enable&&this.evterTouchMove.Call(e)}),this.btn=this.node.getComponent(cc.Button),null==this.btn?this.node.on(cc.Node.EventType.TOUCH_END,e=>{this._enable&&this.evterTouchEnd.Call(e)}):this.node.on("click",e=>{this._enable&&this.evterTouchEnd.Call(e)}),this.node.on("editing-did-began",e=>{this._enable&&this.evterEditDidBegan.Call(e)}),this.node.on("text-changed",e=>{this._enable&&this.evterEditDidChanged.Call(e)}),this.node.on("editing-did-ended",e=>{this._enable&&this.evterEditDidEnd.Call(e)}),this.node.on("editing-return",e=>{this._enable&&this.evterEditReturn.Call(e)}),this.editBox=this.node.getComponent(cc.EditBox),this.node.on("slide",e=>{this._enable&&this.evterSlide.Call(e)}),this.slider=this.node.getComponent(cc.Slider),this.node.on("scrolling",e=>{this._enable&&this.evterScrolling.Call(e)}),this.scroll=this.node.getComponent(cc.ScrollView),this.anim=this.node.getComponent(cc.Animation),null!=this.anim&&this.anim.on(cc.Animation.EventType.FINISHED,e=>{this._enable&&this.evterAnimFinished.Call(e)})}SetEnable(e){this._enable=e,this.btn&&(this.btn.enabled=e)}OffAll(){this.isValid&&(this.evterTouchStart.Clear(),this.evterTouchMove.Clear(),this.evterTouchEnd.Clear(),this.evterEditDidBegan.Clear(),this.evterEditDidChanged.Clear(),this.evterEditDidEnd.Clear(),this.evterEditReturn.Clear(),this.evterSlide.Clear(),this.evterScrolling.Clear(),this.evterAnimFinished.Clear())}};l=i([r],l),o.default=l,cc._RF.pop()},{"../basic/BCEventer":"BCEventer"}],ConfirmViewState:[function(e,t,o){"use strict";cc._RF.push(t,"8711dTYGEZGtYmxJUhBc73l","ConfirmViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCPromiseCtrl"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexLayer"),l="ConfirmViewState";class c extends s.default{constructor(){super(n.default.GAME,s.default.BG_TYPE.MASK,!0),this.ctrl=i.default.Pop(l)}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.txt=t,o}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState"}],ConfirmView:[function(e,t,o){"use strict";cc._RF.push(t,"16f9dFtEvFAOpGURE33gCHX","ConfirmView");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const a=e("../../../frame/component/ComponentNodeEventer"),r=e("../../../frame/ui/UIViewComponent"),s=e("./ConfirmViewState"),{ccclass:n,property:l}=cc._decorator;let c=class extends r.default{constructor(){super(...arguments),this.txt=null,this.btnYes=null,this.btnNo=null}static Certain(e){return s.default.Pop("ConfirmView",e).ctrl._promise}};i([l(cc.Label)],c.prototype,"txt",void 0),i([l(a.default)],c.prototype,"btnYes",void 0),i([l(a.default)],c.prototype,"btnNo",void 0),c=i([n],c),o.default=c,cc._RF.pop()},{"../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/ui/UIViewComponent":"UIViewComponent","./ConfirmViewState":"ConfirmViewState"}],DebugViewBtn:[function(e,t,o){"use strict";cc._RF.push(t,"ae6c2VEKqdAKLceJKAaFVB/","DebugViewBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../basic/BCType"),n=e("../component/ComponentNodeEventer"),l=e("../global/Jiang"),c=e("../ui/UINodeInstEnterRS"),d=e("../ui/UINodeInstHideRS"),u=e("../ui/UINodeType"),m=e("../ui/UIViewComponent"),p=e("./DebugViewDefine"),{ccclass:h,property:f}=cc._decorator,y="DebugViewBtn";let _=i=class extends m.default{constructor(){super(...arguments),this.txt=null,this.btn=null,this.nodeMask=null}};_.nodeType=u.default.Pop(y,{prefabPath:"DebugViewBtn",componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(y,{listRefModule:[r.default.DEFAULT,r.default.DEBUG_VIEW],propsFilter:(e,t,o)=>{let i=p.default.groupList.findIndex(e=>e.id==o),a=p.default.groupList[i];e.node.name=e.txt.string=`${a.name}`,e.nodeMask.active=t.moduleIndex!=i,e.btn.evterTouchEnd.On(()=>{t.moduleIndex=i,l.default.mgrUI.ModuleRefresh(r.default.DEBUG_VIEW)})}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([f(cc.Label)],_.prototype,"txt",void 0),a([f(n.default)],_.prototype,"btn",void 0),a([f(cc.Node)],_.prototype,"nodeMask",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../global/Jiang":"Jiang","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine"}],DebugViewDefine:[function(e,t,o){"use strict";cc._RF.push(t,"6cbd7wrJUpNM68gBDjZYsr5","DebugViewDefine"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./DebugViewGroupFast"),a=e("./DebugViewGroupModule"),r=e("./DebugViewGroupMessage"),s=e("../basic/UtilObjPoolType"),n=e("../basic/UtilObjPool"),l="DebugViewDefine";var c;(function(e){class t{constructor(){}static Pop(e,o,i,a,r){let s=n.default.Pop(t._t,e);return s.b2w=o,s.cameraPixelPerSize=i,s.cameraX=a,s.cameraY=r,s}}t._t=new s.default({instantiate:()=>new t,onPop:()=>{},onPush:()=>{},tag:"B2DrawInfo"}),e.B2DrawInfo=t,e.b2wList=n.default.Pop(n.default.typeArray,l);class o{constructor(){this.id=++o.id}static Pop(e,t,i){let a=n.default.Pop(o._t,e);return a.name=t,a.nodeType=i,a}}o._t=new s.default({instantiate:()=>new o,onPop:()=>{},onPush:()=>{},tag:"DebugViewGroup"}),o.id=0,e.DebugViewGroup=o,e.groupList=[o.Pop(l,"\u5feb\u6377\u65b9\u5f0f",i.default.nodeType),o.Pop(l,"\u6a21\u5757\u5f00\u5173",a.default.nodeType),o.Pop(l,"\u4fe1\u606f\u5c55\u793a",r.default.nodeType)],e.moduleList=n.default.Pop(n.default.typeArray,l);class c{constructor(){}static Pop(t,o,i){let a=n.default.Pop(c._t,t);return a.name=o,a.dataItem=i,e.moduleList.push(a),a}}c._t=new s.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"ModuleInfo"}),e.ModuleInfo=c,e.fastGroupList=n.default.Pop(n.default.typeArray,l);class d{constructor(){}static Pop(t,o,i){let a=n.default.Pop(d._t,t);return a._name=o,a._act=i,e.fastGroupList.push(a),a}}d._t=new s.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"FastGroup"}),e.FastGroup=d,e.msgList=n.default.Pop(n.default.typeArray,l);class u{constructor(){}static Pop(t,o,i){let a=n.default.Pop(u._t,t);return a._name=o,a._act=i,e.msgList.push(a),a}}u._t=new s.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:"MsgGroup"}),e.MsgGroup=u})(c||(c={})),o.default=c,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./DebugViewGroupFast":"DebugViewGroupFast","./DebugViewGroupMessage":"DebugViewGroupMessage","./DebugViewGroupModule":"DebugViewGroupModule"}],DebugViewGraphics:[function(e,t,o){"use strict";cc._RF.push(t,"622119rSKdHbL63QApaJBh9","DebugViewGraphics");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../extend/b2_extend/B2ElementRS"),n=e("../extend/graphics_drawer/GraphicsDrawer"),l=e("../../IndexDebugModuleCtrl"),c=e("../../IndexDataModule"),d=e("../ui/UINodeType"),u=e("../ui/UIViewComponent"),m=e("./DebugViewDefine"),p=e("./DebugViewState"),h=e("../ui/UINodeInstHideRS"),f=e("../ui/UINodeInstEnterRS"),{ccclass:y,property:_}=cc._decorator,g="DebugViewGraphics";let b=i=class extends u.default{constructor(){super(...arguments),this.graphics=null}onLoad(){this.graphicsDrawer=n.default.Pop(g,this.graphics)}};b.nodeType=d.default.Pop(g,{prefabPath:"DebugViewGraphics",componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(g,{listRefModule:[c.default.DEFAULT,c.default.DEBUG_VIEW],propsFilter:e=>{e.graphics.clear();let t=0;p.default.CheckModuleActive(l.default.drawB2joint)&&(t+=s.default.joint.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2transform)&&(t+=s.default.bodyTransform.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2aabb)&&(t+=s.default.aabb.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2shape)&&(t+=s.default.shape.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2particle)&&(t+=s.default.particle.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2controller)&&(t+=s.default.controller.drawAbleTag),p.default.CheckModuleActive(l.default.drawB2contact)&&(t+=s.default.contact.drawAbleTag),m.default.b2wList.forEach(o=>{e.graphicsDrawer.SetTransform(o.cameraPixelPerSize,o.cameraX,o.cameraY),s.default.eleDrawFuncList.forEach(i=>{i(o.b2w,e.graphicsDrawer,t)})})}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:h.default.setParentNull,enterRS:f.default.none}),a([_(cc.Graphics)],b.prototype,"graphics",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../IndexDebugModuleCtrl":"IndexDebugModuleCtrl","../basic/BCType":"BCType","../extend/b2_extend/B2ElementRS":"B2ElementRS","../extend/graphics_drawer/GraphicsDrawer":"GraphicsDrawer","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine","./DebugViewState":"DebugViewState"}],DebugViewGroupFastBtn:[function(e,t,o){"use strict";cc._RF.push(t,"709e2K0fkdLTIU5qD65HdS2","DebugViewGroupFastBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../component/ComponentNodeEventer"),n=e("../../IndexDataModule"),l=e("../ui/UINodeType"),c=e("../ui/UIViewComponent"),d=e("./DebugViewDefine"),u=e("../ui/UINodeInstHideRS"),m=e("../ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="DebugViewGroupFastBtn";let y=i=class extends c.default{constructor(){super(...arguments),this.txt=null,this.btn=null}};y.nodeType=l.default.Pop(f,{prefabPath:"DebugViewGroupFastBtn",componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(f,{listRefModule:[n.default.DEFAULT,n.default.DEBUG_VIEW],propsFilter:(e,t,o)=>{let i=d.default.fastGroupList[o];e.txt.string=i._name,e.btn.evterTouchEnd.On(()=>{i._act(t.txt)})}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:u.default.setParentNull,enterRS:m.default.none}),a([h(cc.Label)],y.prototype,"txt",void 0),a([h(s.default)],y.prototype,"btn",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine"}],DebugViewGroupFast:[function(e,t,o){"use strict";cc._RF.push(t,"c66877zPEFDtq5wLu4pC/L3","DebugViewGroupFast");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../component/ComponentNodeEventer"),n=e("../global/Jiang"),l=e("../../IndexDataModule"),c=e("../ui/UINodeType"),d=e("../ui/UIViewComponent"),u=e("./DebugViewGroupFastBtn"),m=e("./DebugViewDefine"),p=e("../ui/UINodeInstHideRS"),h=e("../ui/UINodeInstEnterRS"),{ccclass:f,property:y}=cc._decorator,_="DebugViewGroupFast";let g=i=class extends d.default{constructor(){super(...arguments),this.containerBtn=null,this.editProp=null}};g.nodeType=c.default.Pop(_,{prefabPath:"DebugViewGroupFast",componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(_,{listRefModule:[l.default.DEFAULT,l.default.DEBUG_VIEW],propsFilter:(e,t)=>{e.editProp.editBox.string=`${t.txt}`,e.editProp.evterEditDidChanged.On(()=>{t.txt=e.editProp.editBox.string,n.default.mgrUI.ModuleRefresh(l.default.DEBUG_VIEW)})}})],childrenCreator:[c.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerBtn,uiNodeCreator:(e,t,o)=>{for(let i=0;i<m.default.fastGroupList.length;i++)m.default.fastGroupList[i],o.push(u.default.nodeType.CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:p.default.setParentNull,enterRS:h.default.none}),a([y(cc.Node)],g.prototype,"containerBtn",void 0),a([y(s.default)],g.prototype,"editProp",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../global/Jiang":"Jiang","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine","./DebugViewGroupFastBtn":"DebugViewGroupFastBtn"}],DebugViewGroupMessageBtn:[function(e,t,o){"use strict";cc._RF.push(t,"d668f6yEo9BxoCtIjd5oZX9","DebugViewGroupMessageBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../basic/BCType"),n=e("../component/ComponentNodeEventer"),l=e("../global/Jiang"),c=e("../ui/UINodeInstEnterRS"),d=e("../ui/UINodeInstHideRS"),u=e("../ui/UINodeType"),m=e("../ui/UIViewComponent"),p=e("./DebugViewDefine"),{ccclass:h,property:f}=cc._decorator,y="DebugViewGroupMessageBtn";let _=i=class extends m.default{constructor(){super(...arguments),this.txt=null,this.btn=null}};_.nodeType=u.default.Pop(y,{prefabPath:"DebugViewGroupMessageBtn",componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(y,{listRefModule:[r.default.DEFAULT,r.default.DEBUG_VIEW],propsFilter:(e,t,o)=>{let i=p.default.msgList[o];e.txt.string=i._name,e.btn.node.active=o!=t.msgIdx,e.btn.evterTouchEnd.On(()=>{t.msgIdx=o,l.default.mgrUI.ModuleRefresh(r.default.DEBUG_VIEW)})}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([f(cc.Label)],_.prototype,"txt",void 0),a([f(n.default)],_.prototype,"btn",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../global/Jiang":"Jiang","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine"}],DebugViewGroupMessageTxt:[function(e,t,o){"use strict";cc._RF.push(t,"ace454XyixJmb35W5IOcFuE","DebugViewGroupMessageTxt");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../basic/BCType"),n=e("../ui/UINodeInstEnterRS"),l=e("../ui/UINodeInstHideRS"),c=e("../ui/UINodeType"),d=e("../ui/UIViewComponent"),{ccclass:u,property:m}=cc._decorator,p="DebugViewGroupMessageTxt";let h=i=class extends d.default{constructor(){super(...arguments),this.txt=null}};h.nodeType=c.default.Pop(p,{prefabPath:"DebugViewGroupMessageTxt",componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(p,{listRefModule:[r.default.DEFAULT,r.default.DEBUG_VIEW],propsFilter:(e,t,o)=>{e.txt.string!=t.msgListTxt[o]&&(e.txt.string=t.msgListTxt[o])}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([m(cc.Label)],h.prototype,"txt",void 0),h=i=a([u],h),o.default=h,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent"}],DebugViewGroupMessage:[function(e,t,o){"use strict";cc._RF.push(t,"54a2fyywphPsKtkpxCqtAH3","DebugViewGroupMessage");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../../IndexDataModule"),n=e("../ui/UINodeType"),l=e("../ui/UIViewComponent"),c=e("./DebugViewDefine"),d=e("./DebugViewGroupMessageBtn"),u=e("./DebugViewGroupMessageTxt"),m=e("../ui/UINodeInstHideRS"),p=e("../ui/UINodeInstEnterRS"),{ccclass:h,property:f}=cc._decorator,y="DebugViewGroupMessage";let _=i=class extends l.default{constructor(){super(...arguments),this.containerTxt=null,this.containerBtn=null}};_.nodeType=n.default.Pop(y,{prefabPath:"DebugViewGroupMessage",componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(y,{listRefModule:[s.default.DEFAULT,s.default.DEBUG_VIEW],propsFilter:()=>{}})],childrenCreator:[n.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerTxt,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.msgListTxt.length;i++)o.push(u.default.nodeType.CreateNode(e,i,i))}}),n.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerBtn,uiNodeCreator:(e,t,o)=>{for(let i=0;i<c.default.msgList.length;i++)o.push(d.default.nodeType.CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:m.default.setParentNull,enterRS:p.default.none}),a([f(cc.Node)],_.prototype,"containerTxt",void 0),a([f(cc.Node)],_.prototype,"containerBtn",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine","./DebugViewGroupMessageBtn":"DebugViewGroupMessageBtn","./DebugViewGroupMessageTxt":"DebugViewGroupMessageTxt"}],DebugViewGroupModuleBtn:[function(e,t,o){"use strict";cc._RF.push(t,"68c52GIPQtIE5pt0hPch3rL","DebugViewGroupModuleBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../component/ComponentNodeEventer"),n=e("../global/Jiang"),l=e("../../IndexDataModule"),c=e("../ui/UINodeType"),d=e("../ui/UIViewComponent"),u=e("./DebugViewDefine"),m=e("../ui/UINodeInstHideRS"),p=e("../ui/UINodeInstEnterRS"),{ccclass:h,property:f}=cc._decorator,y="DebugViewGroupModuleBtn";let _=i=class extends d.default{constructor(){super(...arguments),this.txt=null,this.btn=null,this.nodeMask=null}};_.nodeType=c.default.Pop(y,{prefabPath:"DebugViewGroupModuleBtn",componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(y,{listRefModule:[l.default.DEFAULT,l.default.DEBUG_VIEW],propsFilter:(e,t,o)=>{let i=u.default.moduleList[o];e.txt.string=`${i.name}`,e.nodeMask.active=!n.default.mgrData.Get(i.dataItem),e.btn.evterTouchEnd.On(()=>{n.default.mgrData.Set(i.dataItem,!n.default.mgrData.Get(i.dataItem)),n.default.mgrUI.ModuleRefresh(l.default.DEBUG_VIEW)})}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:m.default.setParentNull,enterRS:p.default.none}),a([f(cc.Label)],_.prototype,"txt",void 0),a([f(s.default)],_.prototype,"btn",void 0),a([f(cc.Node)],_.prototype,"nodeMask",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../global/Jiang":"Jiang","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine"}],DebugViewGroupModule:[function(e,t,o){"use strict";cc._RF.push(t,"83c29xpZqtB6rQ0dSen8aBP","DebugViewGroupModule");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/BCType"),s=e("../../IndexDataModule"),n=e("../ui/UINodeType"),l=e("../ui/UIViewComponent"),c=e("./DebugViewDefine"),d=e("./DebugViewGroupModuleBtn"),u=e("../ui/UINodeInstHideRS"),m=e("../ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="DebugViewGroupModule";let y=i=class extends l.default{constructor(){super(...arguments),this.containerBtn=null}};y.nodeType=n.default.Pop(f,{prefabPath:"DebugViewGroupModule",componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[s.default.DEFAULT,s.default.DEBUG_VIEW],propsFilter:()=>{}})],childrenCreator:[n.default.ChildrenGeneration.Pop(f,{containerGetter:e=>e.containerBtn,uiNodeCreator:(e,t,o)=>{for(let i=0;i<c.default.moduleList.length;i++)o.push(d.default.nodeType.CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:u.default.setParentNull,enterRS:m.default.none}),a([h(cc.Node)],y.prototype,"containerBtn",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewDefine":"DebugViewDefine","./DebugViewGroupModuleBtn":"DebugViewGroupModuleBtn"}],DebugViewState:[function(e,t,o){"use strict";cc._RF.push(t,"af337N2U5VI97eVvi3oji9a","DebugViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../global/Jiang"),a=e("../../IndexDataModule"),r=e("../../IndexLayer"),s=e("../ui/ViewState"),n=e("./DebugViewDefine"),l=e("../basic/UtilObjPoolType"),c=e("../basic/UtilObjPool"),d=e("./DebugViewGroupMessage"),u="DebugViewState";class m extends s.default{constructor(){super(r.default.SYSTEM,s.default.BG_TYPE.NONE,!1),this.btnEnterOpacity=255,this.contentEnable=!1,this.moduleIndex=0,this.txt="\u8bf7\u8f93\u5165\u53c2\u6570",this.msgIdx=0,this.msgListTxt=c.default.Pop(c.default.typeArray,u),i.default.mgrEvter.evterUpdate.On(()=>{if(this.contentEnable&&n.default.groupList[this.moduleIndex].nodeType==d.default.nodeType){let e=n.default.msgList[this.msgIdx]._act().split(/\n/g);for(this.msgListTxt.length=0;0<e.length;)this.msgListTxt.push(e.splice(0,100).join("\n"));i.default.mgrUI.ModuleRefresh(a.default.DEBUG_VIEW)}0<n.default.b2wList.length&&i.default.mgrUI.ModuleRefresh(a.default.DEBUG_VIEW)})}static Pop(e){return c.default.Pop(m._t,e)}static Init(){m.inst=m.Pop(u)}SetBtnEnterOpacity(e){this.btnEnterOpacity=e,i.default.mgrUI.ModuleRefresh(a.default.DEBUG_VIEW)}Open(){this.contentEnable=!0,i.default.mgrUI.ModuleRefresh(a.default.DEBUG_VIEW)}Close(){this.contentEnable=!1,i.default.mgrUI.ModuleRefresh(a.default.DEBUG_VIEW)}static CheckModuleActive(e){return i.default.mgrData.Get(e.dataItem)}}o.default=m,m._t=new l.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../IndexLayer":"IndexLayer","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../global/Jiang":"Jiang","../ui/ViewState":"ViewState","./DebugViewDefine":"DebugViewDefine","./DebugViewGroupMessage":"DebugViewGroupMessage"}],DebugView:[function(e,t,o){"use strict";cc._RF.push(t,"951eftE8vNI/7Hu1mSt1D+o","DebugView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../basic/BCType"),n=e("../component/ComponentNodeEventer"),l=e("../ui/UINodeInstEnterRS"),c=e("../ui/UINodeInstHideRS"),d=e("../ui/UINodeType"),u=e("../ui/UIViewComponent"),m=e("./DebugViewBtn"),p=e("./DebugViewDefine"),h=e("./DebugViewGraphics"),{ccclass:f,property:y}=cc._decorator,_="DebugView";let g=i=class extends u.default{constructor(){super(...arguments),this.nodeContent=null,this.btnToggle=null,this.btnClose=null,this.btnBg=null,this.containerBtn=null,this.containerCurrent=null,this.containerB2Graphics=null}};g.nodeType=d.default.Pop(_,{prefabPath:"DebugView",componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(_,{listRefModule:[r.default.DEFAULT,r.default.DEBUG_VIEW],propsFilter:(e,t)=>{e.nodeContent.active=t.contentEnable,e.btnToggle.evterTouchEnd.On(()=>{t.Open()}),e.btnToggle.node.opacity=t.btnEnterOpacity,e.btnClose.evterTouchEnd.On(()=>{t.Close()}),e.btnBg.evterTouchEnd.On(()=>{})}})],childrenCreator:[d.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerB2Graphics,uiNodeCreator:(e,t,o)=>{o.push(h.default.nodeType.CreateNode(e,null,0))}}),d.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerBtn,uiNodeCreator:(e,t,o)=>{if(e.contentEnable)for(let i=0;i<p.default.groupList.length;i++){let t=p.default.groupList[i];o.push(m.default.nodeType.CreateNode(e,t.id,t.id))}}}),d.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerCurrent,uiNodeCreator:(e,t,o)=>{if(!e.contentEnable)return;let i=p.default.groupList[e.moduleIndex];o.push(i.nodeType.CreateNode(e,null,0))}})],propsType:s.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.none}),a([y(cc.Node)],g.prototype,"nodeContent",void 0),a([y(n.default)],g.prototype,"btnToggle",void 0),a([y(n.default)],g.prototype,"btnClose",void 0),a([y(n.default)],g.prototype,"btnBg",void 0),a([y(cc.Node)],g.prototype,"containerBtn",void 0),a([y(cc.Node)],g.prototype,"containerCurrent",void 0),a([y(cc.Node)],g.prototype,"containerB2Graphics",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../ui/UINodeInstEnterRS":"UINodeInstEnterRS","../ui/UINodeInstHideRS":"UINodeInstHideRS","../ui/UINodeType":"UINodeType","../ui/UIViewComponent":"UIViewComponent","./DebugViewBtn":"DebugViewBtn","./DebugViewDefine":"DebugViewDefine","./DebugViewGraphics":"DebugViewGraphics"}],DefineAltar:[function(e,t,o){"use strict";var i;cc._RF.push(t,"f5d26vIGupGmqsGTbMyQYOR","DefineAltar"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.LIST_MONSTER_ADDITION=[[4001001,4002001,4003001,4004001,4005001,4006001,4007001,4008001,4009001,4010001,4011001,4012001,4013001,4014001,4015001,4016001],[4001002,4002002,4003002,4004002,4005002,4006002,4007002,4008002,4009002,4010002,4011002,4012002,4013002,4014002,4015002,4016002],[4001003,4002003,4003003,4004003,4005003,4006003,4007003,4008003,4009003,4010003,4011003,4012003,4013003,4014003,4015003,4016003],[4001004,4002004,4003004,4004004,4005004,4006004,4007004,4008004,4009004,4010004,4011004,4012004,4013004,4014004,4015004,4016004],[4001006,4002006,4003006,4004006,4005006,4006006,4007006,4008006,4009006,4010006,4011006,4012006,4013006,4014006,4015006,4016006],[4001007,4002007,4003007,4004007,4005007,4006007,4007007,4008007,4009007,4010007,4011007,4012007,4013007,4014007,4015007,4016007],[4001008,4002008,4003008,4004008,4005008,4006008,4007008,4008008,4009008,4010008,4011008,4012008,4013008,4014008,4015008,4016008],[4001009,4002009,4003009,4004009,4005009,4006009,4007009,4008009,4009009,4010009,4011009,4012009,4013009,4014009,4015009,4016009],[3001,3029,3017,3009,3025,3041,3033,3021,3013,3037,3045,3005,3049,3053],[3002,3030,3018,3010,3026,3042,3034,3022,3014,3038,3046,3006,3050,3054],[3003,3031,3019,3011,3027,3043,3035,3023,3015,3039,3047,3007,3051,3055],[3004,3032,3020,3012,3028,3044,3036,3024,3016,3040,3048,3008,3052,3056]]}(i||(i={})),o.default=i,cc._RF.pop()},{}],DefineEff:[function(e,t,o){"use strict";var i;cc._RF.push(t,"03fb2kjsYZF34qUHYDtoPzp","DefineEff"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.DMG=10006,e.BOOM=10003}(i||(i={})),o.default=i,cc._RF.pop()},{}],DefineVoice:[function(e,t,o){"use strict";var i;cc._RF.push(t,"fb515vz1DpGSoqN3CYuIbdb","DefineVoice"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.EQUIPMENT_DROP_TRIGGER=1001001003,e.EQUIPMENT_DROP_GOT=1001001004,e.ITEM_DROP_GOT=1001001009,e.DEFENDING=1001001008,e.DEFENDED=1001001007,e.HURTED=1001001002,e.GUIDE_TIPS_SUCCESS=1001001014,e.GUIDE_TIPS_POP=1001001015,e.MONSTER_ATK=1001001016,e.HORSE_DIRT_1=1001001017,e.HORSE_DIRT_2=1001001018,e.NEW=1001001011,e.CALL=2015001,e.BOOM=2016001,e.BGM_TITLE=4001,e.BGM_BOSS=4003,e.VOICE_MONEY=1001001010,e.FAIL_1=1001001013,e.FAIL_2=1001001019,e.CLEAR_SCREEN=1001001020,e.ATK_HITTED=3001001}(i||(i={})),o.default=i,cc._RF.pop()},{}],EquipmentInstRS:[function(e,t,o){"use strict";cc._RF.push(t,"792b7f1RC1FFrdJOM8DsQJs","EquipmentInstRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPoolType"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/config/src/CfgEquipmentProps"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/config/src/CfgGameElement"),l=e("../../cfg_cache/CfgCacheEquipment"),c="EquipmentInstRS";class d{constructor(){}static Pop(e,t){let o=a.default.Pop(d._t,e);return o.id=t.logicCode,o.cfgToArgs=t.cfgToArgs,o.instCreator=t.instCreator,o.instDisplay=t.instDisplay,o.getPropsSpacing=t.getPropsSpacing,o.getPropsCost=t.getPropsCost,o.getPropsDmg=t.getPropsDmg,o.aditionalBody=t.aditionalBody,o.aditionalEff=t.aditionalEff,o.aditionalVoice=t.aditionalVoice,d.instMap.set(t.logicCode,o),o}}d._t=new i.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),function(e){e.instMap=a.default.Pop(a.default.typeMap,c),e.GetDisplaySpacing=function(t){let o=s.default.mgrCfg.cfgEquipmentProps.select(r.default.idGetter,t)._list[0];return(e.instMap.get(o.logic).getPropsSpacing(o,l.default.GetCache(o).args)/1e3).toFixed(2)},e.GetDisplayCost=function(t){let o=s.default.mgrCfg.cfgEquipmentProps.select(r.default.idGetter,t)._list[0],i=e.instMap.get(o.logic);return Math.ceil(i.getPropsCost(o,l.default.GetCache(o).args))},e.GetDisplayDmgByPower=function(t,o){let i=s.default.mgrCfg.cfgEquipmentProps.select(r.default.idGetter,t)._list[0],a=e.instMap.get(i.logic);return Math.floor(a.getPropsDmg(i,l.default.GetCache(i).args,o))},e.GetSingleDmgByPower=function(e,t){let o=s.default.mgrCfg.cfgEquipmentProps.select(r.default.idGetter,e)._list[0];return s.default.mgrCfg.cfgGameElement.select(n.default.idGetter,o.arrow)._list[0].props_influence_count*t},e.GetSingleRepel=function(e){let t=s.default.mgrCfg.cfgEquipmentProps.select(r.default.idGetter,e)._list[0];return s.default.mgrCfg.cfgGameElement.select(n.default.idGetter,t.arrow)._list[0].props_repel}}(d||(d={})),o.default=d,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../frame/global/Jiang":"Jiang","../../cfg_cache/CfgCacheEquipment":"CfgCacheEquipment"}],EquipmentInst:[function(e,t,o){"use strict";cc._RF.push(t,"ac211k7KapNv5AJ7WaOLau5","EquipmentInst"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(){this.bulletGravityScale=1}OnStep(e){}OnFireEnter(){}OnFireStep(){}OnFireExit(){}OnInit(){}OnDraw(e){}OnBackPack(){}OnHand(){}OnCostNeed(){return 0}OnAble(){return this.OnCostNeed()<=this.relEquip.npc.mpCurrent}OnCD(){return 1}OnMpRecoveryAble(){return!0}},cc._RF.pop()},{}],EquipmentLvUpSumViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"47b4buEv61EAoQbP077bYmR","EquipmentLvUpSumViewItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../../GameMath"),f=e("../equipment_preview_view/EquipmentPreviewView"),y=e("../equipment_preview_view/EquipmentPreviewViewState"),_=e("../equipment_view/EquipmentViewEquip"),g=e("../voice_ogg/VoiceOggViewState"),{ccclass:b,property:S}=cc._decorator,P="EquipmentLvUpSumViewItem";let B=i=class extends m.default{constructor(){super(...arguments),this.txtLv=null,this.container=null,this.btnDetail=null}};B.nodeType=u.default.Pop(P,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/lv_up_sum_view_item`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(P,{listRefModule:[r.default.DEFAULT,r.default.LV_UP_SUM],propsFilter:(e,t,o)=>{let i=t.mapIdCfgToRecord.get(o),a=h.default.ParsePowerToLev(h.default.equip.ParseCountToPower(i.count));e.txtLv.string=`${a}\u7ea7`,e.btnDetail.evterTouchStart.On(()=>{g.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.btnDetail.evterTouchEnd.On(()=>{l.default.mgrUI.Open(f.default.nodeType,y.default.Pop(P,i.idCfg,i.count))})}})],childrenCreator:[u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.container,uiNodeCreator:(e,t,o)=>{let i=e.mapIdCfgToRecord.get(t);o.push(_.default.GetNodeTypeForIconUI(i.idCfg).CreateNode(e,null,null))}})],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([S(cc.Label)],B.prototype,"txtLv",void 0),a([S(cc.Node)],B.prototype,"container",void 0),a([S(n.default)],B.prototype,"btnDetail",void 0),B=i=a([b],B),o.default=B,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],EquipmentLvUpSumViewState:[function(e,t,o){"use strict";cc._RF.push(t,"3b360ShVDhIuIBAarBmeL4s","EquipmentLvUpSumViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexStorageItem"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c=e("../../GameCommon"),d=e("../../GameMath"),u=e("../../game_element/body/DefineVoice"),m=e("../lv_up_batch_view/LvUpBatchViewState"),p=e("../voice_ogg/VoiceOggViewState"),h="EquipmentLvUpSumViewState";class f extends l.default{constructor(){super(i.default.GAME,l.default.BG_TYPE.MASK,!0),this.mapIdCfgToRecord=r.default.Pop(r.default.typeMap,h),this.listIdCfg=r.default.Pop(r.default.typeArray,h),this.lvMax=0}static Pop(e,t){let o,i,s=r.default.Pop(f._t,e);s.listIdCfg.push(...t),s.listIdCfg.sort((e,t)=>e-t),t.length<=f.LINE_MAX?(o=t.length,i=1):t.length<=2*f.LINE_MAX?(o=Math.ceil(t.length/2),i=2):(o=Math.ceil(t.length/3),i=3),s.containerWidth=o*(f.ITEM_WIDTH+f.SPACING_HOR)-f.SPACING_HOR,s.containerHeight=i*(f.ITEM_HEIGHT+f.SPACING_VER)-f.SPACING_VER;let l=n.default.mgrData.Get(a.default.listEquipment);for(let a=0;a<l.length;a++){let e=l[a];s.mapIdCfgToRecord.set(e.idCfg,e);let t=d.default.ParsePowerToLev(d.default.equip.ParseCountToPower(e.count));s.lvMax=Math.max(s.lvMax,t)}return s.stateLvUpBatch=m.default.Pop(h),s}OnMaskTouch(){p.default.inst.VoiceSet(c.default.BTN_VOICE),n.default.mgrUI.Close(this._idView)}OnDisplay(){p.default.inst.VoiceSet(u.default.NEW)}OnChange(e){this.stateLvUpBatch.OnChange(e)}}f._t=new s.default({instantiate:()=>new f,onPop:()=>{},onPush:()=>{},tag:h}),function(e){e.LINE_MAX=6,e.SPACING_HOR=0,e.SPACING_VER=0,e.ITEM_WIDTH=120,e.ITEM_HEIGHT=120}(f||(f={})),o.default=f,cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../game_element/body/DefineVoice":"DefineVoice","../lv_up_batch_view/LvUpBatchViewState":"LvUpBatchViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],EquipmentLvUpSumView:[function(e,t,o){"use strict";cc._RF.push(t,"d6ea99QFdJCS6eN/9gKMhv6","EquipmentLvUpSumView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),m=e("./EquipmentLvUpSumViewItem"),{ccclass:p,property:h}=cc._decorator,f="EquipmentLvUpSumView";let y=i=class extends d.default{constructor(){super(...arguments),this.container=null}};y.nodeType=c.default.Pop(f,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/lv_up_sum_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(f,{listRefModule:[r.default.DEFAULT,r.default.LV_UP_SUM],propsFilter:(e,t)=>{e.container.width=t.containerWidth,e.container.height=t.containerHeight}})],childrenCreator:[c.default.ChildrenGeneration.Pop(f,{containerGetter:e=>e.container,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.listIdCfg.length;i++){let t=e.listIdCfg[i];o.push(m.default.nodeType.CreateNode(e,t,t))}}})],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([h(cc.Node)],y.prototype,"container",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./EquipmentLvUpSumViewItem":"EquipmentLvUpSumViewItem"}],EquipmentLvUpViewState:[function(e,t,o){"use strict";cc._RF.push(t,"13950hLjDZCQp9YWzM9NUJH","EquipmentLvUpViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/ViewState"),l=e("../../GameCommon"),c=e("../../game_element/body/DefineVoice"),d=e("../voice_ogg/VoiceOggViewState");class u extends n.default{constructor(){super(i.default.GAME,n.default.BG_TYPE.MASK,!0)}static Pop(e,t,o,i){let r=a.default.Pop(u._t,e);return r.idCfg=t,r.lvPassed=o,r.lvCurrent=i,r}OnMaskTouch(){d.default.inst.VoiceSet(l.default.BTN_VOICE),s.default.mgrUI.Close(this._idView)}OnDisplay(){d.default.inst.VoiceSet(c.default.NEW)}}o.default=u,u._t=new r.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:"EquipmentLvUpViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],EquipmentLvUpView:[function(e,t,o){"use strict";cc._RF.push(t,"66497PH7U5K5YjkESvXj9Df","EquipmentLvUpView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),m=e("../../GameMath"),p=e("../../game_element/equipment/EquipmentInstRS"),h=e("../equipment_view/EquipmentViewEquip"),{ccclass:f,property:y}=cc._decorator,_="EquipmentLvUpView";let g=i=class extends d.default{constructor(){super(...arguments),this.containerLeft=null,this.containerRight=null,this.txtLvLeft=null,this.txtLvRight=null,this.txtDmgLeft=null,this.txtDmgRight=null}};g.nodeType=c.default.Pop(_,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/item_equipment_lv_up`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(_,{listRefModule:[r.default.DEFAULT,r.default.LV_UP],propsFilter:(e,t)=>{e.txtLvLeft.string=`${t.lvPassed}\u7ea7`,e.txtLvRight.string=`${t.lvCurrent}\u7ea7`,e.txtDmgLeft.string=`${p.default.GetDisplayDmgByPower(t.idCfg,m.default.ParseLevToPower(t.lvPassed))}`,e.txtDmgRight.string=`${p.default.GetDisplayDmgByPower(t.idCfg,m.default.ParseLevToPower(t.lvCurrent))}`}})],childrenCreator:[c.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerLeft,uiNodeCreator:(e,t,o)=>{o.push(h.default.GetNodeTypeForIconUI(e.idCfg).CreateNode(e,null,e.idCfg))}}),c.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerRight,uiNodeCreator:(e,t,o)=>{o.push(h.default.GetNodeTypeForIconUI(e.idCfg).CreateNode(e,null,e.idCfg))}})],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([y(cc.Node)],g.prototype,"containerLeft",void 0),a([y(cc.Node)],g.prototype,"containerRight",void 0),a([y(cc.Label)],g.prototype,"txtLvLeft",void 0),a([y(cc.Label)],g.prototype,"txtLvRight",void 0),a([y(cc.Label)],g.prototype,"txtDmgLeft",void 0),a([y(cc.Label)],g.prototype,"txtDmgRight",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../game_element/equipment/EquipmentInstRS":"EquipmentInstRS","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip"}],EquipmentPreviewViewState:[function(e,t,o){"use strict";cc._RF.push(t,"a63e65aDPVHAZ1jkH70N/KW","EquipmentPreviewViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexLayer"),l=e("../../GameCommon"),c=e("../voice_ogg/VoiceOggViewState");class d extends s.default{constructor(){super(n.default.GAME,s.default.BG_TYPE.MASK,!0)}static Pop(e,t,o){let a=i.default.Pop(d._t,e);return a.idCfg=t,a.count=o,a}OnMaskTouch(){c.default.inst.VoiceSet(l.default.BTN_VOICE),r.default.mgrUI.Close(this._idView)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"EquipmentPreviewViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],EquipmentPreviewView:[function(e,t,o){"use strict";cc._RF.push(t,"e0c5dYTMMtIA5g1rIkIi/u7","EquipmentPreviewView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/config/src/CfgEquipmentProps"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../../IndexStorageItem"),h=e("../../GameCommon"),f=e("../equipment_view/EquipmentViewEquip"),{ccclass:y,property:_}=cc._decorator,g="EquipmentView";let b=i=class extends u.default{constructor(){super(...arguments),this.txtName=null,this.txtInfo=null,this.containerEquip=null}};b.nodeType=d.default.Pop(g,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/item_equipment_reward_preview_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT],propsFilter:(e,t)=>{let o;for(let a=0;a<n.default.mgrData.Get(p.default.listEquipment).length;a++)n.default.mgrData.Get(p.default.listEquipment)[a].idCfg==t.idCfg&&(o=n.default.mgrData.Get(p.default.listEquipment)[a]);let i=n.default.mgrCfg.cfgEquipmentProps.select(s.default.idGetter,t.idCfg)._list[0];e.txtName.string=`${i.name}`,e.txtInfo.string=i.info}})],childrenCreator:[d.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerEquip,uiNodeCreator:(e,t,o)=>{o.push(f.default.GetNodeTypeForIconUI(e.idCfg).CreateNode(e,null,null))}})],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.scaleInForTemp200}),a([_(cc.Label)],b.prototype,"txtName",void 0),a([_(cc.Label)],b.prototype,"txtInfo",void 0),a([_(cc.Node)],b.prototype,"containerEquip",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip"}],EquipmentViewBackpackPropArgs:[function(e,t,o){"use strict";cc._RF.push(t,"74a48PJ8hBE+L8n1SRQTdst","EquipmentViewBackpackPropArgs"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.grey=t,o}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"EquipmentViewBackpackPropArgs"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],EquipmentViewBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"44301XSsLBO0ZDeOxkNTvy9","EquipmentViewBackpackProp");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/basic/UtilObjPool"),l=e("../../../frame/basic/UtilObjPoolType"),c=e("../../../frame/config/src/CfgBackpackProp"),d=e("../../../frame/global/Jiang"),u=e("../../../frame/ui/UINodeInstEnterRS"),m=e("../../../frame/ui/UINodeInstHideRS"),p=e("../../../frame/ui/UINodeType"),h=e("../../../frame/ui/UIViewComponent"),{ccclass:f,property:y}=cc._decorator,_="EquipmentViewBackpackProp";let g=i=class extends h.default{constructor(){super(...arguments),this.nodeLight=null}static GetNodeTypeForUI(e){let t=d.default.mgrCfg.cfgBackpackProp.select(c.default.idGetter,e)._list[0];return i.GetNodeTypeRes(t.res_ui)}static GetNodeTypeForScene(e){let t=d.default.mgrCfg.cfgBackpackProp.select(c.default.idGetter,e)._list[0];return i.GetNodeTypeRes(t.res_scene)}static GetNodeTypeRes(e){return i._mapResToNodeType.has(e)||i._mapResToNodeType.set(e,p.default.Pop(_,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[p.default.ModuleStyle.Pop(_,{listRefModule:[r.default.DEFAULT],propsFilter:e=>{e.node.x=0,e.node.y=0,e.nodeLight.color=this._colorLight}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:m.default.localScale0,enterRS:u.default.scaleInForPrefab200})),i._mapResToNodeType.get(e)}};g._colorLight=new cc.Color(255,230,0,255),g._mapResToNodeType=n.default.Pop(n.default.typeMap,_),a([y(cc.Node)],g.prototype,"nodeLight",void 0),function(e){class t{constructor(){}static Pop(e,o){let i=n.default.Pop(t._t,e);return i.grey=o,i}}t._t=new l.default({instantiate:()=>new t,onPop:()=>{},onPush:()=>{},tag:_}),e.Args=t,e.bcType=s.default.Pop(_,(e,t)=>e.grey==t.grey,e=>{n.default.Push(e)},e=>t.Pop(_,e.grey))}((g=i=a([f],g))||(g={})),o.default=g,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],EquipmentViewBtnEquip:[function(e,t,o){"use strict";cc._RF.push(t,"df292fV4ZtMc4ikeQE6nDt+","EquipmentViewBtnEquip");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../IndexStorageItem"),n=e("../../../frame/basic/BCType"),l=e("../../../frame/component/ComponentNodeEventer"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstEnterRS"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../../../frame/ui/UINodeType"),p=e("../../../frame/ui/UIViewComponent"),h=e("../../GameCommon"),f=e("../tips_view/TipsViewState"),y=e("../voice_ogg/VoiceOggViewState"),_=e("./EquipmentViewEquip"),{ccclass:g,property:b}=cc._decorator,S="EquipmentViewBtnEquip";let P=i=class extends p.default{constructor(){super(...arguments),this.btnUnEquip=null,this.btnEquip=null,this.txtNum=[],this.containerCurrentEquip=null}};P.nodeType=m.default.Pop(S,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/item_backpack_prop_equipment_view_detail_app`,componentGetter:e=>e.getComponent(i),listModuleStyle:[m.default.ModuleStyle.Pop(S,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_EQUIP],propsFilter:(e,t,o)=>{let i=c.default.mgrData.Get(s.default.listCurrentEquiped),a=t.stateEquip.statusEquipment.idCurrRead,n=t.stateEquip.mapEquipedIdToNum.get(a),l=i[o],d=o;e.btnUnEquip.node.active=n==o,e.btnUnEquip.evterTouchStart.On(()=>{y.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.btnUnEquip.evterTouchEnd.On(()=>{1!=i.map(e=>0!=e).length?(i[n]=0,s.default.listCurrentEquiped.media.onSet(),c.default.mgrUI.ModuleRefresh(r.default.INDEXVIEW_EQUIP)):f.default.inst.Tip("\u4e0d\u53ef\u5378\u8f7d\u552f\u4e00\u88c5\u5907\uff01")}),e.btnEquip.node.active=n!=o,e.btnEquip.evterTouchStart.On(()=>{y.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.btnEquip.evterTouchEnd.On(()=>{null==n?i[d]=a:(i[n]=l,i[d]=a),s.default.listCurrentEquiped.media.onSet(),c.default.mgrUI.ModuleRefresh(r.default.INDEXVIEW_EQUIP)});for(let r=0;r<e.txtNum.length;r++)e.txtNum[r].string=`${o+1}`}})],childrenCreator:[m.default.ChildrenGeneration.Pop(S,{containerGetter:e=>e.containerCurrentEquip,uiNodeCreator:(e,t,o)=>{let i=c.default.mgrData.Get(s.default.listCurrentEquiped)[t];null!=i&&0!=i&&o.push(_.default.GetNodeTypeForIconPlayView(i).CreateNode(e,null,null))}})],propsType:n.default.typeNumber,hideRS:u.default.setParentNull,enterRS:d.default.none}),a([b(l.default)],P.prototype,"btnUnEquip",void 0),a([b(l.default)],P.prototype,"btnEquip",void 0),a([b([cc.Label])],P.prototype,"txtNum",void 0),a([b(cc.Node)],P.prototype,"containerCurrentEquip",void 0),P=i=a([g],P),o.default=P,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../tips_view/TipsViewState":"TipsViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./EquipmentViewEquip":"EquipmentViewEquip"}],EquipmentViewDetailBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"02350be+AtFprPSUxOuFPfW","EquipmentViewDetailBackpackProp");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/config/src/CfgBackpackProp"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("./EquipmentViewBackpackProp"),{ccclass:f,property:y}=cc._decorator,_="EquipmentViewDetailBackpackProp";let g=i=class extends m.default{constructor(){super(...arguments),this.txtName=null,this.txtInfo=null,this.containerTemp=null}};g.nodeType=u.default.Pop(_,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/item_backpack_prop_equipment_view_detail`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(_,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_EQUIP],propsFilter:(e,t)=>{let o=t.stateEquip.mapIdToBackpackPropRec.get(t.stateEquip.statusBackpackProp.idCurrRead),i=l.default.mgrCfg.cfgBackpackProp.select(n.default.idGetter,o.idCfg)._list[0];e.txtName.string=i.name,e.txtInfo.string=i.txt_info}})],childrenCreator:[u.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerTemp,uiNodeCreator:(e,t,o)=>{let i=e.stateEquip.mapIdToBackpackPropRec.get(e.stateEquip.statusBackpackProp.idCurrRead);o.push(h.default.GetNodeTypeForUI(i.idCfg).CreateNode(e,null,null))}})],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([y(cc.Label)],g.prototype,"txtName",void 0),a([y(cc.Label)],g.prototype,"txtInfo",void 0),a([y(cc.Node)],g.prototype,"containerTemp",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./EquipmentViewBackpackProp":"EquipmentViewBackpackProp"}],EquipmentViewDetailEquip:[function(e,t,o){"use strict";cc._RF.push(t,"7ebb99+5aJIqafHme7nbe9y","EquipmentViewDetailEquip");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilMath"),n=e("../../../frame/config/src/CfgEquipmentProps"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../../IndexDataModule"),h=e("../../game_element/equipment/EquipmentInstRS"),f=e("../../GameCommon"),y=e("../../GameMath"),_=e("./EquipmentViewBtnEquip"),g=e("./EquipmentViewEquip"),{ccclass:b,property:S}=cc._decorator,P="EquipmentViewDetailEquip";let B=i=class extends m.default{constructor(){super(...arguments),this.txtPropsAtk=null,this.txtPropsCost=null,this.txtCd=null,this.txtDmgNextLevel=null,this.txtLvCurrent=null,this.txtLvNext=null,this.txtCountOwned=null,this.txtCountNeed=null,this.sprProgress=null,this.txtInfo=null,this.nodeInitWidth=null,this.txtName=null,this.containerBtnEquip=null,this.containerCurrRead=null}onLoad(){this.initWidth=this.nodeInitWidth.width}};B.nodeType=u.default.Pop(P,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/item_equipment_equipment_view_detail`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(P,{listRefModule:[p.default.DEFAULT,p.default.INDEXVIEW_EQUIP],propsFilter:(e,t)=>{let o=t.stateEquip.mapIdToEquipRec.get(t.stateEquip.statusEquipment.idCurrRead),i=y.default.equip.ParseCountToPower(o.count),a=y.default.ParsePowerToLev(i),r=y.default.ParseLevToPower(a),c=a+1,d=y.default.ParseLevToPower(c),u=l.default.mgrCfg.cfgEquipmentProps.select(n.default.idGetter,o.idCfg)._list[0];e.txtPropsAtk.string=`\u4f24\u5bb3: ${s.default.ParseNumToKMBTAABB(h.default.GetDisplayDmgByPower(u.id,r),Math.floor)}`,e.txtPropsCost.string=`\u6d88\u8017: ${h.default.GetDisplayCost(u.id)}`,e.txtCd.string=`\u95f4\u9694: ${h.default.GetDisplaySpacing(u.id)} s`,e.txtDmgNextLevel.string=`${s.default.ParseNumToKMBTAABB(h.default.GetDisplayDmgByPower(u.id,d),Math.floor)}`;let m=y.default.equip.ParsePowerToCount(r),p=y.default.ParseLevToPower(c),f=y.default.equip.ParsePowerToCount(p);e.txtLvCurrent.node.active=!0,e.txtLvNext.node.active=!0,e.txtLvCurrent.string=`${a}\u7ea7`,e.txtLvNext.string=`${c}\u7ea7`,e.txtCountOwned.string=`${s.default.ParseNumToKMBTAABB(o.count-m,Math.floor)}`,e.txtCountNeed.string=`${s.default.ParseNumToKMBTAABB(f-m,Math.ceil)}`,e.sprProgress.node.width=Math.floor(o.count-m)/Math.ceil(f-m)*e.initWidth,e.txtInfo.string=`${u.info}`,e.txtName.string=`${u.name}`}})],childrenCreator:[u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerBtnEquip,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.stateEquip.equipAbleCount;i++)o.push(_.default.nodeType.CreateNode(e,i,i))}}),u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerCurrRead,uiNodeCreator:(e,t,o)=>{let i=e.stateEquip.mapIdToEquipRec.get(e.stateEquip.statusEquipment.idCurrRead);o.push(g.default.GetNodeTypeForIconUI(i.idCfg).CreateNode(e,1,i.idCfg))}})],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([S(cc.Label)],B.prototype,"txtPropsAtk",void 0),a([S(cc.Label)],B.prototype,"txtPropsCost",void 0),a([S(cc.Label)],B.prototype,"txtCd",void 0),a([S(cc.Label)],B.prototype,"txtDmgNextLevel",void 0),a([S(cc.Label)],B.prototype,"txtLvCurrent",void 0),a([S(cc.Label)],B.prototype,"txtLvNext",void 0),a([S(cc.Label)],B.prototype,"txtCountOwned",void 0),a([S(cc.Label)],B.prototype,"txtCountNeed",void 0),a([S(cc.Sprite)],B.prototype,"sprProgress",void 0),a([S(cc.Label)],B.prototype,"txtInfo",void 0),a([S(cc.Node)],B.prototype,"nodeInitWidth",void 0),a([S(cc.Label)],B.prototype,"txtName",void 0),a([S(cc.Node)],B.prototype,"containerBtnEquip",void 0),a([S(cc.Node)],B.prototype,"containerCurrRead",void 0),B=i=a([b],B),o.default=B,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../game_element/equipment/EquipmentInstRS":"EquipmentInstRS","./EquipmentViewBtnEquip":"EquipmentViewBtnEquip","./EquipmentViewEquip":"EquipmentViewEquip"}],EquipmentViewEquip:[function(e,t,o){"use strict";cc._RF.push(t,"0c738dIwXlCLopGds98jyqI","EquipmentViewEquip");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/config/src/CfgEquipmentProps"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/sdk/MgrSdk"),d=e("../../../frame/ui/UINodeInstEnterRS"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../../../frame/ui/UINodeType"),p=e("../../../frame/ui/UIViewComponent"),h=e("../../../IndexDataModule"),{ccclass:f,property:y}=cc._decorator,_="GameOptionsViewReward";let g=i=class extends p.default{constructor(){super(...arguments),this.nodeLight=null}static GetNodeTypeForIconUI(e){let t=l.default.mgrCfg.cfgEquipmentProps.select(n.default.idGetter,e)._list[0];return i.GetNodeTypeByRes(t.icon_ui)}static GetNodeTypeForIconScene(e){let t=l.default.mgrCfg.cfgEquipmentProps.select(n.default.idGetter,e)._list[0];return i.GetNodeTypeByRes(t.icon_scene)}static GetNodeTypeForIconPlayView(e){let t=l.default.mgrCfg.cfgEquipmentProps.select(n.default.idGetter,e)._list[0];return i.GetNodeTypeByResForToggle(t.icon_play_view)}static GetNodeTypeByRes(e){return i._map0.has(e)||i._map0.set(e,m.default.Pop(_,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[m.default.ModuleStyle.Pop(_,{listRefModule:[h.default.DEFAULT],propsFilter:(e,t,o)=>{if(e.node.x=0,e.node.y=0,null!=e.nodeLight)switch(o){case 1:e.nodeLight.active=!0,e.nodeLight.color=i._colorGrey;break;case 2:e.nodeLight.active=!1;break;default:e.nodeLight.active=!0,e.nodeLight.color=i._colorLight}else c.default.inst.Log(`com.node.name[${e.node.name}]\u5f02\u5e38`)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:u.default.localScale0,enterRS:d.default.scaleInForPrefab200})),i._map0.get(e)}static GetNodeTypeByResForToggle(e){return i._map1.has(e)||i._map1.set(e,m.default.Pop(_,{prefabPath:e,componentGetter:e=>e.getComponent(p.default),listModuleStyle:[m.default.ModuleStyle.Pop(_,{listRefModule:[h.default.DEFAULT],propsFilter:e=>{e.node.x=0,e.node.y=0}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:u.default.localScale0,enterRS:d.default.none})),i._map1.get(e)}};g._colorLight=new cc.Color(255,230,0,255),g._colorGrey=new cc.Color(200,200,200,255),g._map0=s.default.Pop(s.default.typeMap,_),g._map1=s.default.Pop(s.default.typeMap,_),a([y(cc.Node)],g.prototype,"nodeLight",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/global/Jiang":"Jiang","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],EquipmentViewItemBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"cc20a52naVA7b3JRJcbjBEd","EquipmentViewItemBackpackProp");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../IndexStorageItem"),n=e("../../../frame/basic/BCType"),l=e("../../../frame/basic/UtilMath"),c=e("../../../frame/component/ComponentNodeEventer"),d=e("../../../frame/config/src/CfgBackpackProp"),u=e("../../../frame/global/Jiang"),m=e("../../../frame/ui/UINodeInstEnterRS"),p=e("../../../frame/ui/UINodeInstHideRS"),h=e("../../../frame/ui/UINodeType"),f=e("../../../frame/ui/UIViewComponent"),y=e("../../GameCommon"),_=e("../voice_ogg/VoiceOggViewState"),g=e("./EquipmentViewBackpackProp"),{ccclass:b,property:S}=cc._decorator,P="EquipmentViewItemBackpackProp";let B=i=class extends f.default{constructor(){super(...arguments),this.btnSelect=null,this.containerBackpackProp=null,this.nodeCount=null,this.txtCount=null,this.nodeFresh=null}};B.nodeType=h.default.Pop(P,{prefabPath:`${y.default.SUB_MAIN}/prefab_ui/item_backpack_prop_equipment_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[h.default.ModuleStyle.Pop(P,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_EQUIP],propsFilter:(e,t,o)=>{t.stateEquip.layout.SetElePos(e.node,o);let i=t.stateEquip.mapIdToBackpackPropRec.get(o);u.default.mgrCfg.cfgBackpackProp.select(d.default.idGetter,i.idCfg)._list[0],t.stateEquip.statusBackpackProp==t.stateEquip.currStatus&&t.stateEquip.statusBackpackProp.idCurrRead==i.idCfg||e.btnSelect.evterTouchEnd.On(()=>{_.default.inst.VoiceSet(y.default.BTN_VOICE),i.isRead=!0,s.default.listBackpackProp.media.onSet(),t.stateEquip.currStatus.OnBackpackProp(i.idCfg),u.default.mgrUI.ModuleRefresh(r.default.INDEXVIEW_EQUIP),u.default.mgrUI.ModuleRefresh(r.default.RED_DOT)});let a=Math.floor(i.count);e.nodeCount.active=1!=a,e.nodeCount.active&&(e.txtCount.string=`${l.default.ParseNumToKMBTAABB(a,Math.floor)}`),e.nodeFresh.active=!i.isRead}})],childrenCreator:[h.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerBackpackProp,uiNodeCreator:(e,t,o)=>{let i=e.stateEquip.mapIdToBackpackPropRec.get(t);o.push(g.default.GetNodeTypeForUI(i.idCfg).CreateNode(e,null,null))}})],propsType:n.default.typeNumber,hideRS:p.default.localScale0,enterRS:m.default.opacityInForPrefab200}),a([S(c.default)],B.prototype,"btnSelect",void 0),a([S(cc.Node)],B.prototype,"containerBackpackProp",void 0),a([S(cc.Node)],B.prototype,"nodeCount",void 0),a([S(cc.Label)],B.prototype,"txtCount",void 0),a([S(cc.Node)],B.prototype,"nodeFresh",void 0),B=i=a([b],B),o.default=B,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./EquipmentViewBackpackProp":"EquipmentViewBackpackProp"}],EquipmentViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"ac387RGd5BImZFxPjhTLmQQ","EquipmentViewItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/config/src/CfgEquipmentProps"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../../IndexDataModule"),h=e("../../../IndexStorageItem"),f=e("../../GameCommon"),y=e("../../GameMath"),_=e("../voice_ogg/VoiceOggViewState"),g=e("./EquipmentViewEquip"),{ccclass:b,property:S}=cc._decorator,P="EquipmentViewItem";let B=i=class extends m.default{constructor(){super(...arguments),this.btnSelect=null,this.containerEquipment=null,this.txtLv=null,this.nodeEquip=null,this.txtEquip=null,this.nodeFresh=null}};B.nodeType=u.default.Pop(P,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/item_equipment_equipment_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(P,{listRefModule:[p.default.DEFAULT,p.default.INDEXVIEW_EQUIP],propsFilter:(e,t,o)=>{t.stateEquip.layout.SetElePos(e.node,o);let i=t.stateEquip.mapIdToEquipRec.get(o),a=y.default.equip.ParseCountToPower(i.count),r=y.default.ParsePowerToLev(a);l.default.mgrCfg.cfgEquipmentProps.select(n.default.idGetter,i.idCfg)._list[0],t.stateEquip.statusEquipment==t.stateEquip.currStatus&&t.stateEquip.statusEquipment.idCurrRead==i.idCfg||e.btnSelect.evterTouchEnd.On(()=>{_.default.inst.VoiceSet(f.default.BTN_VOICE),i.isRead=!0,h.default.listEquipment.media.onSet(),t.stateEquip.currStatus.OnEquipment(i.idCfg),l.default.mgrUI.ModuleRefresh(p.default.INDEXVIEW_EQUIP),l.default.mgrUI.ModuleRefresh(p.default.RED_DOT)}),e.txtLv.string=`${r}\u7ea7`,e.nodeFresh.active=!i.isRead,e.nodeEquip.active=t.stateEquip.mapEquipedIdToNum.has(i.idCfg),e.nodeEquip.active&&(e.txtEquip.string=`E${t.stateEquip.mapEquipedIdToNum.get(i.idCfg)+1}`)}})],childrenCreator:[u.default.ChildrenGeneration.Pop(P,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{let i=e.stateEquip.mapIdToEquipRec.get(t);o.push(g.default.GetNodeTypeForIconUI(i.idCfg).CreateNode(e,null,null))}})],propsType:r.default.typeNumber,hideRS:d.default.localScale0,enterRS:c.default.opacityInForPrefab200}),a([S(s.default)],B.prototype,"btnSelect",void 0),a([S(cc.Node)],B.prototype,"containerEquipment",void 0),a([S(cc.Label)],B.prototype,"txtLv",void 0),a([S(cc.Node)],B.prototype,"nodeEquip",void 0),a([S(cc.Label)],B.prototype,"txtEquip",void 0),a([S(cc.Node)],B.prototype,"nodeFresh",void 0),B=i=a([b],B),o.default=B,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./EquipmentViewEquip":"EquipmentViewEquip"}],EquipmentViewNodeSelect:[function(e,t,o){"use strict";cc._RF.push(t,"cf488F9updDF45UdkQQsUvQ","EquipmentViewNodeSelect");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),m="EquipmentViewNodeSelect",{ccclass:p,property:h}=cc._decorator;let f=i=class extends d.default{};f.nodeType=c.default.Pop(m,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/equipment_view_node_select`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(m,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_EQUIP],propsFilter:(e,t)=>{let o=t.stateEquip.currStatus.OnIdxGlobal(),i=t.stateEquip.listShouldDisplayAll[o];t.stateEquip.layout.SetElePos(e.node,i.idCfg)}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),f=i=a([p],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],EquipmentViewSelectStatusBackpackProp:[function(e,t,o){"use strict";cc._RF.push(t,"09f1bYZUe5PRalL6WafrEMG","EquipmentViewSelectStatusBackpackProp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../game_element/body/GameCfgBodyCacheDropRS"),s=e("./EquipmentViewDetailBackpackProp"),n=e("./EquipmentViewSelectStatus");class l extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnBackpackProp(e){this.idCurrRead=e}OnEquipment(e){this.relMachine.EnterStatus(this.relMachine.statusEquipment),this.relMachine.currStatus.OnEquipment(e)}OnIdxGlobal(){return this.relMachine.listShouldDisplayAll.findIndex(e=>e.rs==r.default.xlsxBackpackProp&&e.idCfg==this.idCurrRead)}OnChildren(e,t){t.push(s.default.nodeType.CreateNode(e,this.idCurrRead,this.idCurrRead))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:"EquipmentViewSelectStatusBackpackProp"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","./EquipmentViewDetailBackpackProp":"EquipmentViewDetailBackpackProp","./EquipmentViewSelectStatus":"EquipmentViewSelectStatus"}],EquipmentViewSelectStatusEquipment:[function(e,t,o){"use strict";cc._RF.push(t,"8f91d1Zj0FF4L4x4GNgxunx","EquipmentViewSelectStatusEquipment"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../game_element/body/GameCfgBodyCacheDropRS"),s=e("./EquipmentViewDetailEquip"),n=e("./EquipmentViewSelectStatus");class l extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnBackpackProp(e){this.relMachine.EnterStatus(this.relMachine.statusBackpackProp),this.relMachine.currStatus.OnBackpackProp(e)}OnEquipment(e){this.idCurrRead=e}OnIdxGlobal(){return this.relMachine.listShouldDisplayAll.findIndex(e=>e.rs==r.default.xlsxEquipment&&e.idCfg==this.idCurrRead)}OnChildren(e,t){t.push(s.default.nodeType.CreateNode(e,this.idCurrRead,this.idCurrRead))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:"EquipmentViewSelectStatusEquipment"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","./EquipmentViewDetailEquip":"EquipmentViewDetailEquip","./EquipmentViewSelectStatus":"EquipmentViewSelectStatus"}],EquipmentViewSelectStatus:[function(e,t,o){"use strict";cc._RF.push(t,"c344eWlNIVBcbAohVykPAcS","EquipmentViewSelectStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnBackpackProp(e){}OnEquipment(e){}},cc._RF.pop()},{}],EquipmentViewStateItem:[function(e,t,o){"use strict";cc._RF.push(t,"39a6bhDc6NIYLFq3rzhVtwa","EquipmentViewStateItem"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t,o){let a=i.default.Pop(r._t,e);return a.rs=t,a.idCfg=o,a}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"EquipmentViewStateItem"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],EquipmentViewState:[function(e,t,o){"use strict";cc._RF.push(t,"6982awlr8dEeKkKwu3So9CE","EquipmentViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/layout/Layout"),a=e("../../../frame/basic/layout/LayoutAlignmentHorCenter"),r=e("../../../frame/basic/layout/LayoutAlignmentVerMiddle"),s=e("../../../frame/basic/layout/LayoutConstraintColumn"),n=e("../../../frame/basic/layout/LayoutStartAxisHor"),l=e("../../../frame/basic/layout/LayoutStartCornerHorLeft"),c=e("../../../frame/basic/layout/LayoutStartCornerVerUpper"),d=e("../../../frame/basic/UtilObjPool"),u=e("../../../frame/basic/UtilObjPoolType"),m=e("../../../frame/global/Jiang"),p=e("../../../IndexDataModule"),h=e("../../../IndexStorageItem"),f=e("../../game_element/body/GameCfgBodyCacheDropRS"),y=e("./EquipmentViewSelectStatusBackpackProp"),_=e("./EquipmentViewSelectStatusEquipment"),g=e("./EquipmentViewStateItem"),b="EquipmentViewState";class S{constructor(){this.scrollY=0,this.childrenAble=!1,this.equipAbleCount=2,this.mapEquipedIdToNum=d.default.Pop(d.default.typeMap,b),this.listDisplayBackpackProp=d.default.Pop(d.default.typeArray,b),this.mapIdToBackpackPropRec=d.default.Pop(d.default.typeMap,b),this.listDisplayEquip=d.default.Pop(d.default.typeArray,b),this.mapIdToEquipRec=d.default.Pop(d.default.typeMap,b),this.listShouldDisplayAll=d.default.Pop(d.default.typeArray,b),this.mapIdToRec=d.default.Pop(d.default.typeMap,b),this.mapIdCfgToPrevious=d.default.Pop(d.default.typeMap,b)}static Pop(e){let t=d.default.Pop(S._t,e);t.layout=i.default.Pop(b,{paddingTop:S.PADDING,paddingRight:S.PADDING,paddingBottom:S.PADDING,paddingLeft:S.PADDING,spacingColumn:S.SPACING,spacingRow:S.SPACING,defSizeWidth:S.ITEM_WIDTH,defSizeHeight:S.ITEM_HEIGHT,startCornerHor:l.default.inst,startCornerVer:c.default.inst,startAxis:n.default.inst,constraint:s.default.five,alignmentHor:a.default.inst,alignmentVer:r.default.inst});let o=m.default.mgrData.Get(h.default.listCurrentEquiped);for(;o.length<t.equipAbleCount;)o.push(0),h.default.listCurrentEquiped.media.onSet();return t.OnChange(p.default.INDEXVIEW_EQUIP),t.statusBackpackProp=y.default.Pop(b,t),t.statusEquipment=_.default.Pop(b,t),t.EnterStatus(t.statusEquipment),t.currStatus.OnEquipment(t.listDisplayEquip[0].idCfg),t}UpdateActive(){this.layout.UpdateActive(0,this.scrollY,S.VIEW_WIDTH,S.VIEW_HEIGHT),m.default.mgrUI.ModuleRefresh(p.default.RELOAD)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnChange(e){if(e!=p.default.DEFAULT&&e!=p.default.INDEXVIEW_EQUIP)return;this.listDisplayBackpackProp.length=0,this.listDisplayBackpackProp.push(...m.default.mgrData.Get(h.default.listBackpackProp)),this.mapIdToBackpackPropRec.clear();for(let o=0;o<this.listDisplayBackpackProp.length;o++){let e=this.listDisplayBackpackProp[o];this.mapIdToBackpackPropRec.set(e.idCfg,e)}this.listDisplayEquip.length=0,this.listDisplayEquip.push(...m.default.mgrData.Get(h.default.listEquipment)),this.mapIdToEquipRec.clear();for(let o=0;o<this.listDisplayEquip.length;o++){let e=this.listDisplayEquip[o];this.mapIdToEquipRec.set(e.idCfg,e)}this.mapEquipedIdToNum.clear();let t=m.default.mgrData.Get(h.default.listCurrentEquiped);for(let o=0;o<t.length;o++){let e=t[o];0!=e&&this.mapEquipedIdToNum.set(e,o)}for(let o=0;o<this.listShouldDisplayAll.length;o++){let e=this.listShouldDisplayAll[o];d.default.Push(e)}this.listShouldDisplayAll.length=0,this.mapIdCfgToPrevious.has(f.default.xlsxBackpackProp.code)||this.mapIdCfgToPrevious.set(f.default.xlsxBackpackProp.code,d.default.Pop(d.default.typeMap,b));for(let o=0;o<this.listDisplayBackpackProp.length;o++){let e=g.default.Pop(b,f.default.xlsxBackpackProp,this.listDisplayBackpackProp[o].idCfg);this.listShouldDisplayAll.push(e),this.mapIdCfgToPrevious.get(f.default.xlsxBackpackProp.code).set(e.idCfg,this.listDisplayBackpackProp[o].count)}this.mapIdCfgToPrevious.has(f.default.xlsxEquipment.code)||this.mapIdCfgToPrevious.set(f.default.xlsxEquipment.code,d.default.Pop(d.default.typeMap,b));for(let o=0;o<this.listDisplayEquip.length;o++){let e=g.default.Pop(b,f.default.xlsxEquipment,this.listDisplayEquip[o].idCfg);this.listShouldDisplayAll.push(e),this.mapIdCfgToPrevious.get(f.default.xlsxEquipment.code).set(e.idCfg,this.listDisplayEquip[o].count)}this.mapIdToRec.clear();for(let o=0;o<this.listShouldDisplayAll.length;o++){let e=this.listShouldDisplayAll[o];this.mapIdToRec.set(e.idCfg,e)}this.listShouldDisplayAll.sort((e,t)=>{if(e.rs!=t.rs)return e.rs.code-t.rs.code;let o=this.mapIdCfgToPrevious.get(e.rs.code).get(e.idCfg);return this.mapIdCfgToPrevious.get(t.rs.code).get(t.idCfg)-o}),this.layout.Clear();for(let o=0;o<this.listShouldDisplayAll.length;o++){let e=this.listShouldDisplayAll[o];this.layout.Create(S.ITEM_WIDTH,S.ITEM_HEIGHT,e.idCfg)}this.layout.UpdatePos(),this.UpdateActive()}}S._t=new u.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),function(e){e.PADDING=5,e.VIEW_WIDTH=530,e.VIEW_HEIGHT=550,e.SPACING=10,e.ITEM_WIDTH=100,e.ITEM_HEIGHT=100}(S||(S={})),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/basic/layout/Layout":"Layout","../../../frame/basic/layout/LayoutAlignmentHorCenter":"LayoutAlignmentHorCenter","../../../frame/basic/layout/LayoutAlignmentVerMiddle":"LayoutAlignmentVerMiddle","../../../frame/basic/layout/LayoutConstraintColumn":"LayoutConstraintColumn","../../../frame/basic/layout/LayoutStartAxisHor":"LayoutStartAxisHor","../../../frame/basic/layout/LayoutStartCornerHorLeft":"LayoutStartCornerHorLeft","../../../frame/basic/layout/LayoutStartCornerVerUpper":"LayoutStartCornerVerUpper","../../../frame/global/Jiang":"Jiang","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","./EquipmentViewSelectStatusBackpackProp":"EquipmentViewSelectStatusBackpackProp","./EquipmentViewSelectStatusEquipment":"EquipmentViewSelectStatusEquipment","./EquipmentViewStateItem":"EquipmentViewStateItem"}],EquipmentView:[function(e,t,o){"use strict";cc._RF.push(t,"7a041tnEK9Om76bd0ebHM7g","EquipmentView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIRoot"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../GameCommon"),h=e("./EquipmentViewNodeSelect"),f=e("./EquipmentViewState"),{ccclass:y,property:_}=cc._decorator,g="EquipmentView";let b=i=class extends u.default{constructor(){super(...arguments),this.containerGrid=null,this.containerDetail=null,this.scroll=null,this.containerNodeSelect=null,this.nodeBgTiled=null}};b.nodeType=c.default.Pop(g,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/equipment_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_EQUIP],propsFilter:(e,t)=>{e.scroll.scroll.content.width=t.stateEquip.layout.containerWidth,e.scroll.scroll.content.height=t.stateEquip.layout.containerHeight,e.scroll.scroll.enabled=t.stateEquip.scrollEnable,e.scroll.scroll.content.y=t.stateEquip.layout.containerHeight-t.stateEquip.scrollY-f.default.VIEW_HEIGHT,e.scroll.evterScrolling.On(()=>{t.stateEquip.scrollY=t.stateEquip.layout.containerHeight-e.scroll.scroll.content.y-f.default.VIEW_HEIGHT,t.stateEquip.UpdateActive(),d.default.inst.update(0)}),e.nodeBgTiled.width=t.stateEquip.layout.containerWidth,e.nodeBgTiled.height=Math.max(t.stateEquip.layout.containerHeight,2*f.default.PADDING+5*(f.default.ITEM_HEIGHT+f.default.SPACING)-f.default.SPACING)}}),c.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_CHILDREN_ABLE],propsFilter:()=>{}})],childrenCreator:[c.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerDetail,uiNodeCreator:(e,t,o)=>{e.stateEquip.currStatus.OnChildren(e,o)}}),c.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerGrid,uiNodeCreator:(e,t,o)=>{if(!e.stateEquip.childrenAble)return;let i=e.stateEquip.layout;for(let a=i._recVerEnd;i._recHorStart<=a;a--){let t=i.listRow[a];for(let a=i._recHorStart;a<=i._recHorEnd;a++){let i=t.listEle[a];if(null==i)continue;let r=e.stateEquip.mapIdToRec.get(i.id);r.rs.onEquipmentViewDisplay(e,o,r.idCfg)}}}}),c.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerNodeSelect,uiNodeCreator:(e,t,o)=>{e.stateEquip.childrenAble&&o.push(h.default.nodeType.CreateNode(e,0,0))}})],propsType:r.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([_(cc.Node)],b.prototype,"containerGrid",void 0),a([_(cc.Node)],b.prototype,"containerDetail",void 0),a([_(s.default)],b.prototype,"scroll",void 0),a([_(cc.Node)],b.prototype,"containerNodeSelect",void 0),a([_(cc.Node)],b.prototype,"nodeBgTiled",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIRoot":"UIRoot","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./EquipmentViewNodeSelect":"EquipmentViewNodeSelect","./EquipmentViewState":"EquipmentViewState"}],ExitViewState:[function(e,t,o){"use strict";cc._RF.push(t,"3d488mzKolFcbb90GukuJs7","ExitViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/ui/ViewState");class n extends s.default{constructor(){super(i.default.CTRL,s.default.BG_TYPE.MASK,!1)}static Pop(e){return a.default.Pop(n._t,e)}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"ExitViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState"}],ExitView:[function(e,t,o){"use strict";cc._RF.push(t,"7d20341/EpA8o7Nwyp3xe84","ExitView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/sdk/MgrSdk"),l=e("../../../frame/sdk/wx/MgrSdkCoreWX"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),{ccclass:h,property:f}=cc._decorator;let y=i=class extends m.default{constructor(){super(...arguments),this.txtTips=null}};y.nodeType=u.default.Pop("ExitView",{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/exit_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop("ExitView",{listRefModule:[r.default.EXIT],propsFilter:e=>{e.txtTips.string=`\u5df2\u5728${n.default.inst.IsPc()?"\u624b\u673a":"\u7535\u8111"}\u767b\u5f55\uff0c\u5f53\u524d\u6570\u636e\u5931\u6548\n\uff08\u81ea\u52a8\u9000\u51fa${Math.ceil(l.default.inst.mgrLife.statusExitTips.msWait/1e3)}\u79d2\uff09`}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.opacityInForTemp200}),a([f(cc.Label)],y.prototype,"txtTips",void 0),y=i=a([h],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/sdk/wx/MgrSdkCoreWX":"MgrSdkCoreWX","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],FlashViewState:[function(e,t,o){"use strict";cc._RF.push(t,"18ba3qxPMNMjYY62DkzdFvv","FlashViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../frame/basic/BCPromiseCtrl"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/basic/UtilObjPoolType"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/ViewState"),d=e("../../game_element/common/AnimFlash"),u="FlashViewState",m=600,p=600;class h extends c.default{constructor(){super(i.default.SYSTEM,c.default.BG_TYPE.NONE,!0),this.promiseOut=r.default.Pop(u)}static Pop(e){return s.default.Pop(h._t,e)}OnInit(){this.animFlash=d.default.Pop(u,m,p),this.animFlash.currStatus.OnFlash(),this.listenIdUpdate=l.default.mgrEvter.evterUpdate.On(e=>{this.animFlash.currStatus.OnStep(e),l.default.mgrUI.ModuleRefresh(a.default.FLASH),this.animFlash.currStatus==this.animFlash.statusOut&&this.promiseOut.resolve(null),0==this.animFlash.rateVisibility&&l.default.mgrUI.Close(this._idView)})}OnDestory(){l.default.mgrEvter.evterUpdate.Off(this.listenIdUpdate)}}o.default=h,h._t=new n.default({instantiate:()=>new h,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../game_element/common/AnimFlash":"AnimFlash"}],FlashView:[function(e,t,o){"use strict";cc._RF.push(t,"82a73alwG9MEooMjLrcJqPp","FlashView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator;let h=i=class extends d.default{constructor(){super(...arguments),this.nodePureWhite=null}};h.nodeType=c.default.Pop("FlashView",{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/flash_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop("FlashView",{listRefModule:[r.default.FLASH],propsFilter:(e,t)=>{e.nodePureWhite.opacity=t.animFlash.Get255()}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Node)],h.prototype,"nodePureWhite",void 0),h=i=a([m],h),o.default=h,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],FontViewState:[function(e,t,o){"use strict";cc._RF.push(t,"ad5daRMGetCkJ6qmrfL4rFW","FontViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/ui/ViewState");class n extends s.default{constructor(){super(i.default.SYSTEM,s.default.BG_TYPE.NONE,!1)}static Pop(e){return a.default.Pop(n._t,e)}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"FontViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState"}],FontView:[function(e,t,o){"use strict";cc._RF.push(t,"3adc5rA7FlOoKlW/v96FUPe","FontView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/basic/UtilObjPool"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),{ccclass:h,property:f}=cc._decorator,y="FontView";let _=i=class extends m.default{constructor(){super(...arguments),this.listTxtFontC=[]}};_.nodeType=u.default.Pop(y,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/font_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(y,{listRefModule:[r.default.FONT],propsFilter:e=>{let t=n.default.Pop(n.default.typeArray,y);t.push("\u7ae0\u8282\u89e3\u9501KMBTAB:");for(let o=0;o<=9;o++)t.push(`${o}`);for(let o=0;o<l.default.mgrCfg.cfgScene._list.length;o++){let e=l.default.mgrCfg.cfgScene._list[o];t.push(e.name)}for(let o=0;o<e.listTxtFontC.length;o++)e.listTxtFontC[o].string=t.join("");setTimeout(()=>{e.node.active=!1},0)}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([f([cc.Label])],_.prototype,"listTxtFontC",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],GEEI_2004_args:[function(e,t,o){"use strict";cc._RF.push(t,"eb452W6G29J6pfCjscnGqBm","GEEI_2004_args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GEEI_2004_status_atk_a_start:[function(e,t,o){"use strict";cc._RF.push(t,"c4a88pWYjhBhKAdPmZPJvWu","GEEI_2004_status_atk_a_start"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2004_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.cAtkStartMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkBIng)}OnAnim(){return this.rel.args.cAtkStartAnim}OnMSKeep(){return this.rel.args.cAtkStartMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_a_start"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status_atk_b_ing:[function(e,t,o){"use strict";cc._RF.push(t,"51aa2WN3L9ChJrAbD8OQog9","GEEI_2004_status_atk_b_ing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2004_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.atkTime=this.rel.args.dAtkIngTimes,this.msWait=0,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&(this.rel.Fire(),this.atkTime--,0<this.atkTime?(this.msWait=this.rel.args.dAtkIngSpace,0==this.msWait&&this.MSCheck()):this.rel.EnterStatus(this.rel.statusAtkCEnd))}OnAnim(){return this.rel.args.dAtkIngAnim}OnMSKeep(){return(this.rel.args.dAtkIngTimes-1)*this.rel.args.dAtkIngSpace}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_b_ing"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status_atk_c_end:[function(e,t,o){"use strict";cc._RF.push(t,"8bf8bhUygtHNY2n0sB7J0rC","GEEI_2004_status_atk_c_end"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2004_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.eAtkEndMS,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusCD)}OnAnim(){return this.rel.args.eAtkEndAnim}OnMSKeep(){return this.rel.args.eAtkEndMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_c_end"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status_cd:[function(e,t,o){"use strict";cc._RF.push(t,"a6ce9chx3FN6qPAkO5OJBwp","GEEI_2004_status_cd"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2004_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.fCDMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusReady)}OnAnim(){return this.rel.args.fCDMSAnim}OnCd(){return this.rel.args.fCDMS<1e3?1:1-this.msWait/this.rel.args.fCDMS}OnMSKeep(){return this.rel.args.fCDMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_cd"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status_keep:[function(e,t,o){"use strict";cc._RF.push(t,"21d1e6QzuFHq6x7EQRbHtbG","GEEI_2004_status_keep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2004_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.bKeepMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnFireEnd(){this.rel.EnterStatus(this.rel.statusReady)}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkAStart)}OnAnim(){return this.rel.args.bKeepAnim}OnMSKeep(){return this.rel.args.bKeepMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_keep"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status_ready:[function(e,t,o){"use strict";cc._RF.push(t,"30b9956luhNvICLPFMi9pKq","GEEI_2004_status_ready"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("./GEEI_2004_status");class n extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.rel=t,o}OnFiring(){this.rel.OnAble()&&this.rel.EnterStatus(this.rel.statusKeep)}OnAnim(){return this.rel.args.aReadyAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GEEI_2004_status_ready"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","./GEEI_2004_status":"GEEI_2004_status"}],GEEI_2004_status:[function(e,t,o){"use strict";cc._RF.push(t,"ca915vqXWVCTbnbzZAbuvSn","GEEI_2004_status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDraw(e){}OnFireStart(){}OnFiring(){}OnFireEnd(){}OnBackpack(){}OnHand(){}OnCd(){return 1}},cc._RF.pop()},{}],GEEI_2004:[function(e,t,o){"use strict";cc._RF.push(t,"0c5baSIkoJGqIPVL+Yh1mT1","GEEI_2004"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../../frame/ui/MgrUI"),n=e("../../../GameCommon"),l=e("../../../display/GameDisplayEquipment002"),c=e("../../../display/GameDisplayEquipment004"),d=e("../../../view/voice_ogg/VoiceOggViewState"),u=e("../../body/GameElementBody"),m=e("../EquipmentInst"),p=e("../EquipmentInstRS"),h=e("./GEEI_2004_status_atk_a_start"),f=e("./GEEI_2004_status_atk_b_ing"),y=e("./GEEI_2004_status_atk_c_end"),_=e("./GEEI_2004_status_cd"),g=e("./GEEI_2004_status_keep"),b=e("./GEEI_2004_status_ready"),S="GEEI_2004";class P extends m.default{constructor(){super(...arguments),this.aimPosition=i.default.Pop(i.default.typeccVec2,S),this.angleOffset=0,this.angleOffsetFire=0}static Pop(e,t){let o=i.default.Pop(P._t,e);return o.args=t,o}OnInit(){this.statusAtkAStart=h.default.Pop(S,this),this.statusAtkBIng=f.default.Pop(S,this),this.statusAtkCEnd=y.default.Pop(S,this),this.statusCD=_.default.Pop(S,this),this.statusKeep=g.default.Pop(S,this),this.statusReady=b.default.Pop(S,this),this.EnterStatus(this.statusCD)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&this.currStatus.OnExit(),this.currStatus.OnEnter()}OnStep(e){let t=this.args.angleOffsetMax/this.args.angleDec*e;this.angleOffset-=t,this.angleOffset=Math.max(this.angleOffset,0),this.relEquip.machine.currStatus==this.relEquip.machine.statusArmo&&this.UpdateAim(),this.currStatus.OnStep(e)}OnDraw(e){this.relEquip.DrawForCommon(this,e,this.atkAngle,Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),this.tTotal);let t=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/r.default.mgrUI._sizePerPixel/Math.pow(1e3,2),o=this.vx,a=this.vy+t*this.tTotal,s=Math.atan2(a,o),l=Math.cos(s),c=Math.sin(s),d=n.default.MARK_TIPS_BASE_RADIUS+Math.abs(this.angleOffset)*n.default.MARK_RADIUS_PER_ANGLE,u=(n.default.MARK_DOT_COUNT-1)*n.default.MARK_DOT_SPACING;for(let r=0;r<n.default.MARK_DOT_COUNT;r++){let t=Math.PI/2-u/2+r*n.default.MARK_DOT_SPACING,o=(l*Math.cos(t)+c*Math.sin(t)- -1)/2,a=this.relEquip.GetDrawColor(),s=i.default.PopCCColor(S,a.r,a.g,a.b,255*o);e.RoundFill(this.aimPosition.x+Math.cos(t)*d,this.aimPosition.y+Math.sin(t)*d,e.Pixel(3),s),e.RoundFill(this.aimPosition.x+Math.cos(t)*(d+e.Pixel(10)),this.aimPosition.y+Math.sin(t)*(d+e.Pixel(10)),e.Pixel(2),s),i.default.Push(s)}this.currStatus.OnDraw(e)}OnFireEnter(){this.UpdateAim(),this.currStatus.OnFireStart()}OnFireStep(){this.UpdateAim(),this.currStatus.OnFiring()}OnFireExit(){this.currStatus.OnFireEnd()}OnBackPack(){this.EnterStatus(this.statusCD),this.currStatus.OnBackpack()}OnHand(){this.relEquip.npc.playerMgrBodyDir.currStatus.OnRight(),this.UpdateAim(),this.currStatus.OnHand()}OnCostNeed(){return this.cfgProps.props_cost*this.args.dAtkIngTimes}OnCD(){return this.currStatus.OnCd()}OnMpRecoveryAble(){return this.currStatus==this.statusReady}UpdateAim(){this.aimPosition.x=Math.max(this.relEquip.firePos.x,this.relEquip.npc.relBody.commonFootPos.x+100),this.aimPosition.y=Math.max(this.relEquip.firePos.y,n.default.GROUND_Y);let e=Math.sqrt(Math.pow((s.default.FAT_HEIGHT+n.default.CAMERA_OFFSET_Y)/n.default.SCENE_SCALE,2)+Math.pow((s.default.FAT_WIDTH+n.default.CAMERA_OFFSET_X)/n.default.SCENE_SCALE,2)),t=Math.sqrt(Math.pow(this.aimPosition.x-this.relEquip.npc.playerEquipPos.x,2)+Math.pow(this.aimPosition.y-this.relEquip.npc.playerEquipPos.y,2));this.tTotal=this.args.msGot*t/e,this.vy=(this.aimPosition.y-this.relEquip.npc.playerEquipPos.y-.5*this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/r.default.mgrUI._sizePerPixel/Math.pow(1e3,2)*Math.pow(this.tTotal,2))/this.tTotal,this.vx=(this.aimPosition.x-this.relEquip.npc.playerEquipPos.x)/this.tTotal,this.atkAngle=Math.atan2(this.vy,this.vx)}Fire(){this.relEquip.npc.mpCurrent-=this.cfgProps.props_cost;let e=Math.random();e=Math.pow(e,2),e=Math.random()<.5?e:-e,this.angleOffsetFire=this.angleOffset*e;let t=this.atkAngle+this.angleOffsetFire;t=Math.min(t,Math.PI/2);let o=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),i=Math.cos(t)*o,a=Math.sin(t)*o;this.angleOffset+=this.args.angleOfffsetUnit,this.angleOffset=Math.min(this.angleOffset,this.args.angleOffsetMax);let s=this.cfgProps.distance_o_to_output*Math.cos(t)/i,n=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/r.default.mgrUI._sizePerPixel/Math.pow(1e3,2),l=i*s,c=a*s+.5*n*Math.pow(s,2);d.default.inst.VoiceSet(this.args.voice);let m=u.default.Pop(S,{posX:this.relEquip.machine.equip.npc.playerEquipPos.x+l,posY:this.relEquip.machine.equip.npc.playerEquipPos.y+c,vecX:i+this.relEquip.npc.b2GetSpeedX()/r.default.mgrUI._sizePerPixel/1e3,vecY:a+n*s,cfgId:this.cfgProps.arrow,camp:this.relEquip.machine.equip.npc.relBody.commonArgsCamp,power:this.power,caller:this.relEquip.machine.equip.npc.relBody});this.relEquip.machine.equip.npc.relBody.relState.AddEle(m)}}P._t=new a.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),p.default.Pop(S,{logicCode:2004,cfgToArgs:e=>({aReadyAnim:e.prop_0,bKeepMS:Number.parseFloat(e.prop_1),bKeepAnim:e.prop_2,cAtkStartMS:Number.parseFloat(e.prop_3),cAtkStartAnim:e.prop_4,dAtkIngTimes:Number.parseFloat(e.prop_5),dAtkIngSpace:Number.parseFloat(e.prop_6),dAtkIngAnim:e.prop_7,eAtkEndMS:Number.parseFloat(e.prop_8),eAtkEndAnim:e.prop_9,fCDMS:Number.parseFloat(e.prop_10),fCDMSAnim:e.prop_11,angleOfffsetUnit:Number.parseFloat(e.prop_12),angleOffsetMax:Number.parseFloat(e.prop_13),angleDec:Number.parseFloat(e.prop_14),voice:Number.parseFloat(e.prop_15),msGot:Number.parseFloat(e.prop_16)}),instCreator:(e,t)=>P.Pop(e,t),instDisplay:(e,t,o)=>{let i=t.commonBehaviour.playerMgrEquipment.equipInst;switch(i.cfgProps.style){case 1002:o.push(l.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id));break;case 1004:o.push(c.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id))}},getPropsSpacing:(e,t)=>t.bKeepMS+t.cAtkStartMS+(t.dAtkIngTimes-1)*t.dAtkIngSpace+t.eAtkEndMS+t.fCDMS,getPropsCost:(e,t)=>e.props_cost*t.dAtkIngTimes,getPropsDmg:(e,t,o)=>p.default.GetSingleDmgByPower(e.id,o)*t.dAtkIngTimes,aditionalBody:e=>{let t=i.default.Pop(i.default.typeArray,S);return t.push(e.arrow),t},aditionalEff:()=>i.default.Pop(i.default.typeArray,S),aditionalVoice:(e,t)=>{let o=i.default.Pop(i.default.typeArray,S);return o.push(t.voice),o}}),o.default=P,cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../../frame/ui/MgrUI":"MgrUI","../../../GameCommon":"GameCommon","../../../display/GameDisplayEquipment002":"GameDisplayEquipment002","../../../display/GameDisplayEquipment004":"GameDisplayEquipment004","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../body/GameElementBody":"GameElementBody","../EquipmentInst":"EquipmentInst","../EquipmentInstRS":"EquipmentInstRS","./GEEI_2004_status_atk_a_start":"GEEI_2004_status_atk_a_start","./GEEI_2004_status_atk_b_ing":"GEEI_2004_status_atk_b_ing","./GEEI_2004_status_atk_c_end":"GEEI_2004_status_atk_c_end","./GEEI_2004_status_cd":"GEEI_2004_status_cd","./GEEI_2004_status_keep":"GEEI_2004_status_keep","./GEEI_2004_status_ready":"GEEI_2004_status_ready"}],GEEI_2005_args:[function(e,t,o){"use strict";cc._RF.push(t,"6e7c4CWINtPDbMtv2/ffLpj","GEEI_2005_args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GEEI_2005_status_atk_a_start:[function(e,t,o){"use strict";cc._RF.push(t,"f01d2Q3dMRLG4sC/WDyfodf","GEEI_2005_status_atk_a_start"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2005_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.cAtkStartMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkBIng)}OnAnim(){return this.rel.args.cAtkStartAnim}OnMSKeep(){return this.rel.args.cAtkStartMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_a_start"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status_atk_b_ing:[function(e,t,o){"use strict";cc._RF.push(t,"075eaHEYAFNMJcxuCD+p/Iv","GEEI_2005_status_atk_b_ing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2005_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.rel.UpdateAim(),this.atkTime=this.rel.args.dAtkIngTimes,this.msWait=0,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&(0<this.atkTime&&(this.atkTime--,this.rel.Fire()),0<this.atkTime&&(this.msWait=this.rel.args.dAtkIngSpace)),0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkCEnd)}OnAnim(){return this.rel.args.dAtkIngAnim}OnMSKeep(){return(this.rel.args.dAtkIngTimes-1)*this.rel.args.dAtkIngSpace}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_b_ing"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status_atk_c_end:[function(e,t,o){"use strict";cc._RF.push(t,"cc1c42KJOpA+J4lNGOc0EI7","GEEI_2005_status_atk_c_end"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2005_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.eAtkEndMS,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusCD)}OnAnim(){return this.rel.args.eAtkEndAnim}OnMSKeep(){return this.rel.args.eAtkEndMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_c_end"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status_cd:[function(e,t,o){"use strict";cc._RF.push(t,"51cebndPTVKm6PsHTWc8EcD","GEEI_2005_status_cd"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2005_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.fCDMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusReady)}OnAnim(){return this.rel.args.fCDMSAnim}OnMSKeep(){return this.rel.args.fCDMS}OnCd(){return this.rel.args.fCDMS<1e3?1:1-this.msWait/this.rel.args.fCDMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_cd"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status_keep:[function(e,t,o){"use strict";cc._RF.push(t,"49892F8B0VAtYuDQrAtkDoG","GEEI_2005_status_keep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2005_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.bKeepMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnFireEnd(){this.rel.EnterStatus(this.rel.statusReady)}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkAStart)}OnAnim(){return this.rel.args.bKeepAnim}OnMSKeep(){return this.rel.args.bKeepMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_keep"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status_ready:[function(e,t,o){"use strict";cc._RF.push(t,"e2118TEzudF6I6SB8ihLId+","GEEI_2005_status_ready"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("./GEEI_2005_status");class n extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.rel=t,o}OnFiring(){this.rel.OnAble()&&this.rel.EnterStatus(this.rel.statusKeep)}OnAnim(){return this.rel.args.aReadyAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GEEI_2005_status_ready"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","./GEEI_2005_status":"GEEI_2005_status"}],GEEI_2005_status:[function(e,t,o){"use strict";cc._RF.push(t,"03b60PQ40BBkZLjdhFFdz9O","GEEI_2005_status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDraw(e){}OnFireStart(){}OnFiring(){}OnFireEnd(){}OnBackpack(){}OnHand(){}OnCd(){return 1}},cc._RF.pop()},{}],GEEI_2005:[function(e,t,o){"use strict";cc._RF.push(t,"b4cb6Nnt0tCyII1JXDJo5fU","GEEI_2005"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../GameCommon"),n=e("../../../display/GameDisplayEquipment002"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../body/GameElementBody"),d=e("../EquipmentInst"),u=e("../EquipmentInstRS"),m=e("./GEEI_2005_status_atk_a_start"),p=e("./GEEI_2005_status_atk_b_ing"),h=e("./GEEI_2005_status_atk_c_end"),f=e("./GEEI_2005_status_cd"),y=e("./GEEI_2005_status_keep"),_=e("./GEEI_2005_status_ready"),g="GEEI_2005";class b extends d.default{constructor(){super(...arguments),this.angleOffset=0,this.angleOffsetFire=0}static Pop(e,t){let o=a.default.Pop(b._t,e);return o.args=t,o}OnInit(){this.statusAtkAStart=m.default.Pop(g,this),this.statusAtkBIng=p.default.Pop(g,this),this.statusAtkCEnd=h.default.Pop(g,this),this.statusCD=f.default.Pop(g,this),this.statusKeep=y.default.Pop(g,this),this.statusReady=_.default.Pop(g,this),this.EnterStatus(this.statusCD)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&this.currStatus.OnExit(),this.currStatus.OnEnter()}OnStep(e){let t=this.args.angleOffsetMax/this.args.angleDec*e;this.angleOffset-=t,this.angleOffset=Math.max(this.angleOffset,0),this.currStatus.OnStep(e)}OnDraw(e){let t=s.default.MARK_TIPS_BASE_RADIUS+Math.abs(this.angleOffset)*s.default.MARK_RADIUS_PER_ANGLE,o=(s.default.MARK_DOT_COUNT-1)*s.default.MARK_DOT_SPACING;for(let i=0;i<s.default.MARK_DOT_COUNT;i++){let r=Math.PI/2-o/2+i*s.default.MARK_DOT_SPACING,n=this.relEquip.GetDrawColor(),l=a.default.PopCCColor(g,n.r,n.g,n.b,255);e.RoundFill(this.relEquip.firePos.x+Math.cos(r)*t,this.relEquip.firePos.y+Math.sin(r)*t,e.Pixel(3),l),e.RoundFill(this.relEquip.firePos.x+Math.cos(r)*(t+e.Pixel(10)),this.relEquip.firePos.y+Math.sin(r)*(t+e.Pixel(10)),e.Pixel(2),l),a.default.Push(l)}this.currStatus.OnDraw(e)}OnFireEnter(){this.currStatus.OnFireStart()}OnFireStep(){this.currStatus.OnFiring()}OnFireExit(){this.currStatus.OnFireEnd()}OnBackPack(){this.EnterStatus(this.statusCD),this.currStatus.OnBackpack()}OnHand(){this.relEquip.npc.playerMgrBodyDir.currStatus.OnRight(),this.currStatus.OnHand()}OnCostNeed(){return this.cfgProps.props_cost*this.args.dAtkIngTimes}OnCD(){return this.currStatus.OnCd()}OnMpRecoveryAble(){return this.currStatus==this.statusReady}UpdateAim(){this.atkAngle=Math.atan2(this.relEquip.firePos.y-this.relEquip.npc.playerEquipPos.y,this.relEquip.firePos.x-this.relEquip.npc.playerEquipPos.x),this.atkAngle=Math.min(this.atkAngle,Math.PI/6),this.atkAngle=Math.max(this.atkAngle,0)}Fire(){this.relEquip.npc.mpCurrent-=this.cfgProps.props_cost,this.angleOffsetFire=this.angleOffset*i.default.RandomLowerToUpper();let e=this.atkAngle+this.angleOffsetFire,t=Math.cos(e),o=Math.sin(e);this.angleOffset+=this.args.angleOfffsetUnit,this.angleOffset=Math.min(this.angleOffset,this.args.angleOffsetMax),l.default.inst.VoiceSet(this.args.voice);let a=c.default.Pop(g,{posX:this.relEquip.machine.equip.npc.playerEquipPos.x+this.cfgProps.distance_o_to_output*t,posY:this.relEquip.machine.equip.npc.playerEquipPos.y+this.cfgProps.distance_o_to_output*o,vecX:t/1e3/1e4,vecY:o/1e3/1e4,cfgId:this.cfgProps.arrow,camp:this.relEquip.machine.equip.npc.relBody.commonArgsCamp,power:this.power,caller:this.relEquip.machine.equip.npc.relBody});this.relEquip.machine.equip.npc.relBody.relState.AddEle(a)}}b._t=new r.default({instantiate:()=>new b,onPop:()=>{},onPush:()=>{},tag:g}),u.default.Pop(g,{logicCode:2005,cfgToArgs:e=>({aReadyAnim:e.prop_0,bKeepMS:Number.parseFloat(e.prop_1),bKeepAnim:e.prop_2,cAtkStartMS:Number.parseFloat(e.prop_3),cAtkStartAnim:e.prop_4,dAtkIngTimes:Number.parseFloat(e.prop_5),dAtkIngSpace:Number.parseFloat(e.prop_6),dAtkIngAnim:e.prop_7,eAtkEndMS:Number.parseFloat(e.prop_8),eAtkEndAnim:e.prop_9,fCDMS:Number.parseFloat(e.prop_10),fCDMSAnim:e.prop_11,angleOfffsetUnit:Number.parseFloat(e.prop_12),angleOffsetMax:Number.parseFloat(e.prop_13),angleDec:Number.parseFloat(e.prop_14),voice:Number.parseFloat(e.prop_15)}),instCreator:(e,t)=>b.Pop(e,t),instDisplay:(e,t,o)=>{let i=t.commonBehaviour.playerMgrEquipment.equipInst;o.push(n.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id))},getPropsSpacing:(e,t)=>t.bKeepMS+t.cAtkStartMS+(t.dAtkIngTimes-1)*t.dAtkIngSpace+t.eAtkEndMS+t.fCDMS,getPropsCost:(e,t)=>e.props_cost*t.dAtkIngTimes,getPropsDmg:(e,t,o)=>u.default.GetSingleDmgByPower(e.id,o)*t.dAtkIngTimes,aditionalBody:e=>{let t=a.default.Pop(a.default.typeArray,g);return t.push(e.arrow),t},aditionalEff:()=>a.default.Pop(a.default.typeArray,g),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,g);return o.push(t.voice),o}}),o.default=b,cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../../display/GameDisplayEquipment002":"GameDisplayEquipment002","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../body/GameElementBody":"GameElementBody","../EquipmentInst":"EquipmentInst","../EquipmentInstRS":"EquipmentInstRS","./GEEI_2005_status_atk_a_start":"GEEI_2005_status_atk_a_start","./GEEI_2005_status_atk_b_ing":"GEEI_2005_status_atk_b_ing","./GEEI_2005_status_atk_c_end":"GEEI_2005_status_atk_c_end","./GEEI_2005_status_cd":"GEEI_2005_status_cd","./GEEI_2005_status_keep":"GEEI_2005_status_keep","./GEEI_2005_status_ready":"GEEI_2005_status_ready"}],GEEI_2006_args:[function(e,t,o){"use strict";cc._RF.push(t,"4154b03syBMUZbe/t0uXM86","GEEI_2006_args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GEEI_2006_status_atk_a_start:[function(e,t,o){"use strict";cc._RF.push(t,"dbf24HCTUdHYqycDG5hzIVN","GEEI_2006_status_atk_a_start"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2006_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.cAtkStartMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkBIng)}OnAnim(){return this.rel.args.cAtkStartAnim}OnMSKeep(){return this.rel.args.cAtkStartMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2006_status_a_start"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status_atk_b_ing:[function(e,t,o){"use strict";cc._RF.push(t,"057ebXAHH5COr3bZEZpCiHy","GEEI_2006_status_atk_b_ing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("./GEEI_2006_status");class n extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.rel=t,o}OnEnter(){this.msWait=0,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){this.rel.relEquip.npc.mpCurrent<this.rel.cfgProps.props_cost&&this.rel.EnterStatus(this.rel.statusAtkCEnd),0==this.msWait&&(this.rel.Fire(),this.msWait=this.rel.args.dAtkIngSpace)}OnFireEnd(){this.rel.EnterStatus(this.rel.statusAtkCEnd)}OnAnim(){return this.rel.args.dAtkIngAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GEEI_2006_status_b_ing"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status_atk_c_end:[function(e,t,o){"use strict";cc._RF.push(t,"4062aY3e41KA4YHC6/DBPZ7","GEEI_2006_status_atk_c_end"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2006_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.eAtkEndMS,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusCD)}OnAnim(){return this.rel.args.eAtkEndAnim}OnMSKeep(){return this.rel.args.eAtkEndMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2006_status_c_end"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status_cd:[function(e,t,o){"use strict";cc._RF.push(t,"28b06rOP75KIrl0VQ4V5Hiz","GEEI_2006_status_cd"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2006_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.fCDMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusReady)}OnAnim(){return this.rel.args.fCDMSAnim}OnCd(){return this.rel.args.fCDMS<1e3?1:1-this.msWait/this.rel.args.fCDMS}OnMSKeep(){return this.rel.args.fCDMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2006_status_cd"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status_keep:[function(e,t,o){"use strict";cc._RF.push(t,"6f387tGqYhJn44D3zVlA9k+","GEEI_2006_status_keep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2006_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.bKeepMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnFireEnd(){this.rel.EnterStatus(this.rel.statusReady)}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkAStart)}OnAnim(){return this.rel.args.bKeepAnim}OnMSKeep(){return this.rel.args.bKeepMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2006_status_keep"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status_ready:[function(e,t,o){"use strict";cc._RF.push(t,"050bbpFQZROi6JzV4AEteSv","GEEI_2006_status_ready"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../common/AnimKeep"),n=e("./GEEI_2006_status"),l="GEEI_2006_status_ready";class c extends n.default{constructor(){super(),this.animKeep=s.default.Pop(l,600,600)}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.rel=t,o}OnEnter(){this.animKeep.currStatus.OnFadeIn()}OnExit(){this.animKeep.currStatus.OnFadeOut()}OnFiring(){this.rel.OnAble()&&this.rel.EnterStatus(this.rel.statusKeep)}OnAnim(){return this.rel.args.aReadyAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../common/AnimKeep":"AnimKeep","./GEEI_2006_status":"GEEI_2006_status"}],GEEI_2006_status:[function(e,t,o){"use strict";cc._RF.push(t,"9cc20TaQhFGupNOlIuV8TTf","GEEI_2006_status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDraw(e){}OnFireStart(){}OnFiring(){}OnFireEnd(){}OnBackpack(){}OnHand(){}OnCd(){return 1}},cc._RF.pop()},{}],GEEI_2006:[function(e,t,o){"use strict";cc._RF.push(t,"7c18bZ63aBDoJm4QSBbWiDP","GEEI_2006"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../../frame/ui/MgrUI"),l=e("../../../GameCommon"),c=e("../../../display/GameDisplayEquipment005"),d=e("../../../display/GameDisplayEquipment006"),u=e("../../../view/voice_ogg/VoiceOggViewState"),m=e("../../body/GameElementBody"),p=e("../EquipmentInst"),h=e("../EquipmentInstRS"),f=e("./GEEI_2006_status_atk_a_start"),y=e("./GEEI_2006_status_atk_b_ing"),_=e("./GEEI_2006_status_atk_c_end"),g=e("./GEEI_2006_status_cd"),b=e("./GEEI_2006_status_keep"),S=e("./GEEI_2006_status_ready"),P="GEEI_2006";class B extends p.default{constructor(){super(...arguments),this.aimPosition=a.default.Pop(a.default.typeccVec2,P),this.angleOffset=0,this.angleOffsetFire=0}static Pop(e,t){let o=a.default.Pop(B._t,e);return o.args=t,o}OnInit(){this.statusAtkAStart=f.default.Pop(P,this),this.statusAtkBIng=y.default.Pop(P,this),this.statusAtkCEnd=_.default.Pop(P,this),this.statusCD=g.default.Pop(P,this),this.statusKeep=b.default.Pop(P,this),this.statusReady=S.default.Pop(P,this),this.EnterStatus(this.statusCD)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),this.currStatus.OnEnter()}OnStep(e){let t=this.args.angleOffsetMax/this.args.angleDec*e;this.angleOffset-=t,this.angleOffset=Math.max(this.angleOffset,0),this.relEquip.machine.currStatus==this.relEquip.machine.statusArmo&&this.UpdateAim(),this.statusReady.animKeep.currStatus.OnStep(e),this.currStatus.OnStep(e)}OnDraw(e){this.relEquip.DrawForCommon(this,e,this.atkAngle,Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),this.tTotal);let t=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2),o=this.vx,i=this.vy+t*this.tTotal,r=Math.atan2(i,o),n=Math.cos(r),c=Math.sin(r),d=l.default.MARK_TIPS_BASE_RADIUS+Math.abs(this.angleOffset)*l.default.MARK_RADIUS_PER_ANGLE,u=(l.default.MARK_DOT_COUNT-1)*l.default.MARK_DOT_SPACING;for(let s=0;s<l.default.MARK_DOT_COUNT;s++){let t=Math.PI/2-u/2+s*l.default.MARK_DOT_SPACING,o=(n*Math.cos(t)+c*Math.sin(t)- -1)/2,i=this.relEquip.GetDrawColor(),r=a.default.PopCCColor(P,i.r,i.g,i.b,255*o);e.RoundFill(this.aimPosition.x+Math.cos(t)*d,this.aimPosition.y+Math.sin(t)*d,e.Pixel(3),r),e.RoundFill(this.aimPosition.x+Math.cos(t)*(d+e.Pixel(10)),this.aimPosition.y+Math.sin(t)*(d+e.Pixel(10)),e.Pixel(2),r),a.default.Push(r)}this.currStatus.OnDraw(e)}OnFireEnter(){this.UpdateAim(),this.currStatus.OnFireStart()}OnFireStep(){this.UpdateAim(),this.currStatus.OnFiring()}OnFireExit(){this.currStatus.OnFireEnd()}OnBackPack(){this.EnterStatus(this.statusCD),this.currStatus.OnBackpack()}OnHand(){this.relEquip.npc.playerMgrBodyDir.currStatus.OnRight(),this.UpdateAim(),this.currStatus.OnHand()}OnCostNeed(){return this.cfgProps.props_cost*this.args.dAtkIngTimes}OnCD(){return this.currStatus.OnCd()}OnMpRecoveryAble(){return this.currStatus==this.statusReady}UpdateAim(){this.aimPosition.x=Math.max(this.relEquip.firePos.x,this.relEquip.npc.relBody.commonFootPos.x+100),this.aimPosition.y=Math.max(this.relEquip.firePos.y,l.default.GROUND_Y);let e=Math.sqrt(Math.pow((n.default.FAT_HEIGHT+l.default.CAMERA_OFFSET_Y)/l.default.SCENE_SCALE,2)+Math.pow((n.default.FAT_WIDTH+l.default.CAMERA_OFFSET_X)/l.default.SCENE_SCALE,2)),t=Math.sqrt(Math.pow(this.aimPosition.x-this.relEquip.npc.playerEquipPos.x,2)+Math.pow(this.aimPosition.y-this.relEquip.npc.playerEquipPos.y,2));this.tTotal=this.args.msGot*t/e;let o=this.bulletGravityScale;this.vy=(this.aimPosition.y-this.relEquip.npc.playerEquipPos.y-.5*o*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2)*Math.pow(this.tTotal,2))/this.tTotal,this.vx=(this.aimPosition.x-this.relEquip.npc.playerEquipPos.x)/this.tTotal,this.atkAngle=Math.atan2(this.vy,this.vx)}Fire(){this.relEquip.npc.mpCurrent-=this.cfgProps.props_cost,this.angleOffsetFire=this.angleOffset*i.default.RandomLowerToUpper();let e=this.atkAngle+this.angleOffsetFire;e=Math.min(e,Math.PI/2);let t=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),o=Math.cos(e)*t,a=Math.sin(e)*t;this.angleOffset+=this.args.angleOfffsetUnit,this.angleOffset=Math.min(this.angleOffset,this.args.angleOffsetMax);let r=this.cfgProps.distance_o_to_output*Math.cos(e)/o,n=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2),l=o*r,c=a*r+.5*n*Math.pow(r,2);u.default.inst.VoiceSet(this.args.voice);let d=m.default.Pop(P,{posX:this.relEquip.machine.equip.npc.playerEquipPos.x+l,posY:this.relEquip.machine.equip.npc.playerEquipPos.y+c,vecX:o+this.relEquip.npc.b2GetSpeedX()/s.default.mgrUI._sizePerPixel/1e3,vecY:a+n*r,cfgId:this.cfgProps.arrow,camp:this.relEquip.machine.equip.npc.relBody.commonArgsCamp,power:this.power,caller:this.relEquip.machine.equip.npc.relBody});this.relEquip.machine.equip.npc.relBody.relState.AddEle(d)}}B._t=new r.default({instantiate:()=>new B,onPop:()=>{},onPush:()=>{},tag:P}),h.default.Pop(P,{logicCode:2006,cfgToArgs:e=>({aReadyAnim:e.prop_0,bKeepMS:Number.parseFloat(e.prop_1),bKeepAnim:e.prop_2,cAtkStartMS:Number.parseFloat(e.prop_3),cAtkStartAnim:e.prop_4,dAtkIngTimes:Number.parseFloat(e.prop_5),dAtkIngSpace:Number.parseFloat(e.prop_6),dAtkIngAnim:e.prop_7,eAtkEndMS:Number.parseFloat(e.prop_8),eAtkEndAnim:e.prop_9,fCDMS:Number.parseFloat(e.prop_10),fCDMSAnim:e.prop_11,angleOfffsetUnit:Number.parseFloat(e.prop_12),angleOffsetMax:Number.parseFloat(e.prop_13),angleDec:Number.parseFloat(e.prop_14),voice:Number.parseFloat(e.prop_15),msGot:Number.parseFloat(e.prop_16)}),instCreator:(e,t)=>B.Pop(e,t),instDisplay:(e,t,o)=>{let i=t.commonBehaviour.playerMgrEquipment.equipInst;switch(i.cfgProps.style){case 1005:o.push(c.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id));break;case 1006:o.push(d.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id))}},getPropsSpacing:(e,t)=>t.dAtkIngSpace,getPropsCost:e=>e.props_cost,getPropsDmg:(e,t,o)=>h.default.GetSingleDmgByPower(e.id,o),aditionalBody:e=>{let t=a.default.Pop(a.default.typeArray,P);return t.push(e.arrow),t},aditionalEff:()=>a.default.Pop(a.default.typeArray,P),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,P);return o.push(t.voice),o}}),o.default=B,cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../../frame/ui/MgrUI":"MgrUI","../../../GameCommon":"GameCommon","../../../display/GameDisplayEquipment005":"GameDisplayEquipment005","../../../display/GameDisplayEquipment006":"GameDisplayEquipment006","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../body/GameElementBody":"GameElementBody","../EquipmentInst":"EquipmentInst","../EquipmentInstRS":"EquipmentInstRS","./GEEI_2006_status_atk_a_start":"GEEI_2006_status_atk_a_start","./GEEI_2006_status_atk_b_ing":"GEEI_2006_status_atk_b_ing","./GEEI_2006_status_atk_c_end":"GEEI_2006_status_atk_c_end","./GEEI_2006_status_cd":"GEEI_2006_status_cd","./GEEI_2006_status_keep":"GEEI_2006_status_keep","./GEEI_2006_status_ready":"GEEI_2006_status_ready"}],GEEI_2007_args:[function(e,t,o){"use strict";cc._RF.push(t,"4d374smYttPQ5SspRyzP0S4","GEEI_2007_args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GEEI_2007_status_atk_a_start:[function(e,t,o){"use strict";cc._RF.push(t,"e342bVjrBVBB4toR0BWpaBQ","GEEI_2007_status_atk_a_start"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2007_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.cAtkStartMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkBIng)}OnAnim(){return this.rel.args.cAtkStartAnim}OnMSKeep(){return this.rel.args.cAtkStartMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2007_status_a_start"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status_atk_b_ing:[function(e,t,o){"use strict";cc._RF.push(t,"acb07ePnlFDqKdQBoRVBgnE","GEEI_2007_status_atk_b_ing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("./GEEI_2007_status");class n extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.rel=t,o}OnEnter(){this.msWait=0,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){this.rel.relEquip.npc.mpCurrent<this.rel.cfgProps.props_cost&&this.rel.EnterStatus(this.rel.statusAtkCEnd),0==this.msWait&&(this.rel.Fire(),this.msWait=this.rel.args.dAtkIngSpace)}OnFireEnd(){this.rel.EnterStatus(this.rel.statusAtkCEnd)}OnAnim(){return this.rel.args.dAtkIngAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GEEI_2007_status_b_ing"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status_atk_c_end:[function(e,t,o){"use strict";cc._RF.push(t,"4aa20qqOCtISoZMQd0B9mH4","GEEI_2007_status_atk_c_end"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2007_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.eAtkEndMS,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusCD)}OnAnim(){return this.rel.args.eAtkEndAnim}OnMSKeep(){return this.rel.args.eAtkEndMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2007_status_c_end"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status_cd:[function(e,t,o){"use strict";cc._RF.push(t,"862camU56hAK78dB2azb37g","GEEI_2007_status_cd"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2007_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.fCDMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusReady)}OnAnim(){return this.rel.args.fCDMSAnim}OnCd(){return this.rel.args.fCDMS<1e3?1:1-this.msWait/this.rel.args.fCDMS}OnMSKeep(){return this.rel.args.fCDMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2007_status_cd"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status_keep:[function(e,t,o){"use strict";cc._RF.push(t,"300950yd8hAn4LBZofpWvz2","GEEI_2007_status_keep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./GEEI_2007_status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.rel=t,o}OnEnter(){this.msWait=this.rel.args.bKeepMS,this.MSCheck()}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),this.MSCheck()}OnFireEnd(){this.rel.EnterStatus(this.rel.statusReady)}MSCheck(){0==this.msWait&&this.rel.EnterStatus(this.rel.statusAtkAStart)}OnAnim(){return this.rel.args.bKeepAnim}OnMSKeep(){return this.rel.args.bKeepMS}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GEEI_2007_status_keep"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status_ready:[function(e,t,o){"use strict";cc._RF.push(t,"3a674XNY7JMtoQtt+cBQe9k","GEEI_2007_status_ready"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../common/AnimKeep"),n=e("./GEEI_2007_status"),l="GEEI_2007_status_ready";class c extends n.default{constructor(){super(),this.animKeep=s.default.Pop(l,600,600)}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.rel=t,o}OnEnter(){this.animKeep.currStatus.OnFadeIn()}OnExit(){this.animKeep.currStatus.OnFadeOut()}OnFiring(){this.rel.OnAble()&&this.rel.EnterStatus(this.rel.statusKeep)}OnAnim(){return this.rel.args.aReadyAnim}OnMSKeep(){return r.default.STANDARD_ANIM_MS}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../common/AnimKeep":"AnimKeep","./GEEI_2007_status":"GEEI_2007_status"}],GEEI_2007_status:[function(e,t,o){"use strict";cc._RF.push(t,"38498sDC9pNtKpVp9r6At7+","GEEI_2007_status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDraw(e){}OnFireStart(){}OnFiring(){}OnFireEnd(){}OnBackpack(){}OnHand(){}OnCd(){return 1}},cc._RF.pop()},{}],GEEI_2007:[function(e,t,o){"use strict";cc._RF.push(t,"d301b6KlSpPrKyig2ZC+ZKh","GEEI_2007"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../../frame/ui/MgrUI"),l=e("../../../GameCommon"),c=e("../../../display/GameDisplayEquipment005"),d=e("../../../display/GameDisplayEquipment006"),u=e("../../../display/GameDisplayEquipment007"),m=e("../../../view/voice_ogg/VoiceOggViewState"),p=e("../../body/GameElementBody"),h=e("../EquipmentInst"),f=e("../EquipmentInstRS"),y=e("./GEEI_2007_status_atk_a_start"),_=e("./GEEI_2007_status_atk_b_ing"),g=e("./GEEI_2007_status_atk_c_end"),b=e("./GEEI_2007_status_cd"),S=e("./GEEI_2007_status_keep"),P=e("./GEEI_2007_status_ready"),B="GEEI_2007";class C extends h.default{constructor(){super(...arguments),this.aimPosition=a.default.Pop(a.default.typeccVec2,B),this.angleOffset=0,this.angleOffsetFire=0}static Pop(e,t){let o=a.default.Pop(C._t,e);return o.args=t,o}OnInit(){this.statusAtkAStart=y.default.Pop(B,this),this.statusAtkBIng=_.default.Pop(B,this),this.statusAtkCEnd=g.default.Pop(B,this),this.statusCD=b.default.Pop(B,this),this.statusKeep=S.default.Pop(B,this),this.statusReady=P.default.Pop(B,this),this.EnterStatus(this.statusCD)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),this.currStatus.OnEnter()}OnStep(e){let t=this.args.angleOffsetMax/this.args.angleDec*e;this.angleOffset-=t,this.angleOffset=Math.max(this.angleOffset,0),this.relEquip.machine.currStatus==this.relEquip.machine.statusArmo&&this.UpdateAim(),this.statusReady.animKeep.currStatus.OnStep(e),this.currStatus.OnStep(e)}OnDraw(e){this.relEquip.Draw(this,e,this.atkAngle,Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),this.tTotal,this.GetEquipPosX(),this.GetEquipPosY());let t=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2),o=this.vx,i=this.vy+t*this.tTotal,r=Math.atan2(i,o),n=Math.cos(r),c=Math.sin(r),d=l.default.MARK_TIPS_BASE_RADIUS+Math.abs(this.angleOffset)*l.default.MARK_RADIUS_PER_ANGLE,u=(l.default.MARK_DOT_COUNT-1)*l.default.MARK_DOT_SPACING;for(let s=0;s<l.default.MARK_DOT_COUNT;s++){let t=Math.PI/2-u/2+s*l.default.MARK_DOT_SPACING,o=(n*Math.cos(t)+c*Math.sin(t)- -1)/2,i=this.relEquip.GetDrawColor(),r=a.default.PopCCColor(B,i.r,i.g,i.b,255*o);e.RoundFill(this.aimPosition.x+Math.cos(t)*d,this.aimPosition.y+Math.sin(t)*d,e.Pixel(3),r),e.RoundFill(this.aimPosition.x+Math.cos(t)*(d+e.Pixel(10)),this.aimPosition.y+Math.sin(t)*(d+e.Pixel(10)),e.Pixel(2),r),a.default.Push(r)}this.currStatus.OnDraw(e)}OnFireEnter(){this.UpdateAim(),this.currStatus.OnFireStart()}OnFireStep(){this.UpdateAim(),this.currStatus.OnFiring()}OnFireExit(){this.currStatus.OnFireEnd()}OnBackPack(){this.EnterStatus(this.statusCD),this.currStatus.OnBackpack()}OnHand(){this.relEquip.npc.playerMgrBodyDir.currStatus.OnRight(),this.UpdateAim(),this.currStatus.OnHand()}OnCostNeed(){return this.cfgProps.props_cost*this.args.dAtkIngTimes}OnCD(){return this.currStatus.OnCd()}OnMpRecoveryAble(){return this.currStatus==this.statusReady}UpdateAim(){this.aimPosition.x=this.relEquip.firePos.x,this.aimPosition.y=this.relEquip.firePos.y;let e=Math.sqrt(Math.pow((n.default.FAT_HEIGHT+l.default.CAMERA_OFFSET_Y)/l.default.SCENE_SCALE,2)+Math.pow((n.default.FAT_WIDTH+l.default.CAMERA_OFFSET_X)/l.default.SCENE_SCALE,2)),t=Math.sqrt(Math.pow(this.aimPosition.x-this.GetEquipPosX(),2)+Math.pow(this.aimPosition.y-this.GetEquipPosY(),2));this.tTotal=this.args.msGot*t/e;let o=this.bulletGravityScale;this.vy=(this.aimPosition.y-this.GetEquipPosY()-.5*o*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2)*Math.pow(this.tTotal,2))/this.tTotal,this.vx=(this.aimPosition.x-this.GetEquipPosX())/this.tTotal,this.atkAngle=Math.atan2(this.vy,this.vx)}Fire(){this.relEquip.npc.mpCurrent-=this.cfgProps.props_cost;let e=this.atkAngle+this.angleOffsetFire;e=Math.min(e,Math.PI/2);let t=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),o=Math.cos(e)*t,a=Math.sin(e)*t;this.angleOffset+=this.args.angleOfffsetUnit,this.angleOffset=Math.min(this.angleOffset,this.args.angleOffsetMax);let r=this.cfgProps.distance_o_to_output*Math.cos(e)/o,n=this.bulletGravityScale*this.relEquip.npc.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/Math.pow(1e3,2),c=o*r,d=a*r+.5*n*Math.pow(r,2),u=l.default.MARK_TIPS_BASE_RADIUS+Math.abs(this.angleOffset)*l.default.MARK_RADIUS_PER_ANGLE;m.default.inst.VoiceSet(this.args.voice);let h=p.default.Pop(B,{posX:this.GetEquipPosX()+c+u*i.default.RandomLowerToUpper(),posY:this.GetEquipPosY()+d,vecX:o,vecY:a+n*r,cfgId:this.cfgProps.arrow,camp:this.relEquip.machine.equip.npc.relBody.commonArgsCamp,power:this.power,caller:this.relEquip.machine.equip.npc.relBody});this.relEquip.machine.equip.npc.relBody.relState.AddEle(h)}GetEquipPosX(){let e=this.GetEquipPosY()-this.aimPosition.y;return this.aimPosition.x-e}GetEquipPosY(){return l.default.GROUND_Y+(n.default.FAT_WIDTH+l.default.CAMERA_OFFSET_Y+50)/l.default.SCENE_SCALE}}C._t=new r.default({instantiate:()=>new C,onPop:()=>{},onPush:()=>{},tag:B}),f.default.Pop(B,{logicCode:2007,cfgToArgs:e=>({aReadyAnim:e.prop_0,bKeepMS:Number.parseFloat(e.prop_1),bKeepAnim:e.prop_2,cAtkStartMS:Number.parseFloat(e.prop_3),cAtkStartAnim:e.prop_4,dAtkIngTimes:Number.parseFloat(e.prop_5),dAtkIngSpace:Number.parseFloat(e.prop_6),dAtkIngAnim:e.prop_7,eAtkEndMS:Number.parseFloat(e.prop_8),eAtkEndAnim:e.prop_9,fCDMS:Number.parseFloat(e.prop_10),fCDMSAnim:e.prop_11,angleOfffsetUnit:Number.parseFloat(e.prop_12),angleOffsetMax:Number.parseFloat(e.prop_13),angleDec:Number.parseFloat(e.prop_14),voice:Number.parseFloat(e.prop_15),msGot:Number.parseFloat(e.prop_16)}),instCreator:(e,t)=>C.Pop(e,t),instDisplay:(e,t,o)=>{let i=t.commonBehaviour.playerMgrEquipment.equipInst;switch(i.cfgProps.style){case 1005:o.push(c.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id));break;case 1006:o.push(d.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id));break;case 1007:o.push(u.default.GetNodeTypeByRes(i.cfgProps).CreateNode(e,t.id,-t.id))}},getPropsSpacing:(e,t)=>t.dAtkIngSpace,getPropsCost:e=>e.props_cost,getPropsDmg:(e,t,o)=>f.default.GetSingleDmgByPower(e.id,o),aditionalBody:e=>{let t=a.default.Pop(a.default.typeArray,B);return t.push(e.arrow),t},aditionalEff:()=>a.default.Pop(a.default.typeArray,B),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.voice),o}}),o.default=C,cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../../frame/ui/MgrUI":"MgrUI","../../../GameCommon":"GameCommon","../../../display/GameDisplayEquipment005":"GameDisplayEquipment005","../../../display/GameDisplayEquipment006":"GameDisplayEquipment006","../../../display/GameDisplayEquipment007":"GameDisplayEquipment007","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../body/GameElementBody":"GameElementBody","../EquipmentInst":"EquipmentInst","../EquipmentInstRS":"EquipmentInstRS","./GEEI_2007_status_atk_a_start":"GEEI_2007_status_atk_a_start","./GEEI_2007_status_atk_b_ing":"GEEI_2007_status_atk_b_ing","./GEEI_2007_status_atk_c_end":"GEEI_2007_status_atk_c_end","./GEEI_2007_status_cd":"GEEI_2007_status_cd","./GEEI_2007_status_keep":"GEEI_2007_status_keep","./GEEI_2007_status_ready":"GEEI_2007_status_ready"}],GameCDStatusIng:[function(e,t,o){"use strict";cc._RF.push(t,"75f78epDsdDSYL0xXByjLJe","GameCDStatusIng"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameCDStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relGameCD=t,o}OnEnter(){this.relGameCD.currentCD=this.relGameCD.msCD}OnStep(e){this.relGameCD.currentCD-=e,this.relGameCD.currentCD=Math.max(this.relGameCD.currentCD,0),0==this.relGameCD.currentCD&&this.relGameCD.Enter(this.relGameCD.statusReady)}OnTryCall(){return!1}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GameCDStatusIng"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameCDStatus":"GameCDStatus"}],GameCDStatusReady:[function(e,t,o){"use strict";cc._RF.push(t,"8c3d88pEL9HIqf/MWbhEKdk","GameCDStatusReady"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameCDStatus");class s extends r.default{static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relGameCD=t,o}OnTryCall(){return this.relGameCD.Enter(this.relGameCD.statusIng),!0}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"GameCDStatusReady"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameCDStatus":"GameCDStatus"}],GameCDStatus:[function(e,t,o){"use strict";cc._RF.push(t,"a50d7gcmWtNy5O/kzXii3kl","GameCDStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}},cc._RF.pop()},{}],GameCD:[function(e,t,o){"use strict";cc._RF.push(t,"2131cXgAVtPQ66B7pN5GHrv","GameCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameCDStatusIng"),s=e("./GameCDStatusReady"),n="GameCD";class l{constructor(){this.currentCD=0}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.msCD=t,o.statusIng=r.default.Pop(n,o),o.statusReady=s.default.Pop(n,o),o.Enter(o.statusReady),o}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameCDStatusIng":"GameCDStatusIng","./GameCDStatusReady":"GameCDStatusReady"}],GameCfgBodyCacheDropRS:[function(e,t,o){"use strict";cc._RF.push(t,"9afedmqogRFlrYhZGpfq20J","GameCfgBodyCacheDropRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexStorageItem"),r=e("../../../frame/basic/UtilMath"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/global/Jiang"),l=e("../../GameMath"),c=e("../../display/GameDisplayReward"),d=e("../../view/common/RewardGrid"),u=e("../../view/equipment_view/EquipmentViewBackpackProp"),m=e("../../view/equipment_view/EquipmentViewEquip"),p=e("../../view/equipment_view/EquipmentViewItem"),h=e("../../view/equipment_view/EquipmentViewItemBackpackProp"),f=e("../../view/store_view/StoreViewItemEquipment"),y=e("../../view/voice_ogg/VoiceOggViewState"),_=e("../common/GameElementReward"),g=e("./DefineVoice"),b="APP";class S{constructor(e){this.code=e.code,this.onBubleDisplay=e.onBubleDisplay,this.onLotteryCreateReward=e.onLotteryCreateReward,this.onStoreDisplay=e.onStoreDisplay,this.onEquipmentViewDisplay=e.onEquipmentViewDisplay,this.onGetSceneRewardNodeType=e.onGetSceneRewardNodeType,this.onGetUIRewardNodeType=e.onGetUIRewardNodeType,this.onTrigger=e.onTrigger,this.onGot=e.onGot,this.onEnterBackpack=e.onEnterBackpack,S.mapCodeToRS.set(this.code,this)}}(function(e){e.mapCodeToRS=new Map,e.xlsxEquipment=new e({code:1,onBubleDisplay:(e,t,o)=>{t.push(m.default.GetNodeTypeForIconUI(o).CreateNode(e,o,o))},onLotteryCreateReward:(t,o)=>{let i=s.default.Pop(s.default.typeArray,b);return i.push(t.item_id,o),{rs:e.xlsxEquipment,props:i}},onStoreDisplay:(e,t,o)=>{t.push(f.default.nodeType.CreateNode(e,o,o))},onEquipmentViewDisplay:(e,t,o)=>{t.push(p.default.nodeType.CreateNode(e,o,o))},onGetSceneRewardNodeType:()=>c.default.nodeTypeForEquipment,onGetUIRewardNodeType:()=>d.default.nodeTypeForEquipment,onTrigger:(e,t)=>{y.default.inst.VoiceSet(g.default.EQUIPMENT_DROP_TRIGGER);let o=s.default.Pop(s.default.typeArray,b),i=l.default.ParseBodyPowerToCount(t.commonArgsPower);o.push(e.val,i),t.relState.AddEle(_.default.Pop(b,t.commonCenterPos.x,t.commonCenterPos.y,e,o,600,2e3,200))},onGot:t=>{y.default.inst.VoiceSet(g.default.EQUIPMENT_DROP_GOT);let o,i=t.props[0],a=t.props[1];for(let r=0;r<t.relState.listRewardIdCfg.length;r++){let a=t.relState.listRewardIdCfg[r];if(a.rs==e.xlsxEquipment&&a.props[0]==i){o=a;break}}if(null==o){let a=s.default.Pop(s.default.typeArray,b);a.push(i,0,0),o={rs:e.xlsxEquipment,props:a},t.relState.listRewardIdCfg.push(o)}o.props[1]+=a,t.relState.listRewardIdCfg.sort((e,t)=>e.rs!=t.rs?e.rs.code-t.rs.code:e.props[0]-t.props[0])},onEnterBackpack:e=>{let t,o=e[0],r=e[1],s=n.default.mgrData.Get(a.default.listEquipment);for(let i=0;i<s.length;i++){let e=s[i];if(e.idCfg==o){t=e;break}}null==t&&(t={idCfg:o,count:0,isRead:!1},s.push(t)),t.count+=r,t.count=Math.ceil(t.count),a.default.listEquipment.media.onSet(),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_EQUIP),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_LOTTO)}}),e.xlsxBackpackProp=new e({code:2,onBubleDisplay:(e,t,o)=>{t.push(u.default.GetNodeTypeForUI(o).CreateNode(e,null,null))},onLotteryCreateReward:t=>{let o=s.default.Pop(s.default.typeArray,b);return o.push(t.item_id,0),{rs:e.xlsxBackpackProp,props:o}},onStoreDisplay:()=>{},onEquipmentViewDisplay:(e,t,o)=>{t.push(h.default.nodeType.CreateNode(e,o,o))},onGetSceneRewardNodeType:()=>c.default.nodeTypeForParticle,onGetUIRewardNodeType:()=>d.default.nodeTypeForBackpackProp,onTrigger:(e,t)=>{let o=l.default.ParseBodyPowerToCount(t.commonArgsPower)*t.relState.dropScale,i=1,a=1;for(;a<=o&&!(o<(a*=3));)i++;for(let n=0;n<i;n++){let a=s.default.Pop(s.default.typeArray,b);a.push(e.val,o/i),t.relState.AddEle(_.default.Pop(b,t.commonCenterPos.x,t.commonCenterPos.y,e,a,600+200*r.default.RandomLowerToUpper(),400,0))}},onGot:t=>{y.default.inst.VoiceSet(g.default.ITEM_DROP_GOT);let o,i=t.props[0],a=t.props[1];for(let r=0;r<t.relState.listRewardIdCfg.length;r++){let a=t.relState.listRewardIdCfg[r];if(a.rs==e.xlsxBackpackProp&&a.props[0]==i){o=a;break}}if(null==o){let a=s.default.Pop(s.default.typeArray,b);a.push(i,0),o={rs:e.xlsxBackpackProp,props:a},t.relState.listRewardIdCfg.push(o)}o.props[1]+=a,t.relState.listRewardIdCfg.sort((e,t)=>e.rs!=t.rs?e.rs.code-t.rs.code:e.props[0]-t.props[0])},onEnterBackpack:e=>{let t,o=e[0],r=e[1],s=n.default.mgrData.Get(a.default.listBackpackProp);for(let i=0;i<s.length;i++){let e=s[i];if(e.idCfg==o){t=e;break}}null==t&&(t={idCfg:o,count:0,isRead:!1},s.push(t)),t.count+=r,t.count=Math.ceil(t.count),a.default.listBackpackProp.media.onSet(),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_EQUIP),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_LOTTO)}})})(S||(S={})),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilMath":"UtilMath","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/global/Jiang":"Jiang","../../GameMath":"GameMath","../../display/GameDisplayReward":"GameDisplayReward","../../view/common/RewardGrid":"RewardGrid","../../view/equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp","../../view/equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../../view/equipment_view/EquipmentViewItem":"EquipmentViewItem","../../view/equipment_view/EquipmentViewItemBackpackProp":"EquipmentViewItemBackpackProp","../../view/store_view/StoreViewItemEquipment":"StoreViewItemEquipment","../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../common/GameElementReward":"GameElementReward","./DefineVoice":"DefineVoice"}],GameCfgBodyCacheDrop:[function(e,t,o){"use strict";cc._RF.push(t,"64cd0d5/+tBMZr2VeQIm8Rv","GameCfgBodyCacheDrop"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GameCommon:[function(e,t,o){"use strict";var i;cc._RF.push(t,"0ca50Rj+TNMA7Z7xM9MepeS","GameCommon"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.GROUP_IDX_UI=0,e.GROUP_IDX_GUIDE=13,e.SUB_MAIN="resource_sub",e.COIN_FOR_LOTTERY=20001,e.COIN_FOR_STORE=20001,e.STANDARD_EQUIP=200001,e.STANDARD_ANIM_MS=600,e.MARK_RADIUS_PER_ANGLE=160/(Math.PI/3),e.MARK_DOT_SPACING=Math.PI/2,e.MARK_DOT_COUNT=4,e.MARK_TIPS_BASE_RADIUS=20,e.AIM_MIN=-Math.PI/6,e.AIM_MAX=Math.PI/4,e.FORWARD_WHILE_SUFFERED_DMG=!1,e.SHIELD_READY_IN_DEFEND_SUCCESS=.25,e.MS_FORWARD_WHILE_SUFFERED_DMG=600,e.MS_FORWARD_TRACE_FADE_IN=100,e.MS_FORWARD_TRACE_FADE_OUT=700,e.HURTED_CD=1600,e.HURTED_SPEED_SCALE=2,e.MS_DMG_FLASH_IN=200,e.MS_DMG_FLASH_OUT=600,e.PLAYER_MS_READY_IN=20,e.PLAYER_MS_READY_OUT=200,e.TIME_SCALE_WHILE_DEFEND_SUCCESSED=.2,e.PLAYER_MS_DEFEND_IN=200,e.PLAYER_MS_DEFEND_OUT=600,e.PLAYER_MS_SHIELD_IN=20,e.PLAYER_MS_SHIELD_OUT=600,e.LIGHT_POINT_OPACITY_MAX=50,e.BTN_SKILL_OPACITY_TRANSITION_COST=600,e.DEFEND_SUCCESS_KEEP=100,e.DEFEND_KEEP=1e3,e.CD_DEFEND=2e3,e.TRANSITION_DEFEND=100,e.ALL_DROP=!1,e.SCENE_SCALE=2,e.LAYER_UI=0,e.LAYER_SCENE_BODY_ELEMENT=1,e.PLAYER_CFG_ID=1001,e.BTN_VOICE=1001001001,e.PHY_STEP_MAX=1e3/60,e.GROUP_UI="ui",e.GROUP_SCENE="scene",e.GROUND_Y=100,e.HP_FOOT_OFFSET_Y=10,e.CAMERA_OFFSET_X=-250,e.CAMERA_OFFSET_Y=-160,e.FRIENDLY_CAMP=1,e.ENEMY_CAMP=2,e.GROUND_STANDARD_WIDTH=64,e.BORDER_PIXEL=1e6,e.TRACE_TIPS_SECOND_UNIT=.05,e.TIPS_HOLD=2e3,e.BOOK_INFO_COUNT_PER_PAGE=20,e.CD_TRACE=16,e.TRACE_KEEP=400,e.TRACE_SIZE_SCALE=1.5,e.TRACE_BLUR=4,e.COUNT_MONSTER=6,e.TITLE_REWARD="\u83b7\u5f97\u5956\u52b1",e.TITLE_VIDEO_INVALID="\u89c6\u9891\u89c2\u770b\u4e0d\u5b8c\u6574\uff0c\u5956\u52b1\u53d1\u653e\u5931\u8d25"}(i||(i={})),o.default=i,cc._RF.pop()},{}],GameCtxB2BodyFixtureConcat:[function(e,t,o){"use strict";cc._RF.push(t,"b9923EjWK1Lx4iDZidOlSZW","GameCtxB2BodyFixtureConcat"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r="GameCtxHitted";class s{constructor(){this.position=i.default.Pop(i.default.typeccVec2,r),this.normal=i.default.Pop(i.default.typeccVec2,r)}static Pop(e,t,o,a,r,n,l){let c=i.default.Pop(s._t,e);return c.fixtureSelf=t,c.relFixture=o,c.position.x=a,c.position.y=r,c.normal.x=n,c.normal.y=l,c}CheckValid(){return this.fixtureSelf&&this.fixtureSelf.relBody&&this.fixtureSelf.relBody.relEle&&this.relFixture&&this.relFixture.relBody&&this.relFixture.relBody.relEle}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:e=>{e.fixtureSelf=null,e.relFixture=null,e.position.x=0,e.position.y=0,e.normal.x=0,e.normal.y=0},tag:r}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameCtxB2BodyFixtureTypeRS:[function(e,t,o){"use strict";cc._RF.push(t,"b0528zQoBhM1r6QzenF4R86","GameCtxB2BodyFixtureTypeRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../box2d_ts/Box2D"),a=e("../../frame/basic/UtilObjPool"),r=e("../../frame/basic/UtilObjPoolType"),s="GameCtxB2BodyFixtureTypeRS";class n{constructor(){}static Pop(e,t){let o=a.default.Pop(n._t,e);return o.idx=n._idx++,o.name=t.name,o.recAbleCheck=t.recAbleCheck,o.phyAble=t.phyAble,n.listRS.push(o),o}}n._idx=0,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),function(e){e.listRS=[],e.BODY=e.Pop(s,{name:"BODY",recAbleCheck:t=>{switch(t){case e.BODY:return!0;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!0}),e.BODY_BULLET=e.Pop(s,{name:"BODY_BULLET",recAbleCheck:t=>{switch(t){case e.BODY:return!0;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!1}),e.BODY_BULLET_GROUND=e.Pop(s,{name:"BODY_BULLET_GROUND",recAbleCheck:t=>{switch(t){case e.BODY:return!0;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!0}),e.AREA=e.Pop(s,{name:"AREA",recAbleCheck:t=>{switch(t){case e.BODY:return!0;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!1}),e.AREA_SHIELD=e.Pop(s,{name:"AREA_SHIELD",recAbleCheck:t=>{switch(t){case e.BODY:return!1;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:return!0;case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!1}),e.AREA_SWORD=e.Pop(s,{name:"AREA_SWORD",recAbleCheck:t=>{switch(t){case e.BODY:return!0;case e.BODY_BULLET:case e.BODY_BULLET_GROUND:case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!1}),e.SHIELD=e.Pop(s,{name:"SHIELD",recAbleCheck:t=>{switch(t){case e.BODY:case e.BODY_BULLET:case e.BODY_BULLET_GROUND:return!0;case e.AREA:case e.AREA_SHIELD:case e.AREA_SWORD:case e.AREA_SWORD:default:return!1}},phyAble:!1})}(n||(n={}));for(let l=0;l<n.listRS.length;l++){let e=n.listRS[l];e.categoryBits=1<<e.idx,e.maskBits=0}for(let l=0;l<n.listRS.length;l++){let e=n.listRS[l];for(let t=0;t<n.listRS.length;t++){let o=n.listRS[t];e.recAbleCheck(o)&&(e.maskBits|=o.categoryBits,o.maskBits|=e.categoryBits)}}for(let l=0;l<n.listRS.length;l++){let e=n.listRS[l];e.b2filter=new i.b2Filter,e.b2filter.categoryBits=e.categoryBits,e.b2filter.maskBits=e.maskBits,e.b2filter.groupIndex=0}o.default=n,cc._RF.pop()},{"../../../box2d_ts/Box2D":"Box2D","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameCtxB2BodyFixture:[function(e,t,o){"use strict";cc._RF.push(t,"30f09COSD1F9bZPdcSxlVe4","GameCtxB2BodyFixture"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r="GameCtxB2Shape";let s=0;class n{constructor(){this.listConcat=i.default.Pop(i.default.typeArray,r)}static Pop(e,t,o,a){let r=i.default.Pop(n._t,e);return r.id=++s,r.relBody=t,r.b2Fixture=t.b2Body.CreateFixture(o),r.b2Fixture[n.SYM_REC]=r,r.type=a,r}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:e=>{e.relBody=null,e.b2Fixture=null,e.type=null,e.listConcat.length=0},tag:r}),n.SYM_REC=Symbol("GameCtxB2BodyFixture"),o.default=n,cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameCtxB2Body:[function(e,t,o){"use strict";cc._RF.push(t,"3d4e3ulcmJH6YlNUZt50ZPK","GameCtxB2Body"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("./GameCtxB2BodyFixture"),s="GameCtxB2Body";class n{constructor(){this.listFixtureCtx=i.default.Pop(i.default.typeArray,s)}static Pop(e,t,o){let a=i.default.Pop(n._t,e);return a.relEle=t,a.b2Body=a.relEle.relState.b2w.CreateBody(o),a.b2Body[n.SYN_REC]=a,a}FixtureCreate(e,t,o){t.filter.categoryBits=o.b2filter.categoryBits,t.filter.maskBits=o.b2filter.maskBits,t.filter.groupIndex=o.b2filter.groupIndex;let i=r.default.Pop(e,this,t,o);return this.listFixtureCtx.push(i),i}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:e=>{e.relEle=null,e.b2Body=null,e.listFixtureCtx.length=0},tag:s}),n.SYN_REC=Symbol("GameCtxB2Body"),o.default=n,cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameCtxB2BodyFixture":"GameCtxB2BodyFixture"}],GameDisplayBG:[function(e,t,o){"use strict";cc._RF.push(t,"c5a776RqKlFL6nnYALKeecM","GameDisplayBG");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UIViewComponent"),n=e("../../frame/ui/UINodeType"),l=e("../../IndexDataModule"),c=e("../GameCommon"),d=e("../../frame/global/Jiang"),u=e("../../frame/ui/UINodeInstHideRS"),m=e("../../frame/basic/UtilObjPool"),p=e("../../frame/ui/UINodeInstEnterRS"),h=e("../../frame/config/src/CfgScene"),{ccclass:f,property:y}=cc._decorator,_="GameDisplayBG";let g=i=class extends s.default{constructor(){super(...arguments),this.nodeSky=null,this.nodeGround=null}static GetNodeTypeByRes(e){return this.resToNodeTypeMap.has(e)||this.resToNodeTypeMap.set(e,n.default.Pop(_,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(_,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=d.default.mgrCfg.cfgScene.select(h.default.idGetter,o)._list[0];e.nodeSky.x=t.cameraPos.x,e.nodeSky.y=t.cameraPos.y+i.bg_y_offset,e.nodeGround.x=Math.floor(t.borderLeft/c.default.GROUND_STANDARD_WIDTH)*c.default.GROUND_STANDARD_WIDTH,e.nodeGround.y=c.default.GROUND_Y}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:u.default.setParentNull,enterRS:p.default.none})),this.resToNodeTypeMap.get(e)}};g.resToNodeTypeMap=m.default.Pop(m.default.typeMap,_),a([y(cc.Node)],g.prototype,"nodeSky",void 0),a([y(cc.Node)],g.prototype,"nodeGround",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/config/src/CfgScene":"CfgScene","../../frame/global/Jiang":"Jiang","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayBody000:[function(e,t,o){"use strict";cc._RF.push(t,"62919+1pQZM6o1/2EqNyjcG","GameDisplayBody000");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayMonster000";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.listNodeTint=[]}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y;let r=i.commonBody.b2Body.GetLinearVelocity();e.node.angle=Math.atan2(r.y,r.x)/Math.PI*180;for(let s=0;s<e.listNodeTint.length;s++)e.listNodeTint[s].color=i.commonCache.colorMain,e.listNodeTint[s].opacity=i.commonCache.opacityMain;for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Node)],f.prototype,"listNodeTint",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody001:[function(e,t,o){"use strict";cc._RF.push(t,"7e43cak7XlGyI7a+wY7I9D0","GameDisplayBody001");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayMonster001";let f=i=class extends l.default{static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o).commonFootPos;e.node.x=i.x,e.node.y=i.y}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMap.get(e.id)}};f._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,h),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody002:[function(e,t,o){"use strict";cc._RF.push(t,"0a5e6hAiTpIy55OmmMG3jHc","GameDisplayBody002");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody002";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let r=0;r<e.listRenderEnabledTime.length;r++)e.listRenderEnabledTime[r].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMap.get(e.id)}};f._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Animation)],f.prototype,"_anim",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody003:[function(e,t,o){"use strict";cc._RF.push(t,"b89ac+CslxGlrehyfXDOPQF","GameDisplayBody003");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody003";let y=i=class extends l.default{constructor(){super(...arguments),this.listNodeBody=[],this.listNodeAngulartion=[],this._anim=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);let r=i.commonBehaviour,s=255*u.default.Clamp(1-r.hmStatusCD.cd/r.args.defendCD,0,1),n=255-s,l=r.hmCurrStatus==r.hmStatusCD;for(let d=0;d<e.listNodeBody.length;d++){let t=e.listNodeBody[d];t.active=l,t.opacity=n}let c=r.hmCurrStatus==r.hmStatusOrdinary;for(let d=0;d<e.listNodeAngulartion.length;d++){let t=e.listNodeAngulartion[d];t.active=c,t.opacity=s}}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h(cc.Node)],y.prototype,"listNodeBody",void 0),a([h(cc.Node)],y.prototype,"listNodeAngulartion",void 0),a([h(cc.Animation)],y.prototype,"_anim",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody004:[function(e,t,o){"use strict";cc._RF.push(t,"6e262PXQrNIHLO4ynUnn528","GameDisplayBody004");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody004";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let r=0;r<e.listRenderEnabledTime.length;r++)e.listRenderEnabledTime[r].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMap.get(e.id)}};f._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Animation)],f.prototype,"_anim",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody005:[function(e,t,o){"use strict";cc._RF.push(t,"c9b73Mp9NZKqLik7q4MNxQ/","GameDisplayBody005");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody005";let y=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null,this.nodePrickle=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour;e.nodePrickle.opacity=255*u.default.Clamp(r.hmStatusCD.cd/r.args.cd,0,1)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h([cc.RenderComponent])],y.prototype,"listRenderEnabledTime",void 0),a([h(cc.Animation)],y.prototype,"_anim",void 0),a([h(cc.Node)],y.prototype,"nodePrickle",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody006:[function(e,t,o){"use strict";cc._RF.push(t,"e999ctKVf9Ofr9gYzxRc5bg","GameDisplayBody006");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody006";let y=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null,this.nodeOpacity=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let l=0;l<e.listRenderEnabledTime.length;l++)e.listRenderEnabledTime[l].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour,s=1;r.currStatus==r.statusPower&&(s=u.default.Clamp(r.statusPower._cd/r.args.powerTime,0,1));let n=1;r.currStatus==r.statusJumped&&(n=u.default.Clamp(r.statusJumped.jumpedMS/200,0,1)),e.nodeOpacity.opacity=s*n*255}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h([cc.RenderComponent])],y.prototype,"listRenderEnabledTime",void 0),a([h(cc.Animation)],y.prototype,"_anim",void 0),a([h(cc.Node)],y.prototype,"nodeOpacity",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody007:[function(e,t,o){"use strict";cc._RF.push(t,"f4e06mJQAlJIZy4/VRJCdrk","GameDisplayBody007");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody007";let y=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null,this.nodeOpacity=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let l=0;l<e.listRenderEnabledTime.length;l++)e.listRenderEnabledTime[l].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour,s=1;r.currStatus==r.statusPower&&(s=u.default.Clamp(r.statusPower._cd/r.args.powerTime,0,1));let n=1;r.currStatus==r.statusJumped&&(n=u.default.Clamp(r.statusJumped.jumpedMS/200,0,1)),e.nodeOpacity.opacity=s*n*255}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h([cc.RenderComponent])],y.prototype,"listRenderEnabledTime",void 0),a([h(cc.Animation)],y.prototype,"_anim",void 0),a([h(cc.Node)],y.prototype,"nodeOpacity",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody008:[function(e,t,o){"use strict";cc._RF.push(t,"5c877p72PBP86FZTs6LyFcy","GameDisplayBody008");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayMonster001";let y=i=class extends l.default{constructor(){super(...arguments),this.nodeOpacity=null}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y;let r=i.commonBehaviour,s=u.default.Clamp(i.commonEnabledMS/200,0,1),n=u.default.Clamp((r.args.life-i.commonEnabledMS)/200,0,1);e.node.opacity=s*n*255}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h(cc.Node)],y.prototype,"nodeOpacity",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody009:[function(e,t,o){"use strict";cc._RF.push(t,"d7d34OAIS5B/ZCNjE8s+ow9","GameDisplayBody009");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayMonster009";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[]}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.node.angle=i.commonBody.b2Body.GetAngle()/Math.PI*180;for(let r=0;r<e.listRenderEnabledTime.length;r++)e.listRenderEnabledTime[r].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody010:[function(e,t,o){"use strict";cc._RF.push(t,"b5e79CRmTxJ/5+9ZdCh9Xr3","GameDisplayBody010");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/basic/UtilMath"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody010";let y=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this._anim=null,this.nodeOpacity=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let n=0;n<e.listRenderEnabledTime.length;n++)e.listRenderEnabledTime[n].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r,s=i.commonBehaviour;r=0<i.commonShield?u.default.Clamp(s.shieldOnedMS/200,0,1):1-u.default.Clamp(s.shieldOffedMS/200,0,1),e.nodeOpacity.opacity=255*r}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h([cc.RenderComponent])],y.prototype,"listRenderEnabledTime",void 0),a([h(cc.Animation)],y.prototype,"_anim",void 0),a([h(cc.Node)],y.prototype,"nodeOpacity",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody011:[function(e,t,o){"use strict";cc._RF.push(t,"29480KtGe5PerjWvFWud1Gw","GameDisplayBody011");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/global/Jiang"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayBody011";let y=i=class extends l.default{constructor(){super(...arguments),this._anim=null,this.listRenderEnabledTime=[],this.nodeDefender=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(f,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(f,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);let r=i.commonBehaviour.fixBall.b2Fixture.GetShape().m_p;e.nodeDefender.x=r.x/u.default.mgrUI._sizePerPixel,e.nodeDefender.y=r.y/u.default.mgrUI._sizePerPixel;for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this._nodeTypeCacheMap.get(e.id)}};y._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,f),a([h(cc.Animation)],y.prototype,"_anim",void 0),a([h([cc.RenderComponent])],y.prototype,"listRenderEnabledTime",void 0),a([h(cc.Node)],y.prototype,"nodeDefender",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/global/Jiang":"Jiang","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody013:[function(e,t,o){"use strict";cc._RF.push(t,"81945+IkRBMeaBqqIeYIR76","GameDisplayBody013");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayMonster013";let f=i=class extends l.default{constructor(){super(...arguments),this.listNodeTint=[]}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.node.angle=i.commonBody.b2Body.GetAngle()/Math.PI*180;for(let r=0;r<e.listNodeTint.length;r++)e.listNodeTint[r].color=i.commonCache.colorMain,e.listNodeTint[r].opacity=i.commonCache.opacityMain}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p(cc.Node)],f.prototype,"listNodeTint",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody014:[function(e,t,o){"use strict";cc._RF.push(t,"f3cb4/ylZlFd4DhkTWnlN74","GameDisplayBody014");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody014";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.nodeCure=null,this._anim=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour;e.nodeCure.opacity=255*Math.pow(r.animKeep.rateVisibility,.5)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMap.get(e.id)}};f._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Node)],f.prototype,"nodeCure",void 0),a([p(cc.Animation)],f.prototype,"_anim",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody015:[function(e,t,o){"use strict";cc._RF.push(t,"18f05pEmeFOE4x80B8z9oam","GameDisplayBody015");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody015";let f=i=class extends l.default{constructor(){super(...arguments),this.nodeHealthBuff=null,this.listRenderEnabledTime=[],this._anim=null}onLoad(){this._anim=this.getComponentInChildren(cc.Animation)}Status(e){this._currAnim!=e&&(this._currAnim=e,this._anim.play(this._currAnim,0))}onDisable(){this._currAnim=null}onEnable(){this.AnimTimeScale(1),this.Status(this._anim.defaultClip.name)}static GetNodeType(e){let t=e.res_scene;return i._nodeTypeCacheMap.has(e.id)||i._nodeTypeCacheMap.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.Status(i.commonAnim);for(let r=0;r<e.listRenderEnabledTime.length;r++)e.listRenderEnabledTime[r].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);e.nodeHealthBuff.opacity=255*(1-i.commonHpCurrent/i.commonHpMax)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMap.get(e.id)}};f._nodeTypeCacheMap=s.default.Pop(s.default.typeMap,h),a([p(cc.Node)],f.prototype,"nodeHealthBuff",void 0),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Animation)],f.prototype,"_anim",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody016:[function(e,t,o){"use strict";cc._RF.push(t,"30ea9UKNfxKGYmTnxjzjbQP","GameDisplayBody016");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody016";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.listNodeTint=[],this.nodeSize=null,this.nodePos=null}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.node.angle=i.commonBody.b2Body.GetAngle()/Math.PI*180;for(let s=0;s<e.listNodeTint.length;s++)e.listNodeTint[s].color=i.commonCache.colorMain,e.listNodeTint[s].opacity=i.commonCache.opacityMain;for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour;e.nodeSize.width=r.args.width,e.nodeSize.height=2*r.args.height,e.nodePos.x=-r.args.height}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Node)],f.prototype,"listNodeTint",void 0),a([p(cc.Node)],f.prototype,"nodeSize",void 0),a([p(cc.Node)],f.prototype,"nodePos",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody017:[function(e,t,o){"use strict";cc._RF.push(t,"14f27ORcABGa4jh7506biIL","GameDisplayBody017");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayMonster017";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.listNodeTint=[]}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y;for(let r=0;r<e.listNodeTint.length;r++)e.listNodeTint[r].color=i.commonCache.colorMain,e.listNodeTint[r].opacity=i.commonCache.opacityMain;for(let r=0;r<e.listRenderEnabledTime.length;r++)e.listRenderEnabledTime[r].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Node)],f.prototype,"listNodeTint",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBody018:[function(e,t,o){"use strict";cc._RF.push(t,"aaa23/xk9pCyq5nR5BfYdWm","GameDisplayBody018");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBody018";let f=i=class extends l.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.listNodeTint=[],this.nodeSize=null,this.nodePos=null}static GetNodeTypeForAtk(e){let t=e.res_scene;return i._nodeTypeCacheMapForAtk.has(e.id)||i._nodeTypeCacheMapForAtk.set(e.id,n.default.Pop(h,{prefabPath:t,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{e.AnimTimeScale(t.playMachine.gameState._timeScale);let i=t.playMachine.gameState.GetEleById(o),a=i.commonFootPos;e.node.x=a.x,e.node.y=a.y,e.node.angle=i.commonBody.b2Body.GetAngle()/Math.PI*180;for(let s=0;s<e.listNodeTint.length;s++)e.listNodeTint[s].color=i.commonCache.colorMain,e.listNodeTint[s].opacity=i.commonCache.opacityMain;for(let s=0;s<e.listRenderEnabledTime.length;s++)e.listRenderEnabledTime[s].getMaterial(0).setProperty("enabledTime",i.commonEnabledMS);let r=i.commonBehaviour;e.nodeSize.width=r.args.width,e.nodeSize.height=r.args.height}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._nodeTypeCacheMapForAtk.get(e.id)}};f._nodeTypeCacheMapForAtk=s.default.Pop(s.default.typeMap,h),a([p([cc.RenderComponent])],f.prototype,"listRenderEnabledTime",void 0),a([p(cc.Node)],f.prototype,"listNodeTint",void 0),a([p(cc.Node)],f.prototype,"nodeSize",void 0),a([p(cc.Node)],f.prototype,"nodePos",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBuffItem:[function(e,t,o){"use strict";cc._RF.push(t,"ba512C0LqlCi6+pg844/mit","GameDisplayBuffItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayBuffItem";let f=i=class extends l.default{constructor(){super(...arguments),this.imgProgress=[]}static GetNodeTypeByRes(e){return this._map.has(e)||this._map.set(e,n.default.Pop(h,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(h,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o[0]);e.node.scaleX=1,e.node.scaleY=1;let a=1;0<i._cfg.layer_keep_ms&&(a=i.ms/i._cfg.layer_keep_ms);for(let r=0;r<e.imgProgress.length;r++)e.imgProgress[r].fillRange=a}})],childrenCreator:[],propsType:r.default.typeArray,hideRS:d.default.setParentNull,enterRS:u.default.none})),this._map.get(e)}};f._map=s.default.Pop(s.default.typeMap,h),a([p([cc.Sprite])],f.prototype,"imgProgress",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayBuff:[function(e,t,o){"use strict";cc._RF.push(t,"4a481wo1x1KY7FIhxug0/nx","GameDisplayBuff");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const a=e("../../frame/ui/UIViewComponent"),{ccclass:r,property:s}=cc._decorator;let n=class extends a.default{constructor(){super(...arguments),this.anim=null,this.containerIcon=null,this.txtCount=null}LoadAnim(e){e!=this.currAnimName&&(this.currAnimName=e,this.anim.play(this.currAnimName))}onDisable(){this.currAnimName=null}};i([s(cc.Animation)],n.prototype,"anim",void 0),i([s(cc.Node)],n.prototype,"containerIcon",void 0),i([s(cc.Label)],n.prototype,"txtCount",void 0),n=i([r],n),o.default=n,cc._RF.pop()},{"../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayEff:[function(e,t,o){"use strict";cc._RF.push(t,"31724Rcv7ZM4IB0V30Ql+9H","GameDisplayEff");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/config/src/CfgEff"),l=e("../../frame/global/Jiang"),c=e("../../frame/ui/UINodeInstEnterRS"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../../frame/ui/UINodeType"),m=e("../../frame/ui/UIViewComponent"),p=e("../../IndexDataModule"),{ccclass:h,property:f}=cc._decorator,y="GameDisplayEff";let _=i=class extends m.default{constructor(){super(...arguments),this.listRenderEnabledTime=[],this.listNodeTint=[]}static GetNodeType(e){if(!this._nodeTypeCache.get(e)){let t=l.default.mgrCfg.cfgEff.select(n.default.idGetter,e)._list[0];this._nodeTypeCache.set(e,u.default.Pop(y,{prefabPath:t.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(y,{listRefModule:[p.default.DEFAULT,p.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.pos.x,e.node.y=i.pos.y,e.node.angle=i.rotation;for(let a=0;a<e.listRenderEnabledTime.length;a++)e.listRenderEnabledTime[a].getMaterial(0).setProperty("enabledTime",i.totalMS);if(e.AnimTimeScale(t.playMachine.gameState._timeScale),i.tint)for(let a=0;a<e.listNodeTint.length;a++)e.listNodeTint[a].color=i.tint}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}))}return this._nodeTypeCache.get(e)}};_._nodeTypeCache=s.default.Pop(s.default.typeMap,y),a([f([cc.RenderComponent])],_.prototype,"listRenderEnabledTime",void 0),a([f([cc.Node])],_.prototype,"listNodeTint",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/config/src/CfgEff":"CfgEff","../../frame/global/Jiang":"Jiang","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent"}],GameDisplayEquipment002:[function(e,t,o){"use strict";cc._RF.push(t,"7b74fv1iXJBKoDMViBM16IK","GameDisplayEquipment002");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/basic/UtilObjPool"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../GameCommon"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayEquipment002";let y=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeTrace=[],this.anim=null,this.nodeAngle=null,this.listNodeResist=[]}LoadAnim(e){this._currAnim!=e&&(this._currAnim=e,this.anim.play(this._currAnim))}onDisable(){this._currAnim=null}static GetNodeTypeByRes(e){return this.nodeTypeCacheMap.has(e.id)||this.nodeTypeCacheMap.set(e.id,s.default.Pop(f,{prefabPath:e.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(f,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o).commonBehaviour,a=i.playerMgrEquipment.equipInst,r=a.angleOffset/a.args.angleOffsetMax,s=a.atkAngle+a.angleOffsetFire*Math.pow(r,2);s=s/Math.PI*180,e.nodeAngle.angle=s;for(let n=0;n<e.listNodeResist.length;n++)e.listNodeResist[n].angle=-s;e.node.x=a.relEquip.machine.equip.npc.args.equipOffsetX,e.node.y=a.relEquip.machine.equip.npc.args.equipOffsetY,e.LoadAnim(a.currStatus.OnAnim()),e.AnimTimeScale(t.playMachine.gameState._timeScale*u.default.STANDARD_ANIM_MS/a.currStatus.OnMSKeep());for(let n=0;n<e.listNodeTrace.length;n++){let t=e.listNodeTrace[n];t.color=i.relBody.commonCache.colorMain,t.opacity=i.playerMgrAction.npc.GetTraceOpacity()}for(let n=0;n<e.listNodeBloom.length;n++)e.listNodeBloom[n].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[n])*Math.max(i.animKeepDefend.rateVisibility,i.animKeepShield.rateVisibility)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this.nodeTypeCacheMap.get(e.id)}};y.nodeTypeCacheMap=c.default.Pop(c.default.typeMap,f),a([h([cc.Node])],y.prototype,"listNodeBloom",void 0),a([h([cc.Node])],y.prototype,"listNodeTrace",void 0),a([h(cc.Animation)],y.prototype,"anim",void 0),a([h(cc.Node)],y.prototype,"nodeAngle",void 0),a([h(cc.Node)],y.prototype,"listNodeResist",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayEquipment004:[function(e,t,o){"use strict";cc._RF.push(t,"d0bc9V23a5PSIe1mPiCCLe/","GameDisplayEquipment004");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/basic/UtilObjPool"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../GameCommon"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayEquipment004";let y=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeTrace=[],this.anim=null,this.nodeAngle=null,this.listNodeResist=[]}LoadAnim(e){this._currAnim!=e&&(this._currAnim=e,this.anim.play(this._currAnim))}onDisable(){this._currAnim=null}static GetNodeTypeByRes(e){return this.nodeTypeCacheMap.has(e.id)||this.nodeTypeCacheMap.set(e.id,s.default.Pop(f,{prefabPath:e.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(f,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o).commonBehaviour,a=i.playerMgrEquipment.equipInst,r=a.atkAngle;r=r/Math.PI*180,e.nodeAngle.angle=r;for(let s=0;s<e.listNodeResist.length;s++)e.listNodeResist[s].angle=-r;e.node.x=a.relEquip.machine.equip.npc.args.equipOffsetX,e.node.y=a.relEquip.machine.equip.npc.args.equipOffsetY,e.LoadAnim(a.currStatus.OnAnim()),e.AnimTimeScale(t.playMachine.gameState._timeScale*u.default.STANDARD_ANIM_MS/a.currStatus.OnMSKeep());for(let s=0;s<e.listNodeTrace.length;s++){let t=e.listNodeTrace[s];t.color=i.relBody.commonCache.colorMain,t.opacity=i.playerMgrAction.npc.GetTraceOpacity()}for(let s=0;s<e.listNodeBloom.length;s++)e.listNodeBloom[s].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[s])*Math.max(i.animKeepDefend.rateVisibility,i.animKeepShield.rateVisibility)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this.nodeTypeCacheMap.get(e.id)}};y.nodeTypeCacheMap=c.default.Pop(c.default.typeMap,f),a([h([cc.Node])],y.prototype,"listNodeBloom",void 0),a([h([cc.Node])],y.prototype,"listNodeTrace",void 0),a([h(cc.Animation)],y.prototype,"anim",void 0),a([h(cc.Node)],y.prototype,"nodeAngle",void 0),a([h(cc.Node)],y.prototype,"listNodeResist",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayEquipment005:[function(e,t,o){"use strict";cc._RF.push(t,"88d37rDiCdHAopnpqcpPQGq","GameDisplayEquipment005");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/basic/UtilObjPool"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../GameCommon"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayEquipment005";let y=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeTrace=[],this.anim=null,this.nodeAngle=null,this.listNodeResist=[]}LoadAnim(e){this._currAnim!=e&&(this._currAnim=e,this.anim.play(this._currAnim))}onDisable(){this._currAnim=null}static GetNodeTypeByRes(e){return this.nodeTypeCacheMap.has(e.id)||this.nodeTypeCacheMap.set(e.id,s.default.Pop(f,{prefabPath:e.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(f,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o).commonBehaviour,a=i.playerMgrEquipment.equipInst,r=a.atkAngle,s=0*a.statusReady.animKeep.rateVisibility+r*(1-a.statusReady.animKeep.rateVisibility);s=s/Math.PI*180,e.nodeAngle.angle=s;for(let n=0;n<e.listNodeResist.length;n++)e.listNodeResist[n].angle=-s;e.node.x=a.relEquip.machine.equip.npc.args.equipOffsetX,e.node.y=a.relEquip.machine.equip.npc.args.equipOffsetY,e.LoadAnim(a.currStatus.OnAnim()),e.AnimTimeScale(t.playMachine.gameState._timeScale*u.default.STANDARD_ANIM_MS/a.currStatus.OnMSKeep());for(let n=0;n<e.listNodeTrace.length;n++){let t=e.listNodeTrace[n];t.color=i.relBody.commonCache.colorMain,t.opacity=i.playerMgrAction.npc.GetTraceOpacity()}for(let n=0;n<e.listNodeBloom.length;n++)e.listNodeBloom[n].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[n])*Math.max(i.animKeepDefend.rateVisibility,i.animKeepShield.rateVisibility)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this.nodeTypeCacheMap.get(e.id)}};y.nodeTypeCacheMap=c.default.Pop(c.default.typeMap,f),a([h([cc.Node])],y.prototype,"listNodeBloom",void 0),a([h([cc.Node])],y.prototype,"listNodeTrace",void 0),a([h(cc.Animation)],y.prototype,"anim",void 0),a([h(cc.Node)],y.prototype,"nodeAngle",void 0),a([h(cc.Node)],y.prototype,"listNodeResist",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayEquipment006:[function(e,t,o){"use strict";cc._RF.push(t,"04766gO1ExD8qbG2RcBJvq0","GameDisplayEquipment006");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/basic/UtilObjPool"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../GameCommon"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayEquipment005";let y=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeTrace=[],this.anim=null,this.nodeAngle=null,this.listNodeResist=[]}LoadAnim(e){this._currAnim!=e&&(this._currAnim=e,this.anim.play(this._currAnim))}onDisable(){this._currAnim=null}static GetNodeTypeByRes(e){return this.nodeTypeCacheMap.has(e.id)||this.nodeTypeCacheMap.set(e.id,s.default.Pop(f,{prefabPath:e.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(f,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o).commonBehaviour,a=i.playerMgrEquipment.equipInst,r=a.atkAngle;r=r/Math.PI*180,e.nodeAngle.angle=r;for(let s=0;s<e.listNodeResist.length;s++)e.listNodeResist[s].angle=-r;e.node.x=a.relEquip.machine.equip.npc.args.equipOffsetX,e.node.y=a.relEquip.machine.equip.npc.args.equipOffsetY,e.LoadAnim(a.currStatus.OnAnim()),e.AnimTimeScale(t.playMachine.gameState._timeScale*u.default.STANDARD_ANIM_MS/a.currStatus.OnMSKeep());for(let s=0;s<e.listNodeTrace.length;s++){let t=e.listNodeTrace[s];t.color=i.relBody.commonCache.colorMain,t.opacity=i.playerMgrAction.npc.GetTraceOpacity()}for(let s=0;s<e.listNodeBloom.length;s++)e.listNodeBloom[s].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[s])*Math.max(i.animKeepDefend.rateVisibility,i.animKeepShield.rateVisibility)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this.nodeTypeCacheMap.get(e.id)}};y.nodeTypeCacheMap=c.default.Pop(c.default.typeMap,f),a([h([cc.Node])],y.prototype,"listNodeBloom",void 0),a([h([cc.Node])],y.prototype,"listNodeTrace",void 0),a([h(cc.Animation)],y.prototype,"anim",void 0),a([h(cc.Node)],y.prototype,"nodeAngle",void 0),a([h(cc.Node)],y.prototype,"listNodeResist",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayEquipment007:[function(e,t,o){"use strict";cc._RF.push(t,"d99aaSWZiJAy6f8l2xs8Jzy","GameDisplayEquipment007");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/basic/UtilObjPool"),d=e("../../frame/ui/UINodeInstHideRS"),u=e("../GameCommon"),m=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayEquipment007";let y=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeTrace=[],this.anim=null,this.nodeAngle=null,this.listNodeResist=[]}LoadAnim(e){this._currAnim!=e&&(this._currAnim=e,this.anim.play(this._currAnim))}onDisable(){this._currAnim=null}static GetNodeTypeByRes(e){return this.nodeTypeCacheMap.has(e.id)||this.nodeTypeCacheMap.set(e.id,s.default.Pop(f,{prefabPath:e.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(f,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o).commonBehaviour,a=i.playerMgrEquipment.equipInst;e.node.x=a.relEquip.machine.equip.npc.args.equipOffsetX,e.node.y=a.relEquip.machine.equip.npc.args.equipOffsetY,e.LoadAnim(a.currStatus.OnAnim()),e.AnimTimeScale(t.playMachine.gameState._timeScale*u.default.STANDARD_ANIM_MS/a.currStatus.OnMSKeep());for(let r=0;r<e.listNodeTrace.length;r++){let t=e.listNodeTrace[r];t.color=i.relBody.commonCache.colorMain,t.opacity=i.playerMgrAction.npc.GetTraceOpacity()}for(let r=0;r<e.listNodeBloom.length;r++)e.listNodeBloom[r].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[r])*Math.max(i.animKeepDefend.rateVisibility,i.animKeepShield.rateVisibility)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:m.default.none})),this.nodeTypeCacheMap.get(e.id)}};y.nodeTypeCacheMap=c.default.Pop(c.default.typeMap,f),a([h([cc.Node])],y.prototype,"listNodeBloom",void 0),a([h([cc.Node])],y.prototype,"listNodeTrace",void 0),a([h(cc.Animation)],y.prototype,"anim",void 0),a([h(cc.Node)],y.prototype,"nodeAngle",void 0),a([h(cc.Node)],y.prototype,"listNodeResist",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayHp01:[function(e,t,o){"use strict";cc._RF.push(t,"5d8e9UyYs9MtqTJ3WEDoAd7","GameDisplayHp01");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilMath"),n=e("../../frame/ui/UINodeInstEnterRS"),l=e("../../frame/ui/UINodeInstHideRS"),c=e("../../frame/ui/UINodeType"),d=e("../../frame/ui/UIViewComponent"),u=e("../../IndexDataModule"),m=e("../GameCommon"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayHp01";let y=i=class extends d.default{constructor(){super(...arguments),this.nodeBar=null,this.nodeBarNearBy=null,this.nodeShield=null,this.nodeWarning=null,this.nodeCDOpacity=null,this.nodeCDProgress=null}};y.nodeType=c.default.Pop(f,{prefabPath:`${m.default.SUB_MAIN}/prefab_ui/board_npc_01`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(f,{listRefModule:[u.default.DEFAULT,u.default.PLAYING],propsFilter:(e,t,o)=>{let i=o[0],a=o[1],r=o[2],n=o[3],l=t.playMachine.gameState.GetEleById(i),c=l.commonBehaviour,d=255-255*s.default.Clamp(1-c.hmStatusCD.cd/c.args.defendCD,0,1);e.node.opacity=d,e.node.x=a,e.node.y=r,e.node.width=2*n;let u=Math.max(l.commonHpCurrent+l.commonShield,l.commonHpMax);if(e.nodeBar.width=2*n*l.commonHpCurrent/u,e.nodeShield.x=e.nodeBar.width,e.nodeShield.width=2*n*l.commonShield/u,e.nodeWarning.opacity=e._nodeToOpacityMap.get(e.nodeWarning)*l.commonAnimTipsFlash.rateVisibility,e.nodeWarning.scaleX=e.nodeWarning.scaleY=2*l.commonAnimTipsFlash.rateVisibility,e.nodeBarNearBy.width<e.nodeBar.width?e.nodeBarNearBy.width+=.4:e.nodeBarNearBy.width-=.4,e.nodeBarNearBy.width=Math.max(e.nodeBarNearBy.width,e.nodeBar.width),e.nodeBarNearBy.width=Math.min(e.nodeBarNearBy.width,2*n),!l.commonCD||l.commonCD.msCD<2e3)return void(e.nodeCDOpacity.opacity=0);let m=1-l.commonCD.currentCD/l.commonCD.msCD;e.nodeCDProgress.width=2*n*m,m=1-Math.abs(m-.5)/.5,m=Math.pow(m,.1),e.nodeCDOpacity.opacity=255*m}})],childrenCreator:[],propsType:r.default.typeArray,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([h(cc.Node)],y.prototype,"nodeBar",void 0),a([h(cc.Node)],y.prototype,"nodeBarNearBy",void 0),a([h(cc.Node)],y.prototype,"nodeShield",void 0),a([h(cc.Node)],y.prototype,"nodeWarning",void 0),a([h(cc.Node)],y.prototype,"nodeCDOpacity",void 0),a([h(cc.Node)],y.prototype,"nodeCDProgress",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilMath":"UtilMath","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayHp:[function(e,t,o){"use strict";cc._RF.push(t,"0e730JL4uJDC4k5yG/uVTw9","GameDisplayHp");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeInstEnterRS"),n=e("../../frame/ui/UINodeInstHideRS"),l=e("../../frame/ui/UINodeType"),c=e("../../frame/ui/UIViewComponent"),d=e("../../IndexDataModule"),u=e("../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayHp";let f=i=class extends c.default{constructor(){super(...arguments),this.nodeBar=null,this.nodeBarNearBy=null,this.nodeShield=null,this.nodeWarning=null,this.nodeCDOpacity=null,this.nodeCDProgress=null}};f.nodeType=l.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/board_npc`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(h,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t,o)=>{let i=o[0],a=o[1],r=o[2],s=o[3],n=t.playMachine.gameState.GetEleById(i);e.node.x=a,e.node.y=r,e.node.width=2*s;let l=Math.max(n.commonHpCurrent+n.commonShield,n.commonHpMax);if(e.nodeBar.width=2*s*n.commonHpCurrent/l,e.nodeBarNearBy.width<e.nodeBar.width?e.nodeBarNearBy.width+=.4:e.nodeBarNearBy.width-=.4,e.nodeBarNearBy.width=Math.max(e.nodeBarNearBy.width,e.nodeBar.width),e.nodeBarNearBy.width=Math.min(e.nodeBarNearBy.width,2*s),e.nodeShield.x=e.nodeBar.width,e.nodeShield.width=2*s*n.commonShield/l,e.nodeWarning.opacity=e._nodeToOpacityMap.get(e.nodeWarning)*n.commonAnimTipsFlash.rateVisibility,e.nodeWarning.scaleX=e.nodeWarning.scaleY=2*n.commonAnimTipsFlash.rateVisibility,!n.commonCD||n.commonCD.msCD<1200)return void(e.nodeCDOpacity.opacity=0);let c=1-n.commonCD.currentCD/n.commonCD.msCD;e.nodeCDProgress.width=2*s*c,c=1-Math.abs(c-.5)/.5,c=Math.pow(c,.1),e.nodeCDOpacity.opacity=255*c}})],childrenCreator:[],propsType:r.default.typeArray,hideRS:n.default.setParentNull,enterRS:s.default.none}),a([p(cc.Node)],f.prototype,"nodeBar",void 0),a([p(cc.Node)],f.prototype,"nodeBarNearBy",void 0),a([p(cc.Node)],f.prototype,"nodeShield",void 0),a([p(cc.Node)],f.prototype,"nodeWarning",void 0),a([p(cc.Node)],f.prototype,"nodeCDOpacity",void 0),a([p(cc.Node)],f.prototype,"nodeCDProgress",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayLightPoint:[function(e,t,o){"use strict";cc._RF.push(t,"7fd0feATQFMUbUgJZTD7Y5Y","GameDisplayLightPoint");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../../frame/basic/BCType"),n=e("../../frame/ui/UINodeInstEnterRS"),l=e("../../frame/ui/UINodeInstHideRS"),c=e("../../frame/ui/UINodeType"),d=e("../../frame/ui/UIViewComponent"),u=e("../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayLightPoint";let f=i=class extends d.default{constructor(){super(...arguments),this.nodeColor=null}};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_eff/sunray`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.DEFAULT,r.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.currPos.x,e.node.y=i.currPos.y,e.nodeColor.opacity=Math.max(0,i.opacity),e.nodeColor.color=i.color,e.nodeColor.width=i.size,e.nodeColor.height=i.size}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Node)],f.prototype,"nodeColor",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayParticleRain:[function(e,t,o){"use strict";cc._RF.push(t,"4b3ffxqPvFBTbUYH/TuQLjk","GameDisplayParticleRain");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeInstEnterRS"),n=e("../../frame/ui/UINodeInstHideRS"),l=e("../../frame/ui/UINodeType"),c=e("../../frame/ui/UIViewComponent"),d=e("../../IndexDataModule"),u=e("../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayParticleRain";let f=i=class extends c.default{};f.nodeType=l.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_eff/particle_rain`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(h,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.currPos.x,e.node.y=i.currPos.y,e.node.angle=i.rotation}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.localScale0,enterRS:s.default.none}),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayParticleSnow:[function(e,t,o){"use strict";cc._RF.push(t,"0b094XVD+FEfZE436V5J7N8","GameDisplayParticleSnow");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeInstEnterRS"),n=e("../../frame/ui/UINodeInstHideRS"),l=e("../../frame/ui/UINodeType"),c=e("../../frame/ui/UIViewComponent"),d=e("../../IndexDataModule"),u=e("../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayParticleSnow";let f=i=class extends c.default{};f.nodeType=l.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_eff/particle_snow`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(h,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.currPos.x,e.node.y=i.currPos.y,e.node.angle=i.rotation}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.localScale0,enterRS:s.default.none}),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayPart:[function(e,t,o){"use strict";cc._RF.push(t,"255befyjpBJUJfzEOVO94av","GameDisplayPart");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeInstEnterRS"),l=e("../../frame/ui/UINodeInstHideRS"),c=e("../../frame/ui/UINodeType"),d=e("../../frame/ui/UIViewComponent"),u=e("../../IndexDataModule"),m=e("../GameCommon"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayPart";let y=i=class extends d.default{constructor(){super(...arguments),this.nodeColor=null}static GetNodeTypeByPath(e){return i._mapNodeType.has(e)||i._mapNodeType.set(e,c.default.Pop(f,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(f,{listRefModule:[u.default.DEFAULT,u.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.currPos.x,e.node.y=i.currPos.y;let a=1-i.totalMS/i.maxLifeMS;e.nodeColor.opacity=Math.max(0,a)*i.opacity,e.nodeColor.color=i.color}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none})),i._mapNodeType.get(e)}};y._mapNodeType=s.default.Pop(s.default.typeMap,f),y.nodeType101=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_1`),y.nodeType102=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_2`),y.nodeType103=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_3`),y.nodeType104=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_4`),y.nodeType105=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_5`),y.nodeType106=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_6`),y.nodeType107=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_7`),y.nodeType108=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_8`),y.nodeType109=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_9`),y.nodeType110=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_1_10`),y.nodeType201=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_1`),y.nodeType202=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_2`),y.nodeType203=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_3`),y.nodeType204=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_4`),y.nodeType205=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_5`),y.nodeType206=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_6`),y.nodeType207=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_7`),y.nodeType208=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_8`),y.nodeType209=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_9`),y.nodeType210=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_part/part_2_10`),a([h(cc.Node)],y.prototype,"nodeColor",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayPlayer000:[function(e,t,o){"use strict";cc._RF.push(t,"c14e28WhcpM2bSoFC7S7FDN","GameDisplayPlayer000");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeType"),n=e("../../frame/ui/UIViewComponent"),l=e("../../IndexDataModule"),c=e("../../frame/ui/UINodeInstHideRS"),d=e("../GameCommon"),u=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayPlayer000";let f=i=class extends n.default{constructor(){super(...arguments),this.listNodeBloom=[],this.listNodeDefend=[],this.listNodeShield=[],this.listNodeTrace=[],this.containerEquipment=null,this.animPlayer=null,this.listNodeHorseFrame=[],this.animHorse=null}LoadAnimPlayer(e){this._currAnimPlayer!=e&&(this._currAnimPlayer=e,this.animPlayer.play(this._currAnimPlayer))}LoadAnimHorse(e){}onDisable(){this._currAnimPlayer=null}};f.nodeType=s.default.Pop(h,{prefabPath:`${d.default.SUB_MAIN}/prefab_npc/player`,componentGetter:e=>e.getComponent(i),listModuleStyle:[s.default.ModuleStyle.Pop(h,{listRefModule:[l.default.DEFAULT,l.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.commonFootPos.x,e.node.y=i.commonFootPos.y,e.AnimTimeScale(t.playMachine.gameState._timeScale*i.commonTimeScaleSelf);let a,r,s=i.commonBehaviour;s.playerMgrHealth.machine.currStatus==s.playerMgrHealth.machine.statusOrdinary&&(s.playerMgrBodyDir.currStatus==s.playerMgrBodyDir.statusLeft&&(a="npc_yo_bi_anim_left"),s.playerMgrBodyDir.currStatus==s.playerMgrBodyDir.statusRight&&(a="npc_yo_bi_anim_right")),s.playerMgrHealth.machine.currStatus==s.playerMgrHealth.machine.statusHurted&&(s.playerMgrBodyDir.currStatus==s.playerMgrBodyDir.statusLeft&&(a="npc_yo_bi_anim_left_dmged"),s.playerMgrBodyDir.currStatus==s.playerMgrBodyDir.statusRight&&(a="npc_yo_bi_anim_right_dmged")),s.playerMgrHealth.machine.currStatus==s.playerMgrHealth.machine.statusDeath&&(a="npc_yo_bi_anim_death"),e.LoadAnimPlayer(a),s.playerMgrAction.currStatus!=s.playerMgrAction.statusWalk&&s.playerMgrAction.currStatus!=s.playerMgrAction.statusForwardUp&&s.playerMgrAction.currStatus!=s.playerMgrAction.statusForwardFloat||(r="npc_horse_ordinary"),s.playerMgrAction.currStatus!=s.playerMgrAction.statusJump&&s.playerMgrAction.currStatus!=s.playerMgrAction.statusJumpUp&&s.playerMgrAction.currStatus!=s.playerMgrAction.statusBackUp||(r="npc_horse_jump"),s.playerMgrAction.currStatus!=s.playerMgrAction.statusJumpFloat&&s.playerMgrAction.currStatus!=s.playerMgrAction.statusBackFloat||(r="npc_horse_float"),e.LoadAnimHorse(r);for(let n=0;n<e.listNodeHorseFrame.length;n++)e.listNodeHorseFrame[n].active=n==s.playerMgrHorseFrame.currStatus.idx;for(let n=0;n<e.listNodeTrace.length;n++){let t=e.listNodeTrace[n];t.color=s.relBody.commonCache.colorMain,t.opacity=s.playerMgrAction.npc.GetTraceOpacity()}for(let n=0;n<e.listNodeBloom.length;n++)e.listNodeBloom[n].color=s.relBody.commonCache.colorMain,e.listNodeBloom[n].opacity=e._nodeToOpacityMap.get(e.listNodeBloom[n])*Math.max(s.animKeepDefend.rateVisibility,s.animKeepShield.rateVisibility);for(let n=0;n<e.listNodeDefend.length;n++)e.listNodeDefend[n].color=s.relBody.commonCache.colorMain,e.listNodeDefend[n].opacity=e._nodeToOpacityMap.get(e.listNodeDefend[n])*s.animKeepDefend.rateVisibility;for(let n=0;n<e.listNodeShield.length;n++)e.listNodeShield[n].color=s.relBody.commonCache.colorMain,e.listNodeShield[n].opacity=e._nodeToOpacityMap.get(e.listNodeShield[n])*s.animKeepShield.rateVisibility}})],childrenCreator:[s.default.ChildrenGeneration.Pop(h,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetEleById(t),a=i.commonBehaviour;a.playerMgrHealth.machine.currStatus!=a.playerMgrHealth.machine.statusDeath&&a.playerMgrEquipment.equipInst.rs.instDisplay(e,i,o)}})],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:u.default.none}),a([p([cc.Node])],f.prototype,"listNodeBloom",void 0),a([p([cc.Node])],f.prototype,"listNodeDefend",void 0),a([p([cc.Node])],f.prototype,"listNodeShield",void 0),a([p([cc.Node])],f.prototype,"listNodeTrace",void 0),a([p(cc.Node)],f.prototype,"containerEquipment",void 0),a([p(cc.Animation)],f.prototype,"animPlayer",void 0),a([p([cc.Node])],f.prototype,"listNodeHorseFrame",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayPlayerHand000:[function(e,t,o){"use strict";cc._RF.push(t,"e002c4asvNJrZ/KUhRGoXmD","GameDisplayPlayerHand000");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeInstEnterRS"),n=e("../../frame/ui/UINodeInstHideRS"),l=e("../../frame/ui/UINodeType"),c=e("../../frame/ui/UIViewComponent"),d=e("../../IndexDataModule"),u=e("../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GameDisplayPlayerHand000";let f=i=class extends c.default{};f.nodeType=l.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_npc/player_hand`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(h,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:e=>{e.node.position.x=0,e.node.position.y=0,e.node.angle=0}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.none}),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameDisplayReward:[function(e,t,o){"use strict";cc._RF.push(t,"c3ed6ct5YZDV68ixPlA5rnf","GameDisplayReward");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/ui/UINodeInstHideRS"),n=e("../../frame/ui/UINodeType"),l=e("../../frame/ui/UIViewComponent"),c=e("../../IndexDataModule"),d=e("../GameCommon"),u=e("../view/equipment_view/EquipmentViewEquip"),m=e("../view/equipment_view/EquipmentViewBackpackProp"),p=e("../../frame/ui/UINodeInstEnterRS"),{ccclass:h,property:f}=cc._decorator,y="GameDisplayReward";let _=i=class extends l.default{constructor(){super(...arguments),this.containerEquipment=null}};_.nodeTypeForEquipment=n.default.Pop(y,{prefabPath:`${d.default.SUB_MAIN}/prefab_eff/scene_reward_equipment`,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(y,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);if(i.currStatus==i.statusIn&&(e.node.x=i.posInit.x,e.node.y=i.posInit.y,e.node.scale=i.currStatus.rate),i.currStatus==i.statusFloat){let t=2*i.currStatus.rate*Math.PI+i.statusFloat.equipInitAngle,o=Math.pow(1-i.currStatus.rate,2)*i.statusFloat.equipInitRadius;e.node.x=i.relState.player.commonCenterPos.x+Math.cos(t)*o,e.node.y=i.relState.player.commonCenterPos.y+Math.sin(t)*o,e.node.scale=1}i.currStatus==i.statusOut&&(e.node.x=i.relState.player.commonCenterPos.x,e.node.y=i.relState.player.commonCenterPos.y,e.node.scale=1-i.currStatus.rate)}})],childrenCreator:[n.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetEleById(t).props[0];o.push(u.default.GetNodeTypeForIconScene(i).CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:s.default.setParentNull,enterRS:p.default.none}),_.nodeTypeForParticle=n.default.Pop(y,{prefabPath:`${d.default.SUB_MAIN}/prefab_eff/scene_reward_particle`,componentGetter:e=>e.getComponent(i),listModuleStyle:[n.default.ModuleStyle.Pop(y,{listRefModule:[c.default.DEFAULT,c.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o),a=i.currStatus.rate;if(i.currStatus==i.statusIn&&(a=Math.pow(a,.5),e.node.x=i.posInit.x+a*i.statusIn.particleRandomX*50,e.node.y=i.posInit.y+a*i.statusIn.particleRandomY*50,e.node.opacity=255*a),i.currStatus==i.statusFloat){let t=i.posInit.x+50*i.statusIn.particleRandomX,o=i.posInit.y+50*i.statusIn.particleRandomY,r=i.relState.player.commonCenterPos.x-t,s=i.relState.player.commonCenterPos.y-o;e.node.x=t+r*a,e.node.y=o+s*a,e.node.opacity=255*(1-a)}i.currStatus==i.statusOut&&(e.node.x=i.relState.player.commonCenterPos.x,e.node.y=i.relState.player.commonCenterPos.y,e.node.opacity=255*(1-a))}})],childrenCreator:[n.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetEleById(t).props[0];o.push(m.default.GetNodeTypeForScene(i).CreateNode(e,i,i))}})],propsType:r.default.typeNumber,hideRS:s.default.setParentNull,enterRS:p.default.none}),a([f(cc.Node)],_.prototype,"containerEquipment",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon","../view/equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp","../view/equipment_view/EquipmentViewEquip":"EquipmentViewEquip"}],GameDisplayTxt:[function(e,t,o){"use strict";cc._RF.push(t,"800d6Mk3tJAw5z6EaSlPOiO","GameDisplayTxt");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../frame/basic/BCType"),s=e("../../frame/basic/UtilObjPool"),n=e("../../frame/ui/UINodeInstEnterRS"),l=e("../../frame/ui/UINodeInstHideRS"),c=e("../../frame/ui/UINodeType"),d=e("../../frame/ui/UIViewComponent"),u=e("../../IndexDataModule"),m=e("../GameCommon"),{ccclass:p,property:h}=cc._decorator,f="GameDisplayTxt";let y=i=class extends d.default{constructor(){super(...arguments),this.lab=null}static GetNodeTypeByPath(e){return this._map.has(e)||this._map.set(e,c.default.Pop(f,{prefabPath:e,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(f,{listRefModule:[u.default.DEFAULT,u.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.node.x=i.posCurrent.x,e.node.y=i.posCurrent.y,e.lab.string!=i.txt&&(e.lab.string=i.txt)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none})),this._map.get(e)}};y._map=s.default.Pop(s.default.typeMap,f),y.nodeTypeDmg=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_ui/txt_dmg_ordinary`),y.nodeTypeAppear=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_ui/txt_tips`),y.nodeTypeRecovery=i.GetNodeTypeByPath(`${m.default.SUB_MAIN}/prefab_ui/txt_recovery`),a([h(cc.Label)],y.prototype,"lab",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../../frame/basic/BCType":"BCType","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../frame/ui/UINodeType":"UINodeType","../../frame/ui/UIViewComponent":"UIViewComponent","../GameCommon":"GameCommon"}],GameElementBodyBehaviourRS:[function(e,t,o){"use strict";cc._RF.push(t,"dba29hZqfZFqaj0J+ZM9DVu","GameElementBodyBehaviourRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPoolType"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/config/src/CfgGameElement"),s=e("../../../frame/global/Jiang"),n=e("../../cfg_cache/CfgCacheGameElement"),l="GameElementBodyBehaviourRS";class c{constructor(){}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.logicCode=t.logicCode,o.cfgToArgs=t.cfgToArgs,o.init=t.init,o.instDisplay=t.instDisplay,o.boardDisplay=t.boardDisplay,o.atkGetter=t.atkGetter,o.hpGetter=t.hpGetter,o.sizeGetter=t.sizeGetter,o.aditionalBody=t.aditionalBody,o.aditionalEff=t.aditionalEff,o.aditionalVoice=t.aditionalVoice,c.instMap.set(o.logicCode,o),o}}c._t=new i.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),function(e){e.instMap=a.default.Pop(a.default.typeMap,l),e.GetAtk=function(t){let o=s.default.mgrCfg.cfgGameElement.select(r.default.idGetter,t)._list[0];if(null==o)return null;let i=e.instMap.get(o.logic);return null==i?null:i.atkGetter(o,n.default.GetCache(o).logicArgs)},e.GetHp=function(t){let o=s.default.mgrCfg.cfgGameElement.select(r.default.idGetter,t)._list[0];if(null==o)return null;let i=e.instMap.get(o.logic);return null==i?null:i.hpGetter(o,n.default.GetCache(o).logicArgs)},e.GetSize=function(t){let o=s.default.mgrCfg.cfgGameElement.select(r.default.idGetter,t)._list[0];if(null==o)return null;let i=e.instMap.get(o.logic);return null==i?null:i.sizeGetter(n.default.GetCache(o).logicArgs)}}(c||(c={})),o.default=c,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../frame/global/Jiang":"Jiang","../../cfg_cache/CfgCacheGameElement":"CfgCacheGameElement"}],GameElementBodyBehaviour:[function(e,t,o){"use strict";cc._RF.push(t,"64159WLXAhCS66U78p943ct","GameElementBodyBehaviour"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnInit(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnDestory(){}b2GetSpeedX(){return null==this.relBody.commonBody?0:this.relBody.commonBody.b2Body.GetLinearVelocity().x}},cc._RF.pop()},{}],GameElementBodyCtxDmgType:[function(e,t,o){"use strict";cc._RF.push(t,"3bff5ebbT9Ib6+dgqYhHYun","GameElementBodyCtxDmgType"),Object.defineProperty(o,"__esModule",{value:!0});class i{}(function(e){e.equipment=new e,e.shield=new e})(i||(i={})),o.default=i,cc._RF.pop()},{}],GameElementBodyCtxDmg:[function(e,t,o){"use strict";cc._RF.push(t,"e0ea3WzwxJDCJ9GNI8GGigj","GameElementBodyCtxDmg"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang");class s{constructor(){}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.dmg=t.dmg,o.posX=t.posX,o.posY=t.posY,o.repel=t.repel*r.default.mgrUI._sizePerPixel,o.norX=t.norX,o.norY=t.norY,o.type=t.type,o}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"DmgCtx"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang"}],GameElementBody:[function(e,t,o){"use strict";cc._RF.push(t,"f0a313VQStNuLxcTVs5Iuar","GameElementBody"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../GameElement"),a=e("../../../frame/config/src/CfgGameElement"),r=e("../../../frame/basic/BCEventer"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/basic/UtilObjPool"),l=e("./GameElementBodyBehaviourRS"),c=e("../buff/GameElementMgrBuff"),d=e("../../../frame/global/Jiang"),u=e("../../GameCommon"),m=e("../common/GameElementScene"),p=e("../GameCtxB2BodyFixtureTypeRS"),h=e("../common/GameElementTxt"),f=e("../common/AnimKeep"),y=e("../common/AnimFlash"),_=e("./GameSizeMarkRS"),g=e("../../cfg_cache/CfgCacheGameElement"),b=e("../../GameMath"),S="GameElementBody";class P extends i.default{constructor(){super(),this.commonActionId=0,this.commonAnimTipsKeep=f.default.Pop(S,100,100),this.commonAnimTipsFlash=y.default.Pop(S,200,600),this.commonArgsInitPos=n.default.Pop(n.default.typeccVec2,S),this.commonArgsInitVec=n.default.Pop(n.default.typeccVec2,S),this.commonFootPos=n.default.Pop(n.default.typeccVec2,S),this.commonCenterPos=n.default.Pop(n.default.typeccVec2,S),this.commonHeadPos=n.default.Pop(n.default.typeccVec2,S),this.commonHpMax=0,this.commonHpCurrent=0,this.commonTimeScaleSelf=1,this.commonEnabledMS=0,this.commonArgsPower=1,this.commonInfluence=1,this.commonEvterCureWithEff=r.default.Pop(S),this.commonEvterDmg=r.default.Pop(S),this.commonShield=0,this.listConcatedBodyEnemy=n.default.Pop(n.default.typeArray,S),this.listConcatedBodyEnemyNoBullet=n.default.Pop(n.default.typeArray,S),this.listConcatedBodyFriend=n.default.Pop(n.default.typeArray,S),this.listConcatedBodyFriendNoBullet=n.default.Pop(n.default.typeArray,S),this.listConcatedGround=n.default.Pop(n.default.typeArray,S),this._setDmgedTargetId=n.default.Pop(n.default.typeSet,S),this.isReleased=!1}static PopForCall(e,t){let o=d.default.mgrCfg.cfgGameElement.select(a.default.idGetter,t.cfgId)._list[0];return P.Pop(e,{posX:t.posX,posY:t.posY,vecX:t.vecX,vecY:t.vecY,cfgId:t.cfgId,camp:t.camp,power:(0==o.power||0==t.caller.commonArgsCfg.power?1:o.power/t.caller.commonArgsCfg.power)*t.caller.commonArgsPower,caller:t.caller})}static Pop(e,t){let o,i=d.default.mgrCfg.cfgGameElement.select(a.default.idGetter,t.cfgId)._list[0],r=l.default.instMap.get(i.logic),s=n.default.Pop(P._t,e);return s.commonCaller=t.caller,s.commonArgsPower=t.power,s.commonInfluence=i.props_influence_count*s.commonArgsPower,s.commonArgsCfg=i,s.commonCache=g.default.GetCache(i),s.commonArgsInitPos.x=t.posX,s.commonArgsInitPos.y=-1==t.posY?u.default.GROUND_Y:t.posY,s.commonArgsInitVec.x=t.vecX,s.commonArgsInitVec.y=t.vecY,s.commonArgsCamp=t.camp,s.commonArgsRs=r,s.commonFootPos.x=s.commonArgsInitPos.x,s.commonFootPos.y=s.commonArgsInitPos.y,s.commonCenterPos.x=s.commonFootPos.x,s.commonCenterPos.y=s.commonFootPos.y,s.commonMgrBuff=c.default.Pop(e,s),s.evterAdded.On(()=>{o=s.relState.evterSteped.On(e=>{s.commonEnabledMS+=e,s.commonBehaviour&&(s.commonAnimTipsKeep.currStatus.OnStep(e),s.commonAnimTipsFlash.currStatus.OnStep(e),s.commonCD&&s.commonCD.currStatus.OnStep(e),s.RefreshConcatedData(),s.commonBehaviour.OnTimeStep(e))}),s.commonBehaviour&&s.commonBehaviour.OnInit()}),s.commonEvterCureWithEff.On(e=>{_.default.PlayEffCure(S,s),s.commonHpCurrent+=e,s.commonHpCurrent=Math.min(s.commonHpCurrent,s.commonHpMax),h.default.PopForCure(S,e,s)}),s.commonEvterDmg.On(e=>{s.commonBehaviour&&s.commonBehaviour.OnDmg(e)}),s.evterContactGroundA.On(e=>{s.commonBehaviour&&s.commonBehaviour.OnConcatA(e)}),s.evterContactGroundB.On(e=>{s.commonBehaviour&&s.commonBehaviour.OnConcatB(e)}),s.evterRem.On(()=>{if(null==s.commonCaller)for(let e=0;e<s.commonCache.listDrop.length;e++){let t=s.commonCache.listDrop[e],o=Math.random()<b.default.GetDropRate(s.commonArgsCfg.id);(o=o||u.default.ALL_DROP)&&t.rs.onTrigger(t,s)}s.relState.evterSteped.Off(o),s.commonBehaviour&&s.commonBehaviour.OnDestory(),s.commonMgrBuff.Clear()}),r.init(s,g.default.GetCache(s.commonArgsCfg).logicArgs),s}GetPhysicsTag(){return P}IsConcatWithGround(){for(let e=0;e<this.listConcatedGround.length;e++)if(this.listConcatedGround[e].fixtureSelf.type!=p.default.AREA&&null!=this.commonBody&&this.commonBody.b2Body.GetLinearVelocity().y<=0)return!0;return!1}RefreshConcatedData(){this.listConcatedBodyEnemy.length=0,this.listConcatedBodyEnemyNoBullet.length=0,this.listConcatedBodyFriend.length=0,this.listConcatedBodyFriendNoBullet.length=0,this.listConcatedGround.length=0;for(let e=0;e<this.listBodyCtx.length;e++){let t=this.listBodyCtx[e];for(let e=0;e<t.listFixtureCtx.length;e++){let o=t.listFixtureCtx[e];for(let e=0;e<o.listConcat.length;e++){let t=o.listConcat[e];if(null==t.relFixture.relBody)continue;let i=t.relFixture.relBody.relEle;i.isValid&&i instanceof P&&i.commonArgsCamp!=this.commonArgsCamp&&(this.listConcatedBodyEnemy.push(t),t.relFixture.type!=p.default.BODY_BULLET&&this.listConcatedBodyEnemyNoBullet.push(t)),i.isValid&&i instanceof P&&i.commonArgsCamp==this.commonArgsCamp&&(this.listConcatedBodyFriend.push(t),t.relFixture.type!=p.default.BODY_BULLET&&this.listConcatedBodyFriendNoBullet.push(t)),i.isValid&&i instanceof m.default&&this.listConcatedGround.push(t)}}}}ClearDmgRecord(){this._setDmgedTargetId.clear()}CheckDmgAble(e){if(!e.CheckValid())return!1;let t=e.relFixture.relBody.relEle;return!(this._setDmgedTargetId.has(t.id)||t.commonCaller&&this._setDmgedTargetId.has(t.commonCaller.id))}CauseDmg(e,t){if(!this.CheckDmgAble(e))return;let o=e.relFixture.relBody.relEle;this._setDmgedTargetId.add(o.id),o.commonEvterDmg.Call(t)}BodyStop(){if(!this.commonBody)return;let e=n.default.Pop(n.default.typeccVec2,S);this.commonBody.b2Body.SetLinearVelocity(e)}Release(){this.isReleased=!0,super.Release()}}P._t=new s.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.ANIM_IDLE="anim_idle",e.ANIM_ACTION="anim_action",e.ANIM_WALK="anim_walk"}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../frame/basic/BCEventer":"BCEventer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../frame/global/Jiang":"Jiang","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheGameElement":"CfgCacheGameElement","../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElement":"GameElement","../buff/GameElementMgrBuff":"GameElementMgrBuff","../common/AnimFlash":"AnimFlash","../common/AnimKeep":"AnimKeep","../common/GameElementScene":"GameElementScene","../common/GameElementTxt":"GameElementTxt","./GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./GameSizeMarkRS":"GameSizeMarkRS"}],GameElementBuffBehaviour:[function(e,t,o){"use strict";cc._RF.push(t,"9f32eqA8H9INKeM8ohiNErt","GameElementBuffBehaviour"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameElementBuffBehaviour=void 0;const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e){return i.default.Pop(r._t,e)}Init(e,t){this.relBuff=e}OnLayerIncrease(){}}o.GameElementBuffBehaviour=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"GameElementBuffBehaviour"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameElementBuffLogic3001001:[function(e,t,o){"use strict";cc._RF.push(t,"bf1bbMVRKhFFYS5YwqUzjLR","GameElementBuffLogic3001001"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../GameElementBuffBehaviour"),s=e("../GameElementBuffRS"),n=e("../../body/GameElementBodyCtxDmg"),l=e("../../body/GameElementBodyCtxDmgType"),c="GameElementBuffLogic3001001";class d extends r.GameElementBuffBehaviour{constructor(){super()}OnLayerIncrease(){this.relBuff._layer==this.relBuff._cfg.layer_max&&(this.relBuff.EnterStatus(this.relBuff._statusUnload),this.relBuff._mgrBuff.eleMonster.commonEvterDmg.Call(n.default.Pop(c,{dmg:0,posX:this.relBuff._mgrBuff.eleMonster.commonHeadPos.x,posY:this.relBuff._mgrBuff.eleMonster.commonHeadPos.y,repel:0,norX:0,norY:1,type:l.default.equipment})))}}d._tExp=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),s.default.Pop(c,{logicCode:3001001,instantiate:()=>i.default.Pop(d._tExp,c),argsCreate:()=>({})}),o.default=d,cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../body/GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../../body/GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameElementBuffBehaviour":"GameElementBuffBehaviour","../GameElementBuffRS":"GameElementBuffRS"}],GameElementBuffRS:[function(e,t,o){"use strict";cc._RF.push(t,"3f5f9nMw3JE/qyN1R+XOx48","GameElementBuffRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r="GameElementBuffRS";class s{constructor(){}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.logicCode=t.logicCode,o.instantiate=t.instantiate,o.cfgToArgs=t.argsCreate,s.instMap.set(o.logicCode,o),o}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),function(e){e.SYM_REC=Symbol(r),e.instMap=i.default.Pop(i.default.typeMap,r)}(s||(s={})),o.default=s,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameElementBuffStatusDestory:[function(e,t,o){"use strict";cc._RF.push(t,"158f4vdHtFCgK7vp0Dwn2rq","GameElementBuffStatusDestory"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameElementBuffStatus"),s="prefab_buff_anim_out";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}OnEnter(){this._relBuff.evterUnload.Call()}ActGetAnimName(){return s}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GameElementBuffStatusDestory"}),o.default=n,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameElementBuffStatus":"GameElementBuffStatus"}],GameElementBuffStatusEffect:[function(e,t,o){"use strict";cc._RF.push(t,"f7a5aZ2J71F6odQQ6BuOnYW","GameElementBuffStatusEffect"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameElementBuffStatus"),s="prefab_buff_anim_in";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}OnEnter(){this._relBuff._mgrBuff._map.set(this._relBuff._cfg.id,this._relBuff)}OnStep(e){0<this._relBuff._cfg.layer_keep_ms&&(this._relBuff.ms-=e,this._relBuff.ms<0&&(this._relBuff.ms=0),0==this._relBuff.ms&&this._relBuff.EnterStatus(this._relBuff._statusUnload))}OnExit(){this._relBuff._mgrBuff._map.delete(this._relBuff._cfg.id)}ActGetAnimName(){return s}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GameElementBuffStatusEff"}),o.default=n,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameElementBuffStatus":"GameElementBuffStatus"}],GameElementBuffStatusUnload:[function(e,t,o){"use strict";cc._RF.push(t,"9bb3fiqaKdE3bTsA47cenwb","GameElementBuffStatusUnload"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameElementBuffStatus"),s="prefab_buff_anim_out";class n extends r.default{constructor(){super(),this._wait=1e3}static Pop(e){return i.default.Pop(n._t,e)}OnStep(e){this._wait-=e,this._wait<=0&&this._relBuff.EnterStatus(this._relBuff._statusDestory)}ActGetAnimName(){return s}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"GameElementBuffStatusUnload"}),o.default=n,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameElementBuffStatus":"GameElementBuffStatus"}],GameElementBuffStatus:[function(e,t,o){"use strict";cc._RF.push(t,"3965c7WB05PVa4/qSstdLD0","GameElementBuffStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{Init(e){this._relBuff=e}OnStep(e){}OnExit(){}OnEnter(){}},cc._RF.pop()},{}],GameElementBuff:[function(e,t,o){"use strict";cc._RF.push(t,"8ed7fO4Xq1JvLeJSl1YmUW0","GameElementBuff"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCEventer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/config/src/CfgBuffProps"),n=e("../../../frame/global/Jiang"),l=e("../GameElement"),c=e("./GameElementBuffBehaviour"),d=e("./GameElementBuffRS"),u=e("./GameElementBuffStatusDestory"),m=e("./GameElementBuffStatusEffect"),p=e("./GameElementBuffStatusUnload"),h="GameElementBuff";class f extends l.default{constructor(){super(),this._layer=1,this._cfg=null,this._mgrBuff=null,this._currStatus=null,this.evterUnload=i.default.Pop(h)}static Pop(e,t,o){let i=n.default.mgrCfg.cfgBuffProps.select(s.default.idGetter,t)._list[0],r=a.default.Pop(f._t,e),l=d.default.instMap.get(i.logic);r.behaviour=null==l?c.GameElementBuffBehaviour.Pop(e):l.instantiate(),r.behaviour.Init(r,i[d.default.SYM_REC]),r.ms=i.layer_keep_ms,r._cfg=i,r._mgrBuff=o,r._statusEffect=m.default.Pop(e),r._statusEffect.Init(r),r._statusUnload=p.default.Pop(e),r._statusUnload.Init(r),r._statusDestory=u.default.Pop(e),r._statusDestory.Init(r),r.EnterStatus(r._statusEffect);let h=o.eleMonster.relState.evterSteped.On(e=>{r.StepMS(e)});return r._mgrBuff.eleMonster.relState.AddEle(r),r.evterUnload.On(()=>{o.eleMonster.relState.evterSteped.Off(h),r._mgrBuff.eleMonster.relState.RemEle(r)}),r.behaviour.OnLayerIncrease(),r.StepMS(0),r}EnterStatus(e){let t=this._currStatus;this._currStatus=e,t&&t.OnExit(),this._currStatus.OnEnter()}InCreaseLayer(){this._layer++,this.ms=this._cfg.layer_keep_ms,this.behaviour.OnLayerIncrease()}StepMS(e){this.buffX=this._mgrBuff.eleMonster.commonHeadPos.x,this.buffY=this._mgrBuff.eleMonster.commonHeadPos.y+20,this._currStatus.OnStep(e)}}f._t=new r.default({instantiate:()=>new f,onPop:()=>{},onPush:()=>{},tag:h}),o.default=f,cc._RF.pop()},{"../../../frame/basic/BCEventer":"BCEventer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgBuffProps":"CfgBuffProps","../../../frame/global/Jiang":"Jiang","../GameElement":"GameElement","./GameElementBuffBehaviour":"GameElementBuffBehaviour","./GameElementBuffRS":"GameElementBuffRS","./GameElementBuffStatusDestory":"GameElementBuffStatusDestory","./GameElementBuffStatusEffect":"GameElementBuffStatusEffect","./GameElementBuffStatusUnload":"GameElementBuffStatusUnload"}],GameElementEff:[function(e,t,o){"use strict";cc._RF.push(t,"48fd1Hfxi9LH7JSP5p27cIU","GameElementEff"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/config/src/CfgEff"),s=e("../../../frame/global/Jiang"),n=e("../GameElement"),l="GameElementEff";class c extends n.default{constructor(){super(),this.pos=i.default.Pop(i.default.typeccVec2,l),this.dir=i.default.Pop(i.default.typeccVec2,l),this.totalMS=0}static PopForXYBind(e,t,o,a,n,l,d,u){let m,p=u.relState,h=u.id,f=p.GetEleById(h),y=t-f.commonFootPos.x,_=o-f.commonFootPos.y,g=i.default.Pop(c._t,e);g.tint=d,g.pos.x=t,g.pos.y=o,g.dir.x=a,g.dir.y=n,g.cfgId=l,g.cfg=s.default.mgrCfg.cfgEff.select(r.default.idGetter,l)._list[0],g.rotation=Math.atan2(n,a),g.rotation=g.rotation-Math.PI/2,g.rotation=g.rotation/Math.PI*180,g.evterAdded.On(()=>{m=g.relState.evterSteped.On(e=>{p.GetEleById(h)&&(g.pos.x=f.commonFootPos.x+y,g.pos.y=f.commonFootPos.y+_),g.totalMS+=e,g.cfg.life<g.totalMS&&g.relState.RemEle(g)})}),g.evterRem.On(()=>{g.relState.evterSteped.Off(m)}),p.AddEle(g)}static PopForXYStatic(e,t,o,a,n,l,d){let u,m=i.default.Pop(c._t,e);return m.tint=d,m.pos.x=t,m.pos.y=o,m.dir.x=a,m.dir.y=n,m.cfgId=l,m.cfg=s.default.mgrCfg.cfgEff.select(r.default.idGetter,l)._list[0],m.rotation=Math.atan2(n,a),m.rotation=m.rotation-Math.PI/2,m.rotation=m.rotation/Math.PI*180,m.evterAdded.On(()=>{u=m.relState.evterSteped.On(e=>{m.totalMS+=e,m.cfg.life<m.totalMS&&m.relState.RemEle(m)})}),m.evterRem.On(()=>{m.relState.evterSteped.Off(u)}),m}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgEff":"CfgEff","../../../frame/global/Jiang":"Jiang","../GameElement":"GameElement"}],GameElementLightPoint:[function(e,t,o){"use strict";cc._RF.push(t,"6a43ecmyrdKX4xzj8spiBtt","GameElementLightPoint"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../GameElement"),s="GameElementLigthPoint",n=200;class l extends r.default{constructor(){super(),this.dirInc=1,this.speedInc=255/n,this.opacity=0,this.currPos=i.default.Pop(i.default.typeccVec2,s)}static Pop(e,t,o,a){let r,s=i.default.Pop(l._t,e);return s.idBind=t,s.color=o,s.size=4*a,o.r,o.g,o.b,s.evterAdded.On(()=>{let e=e=>{let t=s.relState.GetEleById(s.idBind);null==t?s.dirInc=-1:(s.currPos.x=t.commonCenterPos.x,s.currPos.y=t.commonCenterPos.y),s.opacity+=s.dirInc*s.speedInc*e,s.opacity=Math.min(s.opacity,255),s.opacity<0&&s.relState.RemEle(s)};r=s.relState.evterSteped.On(e),e(0)}),s.evterRem.On(()=>{s.relState.evterSteped.Off(r)}),s}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../GameElement":"GameElement"}],GameElementMgrBuff:[function(e,t,o){"use strict";cc._RF.push(t,"59781zQXy9CUruRDybApl60","GameElementMgrBuff"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./GameElementBuff"),s="GameElementMgrBuff";class n{constructor(){this._map=i.default.Pop(i.default.typeMap,s)}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.eleMonster=t,o}AddBuff(e){this._isBuffCleared||(this._map.has(e)?this._map.get(e).InCreaseLayer():r.default.Pop(s,e,this))}Clear(){this._isBuffCleared=!0;let e=i.default.Pop(i.default.typeArray,s);this._map.forEach(t=>{e.push(t)});for(let t=0;t<e.length;t++){let o=e[t];o.EnterStatus(o._statusUnload)}}}n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),o.default=n,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameElementBuff":"GameElementBuff"}],GameElementParticleRainMgr:[function(e,t,o){"use strict";cc._RF.push(t,"39046I6xfZMbaKQmfKGxMs2","GameElementParticleRainMgr"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCEventer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/MgrUI"),l=e("../../GameCommon"),c=e("./GameElementParticleRain"),d="GameElementParticleRainMgr",u=1e3/60;class m{constructor(){this.evterSteped=i.default.Pop(d)}static Pop(e,t){let o=a.default.Pop(m._t,e);return o.relGameState=t,t.evterSteped.On(e=>{o.evterSteped.Call(e)}),o.evterSteped.On(e=>{o.OnStepMS(e)}),o}OnStepMS(e){let t=0;for(t+=e*this.countPerMS;1<t;)this.Drop(),t--;Math.random()<t&&this.Drop()}Drop(){let e=this.relGameState.player.commonBehaviour.b2GetSpeedX()/1e3/s.default.mgrUI._sizePerPixel,t=(l.default.GROUND_Y-n.default.FAT_HEIGHT)/l.default.SCENE_SCALE/this.speedY*(this.speedX-e);this.xMin=this.relGameState.player.commonFootPos.x+l.default.CAMERA_OFFSET_X/l.default.SCENE_SCALE,this.xMin=Math.min(this.xMin,this.xMin-t),this.xMax=this.relGameState.player.commonFootPos.x+(l.default.CAMERA_OFFSET_X+s.default.mgrUI._containerUI.width)/l.default.SCENE_SCALE,this.xMax=Math.max(this.xMax,this.xMax-t);let o=this.xMin+(this.xMax-this.xMin)*Math.random(),i=n.default.FAT_WIDTH,a=c.default.Pop(d,this,o,i,this.speedX,this.speedY);this.relGameState.AddEle(a)}WarmUp(){let e=(l.default.GROUND_Y-n.default.FAT_HEIGHT)/l.default.SCENE_SCALE/this.speedY-1;for(;u<e;)e-=u,this.evterSteped.Call(u)}}o.default=m,m._t=new r.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../frame/basic/BCEventer":"BCEventer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/MgrUI":"MgrUI","../../GameCommon":"GameCommon","./GameElementParticleRain":"GameElementParticleRain"}],GameElementParticleRain:[function(e,t,o){"use strict";cc._RF.push(t,"cc7cbQc/PRILq/qaw6hanor","GameElementParticleRain"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../display/GameDisplayPart"),s=e("../../GameCommon"),n=e("../common/GameElementPart"),l=e("./GameElementParticle"),c="GameElementParticleRain",d=new cc.Color(159,231,255),u=.08,m=200;class p extends l.default{constructor(){super(),this.currPos=i.default.Pop(i.default.typeccVec2,c)}static Pop(e,t,o,a,l,c){let h=i.default.Pop(p._t,e);return h.rrRelMgr=t,h.currPos.x=o,h.currPos.y=a,h.rotation=Math.atan2(c,l)/Math.PI*180,h.evterAdded.On(()=>{h.rrListenerStep=h.rrRelMgr.evterSteped.On(t=>{h.currPos.x+=t*l,h.currPos.y+=t*c,s.default.GROUND_Y<h.currPos.y||(h.relState.AddEle(n.default.Pop(e,h.currPos.x,s.default.GROUND_Y,u,u,d,r.default.nodeType202,m,0)),h.relState.AddEle(n.default.Pop(e,h.currPos.x,s.default.GROUND_Y,-u,u,d,r.default.nodeType202,m,0)),h.relState.RemEle(h))})}),h.evterRem.On(()=>{h.rrRelMgr.evterSteped.Off(h.rrListenerStep)}),h}Release(){this.Clear(),this.rrRelMgr=null,this.rrListenerStep=0,this.currPos.x=0,this.currPos.y=0,i.default.Push(this)}}o.default=p,p._t=new a.default({instantiate:()=>new p,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../GameCommon":"GameCommon","../../display/GameDisplayPart":"GameDisplayPart","../common/GameElementPart":"GameElementPart","./GameElementParticle":"GameElementParticle"}],GameElementParticleSnowMgr:[function(e,t,o){"use strict";cc._RF.push(t,"bcc49duu5RBjr2i5BjyMGVP","GameElementParticleSnowMgr"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCEventer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/MgrUI"),l=e("../../GameCommon"),c=e("./GameElementParticleSnow"),d="GameElementParticleSnowMgr",u=1e3/60;class m{constructor(){this.evterSteped=i.default.Pop(d)}static Pop(e,t){let o=a.default.Pop(m._t,e);return o.relGameState=t,t.evterSteped.On(e=>{o.evterSteped.Call(e)}),o.evterSteped.On(e=>{o.OnStepMS(e)}),o}OnStepMS(e){let t=0;for(t+=e*this.countPerMS;1<t;)this.Drop(),t--;Math.random()<t&&this.Drop()}Drop(){let e=this.relGameState.player.commonBehaviour.b2GetSpeedX()/1e3/s.default.mgrUI._sizePerPixel,t=(l.default.GROUND_Y-n.default.FAT_HEIGHT)/l.default.SCENE_SCALE/this.speedY*(this.speedX-e);this.xMin=this.relGameState.player.commonFootPos.x+l.default.CAMERA_OFFSET_X/l.default.SCENE_SCALE,this.xMin=Math.min(this.xMin,this.xMin-t),this.xMax=this.relGameState.player.commonFootPos.x+(l.default.CAMERA_OFFSET_X+s.default.mgrUI._containerUI.width)/l.default.SCENE_SCALE,this.xMax=Math.max(this.xMax,this.xMax-t);let o=this.xMin+(this.xMax-this.xMin)*Math.random(),i=n.default.FAT_WIDTH,a=c.default.Pop(d,this,o,i,this.speedX,this.speedY);this.relGameState.AddEle(a)}WarmUp(){let e=(l.default.GROUND_Y-n.default.FAT_HEIGHT)/l.default.SCENE_SCALE/this.speedY;for(;u<e;)e-=u,this.evterSteped.Call(u)}}o.default=m,m._t=new r.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../frame/basic/BCEventer":"BCEventer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/MgrUI":"MgrUI","../../GameCommon":"GameCommon","./GameElementParticleSnow":"GameElementParticleSnow"}],GameElementParticleSnow:[function(e,t,o){"use strict";cc._RF.push(t,"bfbce63nkNK97YZxzXUuk0c","GameElementParticleSnow"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../GameCommon"),s=e("../common/GameElementEff"),n=e("./GameElementParticle"),l="GameElementParticleSnow";class c extends n.default{constructor(){super(),this.currPos=i.default.Pop(i.default.typeccVec2,l)}static Pop(e,t,o,a,n,d){let u=i.default.Pop(c._t,e);return u.rrRelMgr=t,u.currPos.x=o,u.currPos.y=a,u.rotation=Math.atan2(d,n)/Math.PI*180,u.evterAdded.On(()=>{u.rrListenerStep=u.rrRelMgr.evterSteped.On(e=>{u.currPos.x+=e*n,u.currPos.y+=e*d,r.default.GROUND_Y<u.currPos.y||u.relState.RemEle(u)})}),u.evterRem.On(()=>{u.rrRelMgr.evterSteped.Off(u.rrListenerStep),u.relState.AddEle(s.default.PopForXYStatic(l,u.currPos.x,u.currPos.y,0,1,10005,cc.Color.WHITE))}),u}Release(){this.Clear(),this.rrRelMgr=null,this.rrListenerStep=0,this.currPos.x=0,this.currPos.y=0,i.default.Push(this)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../GameCommon":"GameCommon","../common/GameElementEff":"GameElementEff","./GameElementParticle":"GameElementParticle"}],GameElementParticle:[function(e,t,o){"use strict";cc._RF.push(t,"5ac2elgwwtMY7bH052aG3P9","GameElementParticle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../GameElement");class a extends i.default{GetPhysicsTag(){return a}}o.default=a,cc._RF.pop()},{"../GameElement":"GameElement"}],GameElementPart:[function(e,t,o){"use strict";cc._RF.push(t,"b13bbGcNEdIb45159awl2Lo","GameElementPart"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/global/Jiang"),a=e("../GameElement"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../display/GameDisplayPart"),l="GameElementPart";let c=[{nodeType:n.default.nodeType202,radius:2,volume:0},{nodeType:n.default.nodeType203,radius:3,volume:0},{nodeType:n.default.nodeType204,radius:4,volume:0},{nodeType:n.default.nodeType205,radius:5,volume:0},{nodeType:n.default.nodeType206,radius:6,volume:0},{nodeType:n.default.nodeType207,radius:7,volume:0},{nodeType:n.default.nodeType208,radius:8,volume:0},{nodeType:n.default.nodeType209,radius:9,volume:0},{nodeType:n.default.nodeType210,radius:10,volume:0}];for(let f=0;f<c.length;f++){let e=c[f];e.volume=Math.PI*Math.pow(e.radius,2)}const d=.32,u=.5,m=1e3,p=.7;class h extends a.default{constructor(){super(),this.currPos=s.default.Pop(s.default.typeccVec2,l),this.currSpeed=s.default.Pop(s.default.typeccVec2,l),this.totalMS=0}static BoomForBody(e,t,o,i,a,r,s,n){let l=Math.PI*Math.pow(i,2),f=Math.atan2(-n,-s);f<-Math.PI/2&&(f+=2*Math.PI),f=f<Math.PI/2?(Math.PI/2-f)*p+f:(f-Math.PI/2)*(1-p)+Math.PI/2;let y=l;for(let p=c.length-1;0<=p;p--){let i=c[p];if(y/3<i.volume)continue;let s=l/i.volume;if(s=Math.floor(s),(s=Math.min(s,3))<=0)continue;l-=s*i.volume;let n=2*Math.PI/s;for(let l=0;l<s;l++){let s=Math.PI/2+l*n,c=a+Math.cos(s)*i.radius,p=r+Math.sin(s)*i.radius,y=f+2*(Math.random()-.5)/6*Math.PI;t.AddEle(h.Pop(e,c,p,Math.cos(y)*d,Math.sin(y)*d,o,i.nodeType,m,u))}}}static BoomForHorse(e,t,o,i,a,r,s,n,l,d,u){let m=Math.PI*Math.pow(i,2),p=Math.atan2(n,s),f=m;for(let y=c.length-1;0<=y;y--){let i=c[y];if(f/3<i.volume)continue;let s=m/i.volume;if(s=Math.floor(s),(s=Math.min(s,2))<=0)continue;m-=s*i.volume;let n=2*Math.PI/s;for(let c=0;c<s;c++){let s=Math.PI/2+c*n,m=a+Math.cos(s)*i.radius,f=r+Math.sin(s)*i.radius,y=p+2*(Math.random()-.5)/6*Math.PI;t.AddEle(h.Pop(e,m,f,Math.cos(y)*l,Math.sin(y)*l,o,i.nodeType,d,u))}}}static Pop(e,t,o,a,r,n,l,c,d){let u=s.default.Pop(h._t,e);return u.currPos.x=t,u.currPos.y=o,u.currSpeed.x=a,u.currSpeed.y=r,u.opacity=n.a,n.a=255,u.color=n,u.nodeType=l,u.maxLifeMS=c,u.evterAdded.On(()=>{u.rrListenIdStep=u.relState.evterSteped.On(e=>{u.currPos.x+=u.currSpeed.x*e,u.currPos.y+=u.currSpeed.y*e,u.currSpeed.y+=u.relState.b2Gravity*d/i.default.mgrUI._sizePerPixel*e/1e3/1e3,u.totalMS+=e,u.maxLifeMS<u.totalMS&&u.relState.RemEle(u)})}),u.evterRem.On(()=>{u.relState.evterSteped.Off(u.rrListenIdStep)}),u}GetPhysicsTag(){return h}Release(){this.Clear(),this.rrListenIdStep=0,this.currPos.x=0,this.currPos.y=0,this.color=null,this.maxLifeMS=null,this.totalMS=0,s.default.Push(this)}}o.default=h,h._t=new r.default({instantiate:()=>new h,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../display/GameDisplayPart":"GameDisplayPart","../GameElement":"GameElement"}],GameElementReward:[function(e,t,o){"use strict";cc._RF.push(t,"a2bcfLbQxdJ4bjN9XGuWuzD","GameElementReward"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilMath"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../GameElement"),n="GameElementReward";class l extends s.default{constructor(){super(),this.posInit=a.default.Pop(a.default.typeccVec2,n)}static Pop(e,t,o,i,r,s,n,c){let d,u=a.default.Pop(l._t,e);return u.msIn=s,u.msFloat=n,u.msOut=c,u.posInit.x=t,u.posInit.y=o,u.cache=i,u.props=r,u.statusIn=new l.StatusIn(u),u.statusFloat=new l.StatusFloat(u),u.statusOut=new l.StatusOut(u),u.evterAdded.On(()=>{u.idAnimNeed=u.relState.counterAnimNeed.Apply(),u.EnterStatus(u.statusIn),d=u.relState.evterSteped.On(e=>{u.currStatus.OnStep(e)})}),u.evterRem.On(()=>{u.relState.evterSteped.Off(d)}),u}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),this.currStatus.OnEnter()}}l._t=new r.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),function(e){class t{constructor(e){this.rate=0,this.relMachine=e}OnEnter(){}OnExit(){}OnStep(e){}}e.Status=t,e.StatusIn=class extends t{constructor(){super(...arguments),this._msTotal=0}OnEnter(){this.particleRandomX=i.default.RandomLowerToUpper(),this.particleRandomY=Math.random()}OnStep(e){this._msTotal+=e,this._msTotal=Math.min(this._msTotal,this.relMachine.msIn),this.rate=this._msTotal/this.relMachine.msIn,this._msTotal<this.relMachine.msIn||this.relMachine.EnterStatus(this.relMachine.statusFloat)}},e.StatusFloat=class extends t{constructor(){super(...arguments),this._msTotal=0}OnEnter(){let e=this.relMachine.posInit.x-this.relMachine.relState.player.commonCenterPos.x,t=this.relMachine.posInit.y-this.relMachine.relState.player.commonCenterPos.y;this.equipInitRadius=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),this.equipInitAngle=Math.atan2(t,e)}OnStep(e){this._msTotal+=e,this._msTotal=Math.min(this._msTotal,this.relMachine.msFloat),this.rate=this._msTotal/this.relMachine.msFloat,this._msTotal<this.relMachine.msFloat||this.relMachine.EnterStatus(this.relMachine.statusOut)}},e.StatusOut=class extends t{constructor(){super(...arguments),this._msTotal=0}OnStep(e){this._msTotal+=e,this._msTotal=Math.min(this._msTotal,this.relMachine.msOut),this.rate=this._msTotal/this.relMachine.msOut,this._msTotal<this.relMachine.msOut||(this.relMachine.cache.rs.onGot(this.relMachine),this.relMachine.relState.RemEle(this.relMachine),this.relMachine.relState.counterAnimNeed.Cancel(this.relMachine.idAnimNeed))}}}(l||(l={})),o.default=l,cc._RF.pop()},{"../../../frame/basic/UtilMath":"UtilMath","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../GameElement":"GameElement"}],GameElementScene:[function(e,t,o){"use strict";cc._RF.push(t,"16dbeFBS6ZLZ5u1FtXzWUHI","GameElementScene"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/MgrUI"),n=e("../../GameCommon"),l=e("../GameCtxB2BodyFixtureTypeRS"),c=e("../GameElement"),d="GameElementScene";class u extends c.default{constructor(){super()}static Pop(e){let t=i.default.Pop(u._t,e);return t.evterAdded.On(()=>{let e=i.default.Pop(i.default.typeBodyDef,d),o=t.BodyCreate(d,e),a=i.default.Pop(i.default.typePolygonShape,d),c=n.default.BORDER_PIXEL*r.default.mgrUI._sizePerPixel,u=i.default.Pop(i.default.typeccVec2,d);u.x=-c+2*s.default.TALL_HEIGHT*r.default.mgrUI._sizePerPixel,u.y=0,a.SetAsBox(c,n.default.GROUND_Y*r.default.mgrUI._sizePerPixel,u,0);let m=i.default.Pop(i.default.typeFixtureDef,d);m.shape=a,o.FixtureCreate(d,m,l.default.BODY)}),t}GetPhysicsTag(){return u}}u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),o.default=u,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/MgrUI":"MgrUI","../../GameCommon":"GameCommon","../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElement":"GameElement"}],GameElementTxt:[function(e,t,o){"use strict";cc._RF.push(t,"f33c0WFxKVA4aCRbFpKnlhp","GameElementTxt"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilMath"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../display/GameDisplayTxt"),n=e("../GameElement"),l="GameElementTxt";class c extends n.default{constructor(){super(),this.posCurrent=a.default.Pop(a.default.typeccVec2,l)}static PopForTips(e,t,o,i,a){c.PopForXYBindElement(e,o,i,t,a.relState,a.id,s.default.nodeTypeAppear)}static PopForCure(e,t,o){c.PopForXYBindElement(e,o.commonHeadPos.x+10*(2*Math.random()-1),o.commonHeadPos.y,`${i.default.ParseNumToKMBTAABB(t,Math.ceil)}`,o.relState,o.id,s.default.nodeTypeRecovery)}static PopForXYBindElement(e,t,o,i,r,s,n){let l=a.default.Pop(c._t,e);l.posCurrent.x=t,l.posCurrent.y=o,l.txt=i,l.nodeType=n,l.evterAdded.On(()=>{let e=l.relState.GetEleById(s),i=t-e.commonFootPos.x,a=o-e.commonFootPos.y;l.posCurrent.x=t,l.posCurrent.y=o;let r=0;l.listenIdStep=l.relState.evterSteped.On(t=>{null!=l.relState.GetEleById(s)&&(l.posCurrent.x=e.commonFootPos.x+i,l.posCurrent.y=e.commonFootPos.y+a),2e3<(r+=t)&&l.relState.RemEle(l)})}),l.evterRem.On(()=>{l.relState.evterSteped.Off(l.listenIdStep)}),r.AddEle(l)}static PopForDmg(e,t,o){c.PopForXRelativeToPlayer(e,t.posX,t.posY,`${i.default.ParseNumToKMBTAABB(t.dmg,Math.floor)}`,o,s.default.nodeTypeDmg)}static PopForXRelativeToPlayer(e,t,o,i,r,s){let n=a.default.Pop(c._t,e);n.posCurrent.x=t,n.posCurrent.y=o,n.txt=i,n.nodeType=s,n.evterAdded.On(()=>{let e=t-n.relState.player.commonFootPos.x;n.posCurrent.x=t;let o=0;n.listenIdStep=n.relState.evterSteped.On(t=>{n.posCurrent.x=n.relState.player.commonFootPos.x+e,2e3<(o+=t)&&n.relState.RemEle(n)})}),n.evterRem.On(()=>{n.relState.evterSteped.Off(n.listenIdStep)}),r.AddEle(n)}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../frame/basic/UtilMath":"UtilMath","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../display/GameDisplayTxt":"GameDisplayTxt","../GameElement":"GameElement"}],GameElement:[function(e,t,o){"use strict";cc._RF.push(t,"6b3b0BdARBIkq3jUDUcRMgn","GameElement"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/BCEventer"),a=e("../../frame/basic/UtilObjPool"),r=e("./GameCtxB2Body"),s="GameElement";class n{constructor(){this.isValid=!0,this.evterAdded=i.default.Pop(s),this.evterRem=i.default.Pop(s),this.evterContactGroundA=i.default.Pop(s),this.evterContactGroundB=i.default.Pop(s),this.listBodyCtx=a.default.Pop(a.default.typeArray,s)}GetPhysicsTag(){return n}BodyCreate(e,t){let o=r.default.Pop(e,this,t);return this.listBodyCtx.push(o),o}BodyDestory(e){for(let t=0;t<e.listFixtureCtx.length;t++){let o=e.listFixtureCtx[t];e.b2Body.DestroyFixture(o.b2Fixture)}this.relState.b2w.DestroyBody(e.b2Body)}Release(){a.default.Push(this.evterAdded),a.default.Push(this.evterRem),a.default.Push(this.evterContactGroundA),a.default.Push(this.evterContactGroundB);for(let e=0;e<this.listBodyCtx.length;e++){let t=this.listBodyCtx[e];for(let e=0;e<t.listFixtureCtx.length;e++){let o=t.listFixtureCtx[e];for(let e=0;e<o.listConcat.length;e++){let t=o.listConcat[e];a.default.Push(t)}a.default.Push(o)}a.default.Push(t)}a.default.Push(this.listBodyCtx)}Clear(){this.isValid=!0,this.relState=null,this.id=null,this.evterAdded.Clear(),this.evterRem.Clear(),this.evterContactGroundA.Clear(),this.evterContactGroundB.Clear();for(let e=0;e<this.listBodyCtx.length;e++){let t=this.listBodyCtx[e];for(let e=0;e<t.listFixtureCtx.length;e++){let o=t.listFixtureCtx[e];for(let e=0;e<o.listConcat.length;e++){let t=o.listConcat[e];a.default.Push(t)}a.default.Push(o)}a.default.Push(t)}this.listBodyCtx.length=0}}o.default=n,cc._RF.pop()},{"../../frame/basic/BCEventer":"BCEventer","../../frame/basic/UtilObjPool":"UtilObjPool","./GameCtxB2Body":"GameCtxB2Body"}],GameFailedViewState:[function(e,t,o){"use strict";cc._RF.push(t,"e0dfcnHIMRPwaX/FDOXPMPH","GameFailedViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/ui/ViewState"),s=e("../../../IndexLayer"),n=e("../../game_element/body/DefineVoice"),l=e("../lv_up_batch_view/LvUpBatchViewState"),c=e("../voice_ogg/VoiceOggViewState"),d="GameFailedViewState";class u extends r.default{constructor(){super(s.default.GAME,r.default.BG_TYPE.MASK,!0)}static Pop(e,t,o){let a=i.default.Pop(u._t,e);return a.idCfgLev=t,a.gameState=o,a.stateLvUpBatch=l.default.Pop(d),a}OnDisplay(){c.default.inst.VoiceSet(n.default.FAIL_2)}OnChange(e){this.stateLvUpBatch.OnChange(e)}}o.default=u,u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState","../../game_element/body/DefineVoice":"DefineVoice","../lv_up_batch_view/LvUpBatchViewState":"LvUpBatchViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GameFailedView:[function(e,t,o){"use strict";cc._RF.push(t,"623a0RhK5NBFJt+AOSWb8vO","GameFailedView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../../IndexView"),m=e("../index_view/IndexViewState"),p=e("../game_play/GamePlayViewState"),h=e("../reward_view/RewardViewState"),f=e("../../GameCommon"),y=e("../voice_ogg/VoiceOggViewState"),_=e("../../../frame/ui/UINodeInstHideRS"),g=e("../common/RewardGridArgs"),b=e("../../../frame/config/src/CfgScene"),S=e("../../cfg_cache/CfgCacheScene"),P=e("../../play_ordinary/PlayOrdinaryRS"),B=e("../../../frame/ui/UINodeInstEnterRS"),C=e("../../../IndexBuildConfig"),M=e("../../GameMath"),x=e("../../../frame/basic/UtilMath"),V=e("../../game_element/body/DefineVoice"),I=e("../lottery_view/LotteryTipsView"),O=e("../lottery_view/LotteryTipsViewState"),w=e("../index_view/IndexViewRS"),{ccclass:E,property:A}=cc._decorator,R="GameFailedView";let v=i=class extends c.default{constructor(){super(...arguments),this.btnHome=null,this.btnAgain=null,this.nodeReward=null,this.containerReward=null,this.btnGotImm=null,this.btnGotDouble=null,this.listNodeDark=[],this.listNodeLight=[],this.btnStrengthen=null,this.txtCurrent=null,this.txtCostEnable=null,this.txtCostDisable=null,this.btnQa=null,this.nodeRedEquipFresh=null,this.txtRewardScale=null}onEnable(){this.nodeReward.active=!1}};v.nodeType=l.default.Pop(R,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/game_failed_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(R,{listRefModule:[d.default.DEFAULT,d.default.INDEXVIEW_LOTTO],propsFilter:(e,t)=>{e.txtRewardScale.string=`${M.default.REWARD_SCALE} \u500d\u9886\u53d6`,e.nodeRedEquipFresh.active=w.default.equip.redCheck();let o=P.default.GetRS(t.idCfgLev),i=n.default.mgrCfg.cfgScene.select(b.default.idGetter,o.getterSceneId(t.idCfgLev))._list[0],a=S.default.GetCache(i);for(let r=0;r<e.listNodeDark.length;r++)e.listNodeDark[r].color=a.colorDark;for(let r=0;r<e.listNodeLight.length;r++)e.listNodeLight[r].color=a.colorLight;e.btnHome.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnHome.evterTouchEnd.On(()=>{Promise.resolve().then(()=>M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg)?h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg):Promise.resolve()).then(()=>{n.default.mgrUI.Open(u.default.nodeType,m.default.Pop(R))})}),e.btnAgain.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnAgain.evterTouchEnd.On(()=>{Promise.resolve().then(()=>M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg)?h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg):Promise.resolve()).then(()=>{p.default.Fight(t.idCfgLev)})}),e.nodeReward.active=C.default.VIDEO_ENABLE&&0!=t.gameState.listRewardIdCfg.length&&M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg),e.btnGotImm.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnGotImm.evterTouchEnd.On(()=>{h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg),t.gameState.listRewardIdCfg.length=0}),e.btnGotDouble.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnGotDouble.evterTouchEnd.On(()=>{n.default.mgrSdk.core.WXVideo().then(e=>{if(e.isRewardAble){for(let e=0;e<t.gameState.listRewardIdCfg.length;e++)t.gameState.listRewardIdCfg[e].props[1]*=M.default.REWARD_SCALE;h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg),t.gameState.listRewardIdCfg.length=0}})}),e.txtCurrent.string=`${x.default.ParseNumToKMBTAABB(t.stateLvUpBatch.recCoin.count,Math.floor)}`,e.txtCostEnable.string=`${x.default.ParseNumToKMBTAABB(t.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCostEnable.node.active=t.stateLvUpBatch.countCost<=t.stateLvUpBatch.recCoin.count,e.txtCostDisable.string=`${x.default.ParseNumToKMBTAABB(t.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCostDisable.node.active=t.stateLvUpBatch.recCoin.count<t.stateLvUpBatch.countCost,e.btnStrengthen.evterTouchStart.On(()=>{y.default.inst.VoiceSet(V.default.VOICE_MONEY)}),e.btnStrengthen.evterTouchEnd.On(()=>{t.stateLvUpBatch.Go()}),e.btnQa.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnQa.evterTouchEnd.On(()=>{n.default.mgrUI.Open(I.default.nodeType,O.default.Pop(R))})}})],childrenCreator:[l.default.ChildrenGeneration.Pop(R,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.gameState.listRewardIdCfg.length;i++){let t=e.gameState.listRewardIdCfg[i];o.push(t.rs.onGetUIRewardNodeType().CreateNode(e,g.default.Pop(t.rs,t.props),i))}}})],propsType:r.default.typeNumber,hideRS:_.default.setParentNull,enterRS:B.default.scaleInForTemp200}),a([A(s.default)],v.prototype,"btnHome",void 0),a([A(s.default)],v.prototype,"btnAgain",void 0),a([A(cc.Node)],v.prototype,"nodeReward",void 0),a([A(cc.Node)],v.prototype,"containerReward",void 0),a([A(s.default)],v.prototype,"btnGotImm",void 0),a([A(s.default)],v.prototype,"btnGotDouble",void 0),a([A([cc.Node])],v.prototype,"listNodeDark",void 0),a([A([cc.Node])],v.prototype,"listNodeLight",void 0),a([A(s.default)],v.prototype,"btnStrengthen",void 0),a([A(cc.Label)],v.prototype,"txtCurrent",void 0),a([A(cc.Label)],v.prototype,"txtCostEnable",void 0),a([A(cc.Label)],v.prototype,"txtCostDisable",void 0),a([A(s.default)],v.prototype,"btnQa",void 0),a([A(cc.Node)],v.prototype,"nodeRedEquipFresh",void 0),a([A(cc.Label)],v.prototype,"txtRewardScale",void 0),v=i=a([E],v),o.default=v,cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../../../IndexDataModule":"IndexDataModule","../../../IndexView":"IndexView","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheScene":"CfgCacheScene","../../game_element/body/DefineVoice":"DefineVoice","../../play_ordinary/PlayOrdinaryRS":"PlayOrdinaryRS","../common/RewardGridArgs":"RewardGridArgs","../game_play/GamePlayViewState":"GamePlayViewState","../index_view/IndexViewRS":"IndexViewRS","../index_view/IndexViewState":"IndexViewState","../lottery_view/LotteryTipsView":"LotteryTipsView","../lottery_view/LotteryTipsViewState":"LotteryTipsViewState","../reward_view/RewardViewState":"RewardViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GameMath:[function(e,t,o){"use strict";cc._RF.push(t,"ce538HoOEJBM5HB+x0c0fNh","GameMath"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../frame/global/Jiang");var a;(function(e){let t,o;function a(e){let t=1,o=1;for(;o<=e&&!(e<(o*=i.default.mgrCfg.cfgCommon._list[0].inc_for_level));)t++;return t}function r(e){return e<=0?0:Math.pow(i.default.mgrCfg.cfgCommon._list[0].inc_for_level,e-1)}e.GOLD_MS_MAX=864e5,e.HOOK_LV_UP=4,e.AD_GOT_IMM=.2,e.REWARD_SCALE=3,function(e){e.ParseCountToPower=function(e){return e*i.default.mgrCfg.cfgCommon._list[0].coin_count_to_power},e.ParsePowerToCount=function(e){return e/i.default.mgrCfg.cfgCommon._list[0].coin_count_to_power}}(t=e.coin||(e.coin={})),function(e){e.ParseCountToPower=function(e){return e*i.default.mgrCfg.cfgCommon._list[0].equip_count_to_power},e.ParsePowerToCount=function(e){return e/i.default.mgrCfg.cfgCommon._list[0].equip_count_to_power}}(o=e.equip||(e.equip={})),e.ParsePowerToLev=a,e.ParseLevToPower=r,e.GetAppPower=function(e){return r(a(e))},e.GetDropRate=function(){return 1},e.ParseBodyPowerToCount=function(e){return t.ParsePowerToCount(e*i.default.mgrCfg.cfgCommon._list[0].monster_power_to_drop)},e.IsStandardRewardScene=function(e){return 2<e}})(a||(a={})),o.default=a,cc._RF.pop()},{"../frame/global/Jiang":"Jiang"}],GameOptionsViewState:[function(e,t,o){"use strict";cc._RF.push(t,"1df66Bd0xtNDZx8N2ZJWVq8","GameOptionsViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexLayer"),l=e("../../GameCommon"),c=e("../voice_ogg/VoiceOggViewState");class d extends s.default{constructor(){super(n.default.GAME,s.default.BG_TYPE.MASK,!0)}static Pop(e,t,o){let a=i.default.Pop(d._t,e);return a.idCfgLev=t,a.gameState=o,a}OnMaskTouch(){c.default.inst.VoiceSet(l.default.BTN_VOICE),r.default.mgrUI.Close(this._idView)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"GameOptionsViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GameOptionsView:[function(e,t,o){"use strict";cc._RF.push(t,"f7dc9BKdAdL0rN9k53UNmwd","GameOptionsView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../../IndexStorageItem"),m=e("../../../IndexView"),p=e("../index_view/IndexViewState"),h=e("../game_play/GamePlayViewState"),f=e("../reward_view/RewardViewState"),y=e("../voice_ogg/VoiceOggViewState"),_=e("../../GameCommon"),g=e("../../../frame/ui/UINodeInstHideRS"),b=e("../common/RewardGridArgs"),S=e("../../../frame/config/src/CfgScene"),P=e("../../cfg_cache/CfgCacheScene"),B=e("../../play_ordinary/PlayOrdinaryRS"),C=e("../../../frame/ui/UINodeInstEnterRS"),M=e("../../GameMath"),{ccclass:x,property:V}=cc._decorator,I="GameOptionsView";let O=i=class extends c.default{constructor(){super(...arguments),this.txtMusic=null,this.sliderMusic=null,this.txtVoice=null,this.sliderVoice=null,this.btnHome=null,this.btnRestart=null,this.btnResume=null,this.nodeReward=null,this.containerReward=null,this.listNodeDark=[],this.listNodeLight=[],this.btnMusic=null,this.btnVoice=null,this.txtRewardTips=null}onEnable(){this.nodeReward.active=!1}};O.nodeType=l.default.Pop(I,{prefabPath:`${_.default.SUB_MAIN}/prefab_ui/game_options_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(I,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t)=>{e.btnMusic.evterTouchStart.On(()=>{y.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.btnVoice.evterTouchStart.On(()=>{y.default.inst.VoiceSet(_.default.BTN_VOICE)});let o=B.default.GetRS(t.idCfgLev),i=n.default.mgrCfg.cfgScene.select(S.default.idGetter,o.getterSceneId(t.idCfgLev))._list[0],a=P.default.GetCache(i);for(let r=0;r<e.listNodeDark.length;r++)e.listNodeDark[r].color=a.colorDark;for(let r=0;r<e.listNodeLight.length;r++)e.listNodeLight[r].color=a.colorLight;e.txtMusic.string=`\u97f3\u4e50\u97f3\u91cf ${Math.ceil(100*n.default.mgrData.Get(u.default.volumeMusic))}%`,e.sliderMusic.slider.progress=n.default.mgrData.Get(u.default.volumeMusic),e.sliderMusic.evterSlide.On(()=>{n.default.mgrData.Set(u.default.volumeMusic,e.sliderMusic.slider.progress),n.default.mgrUI.ModuleRefresh(d.default.PLAYING),n.default.mgrUI.ModuleRefresh(d.default.VOLUME_CHANGE)}),e.txtVoice.string=`\u97f3\u6548\u97f3\u91cf ${Math.ceil(100*n.default.mgrData.Get(u.default.volumeVoice))}%`,e.sliderVoice.slider.progress=n.default.mgrData.Get(u.default.volumeVoice),e.sliderVoice.evterSlide.On(()=>{n.default.mgrData.Set(u.default.volumeVoice,e.sliderVoice.slider.progress),n.default.mgrUI.ModuleRefresh(d.default.PLAYING),n.default.mgrUI.ModuleRefresh(d.default.VOLUME_CHANGE)}),e.txtRewardTips.string=`\u5f53\u524d\u5956\u52b1${M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg)?"\uff0c\u201c\u9000\u51fa\u201d\u3001\u201c\u91cd\u5f00\u201d \u65f6\u81ea\u52a8\u83b7\u5f97":"\uff0c\u80dc\u5229\u540e\u53ef\u83b7\u5f97"}`,e.btnHome.evterTouchStart.On(()=>{y.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.btnHome.evterTouchEnd.On(()=>{Promise.resolve().then(()=>M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg)?f.default.GotRewardOrdinary(_.default.TITLE_REWARD,t.gameState.listRewardIdCfg):Promise.resolve()).then(()=>{n.default.mgrUI.Open(m.default.nodeType,p.default.Pop(I))})}),e.btnRestart.evterTouchStart.On(()=>{y.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.btnRestart.evterTouchEnd.On(()=>{Promise.resolve().then(()=>M.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg)?f.default.GotRewardOrdinary(_.default.TITLE_REWARD,t.gameState.listRewardIdCfg):Promise.resolve()).then(()=>{h.default.Fight(t.idCfgLev)})}),e.btnResume.evterTouchStart.On(()=>{y.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.btnResume.evterTouchEnd.On(()=>{n.default.mgrUI.Close(t._idView)}),e.nodeReward.active=0!=t.gameState.listRewardIdCfg.length}})],childrenCreator:[l.default.ChildrenGeneration.Pop(I,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.gameState.listRewardIdCfg.length;i++){let t=e.gameState.listRewardIdCfg[i];o.push(t.rs.onGetUIRewardNodeType().CreateNode(e,b.default.Pop(t.rs,t.props),i))}}})],propsType:r.default.typeNumber,hideRS:g.default.setParentNull,enterRS:C.default.scaleInForTemp200}),a([V(cc.Label)],O.prototype,"txtMusic",void 0),a([V(s.default)],O.prototype,"sliderMusic",void 0),a([V(cc.Label)],O.prototype,"txtVoice",void 0),a([V(s.default)],O.prototype,"sliderVoice",void 0),a([V(s.default)],O.prototype,"btnHome",void 0),a([V(s.default)],O.prototype,"btnRestart",void 0),a([V(s.default)],O.prototype,"btnResume",void 0),a([V(cc.Node)],O.prototype,"nodeReward",void 0),a([V(cc.Node)],O.prototype,"containerReward",void 0),a([V([cc.Node])],O.prototype,"listNodeDark",void 0),a([V([cc.Node])],O.prototype,"listNodeLight",void 0),a([V(s.default)],O.prototype,"btnMusic",void 0),a([V(s.default)],O.prototype,"btnVoice",void 0),a([V(cc.Label)],O.prototype,"txtRewardTips",void 0),O=i=a([x],O),o.default=O,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../IndexView":"IndexView","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheScene":"CfgCacheScene","../../play_ordinary/PlayOrdinaryRS":"PlayOrdinaryRS","../common/RewardGridArgs":"RewardGridArgs","../game_play/GamePlayViewState":"GamePlayViewState","../index_view/IndexViewState":"IndexViewState","../reward_view/RewardViewState":"RewardViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GamePlayViewBossBoard:[function(e,t,o){"use strict";cc._RF.push(t,"a63f5ymmk9PabY8dKPPCoYN","GamePlayViewBossBoard");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GamePlayViewBossBoard";let f=i=class extends d.default{constructor(){super(...arguments),this.nodeBarWidth=null,this.nodeBar=null,this.nodeBarNearBy=null}};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/game_play_view_board_boss`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.DEFAULT,r.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.GetEleById(o);e.nodeBar.width=i.commonHpCurrent/i.commonHpMax*e.nodeBarWidth.width,e.nodeBarNearBy.width<e.nodeBar.width?e.nodeBarNearBy.width+=2:e.nodeBarNearBy.width-=2,e.nodeBarNearBy.width=Math.max(e.nodeBarNearBy.width,e.nodeBar.width),e.nodeBarNearBy.width=Math.min(e.nodeBarNearBy.width,e.nodeBarWidth.width)}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.opacityInForTemp600}),a([p(cc.Node)],f.prototype,"nodeBarWidth",void 0),a([p(cc.Node)],f.prototype,"nodeBar",void 0),a([p(cc.Node)],f.prototype,"nodeBarNearBy",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],GamePlayViewEquipmentBtn:[function(e,t,o){"use strict";cc._RF.push(t,"187c3z9+GFBQJz1GVVUQZ7Q","GamePlayViewEquipmentBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),m=e("../equipment_view/EquipmentViewEquip"),p=e("../voice_ogg/VoiceOggViewState"),h=e("../guide_view/GuideMgr"),f=e("../../../frame/ui/UINodeInstEnterRS"),y=e("../../../frame/sdk/MgrSdk"),{ccclass:_,property:g}=cc._decorator,b="GamePlayViewEquipmentBtn";let S=i=class extends c.default{constructor(){super(...arguments),this.nodeSelected=null,this.btnSelect=null,this.containerEquip=null,this.nodeNum=null,this.txtIdx=null,this.txtLv=null}};S.nodeType=l.default.Pop(b,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/game_play_view_container_equipment`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(b,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.playMachine.gameState.player.commonBehaviour;e.nodeSelected.active=1<i.playerMgrEquipment.listEquipmentInst.length&&o==i.playerMgrEquipment.currEquipIdx,e.btnSelect.evterTouchStart.On(()=>{h.default.inst.currStatus.P1U5OnBtnEquipmentTouched(),p.default.inst.VoiceSet(u.default.BTN_VOICE),i.playerMgrEquipment.SetEquipmentIdx(o)});let a=i.playerMgrEquipment.listEquipmentInst[o];h.default.inst.CatchGamePlayViewEquipmentBtn(e),e.nodeNum.active=y.default.inst.IsPc(),e.txtIdx.string=`${o+1}`,e.txtLv.string=`${a.lev}\u7ea7`}})],childrenCreator:[l.default.ChildrenGeneration.Pop(b,{containerGetter:e=>e.containerEquip,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.player.commonBehaviour.playerMgrEquipment.listEquipmentInst[t];o.push(m.default.GetNodeTypeForIconPlayView(i.cfgProps.id).CreateNode(e,t,t))}})],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:f.default.none}),a([g(cc.Node)],S.prototype,"nodeSelected",void 0),a([g(s.default)],S.prototype,"btnSelect",void 0),a([g(cc.Node)],S.prototype,"containerEquip",void 0),a([g(cc.Node)],S.prototype,"nodeNum",void 0),a([g(cc.Label)],S.prototype,"txtIdx",void 0),a([g(cc.Label)],S.prototype,"txtLv",void 0),S=i=a([_],S),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../guide_view/GuideMgr":"GuideMgr","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GamePlayViewMachine:[function(e,t,o){"use strict";cc._RF.push(t,"cda15ETm3dKrZg783dT/j6t","GamePlayViewMachine"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],GamePlayViewStateMgrTraceRecord:[function(e,t,o){"use strict";cc._RF.push(t,"1ae026RKmVGSpvZTy8H2Tsq","GamePlayViewStateMgrTraceRecord");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../GameCommon"),{ccclass:c,property:d}=cc._decorator;let u=i=class{constructor(){}static Pop(e,t,o,a){let s=r.default.Pop(i._t,e);s.id=t,s.posX=o,s.posY=a,s.existedTime=0,s.width=n.default.mgrUI._containerUI.width/l.default.SCENE_SCALE*l.default.TRACE_SIZE_SCALE,s.height=n.default.mgrUI._containerUI.height/l.default.SCENE_SCALE*l.default.TRACE_SIZE_SCALE;let c=new cc.RenderTexture;return c.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),c.initWithSize(Math.ceil(s.width/l.default.TRACE_BLUR),Math.ceil(s.height/l.default.TRACE_BLUR),cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),c.setPremultiplyAlpha(!1),s.sprf=new cc.SpriteFrame,s.sprf.setTexture(c),s}};u._t=new s.default({instantiate:()=>new i,onPop:()=>{},onPush:()=>{},tag:"GamePlayViewStateTraceRecord"}),u=i=a([c],u),o.default=u,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../GameCommon":"GameCommon"}],GamePlayViewStateMgrTrace:[function(e,t,o){"use strict";cc._RF.push(t,"3aa30/ieotORp33kIJ88+0+","GamePlayViewStateMgrTrace"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../GameCommon"),s=e("./GamePlayViewStateMgrTraceRecord"),n="GamePlayViewStateMgrTrace";class l{constructor(){this._idGen=0,this._cdTrace=r.default.CD_TRACE,this.listRecord=i.default.Pop(i.default.typeArray,n),this.mapIdToRecord=i.default.Pop(i.default.typeMap,n)}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relState=t,o}OnStep(e){if(null!=this.relView){this._cdTrace-=e;for(let t=0;t<this.listRecord.length;t++)this.listRecord[t].existedTime+=e;for(;0<this.listRecord.length;){let t=this.listRecord[0];if(t.existedTime+=e,t.existedTime<r.default.TRACE_KEEP)break;this.mapIdToRecord.delete(t.id),this.listRecord.splice(0,1),i.default.Push(t)}if(this._cdTrace<=0){this._cdTrace=r.default.CD_TRACE;let e=s.default.Pop(n,++this._idGen,this.relView.GetCameraX(),this.relView.GetCameraY());this.listRecord.push(e),this.mapIdToRecord.set(e.id,e),this.relView.ScreenShoot(e.sprf.getTexture())}}}OnDestory(){for(;0<this.listRecord.length;){let e=this.listRecord[0];this.mapIdToRecord.delete(e.id),this.listRecord.splice(0,1),i.default.Push(e)}}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../GameCommon":"GameCommon","./GamePlayViewStateMgrTraceRecord":"GamePlayViewStateMgrTraceRecord"}],GamePlayViewState:[function(e,t,o){"use strict";cc._RF.push(t,"95ea9n/QYZJLb0cch35FTi2","GamePlayViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/debug/DebugViewDefine"),a=e("../../../frame/global/Jiang"),r=e("../../GameCommon"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexDataModule"),l=e("../../../IndexLayer"),c=e("../../../frame/basic/UtilObjPoolType"),d=e("../../../frame/basic/UtilObjPool"),u=e("../../play_ordinary/PlayOrdinary"),m=e("../../../IndexStorageItem"),p=e("./GamePlayViewStateMgrTrace"),h=e("./GamePlayView"),f=e("../loading_view/LoadingView"),y=e("../loading_view/LoadingViewState"),_=e("./GamePlayViewTrace"),g=e("./GamePlayViewEquipmentBtn"),b=e("../../game_element/body/DefineEff"),S=e("../../display/GameDisplayPart"),P=e("../../game_element/body/GameSizeMarkRS"),B=e("../../../frame/config/src/CfgEquipmentProps"),C=e("../../cfg_cache/CfgCacheEquipment"),M=e("../../cfg_cache/CfgCacheGameElement"),x=e("../../../frame/config/src/CfgGameElement"),V=e("../../../frame/basic/UtilArray"),I=e("../../display/GameDisplayBG"),O=e("../../display/GameDisplayReward"),w=e("../../display/GameDisplayParticleRain"),E=e("../../display/GameDisplayParticleSnow"),A=e("../../display/GameDisplayLightPoint"),R=e("../../../frame/config/src/CfgEff"),v=e("../../display/GameDisplayEff"),T=e("../../display/GameDisplayHp"),G=e("../../display/GameDisplayHp01"),D=e("../../display/GameDisplayTxt"),U=e("../../game_element/body/GameCfgBodyCacheDropRS"),F=e("../equipment_view/EquipmentViewEquip"),L=e("../equipment_view/EquipmentViewBackpackProp"),N=e("../../../frame/config/src/CfgBackpackProp"),j=e("../../../frame/config/src/CfgVoiceOgg"),k=e("../../game_element/body/DefineVoice"),q=e("../guide_view/GuideMgr"),H=e("../voice_ogg/VoiceOggViewState"),J=e("../../play_ordinary/PlayOrdinaryRS"),W=e("../../../frame/config/src/CfgScene"),z=e("../../../frame/sdk/MgrSdk"),X=e("./GamePlayViewBossBoard"),Y=e("../../../frame/ui/UIRoot"),K="GamePlayViewState";class Z extends s.default{constructor(){super(l.default.GAME,s.default.BG_TYPE.SELF,!1),this.cameraPos=d.default.Pop(d.default.typeccVec2,K),this.borderLeft=0,this.enableEnterAnim=!1,this.enableExitAnim=!1,this.cameraXOffset=0,this.firePos=d.default.Pop(d.default.typeccVec2,K),this.sceneScale=r.default.SCENE_SCALE}static Pop(e,t){++this._idGen;let o=d.default.Pop(Z._t,e);o.mgrTrace=p.default.Pop(K,o),o.cameraXOffset=a.default.mgrUI._containerUI.width/2,o.playMachine=t,o._b2Info=i.default.B2DrawInfo.Pop(K,t.gameState.b2w,1/a.default.mgrUI._sizePerPixel,0,0),i.default.b2wList.push(o._b2Info),o._updateListenId=a.default.mgrEvter.evterUpdate.On(e=>{e*=t.gameState._timeScale,q.default.inst.currStatus.P1U2OnGameCoreStep(e),a.default.mgrUI.ModuleRefresh(n.default.PLAYING),t.OnStep(e),o.cameraPos.x=t.gameState.player.commonFootPos.x+(a.default.mgrUI._containerUI.width/2+r.default.CAMERA_OFFSET_X)/o.sceneScale,o.cameraPos.y=r.default.GROUND_Y+(a.default.mgrUI._containerUI.height/2+r.default.CAMERA_OFFSET_Y)/o.sceneScale,o.borderLeft=t.gameState.player.commonFootPos.x+r.default.CAMERA_OFFSET_X,null!=o.playMachine.gameState.player&&(o._b2Info.cameraPixelPerSize=1/a.default.mgrUI._sizePerPixel*o.sceneScale,o._b2Info.cameraX=o.cameraPos.x*a.default.mgrUI._sizePerPixel,o._b2Info.cameraY=o.cameraPos.y*a.default.mgrUI._sizePerPixel),o.mgrTrace.OnStep(e)});let s=Number.parseInt(cc.macro.KEY[1]),l=Number.parseInt(cc.macro.KEY[9]);o.listenIdKeyDown=a.default.mgrEvter.evterKeyDown.On(e=>{if(q.default.inst.currStatus!=q.default.inst.statusIdle)return;let t=e;s<=t&&t<=l&&(H.default.inst.VoiceSet(r.default.BTN_VOICE),c.playerMgrEquipment.SetEquipmentIdx(t-s)),e==cc.macro.KEY.ctrl&&(H.default.inst.VoiceSet(r.default.BTN_VOICE),c.playerMgrEquipment.SetEquipmentIdx((c.playerMgrEquipment.currEquipIdx+1)%c.playerMgrEquipment.listEquipmentInst.length)),e==cc.macro.KEY.space&&c.playerMgrDefendCD.currStatus.OnDefend()}),o.listenHide=a.default.mgrEvter.evterHide.On(()=>{q.default.inst.currStatus==q.default.inst.statusIdle&&t.OnPause()}),o.listenShow=a.default.mgrEvter.evterShow.On(()=>{});let c=o.playMachine.gameState.player.commonBehaviour;o.mpNeed=!1;for(let i=0;i<c.playerMgrEquipment.listEquipmentInst.length;i++){let e=c.playerMgrEquipment.listEquipmentInst[i];o.mpNeed=o.mpNeed||0<e.cfgProps.props_cost}return c.playerMgrEquipment.listEquipmentInst,o}OnInit(){q.default.inst.CatchGamePlayViewState(this)}OnDestory(){a.default.mgrEvter.evterKeyDown.Off(this.listenIdKeyDown),a.default.mgrEvter.evterKeyUp.Off(this.listenIdKeyUp),i.default.b2wList.splice(i.default.b2wList.indexOf(this._b2Info),1),a.default.mgrEvter.evterUpdate.Off(this._updateListenId),a.default.mgrEvter.evterHide.Off(this.listenHide),a.default.mgrEvter.evterShow.Off(this.listenShow),this.playMachine.gameState.Release(),this.mgrTrace.OnDestory()}static FightLast(){Z.Fight(a.default.mgrData.Get(m.default.challengeLev))}static GetListPrefabCommon(){let e=d.default.Pop(d.default.typeArray,K),t=d.default.Pop(d.default.typeArray,K);for(let i=0;i<P.default.listInst.length;i++)t.push(P.default.listInst[i].effCure);for(let i=0;i<P.default.listInst.length;i++)t.push(P.default.listInst[i].effCall);for(let i=0;i<P.default.listInst.length;i++)t.push(P.default.listInst[i].effTranslation);for(let i=0;i<P.default.listInst.length;i++)t.push(P.default.listInst[i].effHit);t.push(b.default.DMG),t.push(b.default.BOOM),V.default.RemRepeat(t);let o=d.default.Pop(d.default.typeArray,K);o.push(k.default.EQUIPMENT_DROP_TRIGGER),o.push(k.default.EQUIPMENT_DROP_GOT),o.push(k.default.ITEM_DROP_GOT),o.push(k.default.DEFENDING),o.push(k.default.DEFENDED),o.push(k.default.HURTED),o.push(k.default.MONSTER_ATK),o.push(k.default.HORSE_DIRT_1),o.push(k.default.HORSE_DIRT_2),o.push(k.default.CLEAR_SCREEN),V.default.RemRepeat(o),e.push(_.default.nodeType._prefabPath),e.push(O.default.nodeTypeForEquipment._prefabPath,O.default.nodeTypeForParticle._prefabPath),e.push(w.default.nodeType._prefabPath),e.push(E.default.nodeType._prefabPath),e.push(S.default.nodeType101._prefabPath,S.default.nodeType102._prefabPath,S.default.nodeType103._prefabPath,S.default.nodeType104._prefabPath,S.default.nodeType105._prefabPath,S.default.nodeType106._prefabPath,S.default.nodeType107._prefabPath,S.default.nodeType108._prefabPath,S.default.nodeType109._prefabPath,S.default.nodeType110._prefabPath,S.default.nodeType201._prefabPath,S.default.nodeType202._prefabPath,S.default.nodeType203._prefabPath,S.default.nodeType204._prefabPath,S.default.nodeType205._prefabPath,S.default.nodeType206._prefabPath,S.default.nodeType207._prefabPath,S.default.nodeType208._prefabPath,S.default.nodeType209._prefabPath,S.default.nodeType210._prefabPath),e.push(A.default.nodeType._prefabPath);for(let i=0;i<t.length;i++){let o=t[i];a.default.mgrCfg.cfgEff.select(R.default.idGetter,o)._list[0]?e.push(v.default.GetNodeType(o)._prefabPath):console.error(`\u7279\u6548[${o}]\u4e0d\u5b58\u5728`)}e.push(T.default.nodeType._prefabPath,G.default.nodeType._prefabPath,X.default.nodeType._prefabPath),e.push(D.default.nodeTypeDmg._prefabPath,D.default.nodeTypeAppear._prefabPath,D.default.nodeTypeRecovery._prefabPath),e.push(h.default.nodeType._prefabPath,g.default.nodeType._prefabPath);for(let i=0;i<o.length;i++){let t=o[i],r=a.default.mgrCfg.cfgVoiceOgg.select(j.default.idGetter,t)._list[0];e.push(r.res)}return V.default.RemRepeat(e),e}static Load(e){let t=J.default.GetRS(e),o=a.default.mgrCfg.cfgScene.select(W.default.idGetter,t.getterSceneId(e))._list[0],i=d.default.Pop(d.default.typeArray,K),s=d.default.Pop(d.default.typeArray,K),n=a.default.mgrData.Get(m.default.listCurrentEquiped);for(let a=0;a<n.length;a++){let e=n[a];0!=e&&s.push(e)}let l=d.default.Pop(d.default.typeArray,K);l.push(r.default.PLAYER_CFG_ID);for(let r=0;r<s.length;r++){let e=s[r],t=a.default.mgrCfg.cfgEquipmentProps.select(B.default.idGetter,e)._list[0],o=C.default.GetCache(t);l.push(...o.aditionalBody)}let c=t.getterListEnemyCall(e);for(let a=0;a<c.length;a++){let e=c[a];for(let t=0;t<e.listItem.length;t++){let o=e.listItem[t];l.push(o.idCfg)}}let u=d.default.Pop(d.default.typeArray,K),p=d.default.Pop(d.default.typeSet,K);for(;0<l.length;){let e=l.pop();if(p.has(e))continue;p.add(e),u.push(e);let t=M.default.GetCache(a.default.mgrCfg.cfgGameElement.select(x.default.idGetter,e)._list[0]);l.push(...t.listAditionBody)}l.push(...u),V.default.RemRepeat(l);let h=d.default.Pop(d.default.typeArray,K);for(let a=0;a<P.default.listInst.length;a++)h.push(P.default.listInst[a].effCure);for(let a=0;a<P.default.listInst.length;a++)h.push(P.default.listInst[a].effCall);for(let r=0;r<l.length;r++){let e=l[r],t=a.default.mgrCfg.cfgGameElement.select(x.default.idGetter,e)._list[0],o=M.default.GetCache(t);h.push(...o.listAditionEff)}h.push(b.default.DMG),V.default.RemRepeat(h);let _=d.default.Pop(d.default.typeArray,K);t.getterIsBossLevel(e)?_.push(k.default.BGM_BOSS):_.push(o.bgm);for(let r=0;r<s.length;r++){let e=s[r],t=a.default.mgrCfg.cfgEquipmentProps.select(B.default.idGetter,e)._list[0],o=C.default.GetCache(t);_.push(...o.aditionalVoice)}for(let r=0;r<l.length;r++){let e=l[r],t=a.default.mgrCfg.cfgGameElement.select(x.default.idGetter,e)._list[0],o=M.default.GetCache(t);_.push(...o.listAditionVoice)}V.default.RemRepeat(_);let g=d.default.Pop(d.default.typeArray,K);for(let r=0;r<l.length;r++){let e=l[r],t=a.default.mgrCfg.cfgGameElement.select(x.default.idGetter,e)._list[0],o=M.default.GetCache(t);g.push(...o.listDrop)}i.push(I.default.GetNodeTypeByRes(o.res)._prefabPath);for(let r=0;r<l.length;r++){let e=l[r],t=a.default.mgrCfg.cfgGameElement.select(x.default.idGetter,e)._list[0];t?i.push(t.res_scene):console.error(`\u7269\u4f53[${e}]\u4e0d\u5b58\u5728`)}for(let r=0;r<h.length;r++){let e=h[r];a.default.mgrCfg.cfgEff.select(R.default.idGetter,e)._list[0]?i.push(v.default.GetNodeType(e)._prefabPath):console.error(`\u7279\u6548[${e}]\u4e0d\u5b58\u5728`)}for(let r=0;r<s.length;r++){let e=s[r],t=a.default.mgrCfg.cfgEquipmentProps.select(B.default.idGetter,e)._list[0];t?i.push(t.res):console.error(`\u88c5\u5907[${e}]\u4e0d\u5b58\u5728`)}for(let r=0;r<s.length;r++){let e=s[r],t=a.default.mgrCfg.cfgEquipmentProps.select(B.default.idGetter,e)._list[0];t?(i.push(t.res),i.push(t.icon_play_view)):console.error(`\u88c5\u5907[${e}]\u4e0d\u5b58\u5728`)}for(let r=0;r<g.length;r++){let e=g[r];if(e.type==U.default.xlsxEquipment.code){if(!a.default.mgrCfg.cfgEquipmentProps.select(B.default.idGetter,e.val)._list[0]){console.error(`\u88c5\u5907[${e.val}]\u4e0d\u5b58\u5728`);continue}i.push(F.default.GetNodeTypeForIconScene(e.val)._prefabPath)}if(e.type==U.default.xlsxBackpackProp.code){if(!a.default.mgrCfg.cfgBackpackProp.select(N.default.idGetter,e.val)._list[0]){console.error(`\u7269\u54c1[${e.val}]\u4e0d\u5b58\u5728`);continue}i.push(L.default.GetNodeTypeForScene(e.val)._prefabPath)}}for(let r=0;r<_.length;r++){let e=_[r],t=a.default.mgrCfg.cfgVoiceOgg.select(j.default.idGetter,e)._list[0];i.push(t.res)}i.push(...this.GetListPrefabCommon()),V.default.RemRepeat(i);for(let r=i.length-1;0<=r;r--){let e=i[r];a.default.mgrRes.GetPrefab(e)&&i.splice(r,1)}if(0==i.length)return Promise.resolve();z.default.inst.Log("\u52a0\u8f7d\u6e05\u5355\uff1a",JSON.stringify(i,null,1));let S=i.map(e=>a.default.mgrRes.mgrAssets.GetLoadRecord(e).process._promise),O=a.default.mgrRes.AsyncMaxApp();Promise.all(S).then(()=>{a.default.mgrRes.AsyncMaxCancel(O)});let w=y.default.Pop(K,S);return a.default.mgrUI.Open(f.default.nodeType,w),w.ctrl._promise}static Fight(e){Promise.resolve().then(()=>(Y.default.inst.ClearCache(),Z.Load(e))).then(()=>{z.default.inst.Log("\u6253\u5f00\u5173\u5361..."),a.default.mgrUI.Open(h.default.nodeType,Z.Pop(K,u.default.Pop(K,e)))})}}o.default=Z,Z._t=new c.default({instantiate:()=>new Z,onPop:()=>{},onPush:()=>{},tag:K}),Z._idGen=0,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilArray":"UtilArray","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/config/src/CfgEff":"CfgEff","../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/config/src/CfgVoiceOgg":"CfgVoiceOgg","../../../frame/debug/DebugViewDefine":"DebugViewDefine","../../../frame/global/Jiang":"Jiang","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/ui/UIRoot":"UIRoot","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../cfg_cache/CfgCacheEquipment":"CfgCacheEquipment","../../cfg_cache/CfgCacheGameElement":"CfgCacheGameElement","../../display/GameDisplayBG":"GameDisplayBG","../../display/GameDisplayEff":"GameDisplayEff","../../display/GameDisplayHp":"GameDisplayHp","../../display/GameDisplayHp01":"GameDisplayHp01","../../display/GameDisplayLightPoint":"GameDisplayLightPoint","../../display/GameDisplayPart":"GameDisplayPart","../../display/GameDisplayParticleRain":"GameDisplayParticleRain","../../display/GameDisplayParticleSnow":"GameDisplayParticleSnow","../../display/GameDisplayReward":"GameDisplayReward","../../display/GameDisplayTxt":"GameDisplayTxt","../../game_element/body/DefineEff":"DefineEff","../../game_element/body/DefineVoice":"DefineVoice","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","../../game_element/body/GameSizeMarkRS":"GameSizeMarkRS","../../play_ordinary/PlayOrdinary":"PlayOrdinary","../../play_ordinary/PlayOrdinaryRS":"PlayOrdinaryRS","../equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../guide_view/GuideMgr":"GuideMgr","../loading_view/LoadingView":"LoadingView","../loading_view/LoadingViewState":"LoadingViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GamePlayView":"GamePlayView","./GamePlayViewBossBoard":"GamePlayViewBossBoard","./GamePlayViewEquipmentBtn":"GamePlayViewEquipmentBtn","./GamePlayViewStateMgrTrace":"GamePlayViewStateMgrTrace","./GamePlayViewTrace":"GamePlayViewTrace"}],GamePlayViewTrace:[function(e,t,o){"use strict";cc._RF.push(t,"9280b1niChIKIZlzziPlGFf","GamePlayViewTrace");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),m="GamePlayViewTrace",{ccclass:p,property:h}=cc._decorator;let f=i=class extends c.default{constructor(){super(...arguments),this.spr=null}};f.nodeType=l.default.Pop(m,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/game_play_view_trace`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(m,{listRefModule:[d.default.DEFAULT,d.default.PLAYING],propsFilter:(e,t,o)=>{let i=t.mgrTrace.mapIdToRecord.get(o);e.spr.spriteFrame=i.sprf,e.spr.node.width=i.width,e.spr.node.height=i.height,e.node.x=i.posX,e.node.y=i.posY;let a=1-i.existedTime/u.default.TRACE_KEEP;e.spr.node.opacity=255*Math.max(0,a)}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.localScale0,enterRS:s.default.none}),a([h(cc.Sprite)],f.prototype,"spr",void 0),f=i=a([p],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],GamePlayView:[function(e,t,o){"use strict";cc._RF.push(t,"a46a97NLGRCxKcNJGmJBNAq","GamePlayView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/component/ComponentNodeEventer"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/UIViewComponent"),l=e("../../game_element/common/GameElementTxt"),c=e("../../game_element/common/GameElementPart"),d=e("../../display/GameDisplayEff"),u=e("../../game_element/common/GameElementEff"),m=e("../../game_element/body/GameElementBody"),p=e("../../display/GameDisplayBG"),h=e("../../../frame/ui/UINodeType"),f=e("../../../frame/basic/BCType"),y=e("../../../frame/basic/UtilObjPool"),_=e("../../../IndexDataModule"),g=e("../../game_element/body/GameElementBodyBehaviourRS"),b=e("../../GameCommon"),S=e("../../game_element/common/GameElementReward"),P=e("../../game_element/buff/GameElementBuff"),B=e("../../game_element/particle/GameElementParticleRain"),C=e("../../display/GameDisplayParticleRain"),M=e("../../game_element/particle/GameElementParticleSnow"),x=e("../../display/GameDisplayParticleSnow"),V=e("../voice_ogg/VoiceOggViewState"),I=e("../../../frame/extend/graphics_drawer/GraphicsDrawer"),O=e("../../../frame/ui/UINodeInstHideRS"),w=e("./GamePlayViewTrace"),E=e("./GamePlayViewEquipmentBtn"),A=e("../../game_element/common/GameElementLightPoint"),R=e("../../display/GameDisplayLightPoint"),v=e("../../../frame/basic/UtilMath"),T=e("../guide_view/GuideMgr"),G=e("../../../frame/config/src/CfgScene"),D=e("../../../frame/ui/UINodeInstEnterRS"),U=e("./GamePlayViewBossBoard"),F=e("../../../IndexBuildConfig"),L=e("../../../frame/sdk/MgrSdk"),N="GamePlayView",{ccclass:j,property:k}=cc._decorator;let q=i=class extends n.default{constructor(){super(...arguments),this.containerBg=null,this.containerTrace=null,this.containerNpc=null,this.containerReward=null,this.containerRain=null,this.containerSnow=null,this.containerPart=null,this.containerLight=null,this.containerEff=null,this.graphics=null,this.containerBuff=null,this.containerBoard=null,this.containerTxt=null,this.btnOptions=null,this.btnAim=null,this.nodeMark=null,this.sprScreen=null,this.btnForward=null,this.cameraBodyEnv=null,this.cameraEffTrace=null,this.cameraBloom=null,this.cameraBodyElement=null,this.cameraEffLight=null,this.cameraEffOffsetAdd=null,this.cameraEffOffsetSub=null,this.cameraBoard=null,this.containerEquipmentList=null,this.txtLevel=null,this.nodeHp=null,this.nodeBarHp=null,this.txtHpCount=null,this.nodeBarMp=null,this.txtMpCount=null,this.nodeBarMpMark=null,this.sprMask=null,this.listNodeOpacitySkill=[],this.nodeReadyFlash=null,this.nodeReadyKeep=null,this.nodeFlashDmged=null,this.nodeMp=null,this.containerBossBoard=null,this.nodeTips=null,this._listCamera=y.default.Pop(y.default.typeArray,N),this._listRtBloom=y.default.Pop(y.default.typeArray,N)}lateUpdate(e){this.BloomRender()}set cameraX(e){for(let t=0;t<this._listCamera.length;t++)this._listCamera[t].node.x=e}get cameraX(){return this.cameraBodyElement.node.x}set cameraY(e){for(let t=0;t<this._listCamera.length;t++)this._listCamera[t].node.y=e}get cameraY(){return this.cameraBodyElement.node.y}set cameraZoomRatio(e){for(let t=0;t<this._listCamera.length;t++)this._listCamera[t].zoomRatio=e;this.cameraEffTrace.zoomRatio=1*b.default.SCENE_SCALE/b.default.TRACE_SIZE_SCALE}get cameraZoomRatio(){return this.cameraBodyElement.zoomRatio}onLoad(){this.cameraEffTrace.node.active=!1,this.sprScreen.getMaterial(0).setProperty("screenWidth",s.default.mgrUI._containerUI.width),this.sprScreen.getMaterial(0).setProperty("screenHeight",s.default.mgrUI._containerUI.height),this.drawer=I.default.Pop(N,this.graphics),this.sprScreen.node.active=!0,this._listCamera.push(this.cameraBodyEnv,this.cameraEffTrace,this.cameraBloom,this.cameraBodyElement,this.cameraEffLight,this.cameraEffOffsetAdd,this.cameraEffOffsetSub,this.cameraBoard);let e=new cc.RenderTexture;e.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),e.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),e.setPremultiplyAlpha(!1),this.cameraBodyEnv.targetTexture=e,this.sprScreen.getMaterial(0).setProperty("textureBodyEnv",e),this.cameraBloom.node.active=!0;for(let n=0;n<4;n++){let e=new cc.RenderTexture;e.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR);let t=1/Math.pow(2,n);e.initWithSize(Math.ceil(s.default.mgrUI._containerUI.width*t),Math.ceil(s.default.mgrUI._containerUI.height*t),cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),e.setPremultiplyAlpha(!1),this.sprScreen.getMaterial(0).setProperty(`textureEffBloom${n}`,e),this._listRtBloom.push(e)}this.cameraBloom.targetTexture=this._listRtBloom[1];let t=new cc.RenderTexture;t.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),t.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),t.setPremultiplyAlpha(!1),this.cameraBodyElement.targetTexture=t,this.sprScreen.getMaterial(0).setProperty("textureBodyElement",t);let o=new cc.RenderTexture;o.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),o.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),o.setPremultiplyAlpha(!1),this.cameraEffLight.targetTexture=o,this.sprScreen.getMaterial(0).setProperty("textureEffLight",o);let i=new cc.RenderTexture;i.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),i.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),i.setPremultiplyAlpha(!1),this.cameraEffOffsetAdd.targetTexture=i,this.sprScreen.getMaterial(0).setProperty("textureEffOffsetAdd",i);let a=new cc.RenderTexture;a.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),a.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),a.setPremultiplyAlpha(!1),this.cameraEffOffsetSub.targetTexture=a,this.sprScreen.getMaterial(0).setProperty("textureEffOffsetSub",a);let r=new cc.RenderTexture;r.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),r.initWithSize(s.default.mgrUI._containerUI.width,s.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),r.setPremultiplyAlpha(!1),this.cameraBoard.targetTexture=r,this.sprScreen.getMaterial(0).setProperty("textureBoard",r)}static CallFired(e,t,o){e.playerMgrEquipment.machine.currStatus.OnFire(t.cameraX+(o.firePos.x-s.default.mgrUI._containerUI.width/2)/t.cameraZoomRatio,t.cameraY+(o.firePos.y-s.default.mgrUI._containerUI.height/2)/t.cameraZoomRatio)}GetCameraX(){return this.cameraX}GetCameraY(){return this.cameraY}ScreenShoot(e){this.cameraEffTrace.targetTexture=e,this.cameraEffTrace.node.active=!0,this.cameraEffTrace.render(),this.cameraEffTrace.node.active=!1}BloomRender(){}};q.nodeType=h.default.Pop(N,{prefabPath:`${b.default.SUB_MAIN}/prefab_ui/game_play_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[h.default.ModuleStyle.Pop(N,{listRefModule:[_.default.DEFAULT,_.default.PLAYING],propsFilter:(e,t)=>{t.mgrTrace.relView=e,e.txtLevel.node.active=!F.default.IS_FAKE_ENEMY,T.default.inst.CatchGamePlayView(e),e.cameraZoomRatio=t.sceneScale,e.btnOptions.evterTouchStart.On(()=>{V.default.inst.VoiceSet(b.default.BTN_VOICE),t.playMachine.OnPause()});let o=t.playMachine.gameState.player;e.cameraX=t.cameraPos.x,e.cameraY=t.cameraPos.y;let a=o.commonBehaviour;e.nodeFlashDmged.opacity=127.5*Math.pow(a.animDmgedFlash.rateVisibility,1),e.btnAim.evterTouchStart.On(t=>{T.default.inst.currStatus.P1U2OnBtnAimTouchStart(e,t)}),e.btnAim.evterTouchMove.On(t=>{T.default.inst.currStatus.P1U2OnBtnAimTouchMove(e,t)}),e.btnAim.evterTouchEnd.On(t=>{T.default.inst.currStatus.P1U2OnBtnAimTouchEnd(e,t)}),a.playerMgrEquipment.machine.currStatus==a.playerMgrEquipment.machine.statusFired&&i.CallFired(a,e,t),e.btnForward.evterTouchStart.On(()=>{a.playerMgrHealth.machine.currStatus!=a.playerMgrHealth.machine.statusDeath&&(a.playerMgrDefendCD.currStatus.OnDefend(),T.default.inst.currStatus.P1U8OnBtnDefendTouched())}),a.playerMgrEquipment.machine.currStatus==a.playerMgrEquipment.machine.statusFired?(e.nodeMark.active=!0,e.nodeMark.setPosition(a.playerMgrEquipment.firePos.x,a.playerMgrEquipment.firePos.y)):e.nodeMark.active=!1,e.nodeBarHp.x=e.nodeBarHp.width*(o.commonHpCurrent/o.commonHpMax-1),e.txtHpCount.string=`\u751f\u547d: ${Math.ceil(o.commonHpCurrent)} / ${Math.ceil(o.commonHpMax)}`,e.nodeBarMp.x=e.nodeBarMp.width*(a.mpCurrent/a.mpMax-1);let r=a.playerMgrEquipment.equipInst.OnAble();e.nodeBarMp.opacity=r?255:100,e.txtMpCount.string=`\u80fd\u91cf: ${Math.max(Math.floor(a.mpCurrent),0)} / ${Math.ceil(a.mpMax)}`;let s=a.playerMgrEquipment.equipInst.OnCostNeed();e.nodeBarMpMark.x=e.nodeBarHp.width*(s/a.mpMax),e.drawer._graphics.clear(),F.default.HIDE_UI||T.default.inst.currStatus.P1U2OnDraw(),e.txtLevel.string=t.playMachine.OnGetTitle(),e.sprMask.fillRange=1-a.playerMgrDefendCD.statusTimeCount.msWait/b.default.CD_DEFEND;for(let i=0;i<e.listNodeOpacitySkill.length;i++)e.listNodeOpacitySkill[i].opacity=a.playerMgrDefendCD.opacitySkill;e.nodeReadyFlash.opacity=a.animFlashReady.Get255(),e.nodeReadyFlash.scale=v.default.Clamp(1.05*a.animFlashReady.rateVisibility,1,2),e.nodeReadyKeep.opacity=a.animShieldReady.Get255(),e.nodeFlashDmged.x=t.cameraPos.x,e.nodeFlashDmged.y=t.cameraPos.y,e.nodeMp.active=t.mpNeed,e.nodeHp.active=!0,T.default.inst.currStatus.P1U2OnGamePlayViewStyle(),e.nodeTips.active=L.default.inst.IsPc()&&T.default.inst.currStatus==T.default.inst.statusIdle}})],childrenCreator:[h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerBossBoard,uiNodeCreator:(e,t,o)=>{if(F.default.HIDE_UI)return;if(!e.playMachine.IsBossLevel())return;let i=e.playMachine.gameState.GetTypeAllEle(m.default);for(let a=0;a<i.length;a++){let t=i[a];0<t.commonArgsCfg.is_boss&&o.push(U.default.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerBg,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.OnGetSceneId(),a=s.default.mgrCfg.cfgScene.select(G.default.idGetter,i)._list[0];o.push(p.default.GetNodeTypeByRes(a.res).CreateNode(e,i,i))}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerTrace,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.mgrTrace.listRecord.length;i++){let t=e.mgrTrace.listRecord[i];o.push(w.default.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerNpc,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetTypeAllEle(m.default),a=y.default.Pop(y.default.typeArray,N);for(let r=0;r<i.length;r++)a.push(i[r]);a.sort((e,t)=>{let o=g.default.GetSize(e.commonArgsCfg.id),i=g.default.GetSize(t.commonArgsCfg.id);return o!=i?i-o:e.id-t.id});for(let r=0;r<a.length;r++){let t=a[r];t.commonArgsRs.instDisplay(e,t,o)}y.default.Push(a)}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetTypeAllEle(S.default);for(let a=0;a<i.length;a++){let t=i[a];o.push(t.cache.rs.onGetSceneRewardNodeType().CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerRain,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.playMachine.gameState.GetTypeAllEle(B.default).length;i++){let t=e.playMachine.gameState.GetTypeAllEle(B.default)[i];o.push(C.default.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerSnow,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.playMachine.gameState.GetTypeAllEle(M.default).length;i++){let t=e.playMachine.gameState.GetTypeAllEle(M.default)[i];o.push(x.default.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerPart,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.playMachine.gameState.GetTypeAllEle(c.default).length;i++){let t=e.playMachine.gameState.GetTypeAllEle(c.default)[i],a=t.nodeType.CreateNode(e,t.id,t.id);o.push(a)}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerLight,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.playMachine.gameState.GetTypeAllEle(A.default).length;i++){let t=e.playMachine.gameState.GetTypeAllEle(A.default)[i];o.push(R.default.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerEff,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.playMachine.gameState.GetTypeAllEle(u.default).length;i++){let t=e.playMachine.gameState.GetTypeAllEle(u.default)[i];o.push(d.default.GetNodeType(t.cfgId).CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerBuff,uiNodeCreator:e=>{let t=e.playMachine.gameState.GetTypeAllEle(P.default);for(let o=0;o<t.length;o++)t[o]}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerBoard,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.GetTypeAllEle(m.default);for(let a=0;a<i.length;a++){let t=i[a],r=g.default.instMap.get(t.commonArgsCfg.logic);if(null==r.boardDisplay)continue;let s=y.default.Pop(y.default.typeArray,N),n=g.default.GetSize(t.commonArgsCfg.id);s.push(t.id,t.commonHeadPos.x,t.commonHeadPos.y+b.default.HP_FOOT_OFFSET_Y,n),r.boardDisplay(e,s,o)}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerTxt,uiNodeCreator:(e,t,o)=>{if(F.default.HIDE_UI)return;let i=e.playMachine.gameState.GetTypeAllEle(l.default);for(let a=0;a<i.length;a++){let t=i[a];o.push(t.nodeType.CreateNode(e,t.id,t.id))}}}),h.default.ChildrenGeneration.Pop(N,{containerGetter:e=>e.containerEquipmentList,uiNodeCreator:(e,t,o)=>{let i=e.playMachine.gameState.player.commonBehaviour;for(let a=0;a<i.playerMgrEquipment.listEquipmentInst.length;a++)o.push(E.default.nodeType.CreateNode(e,a,a))}})],propsType:f.default.typeNumber,hideRS:O.default.setParentNull,enterRS:D.default.none}),a([k(cc.Node)],q.prototype,"containerBg",void 0),a([k(cc.Node)],q.prototype,"containerTrace",void 0),a([k(cc.Node)],q.prototype,"containerNpc",void 0),a([k(cc.Node)],q.prototype,"containerReward",void 0),a([k(cc.Node)],q.prototype,"containerRain",void 0),a([k(cc.Node)],q.prototype,"containerSnow",void 0),a([k(cc.Node)],q.prototype,"containerPart",void 0),a([k(cc.Node)],q.prototype,"containerLight",void 0),a([k(cc.Node)],q.prototype,"containerEff",void 0),a([k(cc.Graphics)],q.prototype,"graphics",void 0),a([k(cc.Node)],q.prototype,"containerBuff",void 0),a([k(cc.Node)],q.prototype,"containerBoard",void 0),a([k(cc.Node)],q.prototype,"containerTxt",void 0),a([k(r.default)],q.prototype,"btnOptions",void 0),a([k(r.default)],q.prototype,"btnAim",void 0),a([k(cc.Node)],q.prototype,"nodeMark",void 0),a([k(cc.Sprite)],q.prototype,"sprScreen",void 0),a([k(r.default)],q.prototype,"btnForward",void 0),a([k(cc.Camera)],q.prototype,"cameraBodyEnv",void 0),a([k(cc.Camera)],q.prototype,"cameraEffTrace",void 0),a([k(cc.Camera)],q.prototype,"cameraBloom",void 0),a([k(cc.Camera)],q.prototype,"cameraBodyElement",void 0),a([k(cc.Camera)],q.prototype,"cameraEffLight",void 0),a([k(cc.Camera)],q.prototype,"cameraEffOffsetAdd",void 0),a([k(cc.Camera)],q.prototype,"cameraEffOffsetSub",void 0),a([k(cc.Camera)],q.prototype,"cameraBoard",void 0),a([k(cc.Node)],q.prototype,"containerEquipmentList",void 0),a([k(cc.Label)],q.prototype,"txtLevel",void 0),a([k(cc.Node)],q.prototype,"nodeHp",void 0),a([k(cc.Node)],q.prototype,"nodeBarHp",void 0),a([k(cc.Label)],q.prototype,"txtHpCount",void 0),a([k(cc.Node)],q.prototype,"nodeBarMp",void 0),a([k(cc.Label)],q.prototype,"txtMpCount",void 0),a([k(cc.Node)],q.prototype,"nodeBarMpMark",void 0),a([k(cc.Sprite)],q.prototype,"sprMask",void 0),a([k([cc.Node])],q.prototype,"listNodeOpacitySkill",void 0),a([k(cc.Node)],q.prototype,"nodeReadyFlash",void 0),a([k(cc.Node)],q.prototype,"nodeReadyKeep",void 0),a([k(cc.Node)],q.prototype,"nodeFlashDmged",void 0),a([k(cc.Node)],q.prototype,"nodeMp",void 0),a([k(cc.Node)],q.prototype,"containerBossBoard",void 0),a([k(cc.Node)],q.prototype,"nodeTips",void 0),q=i=a([j],q),o.default=q,cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/extend/graphics_drawer/GraphicsDrawer":"GraphicsDrawer","../../../frame/global/Jiang":"Jiang","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../display/GameDisplayBG":"GameDisplayBG","../../display/GameDisplayEff":"GameDisplayEff","../../display/GameDisplayLightPoint":"GameDisplayLightPoint","../../display/GameDisplayParticleRain":"GameDisplayParticleRain","../../display/GameDisplayParticleSnow":"GameDisplayParticleSnow","../../game_element/body/GameElementBody":"GameElementBody","../../game_element/body/GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../../game_element/buff/GameElementBuff":"GameElementBuff","../../game_element/common/GameElementEff":"GameElementEff","../../game_element/common/GameElementLightPoint":"GameElementLightPoint","../../game_element/common/GameElementPart":"GameElementPart","../../game_element/common/GameElementReward":"GameElementReward","../../game_element/common/GameElementTxt":"GameElementTxt","../../game_element/particle/GameElementParticleRain":"GameElementParticleRain","../../game_element/particle/GameElementParticleSnow":"GameElementParticleSnow","../guide_view/GuideMgr":"GuideMgr","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GamePlayViewBossBoard":"GamePlayViewBossBoard","./GamePlayViewEquipmentBtn":"GamePlayViewEquipmentBtn","./GamePlayViewTrace":"GamePlayViewTrace"}],GameSizeMarkRS:[function(e,t,o){"use strict";cc._RF.push(t,"3f18ceOmc5AOKYNccGmbUGZ","GameSizeMarkRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../GameCommon"),r=e("../../view/voice_ogg/VoiceOggViewState"),s=e("../common/GameElementEff"),n=e("./DefineVoice");class l{constructor(e){this.idCfg=e.idCfg,this.effCure=e.effCure,this.effCall=e.effCall,this.effTranslation=e.effTranslation,this.effHit=e.effHit,l.listInst.push(this)}}(function(e){function t(t){let o;for(let i=0;i<e.listInst.length;i++){let a=e.listInst[i];(a.idCfg<=t||null==o)&&(o=a)}return o}e.listInst=i.default.Pop(i.default.typeArray,"GameSizeMarkRS"),e.size1=new e({idCfg:1,effCure:20001,effCall:30001,effTranslation:50001,effHit:60001}),e.size2=new e({idCfg:2,effCure:20002,effCall:30002,effTranslation:50002,effHit:60002}),e.size3=new e({idCfg:3,effCure:20003,effCall:30003,effTranslation:50003,effHit:60003}),e.size4=new e({idCfg:4,effCure:20004,effCall:30004,effTranslation:50004,effHit:60004}),e.PlayEffCure=function(e,o){if(!o)return;let i=t(o.commonArgsCfg.size_mark);null!=i&&s.default.PopForXYBind(e,o.commonCenterPos.x,o.commonCenterPos.y,0,1,i.effCure,cc.Color.WHITE,o)},e.PlayEffCall=function(e,o){if(!o)return;let i=t(o.commonArgsCfg.size_mark);null!=i&&s.default.PopForXYBind(e,o.commonCenterPos.x,o.commonCenterPos.y,0,1,i.effCall,cc.Color.WHITE,o)},e.PlayEffTransition=function(e,o){if(!o)return;let i=t(o.commonArgsCfg.size_mark);null!=i&&o.relState.AddEle(s.default.PopForXYStatic(e,o.commonCenterPos.x,o.commonCenterPos.y,0,1,i.effTranslation,cc.Color.WHITE))},e.PlayEffHitByConcat=function(e,o,i,a,r){let n=t(r);null!=n&&s.default.PopForXYBind(e,o.position.x,o.position.y,0,1,n.effHit,a,o.relFixture.relBody.relEle)},e.PlayEffHitByBody=function(e,o){let i=t(o.commonArgsCfg.size_mark);null!=i&&o.relState.AddEle(s.default.PopForXYStatic(e,o.commonCenterPos.x,o.commonCenterPos.y,0,1,i.effHit,o.commonCache.colorMain))},e.PlayEffHitByBodyForHitGround=function(e,o){let i=t(o.commonArgsCfg.size_mark);null!=i&&(o.relState.AddEle(s.default.PopForXYStatic(e,o.commonCenterPos.x,a.default.GROUND_Y,0,1,i.effHit,o.commonCache.colorMain)),r.default.inst.VoiceSet(n.default.HORSE_DIRT_2))}})(l||(l={})),o.default=l,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../GameCommon":"GameCommon","../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../common/GameElementEff":"GameElementEff","./DefineVoice":"DefineVoice"}],GameStatePhyAbleRSRec:[function(e,t,o){"use strict";cc._RF.push(t,"25724PciEtGUZG6fuYsx2OQ","GameStatePhyAbleRSRec"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t){let o=i.default.Pop(r._t,e);return o.phyAble=t,o}}r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"GameStatePhyAbleRSRec"}),function(e){e.phyAbleMap=i.default.Pop(i.default.typeMap,"GameStatePhyAbleRSRec")}(r||(r={})),o.default=r,cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],GameStatePhyAbleRS:[function(e,t,o){"use strict";cc._RF.push(t,"c3d2dda3+NDTaAORVzbeFfg","GameStatePhyAbleRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("./body/GameElementBody"),s=e("./common/GameElementPart"),n=e("./common/GameElementScene"),l=e("./GameStatePhyAbleRSRec"),c=e("./particle/GameElementParticle"),d="GameStatePhyAbleRS";class u{constructor(){}static Pop(e,t,o,a){let r=i.default.Pop(u._t,e);return r.typeA=t,r.typeB=o,r.phyAble=a,l.default.phyAbleMap.has(t)||l.default.phyAbleMap.set(t,i.default.Pop(i.default.typeMap,d)),l.default.phyAbleMap.get(t).set(o,l.default.Pop(d,a)),l.default.phyAbleMap.has(o)||l.default.phyAbleMap.set(o,i.default.Pop(i.default.typeMap,d)),l.default.phyAbleMap.get(o).set(t,l.default.Pop(d,(e,t)=>a(t,e))),r}}u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:"PhyCfg"}),function(e){e.phyAbleRegist=[e.Pop(d,n.default,r.default,()=>!0),e.Pop(d,n.default,s.default,()=>!0),e.Pop(d,n.default,c.default,()=>!0)]}(u||(u={})),o.default=u,cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./GameStatePhyAbleRSRec":"GameStatePhyAbleRSRec","./body/GameElementBody":"GameElementBody","./common/GameElementPart":"GameElementPart","./common/GameElementScene":"GameElementScene","./particle/GameElementParticle":"GameElementParticle"}],GameStateReward:[function(e,t,o){"use strict";cc._RF.push(t,"936eaOf6y1Dd54NqeO388Bl","GameStateReward"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GameState:[function(e,t,o){"use strict";cc._RF.push(t,"6004eXiCLJAD5deWDnIwOia","GameState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./common/GameElementScene"),a=e("./body/GameElementBody"),r=e("../../frame/global/Jiang"),s=e("../../frame/basic/BCEventer"),n=e("../../frame/basic/UtilObjPoolType"),l=e("../../frame/basic/UtilObjPool"),c=e("../../frame/basic/BCCounter"),d=e("./GameCtxB2BodyFixture"),u=e("./GameCtxB2BodyFixtureConcat"),m=e("../GameCommon"),p=e("./particle/GameElementParticleRainMgr"),h=e("./particle/GameElementParticleSnowMgr"),f=e("../../frame/config/src/CfgScene"),y=e("../cfg_cache/CfgCacheScene"),_="GameState";class g{constructor(){this.genId=0,this.dataEleMap=l.default.Pop(l.default.typeMap,_),this.idToEleMap=l.default.Pop(l.default.typeMap,_),this.counterAnimNeed=c.default.Pop(_),this.evterSteped=s.default.Pop(_),this.listRewardIdCfg=l.default.Pop(l.default.typeArray,_),this.msSteped=0,this._timeScale=1,this._appId=0,this._appIdToValMap=l.default.Pop(l.default.typeMap,_)}static Pop(e,t,o){let a=l.default.Pop(g._t,e);a.dropScale=o;let s=r.default.mgrCfg.cfgScene.select(f.default.idGetter,t)._list[0],n=y.default.GetCache(s);a.cfgSceneCache=n,a.b2Gravity=-r.default.mgrUI._containerUI.height*r.default.mgrUI._sizePerPixel*2,a.b2w=l.default.PopB2World(0,a.b2Gravity);let c=l.default.Pop(l.default.typeB2WorldManifold,_);return a.b2w.SetContactListener({BeginContact:()=>{},EndContact:()=>{},BeginContactFixtureParticle:()=>{},EndContactFixtureParticle:()=>{},BeginContactParticleParticle:()=>{},EndContactParticleParticle:()=>{},PreSolve:e=>{let t=e.GetFixtureA(),o=t.GetBody(),a=t[d.default.SYM_REC],s=a.relBody.relEle,n=e.GetFixtureB(),m=n.GetBody(),p=n[d.default.SYM_REC],h=p.relBody.relEle;e.GetWorldManifold(c);let f=l.default.Pop(l.default.typeccVec2,_);f.x=c.points[0].x/r.default.mgrUI._sizePerPixel,f.y=c.points[0].y/r.default.mgrUI._sizePerPixel;let y=l.default.Pop(l.default.typeccVec2,_);if(y.x=c.normal.x,y.y=c.normal.y,a.type.recAbleCheck(p.type)){let e=u.default.Pop(_,a,p,f.x,f.y,y.x,y.y);a.listConcat.push(e)}if(p.type.recAbleCheck(a.type)){let e=u.default.Pop(_,p,a,f.x,f.y,-y.x,-y.y);p.listConcat.push(e)}l.default.Push(f),l.default.Push(y),e.SetEnabled(s instanceof i.default&&p.type.phyAble&&m.GetLinearVelocity().y<=0||h instanceof i.default&&a.type.phyAble&&o.GetLinearVelocity().y<=0),s instanceof i.default&&p.type.phyAble&&m.GetLinearVelocity().y<=0&&h.evterContactGroundB.Call(e),h instanceof i.default&&a.type.phyAble&&o.GetLinearVelocity().y<=0&&s.evterContactGroundA.Call(e)},PostSolve:()=>{}}),a.mgrRain=p.default.Pop(_,a),a.mgrSnow=h.default.Pop(_,a),a}GetId(){return++this.genId}AddEle(e){this.dataEleMap.has(e.constructor)||this.dataEleMap.set(e.constructor,l.default.Pop(l.default.typeArray,_)),0<=this.dataEleMap.get(e.constructor).indexOf(e)||(e.relState=this,e.id=this.GetId(),this.dataEleMap.get(e.constructor).push(e),this.idToEleMap.set(e.id,e),e.evterAdded.Call(null))}RemEle(e){if(!this.dataEleMap.has(e.constructor))return;let t=this.dataEleMap.get(e.constructor).indexOf(e);t<0||(this.dataEleMap.get(e.constructor).splice(t,1),this.idToEleMap.delete(e.id),e.isValid=!1,e.evterRem.Call(null),e.Release())}GetTypeAllEle(e){return this.dataEleMap.has(e)||this.dataEleMap.set(e,l.default.Pop(l.default.typeArray,_)),this.dataEleMap.get(e)}GetEleById(e){return this.idToEleMap.get(e)}StepMS(e){m.default.PHY_STEP_MAX<e&&(e=m.default.PHY_STEP_MAX),this.msSteped+=e,this.idToEleMap.forEach(e=>{for(let t=0;t<e.listBodyCtx.length;t++){let o=e.listBodyCtx[t];for(let e=0;e<o.listFixtureCtx.length;e++){let t=o.listFixtureCtx[e];for(let e=0;e<t.listConcat.length;e++){let o=t.listConcat[e];l.default.Push(o)}t.listConcat.length=0}}});let t=e/1e3;this.b2w.Step(t,1,1,1),this.evterSteped.Call(e)}ApplyTimeScale(e){let t=this._appId++;return this._appIdToValMap.set(t,e),this.RecalTimeScale(),t}CancelTimeScale(e){this._appIdToValMap.has(e)&&(this._appIdToValMap.delete(e),this.RecalTimeScale())}RecalTimeScale(){this._timeScale=1,this._appIdToValMap.forEach(e=>{this._timeScale*=e})}Release(){this.idToEleMap.forEach(e=>{e.Release()})}GetIdCfgCount(e){let t=0,o=this.GetTypeAllEle(a.default);for(let i=0;i<o.length;i++)e==o[i].commonArgsCfg.id&&t++;return t}}g._t=new n.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),o.default=g,cc._RF.pop()},{"../../frame/basic/BCCounter":"BCCounter","../../frame/basic/BCEventer":"BCEventer","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/config/src/CfgScene":"CfgScene","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../cfg_cache/CfgCacheScene":"CfgCacheScene","./GameCtxB2BodyFixture":"GameCtxB2BodyFixture","./GameCtxB2BodyFixtureConcat":"GameCtxB2BodyFixtureConcat","./body/GameElementBody":"GameElementBody","./common/GameElementScene":"GameElementScene","./particle/GameElementParticleRainMgr":"GameElementParticleRainMgr","./particle/GameElementParticleSnowMgr":"GameElementParticleSnowMgr"}],GameSuccessedViewState:[function(e,t,o){"use strict";cc._RF.push(t,"29b8fCTk6tAbYb8hHy7RfC1","GameSuccessedViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/ui/ViewState"),s=e("../../../IndexLayer"),n=e("../lv_up_batch_view/LvUpBatchViewState"),l=e("../voice_ogg/VoiceOggViewState"),c="GameSuccessedViewState";class d extends r.default{constructor(){super(s.default.GAME,r.default.BG_TYPE.MASK,!0)}static Pop(e,t,o){let a=i.default.Pop(d._t,e);return a.idCfgLev=t,a.gameState=o,a.stateLvUpBatch=n.default.Pop(c),a}OnDisplay(){l.default.inst.VoiceSet(1001001012)}OnChange(e){this.stateLvUpBatch.OnChange(e)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState","../lv_up_batch_view/LvUpBatchViewState":"LvUpBatchViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GameSuccessedView:[function(e,t,o){"use strict";cc._RF.push(t,"14f4b4B5ORLPLkUZiLo7msh","GameSuccessedView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../../IndexView"),m=e("../index_view/IndexViewState"),p=e("../game_play/GamePlayViewState"),h=e("../reward_view/RewardViewState"),f=e("../../GameCommon"),y=e("../voice_ogg/VoiceOggViewState"),_=e("../../../frame/ui/UINodeInstHideRS"),g=e("../common/RewardGridArgs"),b=e("../../../frame/config/src/CfgScene"),S=e("../../cfg_cache/CfgCacheScene"),P=e("../../play_ordinary/PlayOrdinaryRS"),B=e("../../../frame/ui/UINodeInstEnterRS"),C=e("../../../IndexBuildConfig"),M=e("../../../frame/basic/UtilMath"),x=e("../../GameMath"),V=e("../../game_element/body/DefineVoice"),I=e("../lottery_view/LotteryTipsViewState"),O=e("../lottery_view/LotteryTipsView"),w=e("../index_view/IndexViewRS"),{ccclass:E,property:A}=cc._decorator,R="GameSuccessedView";let v=i=class extends c.default{constructor(){super(...arguments),this.btnHome=null,this.btnNext=null,this.nodeReward=null,this.containerReward=null,this.btnGotImm=null,this.btnGotDouble=null,this.listNodeDark=[],this.listNodeLight=[],this.btnStrengthen=null,this.txtCurrent=null,this.txtCostEnable=null,this.txtCostDisable=null,this.btnQa=null,this.nodeRedEquipFresh=null,this.txtRewardScale=null}onEnable(){this.nodeReward.active=!1}};v.nodeType=l.default.Pop(R,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/game_successed_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(R,{listRefModule:[d.default.DEFAULT,d.default.INDEXVIEW_LOTTO],propsFilter:(e,t)=>{e.txtRewardScale.string=`${x.default.REWARD_SCALE} \u500d\u9886\u53d6`,e.nodeRedEquipFresh.active=w.default.equip.redCheck();let o=P.default.GetRS(t.idCfgLev),i=n.default.mgrCfg.cfgScene.select(b.default.idGetter,o.getterSceneId(t.idCfgLev))._list[0],a=S.default.GetCache(i);for(let r=0;r<e.listNodeDark.length;r++)e.listNodeDark[r].color=a.colorDark;for(let r=0;r<e.listNodeLight.length;r++)e.listNodeLight[r].color=a.colorLight;e.btnHome.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnHome.evterTouchEnd.On(()=>{h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg).then(()=>{n.default.mgrUI.Open(u.default.nodeType,m.default.Pop(R))})}),e.btnNext.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnNext.evterTouchEnd.On(()=>{h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg).then(()=>{p.default.FightLast()})}),e.nodeReward.active=C.default.VIDEO_ENABLE&&0!=t.gameState.listRewardIdCfg.length&&x.default.IsStandardRewardScene(t.gameState.cfgSceneCache.idCfg),e.btnGotImm.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnGotImm.evterTouchEnd.On(()=>{h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg),t.gameState.listRewardIdCfg.length=0}),e.btnGotDouble.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnGotDouble.evterTouchEnd.On(()=>{n.default.mgrSdk.core.WXVideo().then(e=>{if(e.isRewardAble){for(let e=0;e<t.gameState.listRewardIdCfg.length;e++)t.gameState.listRewardIdCfg[e].props[1]*=x.default.REWARD_SCALE;h.default.GotRewardOrdinary(f.default.TITLE_REWARD,t.gameState.listRewardIdCfg),t.gameState.listRewardIdCfg.length=0}})}),e.txtCurrent.string=`${M.default.ParseNumToKMBTAABB(t.stateLvUpBatch.recCoin.count,Math.floor)}`,e.txtCostEnable.string=`${M.default.ParseNumToKMBTAABB(t.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCostEnable.node.active=t.stateLvUpBatch.countCost<=t.stateLvUpBatch.recCoin.count,e.txtCostDisable.string=`${M.default.ParseNumToKMBTAABB(t.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCostDisable.node.active=t.stateLvUpBatch.recCoin.count<t.stateLvUpBatch.countCost,e.btnStrengthen.evterTouchStart.On(()=>{y.default.inst.VoiceSet(V.default.VOICE_MONEY)}),e.btnStrengthen.evterTouchEnd.On(()=>{t.stateLvUpBatch.Go()}),e.btnQa.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnQa.evterTouchEnd.On(()=>{n.default.mgrUI.Open(O.default.nodeType,I.default.Pop(R))})}})],childrenCreator:[l.default.ChildrenGeneration.Pop(R,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.gameState.listRewardIdCfg.length;i++){let t=e.gameState.listRewardIdCfg[i];o.push(t.rs.onGetUIRewardNodeType().CreateNode(e,g.default.Pop(t.rs,t.props),i))}}})],propsType:r.default.typeNumber,hideRS:_.default.setParentNull,enterRS:B.default.scaleInForTemp200}),a([A(s.default)],v.prototype,"btnHome",void 0),a([A(s.default)],v.prototype,"btnNext",void 0),a([A(cc.Node)],v.prototype,"nodeReward",void 0),a([A(cc.Node)],v.prototype,"containerReward",void 0),a([A(s.default)],v.prototype,"btnGotImm",void 0),a([A(s.default)],v.prototype,"btnGotDouble",void 0),a([A([cc.Node])],v.prototype,"listNodeDark",void 0),a([A([cc.Node])],v.prototype,"listNodeLight",void 0),a([A(s.default)],v.prototype,"btnStrengthen",void 0),a([A(cc.Label)],v.prototype,"txtCurrent",void 0),a([A(cc.Label)],v.prototype,"txtCostEnable",void 0),a([A(cc.Label)],v.prototype,"txtCostDisable",void 0),a([A(s.default)],v.prototype,"btnQa",void 0),a([A(cc.Node)],v.prototype,"nodeRedEquipFresh",void 0),a([A(cc.Label)],v.prototype,"txtRewardScale",void 0),v=i=a([E],v),o.default=v,cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../../../IndexDataModule":"IndexDataModule","../../../IndexView":"IndexView","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheScene":"CfgCacheScene","../../game_element/body/DefineVoice":"DefineVoice","../../play_ordinary/PlayOrdinaryRS":"PlayOrdinaryRS","../common/RewardGridArgs":"RewardGridArgs","../game_play/GamePlayViewState":"GamePlayViewState","../index_view/IndexViewRS":"IndexViewRS","../index_view/IndexViewState":"IndexViewState","../lottery_view/LotteryTipsView":"LotteryTipsView","../lottery_view/LotteryTipsViewState":"LotteryTipsViewState","../reward_view/RewardViewState":"RewardViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],GlobalLockRotation0:[function(e,t,o){"use strict";cc._RF.push(t,"0b60fQk7M9NXZ/w6my0WI+G","GlobalLockRotation0");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:a,property:r}=cc._decorator;let s=class extends cc.Component{update(){let e=this.node.parent,t=0;for(;null!=e;)t+=e.angle,e=e.parent;this.node.angle=-t}};s=i([a],s),o.default=s,cc._RF.pop()},{}],GraphicsDrawer:[function(e,t,o){"use strict";cc._RF.push(t,"77f64c5UVBHKoNydI7/u01X","GraphicsDrawer"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType");class r{constructor(){this._cameraPixelPerSize=1,this._cameraX=0,this._cameraY=0}static Pop(e,t){let o=i.default.Pop(r._t,e);return o._graphics=t,o}SetTransform(e,t,o){this._cameraPixelPerSize=e,this._cameraX=t,this._cameraY=o}FillPosSetAll(e,t){this.FillPosOrigin(e,e.length,t)}FillPosOrigin(e,t,o){this._graphics.fillColor=o,this.GraphMoveTo(e[0].x,e[0].y);for(let i=1;i<t;i++)this.GraphLineTo(e[i].x,e[i].y);this.GraphLineTo(e[0].x,e[0].y),this._graphics.fill()}CyclePosSetAll(e,t,o){this.CyclePosOrigin(e,e.length,t,o)}CyclePosOrigin(e,t,o,i){for(let a=0;a<t;a++){let t=e[a],r=e[(a+1)%e.length];this.StraightLine(t.x,t.y,r.x,r.y,o,i)}}ConnectPosSetAll(e,t,o){this.ConnectPosOrigin(e,e.length,t,o)}ConnectPosOrigin(e,t,o,i){for(let a=0;a<t-1;a++){let t=e[a],r=e[(a+1)%e.length];this.StraightLine(t.x,t.y,r.x,r.y,o,i)}}RoundFill(e,t,o,i){this._graphics.fillColor=i,this.GraphArc(e,t,o),this._graphics.fill()}RoundLine(e,t,o,i,a){this._graphics.strokeColor=a,this._graphics.lineWidth=i*this._cameraPixelPerSize,this.GraphArc(e,t,o),this._graphics.stroke()}StraightLine(e,t,o,i,a,r){this._graphics.strokeColor=r,this._graphics.lineWidth=a*this._cameraPixelPerSize,this.GraphMoveTo(e,t),this.GraphLineTo(o,i),this._graphics.stroke()}Pixel(e){return e/this._cameraPixelPerSize}GraphMoveTo(e,t){this._graphics.moveTo(this.TransformX(e),this.TransformY(t))}GraphLineTo(e,t){this._graphics.lineTo(this.TransformX(e),this.TransformY(t))}GraphArc(e,t,o){this._graphics.arc(this.TransformX(e),this.TransformY(t),o*this._cameraPixelPerSize,0,360,!0)}TransformX(e){return(e-this._cameraX)*this._cameraPixelPerSize}TransformY(e){return(e-this._cameraY)*this._cameraPixelPerSize}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"GraphicsDrawer"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType"}],GuideMgrStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"5c304faHFtOrZXiedmKa6Ar","GuideMgrStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexBuildConfig"),a=e("../../../IndexStorageItem"),r=e("../../../frame/global/Jiang"),s=e("./GuideMgrStatus");o.default=class extends s.default{OnInited(){0==r.default.mgrData.Get(a.default.guideStep)&&i.default.GUIDE_ENABLE&&this.relMgr.EnterStatus(this.relMgr.statusP1U1TouchStart)}},cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../../../IndexStorageItem":"IndexStorageItem","../../../frame/global/Jiang":"Jiang","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U10Wait:[function(e,t,o){"use strict";cc._RF.push(t,"224d8pncihEX6qK2IQJ+lhl","GuideMgrStatusP1U10Wait"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./GuideMgrStatus");o.default=class extends i.default{constructor(){super(...arguments),this._countStep=0}OnEnter(){this._countStep=0}P1U2OnGameCoreStep(e){this._countStep+=e,1e3<this._countStep&&this.relMgr.EnterStatus(this.relMgr.statusP1U11DefendAgain)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!0,this.relMgr.gamePlayView.btnForward.SetEnable(!1),this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U11DefendAgain:[function(e,t,o){"use strict";cc._RF.push(t,"4988caf+vFAbYbx2aSq4Dvm","GuideMgrStatusP1U11DefendAgain"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexStorageItem"),a=e("../../../frame/basic/UtilNode"),r=e("../../../frame/global/Jiang"),s=e("../../GameCommon"),n=e("../../game_element/body/DefineVoice"),l=e("../voice_ogg/VoiceOggViewState"),c=e("./GuideMgrStatus");o.default=class extends c.default{OnMaskDisplay(){return!0}OnEnter(){let e=this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour;e.playerMgrEquipment.machine.currStatus.OnArmo(),e.playerMgrDefendCD.opacitySkill=255,this._timeScaleAppId=this.relMgr.gamePlayViewState.playMachine.gameState.ApplyTimeScale(0),a.default.SetGroup(this.relMgr.gamePlayView.btnForward.node,s.default.GROUP_IDX_GUIDE),this.relMgr.guideTipsTxt="\u683c\u6321\u6210\u529f\u540e\u76f4\u63a5\u5237\u65b0\u51b7\u5374\uff0c\u53ef\u518d\u6b21\u683c\u6321\uff01",this.relMgr.guideTipsPosX=350,l.default.inst.VoiceSet(n.default.GUIDE_TIPS_POP)}OnExit(){this.relMgr.gamePlayViewState.playMachine.gameState.CancelTimeScale(this._timeScaleAppId)}P1U2OnBtnAimTouchStart(e,t){}P1U2OnBtnAimTouchMove(e,t){}P1U2OnBtnAimTouchEnd(e,t){}P1U2OnDraw(){}P1U8OnBtnDefendTouched(){a.default.SetGroup(this.relMgr.gamePlayView.btnForward.node,s.default.GROUP_IDX_UI),this.relMgr.EnterStatus(this.relMgr.statusIdle),r.default.mgrData.Set(i.default.guideStep,1)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!0,this.relMgr.gamePlayView.btnForward.SetEnable(!0),this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilNode":"UtilNode","../../../frame/global/Jiang":"Jiang","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U1TouchStart:[function(e,t,o){"use strict";cc._RF.push(t,"c63124X2xhB67jLWt8WMYuq","GuideMgrStatusP1U1TouchStart"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./GuideMgrStatus");o.default=class extends i.default{P1U1OnGotNodeIndexViewBtnStart(e){}P1U1OnGotNodeIndexViewBtnStartTouch(e){this.relMgr.EnterStatus(this.relMgr.statusP1U2Wait)}},cc._RF.pop()},{"./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U2Wait:[function(e,t,o){"use strict";cc._RF.push(t,"8b9ac+4GOZEx4tLQCfCGb4I","GuideMgrStatusP1U2Wait"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../GameCommon"),a=e("../../game_element/body/GameElementBody"),r=e("./GuideMgrStatus");o.default=class extends r.default{OnEnter(){this.relMgr.dmgAble=0}P1U2OnGameCoreStep(e){let t=null,o=this.relMgr.gamePlayViewState.playMachine.gameState;o.GetTypeAllEle(a.default).forEach(e=>{if(e.commonArgsCamp!=i.default.ENEMY_CAMP)return;let a=e.commonFootPos.x-o.player.commonFootPos.x;(null==t||t<a)&&(t=a)}),null!=t&&t<395&&this.relMgr.EnterStatus(this.relMgr.statusP1U3Atk)}P1U2OnBtnAimTouchStart(e,t){}P1U2OnBtnAimTouchMove(e,t){}P1U2OnBtnAimTouchEnd(e,t){}P1U2OnDraw(){}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../GameCommon":"GameCommon","../../game_element/body/GameElementBody":"GameElementBody","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U3Atk:[function(e,t,o){"use strict";cc._RF.push(t,"4f871A1NU5MSLrx1mu/4PPG","GuideMgrStatusP1U3Atk"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../game_element/body/DefineVoice"),a=e("../voice_ogg/VoiceOggViewState"),r=e("./GuideMgrStatus");o.default=class extends r.default{OnEnter(){this.relMgr.dmgAble++,this._timeScaleAppId=this.relMgr.gamePlayViewState.playMachine.gameState.ApplyTimeScale(0),this.relMgr.guideTipsTxt="\u70b9\u51fb\u573a\u666f\u4ee5\u653b\u51fb\u53f2\u83b1\u59c6",this.relMgr.guideTipsPosX=50,a.default.inst.VoiceSet(i.default.GUIDE_TIPS_POP)}OnExit(){this.relMgr.gamePlayViewState.playMachine.gameState.CancelTimeScale(this._timeScaleAppId)}P1U2OnBtnAimTouchStart(e,t){let o=this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour;o.playerMgrEquipment.machine.currStatus.OnFire(o.playerEquipPos.x+o.playerMgrEquipment.aimVec.x,o.playerEquipPos.y+o.playerMgrEquipment.aimVec.y),o.playerMgrEquipment.machine.currStatus.OnStep(0),o.playerMgrEquipment.machine.currStatus.OnArmo(),this.relMgr.EnterStatus(this.relMgr.statusP1U4Wait)}P1U2OnBtnAimTouchMove(e,t){}P1U2OnBtnAimTouchEnd(e,t){}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U4Wait:[function(e,t,o){"use strict";cc._RF.push(t,"85938ovMI1D3bvYMjsjyKpT","GuideMgrStatusP1U4Wait"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../GameCommon"),a=e("../../game_element/body/GameElementBody"),r=e("./GuideMgrStatus");o.default=class extends r.default{P1U2OnGameCoreStep(e){let t=null,o=this.relMgr.gamePlayViewState.playMachine.gameState,r=0;o.GetTypeAllEle(a.default).forEach(e=>{if(e.commonArgsCamp!=i.default.ENEMY_CAMP)return void r++;let a=e.commonFootPos.x-o.player.commonFootPos.x;(null==t||t<a)&&(t=a)}),1==r&&null!=t&&t<395&&this.relMgr.EnterStatus(this.relMgr.statusP1U5Atk)}P1U2OnBtnAimTouchStart(e,t){}P1U2OnBtnAimTouchMove(e,t){}P1U2OnBtnAimTouchEnd(e,t){}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../GameCommon":"GameCommon","../../game_element/body/GameElementBody":"GameElementBody","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U5Atk:[function(e,t,o){"use strict";cc._RF.push(t,"65b51+PLhZEIpDoRgj/IKmZ","GuideMgrStatusP1U5Atk"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../game_element/body/DefineVoice"),a=e("../voice_ogg/VoiceOggViewState"),r=e("./GuideMgrStatus");o.default=class extends r.default{OnEnter(){this.relMgr.dmgAble++,this._timeScaleAppId=this.relMgr.gamePlayViewState.playMachine.gameState.ApplyTimeScale(0),this.relMgr.guideTipsTxt="\u6ce8\u610f\uff01\u957f\u6309\u65f6\u81ea\u52a8\u8fde\u53d1",this.relMgr.guideTipsPosX=50,a.default.inst.VoiceSet(i.default.GUIDE_TIPS_POP)}OnExit(){this.relMgr.gamePlayViewState.playMachine.gameState.CancelTimeScale(this._timeScaleAppId)}P1U2OnBtnAimTouchStart(e,t){let o=this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour;o.playerMgrEquipment.machine.currStatus.OnFire(o.playerEquipPos.x+o.playerMgrEquipment.aimVec.x,o.playerEquipPos.y+o.playerMgrEquipment.aimVec.y),o.playerMgrEquipment.machine.currStatus.OnStep(0),o.playerMgrEquipment.machine.currStatus.OnArmo(),this.relMgr.EnterStatus(this.relMgr.statusP1U6Warning),super.P1U2OnBtnAimTouchStart(e,t)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U6Warning:[function(e,t,o){"use strict";cc._RF.push(t,"dca1e3fmPJEi6MZkZQscGCr","GuideMgrStatusP1U6Warning"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./GuideMgrStatus");o.default=class extends i.default{P1U6OnBodyWarning(){this.relMgr.EnterStatus(this.relMgr.statusP1U7Wait)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U7Wait:[function(e,t,o){"use strict";cc._RF.push(t,"e2bd2yO1HVGwrqDNfF+GvQc","GuideMgrStatusP1U7Wait"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./GuideMgrStatus");o.default=class extends i.default{constructor(){super(...arguments),this._countStep=0}OnEnter(){this._countStep=0}P1U2OnGameCoreStep(e){this._countStep+=e,1e3<this._countStep&&this.relMgr.EnterStatus(this.relMgr.statusP1U8Defend)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!1,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U8Defend:[function(e,t,o){"use strict";cc._RF.push(t,"d4f42WXdzVHn72mPHfIWLnM","GuideMgrStatusP1U8Defend"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilNode"),a=e("../../GameCommon"),r=e("../../game_element/body/DefineVoice"),s=e("../voice_ogg/VoiceOggViewState"),n=e("./GuideMgrStatus");o.default=class extends n.default{OnMaskDisplay(){return!0}OnEnter(){let e=this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour;e.playerMgrEquipment.machine.currStatus.OnArmo(),e.playerMgrDefendCD.opacitySkill=255,this._timeScaleAppId=this.relMgr.gamePlayViewState.playMachine.gameState.ApplyTimeScale(0),i.default.SetGroup(this.relMgr.gamePlayView.btnForward.node,a.default.GROUP_IDX_GUIDE),this.relMgr.guideTipsTxt="\u6709\u5371\u9669\uff01\u5feb\u683c\u6321\uff01",this.relMgr.guideTipsPosX=350,s.default.inst.VoiceSet(r.default.GUIDE_TIPS_POP)}OnExit(){this.relMgr.gamePlayViewState.playMachine.gameState.CancelTimeScale(this._timeScaleAppId)}P1U2OnBtnAimTouchStart(e,t){}P1U2OnBtnAimTouchMove(e,t){}P1U2OnBtnAimTouchEnd(e,t){}P1U2OnDraw(){}P1U8OnBtnDefendTouched(){i.default.SetGroup(this.relMgr.gamePlayView.btnForward.node,a.default.GROUP_IDX_UI),this.relMgr.EnterStatus(this.relMgr.statusP1U9WarningAgain)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!0,this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"../../../frame/basic/UtilNode":"UtilNode","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatusP1U9WarningAgain:[function(e,t,o){"use strict";cc._RF.push(t,"93d0fx+HOBO5oUmtjPkj8PA","GuideMgrStatusP1U9WarningAgain"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./GuideMgrStatus");o.default=class extends i.default{P1U6OnBodyWarning(){this.relMgr.EnterStatus(this.relMgr.statusP1U10Wait)}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!1,this.relMgr.gamePlayView.btnForward.node.active=!0,this.relMgr.gamePlayView.btnForward.SetEnable(!1),this.relMgr.gamePlayView.btnOptions.node.active=!1,this.relMgr.gamePlayView.nodeHp.active=!1}},cc._RF.pop()},{"./GuideMgrStatus":"GuideMgrStatus"}],GuideMgrStatus:[function(e,t,o){"use strict";cc._RF.push(t,"8ffdbiM99tEea5FrgSu0ZQ+","GuideMgrStatus"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexBuildConfig"),a=e("../game_play/GamePlayView");o.default=class{constructor(e){this.relMgr=e}OnEnter(){}OnExit(){}OnInited(){}OnMaskDisplay(){return!1}P1U1OnGotNodeIndexViewBtnStart(e){}P1U1OnGotNodeIndexViewBtnStartTouch(e){}P1U2OnBtnAimTouchStart(e,t){let o=this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour;this.relMgr.gamePlayViewState.firePos.x=t.getLocationX(),this.relMgr.gamePlayViewState.firePos.y=t.getLocationY(),a.default.CallFired(o,e,this.relMgr.gamePlayViewState)}P1U2OnBtnAimTouchMove(e,t){let o=t.getLocationX(),i=t.getLocationY();this.relMgr.gamePlayViewState.firePos.x=o,this.relMgr.gamePlayViewState.firePos.y=i}P1U2OnBtnAimTouchEnd(e,t){this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour.playerMgrEquipment.machine.currStatus.OnArmo()}P1U2OnGamePlayViewStyle(){this.relMgr.gamePlayView.containerEquipmentList.active=!0,this.relMgr.gamePlayView.btnForward.node.active=!i.default.HIDE_UI,this.relMgr.gamePlayView.btnOptions.node.active=!0,this.relMgr.gamePlayView.nodeHp.active=!0}P1U2OnGameCoreStep(e){}P1U2OnDraw(){this.relMgr.gamePlayViewState.playMachine.gameState.player.commonBehaviour.playerMgrEquipment.machine.currStatus.OnDraw(this.relMgr.gamePlayView.drawer)}P1U5OnBtnEquipmentTouched(){}P1U6OnBodyWarning(){}P1U8OnBtnDefendTouched(){}},cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../game_play/GamePlayView":"GamePlayView"}],GuideMgrView:[function(e,t,o){"use strict";cc._RF.push(t,"406d2CCB9NF5qVoWiNMdyGF","GuideMgrView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="GuideMgrView";let f=i=class extends d.default{constructor(){super(...arguments),this.cameraGuide=null,this.nodeMask=null,this.txtTips=null}update(e){this.txtTips.getMaterial(0).setProperty("ctxWidth",this.txtTips.node.width),this.txtTips.getMaterial(0).setProperty("ctxHeight",this.txtTips.node.height)}};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/guide_mgr_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.GUIDE],propsFilter:(e,t)=>{e.cameraGuide.node.active=t.currStatus.OnMaskDisplay(),e.nodeMask.active=t.currStatus.OnMaskDisplay(),null==t.guideTipsTxt?e.txtTips.node.active=!1:(e.txtTips.node.active=!0,e.txtTips.string=t.guideTipsTxt,e.txtTips.node.x=t.guideTipsPosX)}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Camera)],f.prototype,"cameraGuide",void 0),a([p(cc.Node)],f.prototype,"nodeMask",void 0),a([p(cc.Label)],f.prototype,"txtTips",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],GuideMgr:[function(e,t,o){"use strict";cc._RF.push(t,"3e92bBdMidFHIWxRRP/l002","GuideMgr"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("./GuideMgrStatusP1U1TouchStart"),l=e("./GuideMgrStatusIdle"),c=e("./GuideMgrStatusP1U2Wait"),d=e("./GuideMgrStatusP1U3Atk"),u=e("./GuideMgrStatusP1U6Warning"),m=e("./GuideMgrStatusP1U8Defend"),p=e("./GuideMgrStatusP1U9WarningAgain"),h=e("./GuideMgrStatusP1U11DefendAgain"),f=e("./GuideMgrStatusP1U7Wait"),y=e("./GuideMgrStatusP1U10Wait"),_=e("./GuideMgrStatusP1U4Wait"),g=e("./GuideMgrStatusP1U5Atk");class b extends s.default{constructor(){super(i.default.SYSTEM,s.default.BG_TYPE.NONE,!1),this.dmgAble=0,this.statusIdle=new l.default(this),this.statusP1U1TouchStart=new n.default(this),this.statusP1U2Wait=new c.default(this),this.statusP1U3Atk=new d.default(this),this.statusP1U4Wait=new _.default(this),this.statusP1U5Atk=new g.default(this),this.statusP1U6Warning=new u.default(this),this.statusP1U7Wait=new f.default(this),this.statusP1U8Defend=new m.default(this),this.statusP1U9WarningAgain=new p.default(this),this.statusP1U10Wait=new y.default(this),this.statusP1U11DefendAgain=new h.default(this),this.EnterStatus(this.statusIdle)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,this.guideTipsTxt=null,t&&t.OnExit(),this.currStatus.OnEnter(),r.default.mgrUI.ModuleRefresh(a.default.GUIDE)}CatchGamePlayView(e){this.gamePlayView=e}CatchGamePlayViewState(e){this.gamePlayViewState=e}CatchGamePlayViewEquipmentBtn(e){this.gamePlayViewEquipmentBtn=e}get guideTipsTxt(){return this._guideTipsTxt}set guideTipsTxt(e){this._guideTipsTxt=e,r.default.mgrUI.ModuleRefresh(a.default.GUIDE)}get guideTipsPosX(){return this._guideTipsPosX}set guideTipsPosX(e){this._guideTipsPosX=e,r.default.mgrUI.ModuleRefresh(a.default.GUIDE)}}o.default=b,b.inst=new b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","./GuideMgrStatusIdle":"GuideMgrStatusIdle","./GuideMgrStatusP1U10Wait":"GuideMgrStatusP1U10Wait","./GuideMgrStatusP1U11DefendAgain":"GuideMgrStatusP1U11DefendAgain","./GuideMgrStatusP1U1TouchStart":"GuideMgrStatusP1U1TouchStart","./GuideMgrStatusP1U2Wait":"GuideMgrStatusP1U2Wait","./GuideMgrStatusP1U3Atk":"GuideMgrStatusP1U3Atk","./GuideMgrStatusP1U4Wait":"GuideMgrStatusP1U4Wait","./GuideMgrStatusP1U5Atk":"GuideMgrStatusP1U5Atk","./GuideMgrStatusP1U6Warning":"GuideMgrStatusP1U6Warning","./GuideMgrStatusP1U7Wait":"GuideMgrStatusP1U7Wait","./GuideMgrStatusP1U8Defend":"GuideMgrStatusP1U8Defend","./GuideMgrStatusP1U9WarningAgain":"GuideMgrStatusP1U9WarningAgain"}],IndexBuildConfig:[function(e,t,o){"use strict";var i;cc._RF.push(t,"530c0sGZi5B4b3g8iPo9jSy","IndexBuildConfig"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.IS_DEBUG=!1,e.VIDEO_ENABLE=!0,e.GUIDE_ENABLE=!0,e.HIDE_UI=!1,e.IS_FAKE_ENEMY=!1}(i||(i={})),o.default=i,cc._RF.pop()},{}],IndexDataModule:[function(e,t,o){"use strict";var i;cc._RF.push(t,"1afcdWK9N5HAInAih/2yEpF","IndexDataModule"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.RELOAD=0]="RELOAD",e[e.DEFAULT=1]="DEFAULT",e[e.SCREEN_SHOT=2]="SCREEN_SHOT",e[e.BLUR=3]="BLUR",e[e.GUIDE=4]="GUIDE",e[e.LOCK=5]="LOCK",e[e.FONT=6]="FONT",e[e.SDK=7]="SDK",e[e.EXIT=8]="EXIT",e[e.FLASH=9]="FLASH",e[e.RED_DOT=10]="RED_DOT",e[e.INDEXVIEW_CHILDREN_ABLE=11]="INDEXVIEW_CHILDREN_ABLE",e[e.INDEXVIEW_MAIN=12]="INDEXVIEW_MAIN",e[e.INDEXVIEW_CHALLENGE=13]="INDEXVIEW_CHALLENGE",e[e.INDEXVIEW_LOTTO=14]="INDEXVIEW_LOTTO",e[e.INDEXVIEW_STORE=15]="INDEXVIEW_STORE",e[e.INDEXVIEW_EQUIP=16]="INDEXVIEW_EQUIP",e[e.INDEXVIEW_BOOK=17]="INDEXVIEW_BOOK",e[e.INDEXVIEW_SETTING=18]="INDEXVIEW_SETTING",e[e.INDEXVIEW_SHARE=19]="INDEXVIEW_SHARE",e[e.VOICE_OGG_VIEW=20]="VOICE_OGG_VIEW",e[e.VOLUME_CHANGE=21]="VOLUME_CHANGE",e[e.TIPSVIEW=22]="TIPSVIEW",e[e.DEBUG_VIEW=23]="DEBUG_VIEW",e[e.PLAYING=24]="PLAYING",e[e.REWARD=25]="REWARD",e[e.LV_UP=26]="LV_UP",e[e.LV_UP_SUM=27]="LV_UP_SUM",e[e.CHAPTER_UNLOCK=28]="CHAPTER_UNLOCK",e[e.LV_UP_BATCH_OPACITY=29]="LV_UP_BATCH_OPACITY",e[e.LV_UP_BATCH_POS=30]="LV_UP_BATCH_POS",e[e.SECONDS=31]="SECONDS"}(i||(i={})),o.default=i,cc._RF.pop()},{}],IndexDebugModuleConsole:[function(e,t,o){"use strict";cc._RF.push(t,"d9a49nLENVP5K1Ir5wwqoGI","IndexDebugModuleConsole"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./frame/basic/UtilObjPool"),a=e("./frame/basic/UtilObjPoolType"),r=e("./frame/debug/DebugViewDefine"),s=e("./frame/ui/UIRoot"),n="indexCommon";let l=i.default.Pop(i.default.typeArray,n),c=i.default.Pop(i.default.typeArray,n);var d;(function(e){e.tree=r.default.MsgGroup.Pop(n,"ui \u8282\u70b9\u6811",()=>s.default.GetTreeTxt(s.default.inst.viewListCurrent)),e.prefabInstantiateCount=r.default.MsgGroup.Pop(n,"\u8d44\u6e90\u5b9e\u4f8b\u5316",()=>(c.length=0,s.default.inst._map.forEach((e,t)=>{c.push({type:t,num:e.length})}),c.sort((e,t)=>-(e.num-t.num)),JSON.stringify(c,null,4))),e.poolCount=r.default.MsgGroup.Pop(n,"\u63d0\u53d6\u7edf\u8ba1",()=>(l.length=0,i.default.mapAppRefCount.forEach((e,t)=>{e.forEach((e,o)=>{l.push({app:t,type:o.tag,num:e})})}),l.sort((e,t)=>-(e.num-t.num)),JSON.stringify(l,null,4))),e.instantiatedCount=r.default.MsgGroup.Pop(n,"\u6784\u9020\u7edf\u8ba1",()=>(c.length=0,a.default.mapTagToPoolType.forEach(e=>{c.push({type:e.tag,num:e.instantiatedCount})}),c.sort((e,t)=>-(e.num-t.num)),JSON.stringify(c,null,4))),e.aMax=0,e.bMax=0,e.common=r.default.MsgGroup.Pop(n,"\u5e38\u89c4\u6570\u636e",()=>`aMax[${e.aMax}] bMax[${e.bMax}]`)})(d||(d={})),o.default=d,cc._RF.pop()},{"./frame/basic/UtilObjPool":"UtilObjPool","./frame/basic/UtilObjPoolType":"UtilObjPoolType","./frame/debug/DebugViewDefine":"DebugViewDefine","./frame/ui/UIRoot":"UIRoot"}],IndexDebugModuleCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"f8502in8T1KW7WMbEL/lMmX","IndexDebugModuleCtrl"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./IndexStorageItem"),a=e("./frame/data/MgrDataItem"),r=e("./frame/data/MgrDataType"),s=e("./frame/data/MgrDateItemMediaRS"),n=e("./frame/debug/DebugViewDefine"),l="indexCtrlModule";var c;(function(e){e.drawB2joint=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u5173\u8282",a.default.Pop(l,`drawB2joint_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2transform=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u53d8\u6362",a.default.Pop(l,`drawB2transform_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2aabb=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u7bb1\u76d2",a.default.Pop(l,`drawB2aabb_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2shape=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u5f62\u72b6",a.default.Pop(l,`drawB2shape_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2particle=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u7c92\u5b50",a.default.Pop(l,`drawB2particle_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2controller=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u9a6c\u8fbe",a.default.Pop(l,`drawB2controller_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.drawB2contact=n.default.ModuleInfo.Pop(l,"b2-\u7ed8\u5236\u78b0\u649e",a.default.Pop(l,`drawB2contact_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.logTree=n.default.ModuleInfo.Pop(l,"\u6253\u5370\u8282\u70b9\u6811",a.default.Pop(l,`logVirturalTree_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.catchTouch=n.default.ModuleInfo.Pop(l,"\u6253\u5370\u4ea4\u4e92\u8282\u70b9",a.default.Pop(l,`catchTouch_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local)),e.logViewStatus=n.default.ModuleInfo.Pop(l,"\u6253\u5370\u754c\u9762\u72b6\u6001",a.default.Pop(l,`logViewStatus_${i.default.version}`,r.default.typeBool,()=>!1,s.default.local))})(c||(c={})),o.default=c,cc._RF.pop()},{"./IndexStorageItem":"IndexStorageItem","./frame/data/MgrDataItem":"MgrDataItem","./frame/data/MgrDataType":"MgrDataType","./frame/data/MgrDateItemMediaRS":"MgrDateItemMediaRS","./frame/debug/DebugViewDefine":"DebugViewDefine"}],IndexDebugModuleFast:[function(e,t,o){"use strict";cc._RF.push(t,"76763v+jW9HCrgkGebyCCM9","IndexDebugModuleFast"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./IndexDataModule"),a=e("./IndexStorageItem"),r=e("./frame/debug/DebugViewDefine"),s=e("./frame/debug/DebugViewState"),n=e("./frame/global/Jiang"),l=e("./game/GameMath"),c=e("./game/view/flash_view/FlashView"),d=e("./game/view/flash_view/FlashViewState"),u=e("./game/view/tips_view/TipsViewState"),m="indexDebugModuleFast";var p;(function(e){e.btnEnterOpacity0=r.default.FastGroup.Pop(m,"\u9690\u85cf\u5165\u53e3",()=>{s.default.inst.SetBtnEnterOpacity(0),u.default.inst.Tip("\u5df2\u751f\u6548")}),e.flash=r.default.FastGroup.Pop(m,"\u95ea\u5c4f",()=>{n.default.mgrUI.Open(c.default.nodeType,d.default.Pop(m))}),e.resetStoraged=r.default.FastGroup.Pop(m,"\u91cd\u7f6e\u5b58\u6863",()=>{let e=n.default.mgrData.Get(a.default.storageKey);n.default.mgrData._moduleSet.forEach(e=>{n.default.mgrData.Set(e,e.defVal())}),n.default.mgrData.Set(a.default.storageKey,e),u.default.inst.Tip("\u5df2\u91cd\u7f6e\uff0c\u91cd\u542f\u540e\u751f\u6548")}),e.equipLvSet=r.default.FastGroup.Pop(m,"\u8bbe\u7f6e\u6b66\u5668\u7b49\u7ea7",e=>{let t=Number.parseFloat(e);if(Number.isNaN(t))return void u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5");let o=n.default.mgrData.Get(a.default.listEquipment);for(let a=0;a<o.length;a++){let e=o[a],r=l.default.ParseLevToPower(t);e.count=l.default.equip.ParsePowerToCount(r),e.count=Math.ceil(e.count),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_EQUIP)}a.default.listEquipment.media.onSet(),u.default.inst.Tip("\u5df2\u751f\u6548")}),e.challengeLevSet=r.default.FastGroup.Pop(m,"\u8bbe\u7f6e\u5173\u5361",e=>{let t=Number.parseInt(e);Number.isNaN(t)?u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5"):(n.default.mgrData.Set(a.default.challengeLev,t),u.default.inst.Tip("\u5df2\u751f\u6548"))}),e.setGoldMax=r.default.FastGroup.Pop(m,"\u6302\u673a\u5956\u52b1\u6700\u5927",()=>{n.default.mgrData.Set(a.default.goldLastDate,n.default.mgrDateNow.DateNow()-l.default.GOLD_MS_MAX),u.default.inst.Tip("\u5df2\u751f\u6548")}),e.chapterBoss=r.default.FastGroup.Pop(m,"\u6311\u6218\u7ae0\u8282 boss \u5173",e=>{let t,o=Number.parseFloat(e);if(Number.isNaN(o))u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5");else{for(let e=0;e<n.default.mgrCfg.cfgLevel._list.length;e++){let i=n.default.mgrCfg.cfgLevel._list[e];i.relChapter==o&&(t=i.id)}null!=t?(n.default.mgrData.Set(a.default.challengeLev,t),u.default.inst.Tip("\u5df2\u751f\u6548")):u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5")}}),e.chapterLast=r.default.FastGroup.Pop(m,"\u6311\u6218\u7ae0\u8282\u6700\u7ec8\u5173",e=>{let t,o=Number.parseFloat(e);if(Number.isNaN(o))u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5");else{for(let e=0;e<n.default.mgrCfg.cfgLevel._list.length;e++){let i=n.default.mgrCfg.cfgLevel._list[e];i.relChapter==o&&(t=i.id)}null!=t?(n.default.mgrData.Set(a.default.challengeLev,t-1),u.default.inst.Tip("\u5df2\u751f\u6548")):u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5")}}),e.chapterLev=r.default.FastGroup.Pop(m,"\u6b66\u5668\u5438\u6536\u7ae0\u8282\u5f3a\u5ea6",e=>{let t=Number.parseFloat(e);if(Number.isNaN(t))return void u.default.inst.Tip("\u53c2\u6570\u975e\u6cd5");let o=Math.pow(1.5,t),r=l.default.ParseLevToPower(1)*o,s=l.default.equip.ParsePowerToCount(r),c=n.default.mgrData.Get(a.default.listEquipment);for(let a=0;a<c.length;a++){let e=c[a];e.count=s,e.count=Math.ceil(e.count),n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_EQUIP)}a.default.listEquipment.media.onSet(),u.default.inst.Tip("\u5df2\u751f\u6548")})})(p||(p={})),o.default=p,cc._RF.pop()},{"./IndexDataModule":"IndexDataModule","./IndexStorageItem":"IndexStorageItem","./frame/debug/DebugViewDefine":"DebugViewDefine","./frame/debug/DebugViewState":"DebugViewState","./frame/global/Jiang":"Jiang","./game/GameMath":"GameMath","./game/view/flash_view/FlashView":"FlashView","./game/view/flash_view/FlashViewState":"FlashViewState","./game/view/tips_view/TipsViewState":"TipsViewState"}],IndexLayer:[function(e,t,o){"use strict";var i;cc._RF.push(t,"c59d6WlWg1Cb7EuheU7Tx4k","IndexLayer"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.GAME=1]="GAME",e[e.CTRL=2]="CTRL",e[e.SYSTEM=3]="SYSTEM"}(i||(i={})),o.default=i,cc._RF.pop()},{}],IndexLoading:[function(e,t,o){"use strict";cc._RF.push(t,"897d0Bxa11AnoHR1djfVKIB","IndexLoading"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./IndexDataModule"),a=e("./frame/global/Jiang"),r=e("./game/game_element/body/GameElementBodyBehaviourRS"),s=e("./game/view/voice_ogg/VoiceOggView"),n=e("./game/view/voice_ogg/VoiceOggViewState"),l=e("./frame/basic/UtilObjPool"),c=e("./frame/basic/BCPromiseCtrl"),d=e("./game/view/tips_view/TipsView"),u=e("./game/view/tips_view/TipsViewState"),m=e("./game/game_element/buff/GameElementBuffRS"),p=e("./game/game_element/equipment/EquipmentInstRS"),h=e("./frame/basic/UtilString"),f=e("./game/cfg_cache/CfgCacheChapterLevel"),y=e("./game/cfg_cache/CfgCacheChapter"),_=e("./game/game_element/body/GameCfgBodyCacheDropRS"),g=e("./game/cfg_cache/CfgCacheStoreUnlockRS"),b=e("./game/cfg_cache/CfgCacheStore"),S=e("./game/cfg_cache/CfgCacheLotteryUnlockRS"),P=e("./game/cfg_cache/CfgCacheLottery"),B=e("./game/view/blur_view/BlurView"),C=e("./game/view/blur_view/BlurViewState"),M=e("./frame/config/src/CfgGameElement"),x=e("./frame/config/src/CfgEff"),V=e("./frame/config/src/CfgVoiceOgg"),I=e("./game/cfg_cache/CfgCacheGameElement"),O=e("./game/cfg_cache/CfgCacheEquipment"),w=e("./frame/basic/UtilArray"),E=e("./game/GameCommon"),A=e("./game/view/guide_view/GuideMgrView"),R=e("./game/view/guide_view/GuideMgr"),v=e("./game/view/screen_shot_view/ScreenShotView"),T=e("./game/view/screen_shot_view/ScreenShotViewState"),G=e("./frame/config/src/CfgChapter"),D=e("./game/cfg_cache/CfgCacheScene"),U=e("./game/view/index_view/IndexViewBtn"),F=e("./game/view/index_view/IndexViewTag"),L=e("./frame/sdk/MgrSdk"),N=e("./game/view/loading_view/LoadingView"),j=e("./game/view/font_view/FontView"),k=e("./game/view/font_view/FontViewState"),q=e("./game/view/equipment_lv_up_sum_view/EquipmentLvUpSumViewItem"),H=e("./game/view/equipment_lv_up_sum_view/EquipmentLvUpSumView"),J=e("./game/view/lock_view/LockView"),W=e("./game/view/lock_view/LockViewState"),z=e("./frame/basic/UtilMath"),X=e("./game/view/flash_view/FlashView"),Y=e("./game/game_element/body/DefineVoice"),K=e("./game/view/lv_up_batch_view/LvUpBatchView"),Z=e("./game/view/lv_up_batch_view/LvUpBatchViewItem"),Q="indexLoading";var $;(function(e){e.totalCount=1,e.finishedCount=0,e.Init=function(){let t,o=a.default.mgrRes.AsyncMaxApp();Promise.resolve().then(()=>{let e=a.default.mgrRes.mgrBundle.GetLoadRecord(E.default.SUB_MAIN).process._promise,t=l.default.Pop(l.default.typeArray,Q);t.push(e);for(let o=1;o<=10;o++){let i=c.default.Pop(Q);e.then(()=>i.resolve(null)),setTimeout(()=>i.resolve(null),200*o),t.push(i._promise)}return this.EnterLoad(1,t,"\u52a0\u8f7d\u8d44\u6e90..")}).then(()=>(a.default.mgrCfg.Init(),this.EnterLoad(2,a.default.mgrCfg.promiseArr,"\u52a0\u8f7d\u914d\u7f6e.."))).then(()=>{a.default.mgrUI.Open(J.default.nodeType,W.default.Pop(Q)),t=W.default.inst.LockApp(),a.default.mgrUI.Open(j.default.nodeType,k.default.Pop(Q)),a.default.mgrUI.Open(v.default.nodeType,new T.default),a.default.mgrUI.Open(B.default.nodeType,C.default.Pop(Q)),a.default.mgrUI.Open(d.default.nodeType,u.default.Pop(Q)),a.default.mgrUI.Open(s.default.nodeType,n.default.Pop(Q)),a.default.mgrUI.Open(A.default.nodeType,R.default.inst),e.promiseCfgLoaded.resolve(null);for(let e=0;e<a.default.mgrCfg.cfgScene._list.length;e++){let t=a.default.mgrCfg.cfgScene._list[e],o={idCfg:t.id,colorLight:h.default.ParseSharpStrToCCColor(t.color_light),colorDark:h.default.ParseSharpStrToCCColor(t.color_shadow)};D.default.SetCache(t,o)}for(let e=0;e<a.default.mgrCfg.cfgStore._list.length;e++){let t=a.default.mgrCfg.cfgStore._list[e],o=g.default.mapIdToRS.get(t.unlock_logic),i={unlockRS:o,unlockRSProps:o.propsCreator(t)};b.default.SetCache(t,i)}for(let e=0;e<a.default.mgrCfg.cfgLottery._list.length;e++){let t=a.default.mgrCfg.cfgLottery._list[e],o=S.default.mapIdToRS.get(t.unlock_logic),i={unlockRS:o,unlockRSProps:o.propsCreator(t)};P.default.SetCache(t,i)}for(let e=0;e<a.default.mgrCfg.cfgChapter._list.length;e++){let t=a.default.mgrCfg.cfgChapter._list[e],o={idCfg:t.id,listMonsterSortByIdCfg:[],levelMin:null,levelMax:null,powerSum:0,powerStandard:Math.pow(a.default.mgrCfg.cfgCommon._list[0].inc_for_chapter,e)*a.default.mgrCfg.cfgCommon._list[0].standard_chapter_power_sum};y.default.SetCache(t,o)}for(let e=0;e<a.default.mgrCfg.cfgLevel._list.length;e++){let t=a.default.mgrCfg.cfgLevel._list[e],o=l.default.Pop(l.default.typeArray,Q);for(let e=0;e<t.part_0_monster_id.length;e++){let i=t.part_0_monster_id[e];o.push(i)}for(let e=0;e<t.part_1_monster_id.length;e++){let i=t.part_1_monster_id[e];o.push(i)}for(let e=0;e<t.part_2_monster_id.length;e++){let i=t.part_2_monster_id[e];o.push(i)}let i=l.default.Pop(l.default.typeArray,Q);i.push(...o),w.default.RemRepeat(o),o.sort((e,t)=>-e+t);let r=0;for(let e=0;e<i.length;e++){let t=i[e];r+=a.default.mgrCfg.cfgGameElement.select(M.default.idGetter,t)._list[0].power}let s=!1;for(let e=0;e<o.length;e++){let t=o[e];if(0<a.default.mgrCfg.cfgGameElement.select(M.default.idGetter,t)._list[0].is_boss){s=!0;break}}let n={idLev:t.id,listMonster:o,powerSum:r,isBossLevel:s};f.default.idToCacheMap.set(n.idLev,n);let c=a.default.mgrCfg.cfgChapter.select(G.default.idGetter,t.relChapter)._list[0],d=y.default.GetCache(c);d.listMonsterSortByIdCfg.push(...o),(null==d.levelMin||n.idLev<d.levelMin)&&(d.levelMin=n.idLev),(null==d.levelMax||d.levelMax<n.idLev)&&(d.levelMax=n.idLev),d.powerSum+=n.powerSum}let o=new Map;for(let e=0;e<a.default.mgrCfg.cfgChapter._list.length;e++){let t=a.default.mgrCfg.cfgChapter._list[e],i=y.default.GetCache(t);w.default.RemRepeat(i.listMonsterSortByIdCfg),i.listMonsterSortByIdCfg.sort((e,t)=>{let o=z.default.GetNumIdxCount(e),i=z.default.GetNumIdxCount(t);return o!=i?o-i:t-e});for(let e=0;e<i.listMonsterSortByIdCfg.length;e++){let t=i.listMonsterSortByIdCfg[e];o.set(t,i.idCfg)}}for(let e=0;e<a.default.mgrCfg.cfgBuffProps._list.length;e++){let t=a.default.mgrCfg.cfgBuffProps._list[e],o=m.default.instMap.get(t.logic);t[m.default.SYM_REC]=o.cfgToArgs(t)}for(let e=0;e<a.default.mgrCfg.cfgEquipmentProps._list.length;e++){let t=a.default.mgrCfg.cfgEquipmentProps._list[e],o=p.default.instMap.get(t.logic),i=o.cfgToArgs(t),r={args:i,aditionalBody:o.aditionalBody(t,i),aditionalEff:o.aditionalEff(t,i),aditionalVoice:o.aditionalVoice(t,i)};O.default.SetCache(t,r)}let i=l.default.Pop(l.default.typeSet,Q);for(let e=0;e<a.default.mgrCfg.cfgGameElement._list.length;e++){let t=a.default.mgrCfg.cfgGameElement._list[e],s=r.default.instMap.get(t.logic),n=h.default.ParseStrToCCColor(t.color_main),c=s.cfgToArgs(t),d={colorMain:new cc.Color(n.r,n.g,n.b,255),opacityMain:n.a,relChapter:o.get(t.id),logicArgs:c,listDrop:l.default.Pop(l.default.typeArray,Q),listAditionBody:s.aditionalBody(t,c),listAditionEff:s.aditionalEff(t,c),listAditionVoice:s.aditionalVoice(t,c)},u=o.get(t.id),m=a.default.mgrCfg.cfgChapter.select(G.default.idGetter,u)._list[0],p=y.default.GetCache(m);i.clear();for(let e=d.listAditionBody.length-1;0<=e;e--){let o=d.listAditionBody[e];0!=a.default.mgrCfg.cfgGameElement.select(M.default.idGetter,o)._list.length?i.has(o)?d.listAditionBody.splice(e,1):i.add(o):(console.error(`CfgGameElement[${t.id}] \u7684\u9644\u52a0\u7269\u4f53 [${o}] \u4e0d\u5b58\u5728`),d.listAditionBody.splice(e,1))}i.clear();for(let e=d.listAditionEff.length-1;0<=e;e--){let o=d.listAditionEff[e];0!=a.default.mgrCfg.cfgEff.select(x.default.idGetter,o)._list.length?i.has(o)?d.listAditionEff.splice(e,1):i.add(o):(console.error(`CfgGameElement[${t.id}] \u7684\u9644\u52a0\u7279\u6548 [${o}] \u4e0d\u5b58\u5728`),d.listAditionEff.splice(e,1))}i.clear();for(let e=d.listAditionVoice.length-1;0<=e;e--){let o=d.listAditionVoice[e];0!=a.default.mgrCfg.cfgVoiceOgg.select(V.default.idGetter,o)._list.length?i.has(o)?d.listAditionVoice.splice(e,1):i.add(o):(0!=o&&console.error(`CfgGameElement[${t.id}] \u7684\u9644\u52a0\u97f3\u6548 [${o}] \u4e0d\u5b58\u5728`),d.listAditionVoice.splice(e,1))}if(_.default.mapCodeToRS.has(t.drop_0_type)&&p){let e={type:t.drop_0_type,val:t.drop_0_val,rs:null};d.listDrop.push(e)}for(let e=0;e<d.listDrop.length;e++){let t=d.listDrop[e];t.rs=_.default.mapCodeToRS.get(t.type)}I.default.SetCache(t,d)}}).then(()=>{let e=l.default.Pop(l.default.typeArray,Q);e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(j.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(J.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(N.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(X.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(H.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(q.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(K.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(Z.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(U.default.nodeType._prefabPath).process._promise),e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(F.default.nodeType._prefabPath).process._promise);let t=a.default.mgrCfg.cfgVoiceOgg.select(V.default.idGetter,Y.default.EQUIPMENT_DROP_TRIGGER)._list[0];return e.push(a.default.mgrRes.mgrAssets.GetLoadRecord(t.res).process._promise),this.EnterLoad(3,e,"\u52a0\u8f7d\u9884\u5236..")}).then(()=>L.default.inst.core.Init()).then(()=>(a.default.mgrEvter.evterShow.On(()=>{let e=W.default.inst.LockApp();a.default.mgrDateNow.currStatus.OnTime().then(()=>{W.default.inst.LockCancel(e)})}),a.default.mgrDateNow.currStatus.OnTime())).then(()=>{let e=l.default.Pop(l.default.typeArray,Q);a.default.mgrData.Init(),e.push(...a.default.mgrData.promiseArr);let t=Promise.all(a.default.mgrData.promiseArr);for(let o=1;o<=10;o++){let i=c.default.Pop(Q);t.then(()=>i.resolve(null)),setTimeout(()=>i.resolve(null),200*o),e.push(i._promise)}return this.EnterLoad(4,e,"\u8bfb\u53d6\u5b58\u6863..")}).then(()=>{a.default.mgrEvter.evterHide.On(()=>{a.default.mgrData.DoSave()}),a.default.mgrRes.AsyncMaxCancel(o),R.default.inst.currStatus.OnInited(),e.promiseAllLoad.resolve(null),a.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_MAIN)}).then(()=>L.default.inst.core.Author()).then(()=>{W.default.inst.LockCancel(t)})},e.promiseAllLoad=c.default.Pop(Q),e.promiseStorageLoad=c.default.Pop(Q),e.promiseCfgLoaded=c.default.Pop(Q),e.indexCurrent=1,e.indexTotal=4,e.information="\u52a0\u8f7d\u4e2d..";let t=Date.now();e.EnterLoad=function(o,r,s){e.indexCurrent=o,e.information=s,e.totalCount=r.length,e.finishedCount=0,r.forEach(t=>{t.then(()=>{e.finishedCount++,a.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_MAIN)})});let n=Date.now(),c=n-t;return t=n,L.default.inst.Log(`EnterLoad idx[${o}] start[${n}] cost[${c}]...`),Promise.all([Promise.all(r).then(()=>{let e=Date.now(),i=e-t;t=e,L.default.inst.Log(`EnterLoad idx[${o}] end[${e}] cost[${i}]...`)}),l.default.PopPromise(Q,e=>{setTimeout(e,200)})])}})($||($={})),o.default=$,cc._RF.pop()},{"./IndexDataModule":"IndexDataModule","./frame/basic/BCPromiseCtrl":"BCPromiseCtrl","./frame/basic/UtilArray":"UtilArray","./frame/basic/UtilMath":"UtilMath","./frame/basic/UtilObjPool":"UtilObjPool","./frame/basic/UtilString":"UtilString","./frame/config/src/CfgChapter":"CfgChapter","./frame/config/src/CfgEff":"CfgEff","./frame/config/src/CfgGameElement":"CfgGameElement","./frame/config/src/CfgVoiceOgg":"CfgVoiceOgg","./frame/global/Jiang":"Jiang","./frame/sdk/MgrSdk":"MgrSdk","./game/GameCommon":"GameCommon","./game/cfg_cache/CfgCacheChapter":"CfgCacheChapter","./game/cfg_cache/CfgCacheChapterLevel":"CfgCacheChapterLevel","./game/cfg_cache/CfgCacheEquipment":"CfgCacheEquipment","./game/cfg_cache/CfgCacheGameElement":"CfgCacheGameElement","./game/cfg_cache/CfgCacheLottery":"CfgCacheLottery","./game/cfg_cache/CfgCacheLotteryUnlockRS":"CfgCacheLotteryUnlockRS","./game/cfg_cache/CfgCacheScene":"CfgCacheScene","./game/cfg_cache/CfgCacheStore":"CfgCacheStore","./game/cfg_cache/CfgCacheStoreUnlockRS":"CfgCacheStoreUnlockRS","./game/game_element/body/DefineVoice":"DefineVoice","./game/game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","./game/game_element/body/GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./game/game_element/buff/GameElementBuffRS":"GameElementBuffRS","./game/game_element/equipment/EquipmentInstRS":"EquipmentInstRS","./game/view/blur_view/BlurView":"BlurView","./game/view/blur_view/BlurViewState":"BlurViewState","./game/view/equipment_lv_up_sum_view/EquipmentLvUpSumView":"EquipmentLvUpSumView","./game/view/equipment_lv_up_sum_view/EquipmentLvUpSumViewItem":"EquipmentLvUpSumViewItem","./game/view/flash_view/FlashView":"FlashView","./game/view/font_view/FontView":"FontView","./game/view/font_view/FontViewState":"FontViewState","./game/view/guide_view/GuideMgr":"GuideMgr","./game/view/guide_view/GuideMgrView":"GuideMgrView","./game/view/index_view/IndexViewBtn":"IndexViewBtn","./game/view/index_view/IndexViewTag":"IndexViewTag","./game/view/loading_view/LoadingView":"LoadingView","./game/view/lock_view/LockView":"LockView","./game/view/lock_view/LockViewState":"LockViewState","./game/view/lv_up_batch_view/LvUpBatchView":"LvUpBatchView","./game/view/lv_up_batch_view/LvUpBatchViewItem":"LvUpBatchViewItem","./game/view/screen_shot_view/ScreenShotView":"ScreenShotView","./game/view/screen_shot_view/ScreenShotViewState":"ScreenShotViewState","./game/view/tips_view/TipsView":"TipsView","./game/view/tips_view/TipsViewState":"TipsViewState","./game/view/voice_ogg/VoiceOggView":"VoiceOggView","./game/view/voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],IndexStorageItem:[function(e,t,o){"use strict";cc._RF.push(t,"067b4Ykrp5Jxp0k/+BBWwvJ","IndexStorageItem"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./frame/data/MgrDataItem"),a=e("./frame/data/MgrDataType"),r=e("./frame/data/MgrDateItemMediaRS"),s=e("./frame/global/Jiang"),n=e("./game/GameMath"),l=[200001,200002];for(let u=0;u<l.length;u++)null==l[u]&&l.splice(u,1);const c="indexDataStorageItem";var d;(function(e){e.version=122,e.storageKey=i.default.Pop(c,"storage_key",a.default.typeNumber,()=>0,r.default.server),e.selectedChapter=i.default.Pop(c,`selectedChapter_${e.version}`,a.default.typeNumber,()=>1,r.default.local),e.challengeLev=i.default.Pop(c,`challengeLev_${e.version}`,a.default.typeNumber,()=>1,r.default.server),e.listBackpackProp=i.default.Pop(c,`listBackpackProp_${e.version}`,a.default.typeObject,()=>[{idCfg:10001,count:1,isRead:!0},{idCfg:20001,count:0,isRead:!0}],r.default.server),e.listEquipment=i.default.Pop(c,`listEquipment_${e.version}`,a.default.typeObject,()=>l.map(e=>({idCfg:e,count:Math.ceil(n.default.equip.ParsePowerToCount(n.default.ParseLevToPower(1))),isRead:!0})),r.default.server),e.listCurrentEquiped=i.default.Pop(c,`listCurrentEquiped_${e.version}`,a.default.typeObject,()=>[l[0],l[1]],r.default.server),e.volumeMusic=i.default.Pop(c,`volumeMusic_${e.version}`,a.default.typeNumber,()=>1,r.default.local),e.volumeVoice=i.default.Pop(c,`volumeVoice_${e.version}`,a.default.typeNumber,()=>1,r.default.local),e.guideStep=i.default.Pop(c,`guideStep_${e.version}`,a.default.typeNumber,()=>0,r.default.server),e.altarInitLev=i.default.Pop(c,`altarInitLev_${e.version}`,a.default.typeNumber,()=>-1,r.default.server),e.altarInitListBody=i.default.Pop(c,`altarInitListBody_${e.version}`,a.default.typeObject,()=>[],r.default.server),e.goldEquipLev=i.default.Pop(c,`goldEquipLev_${e.version}`,a.default.typeNumber,()=>1,r.default.server),e.goldLastDate=i.default.Pop(c,`goldLastDate_${e.version}`,a.default.typeNumber,()=>s.default.mgrDateNow.DateNow(),r.default.server)})(d||(d={})),o.default=d,cc._RF.pop()},{"./frame/data/MgrDataItem":"MgrDataItem","./frame/data/MgrDataType":"MgrDataType","./frame/data/MgrDateItemMediaRS":"MgrDateItemMediaRS","./frame/global/Jiang":"Jiang","./game/GameMath":"GameMath"}],IndexViewBtn:[function(e,t,o){"use strict";cc._RF.push(t,"b6699BHAUpLTasKf0kpzSQX","IndexViewBtn");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../game_element/body/DefineVoice"),h=e("../../GameCommon"),f=e("../voice_ogg/VoiceOggViewState"),y=e("./IndexViewRS"),{ccclass:_,property:g}=cc._decorator,b="IndexViewBtn";let S=i=class extends u.default{constructor(){super(...arguments),this.txt=null,this.btnSelect=null,this.nodeRed=null}};S.nodeType=d.default.Pop(b,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/index_view_btn`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(b,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_MAIN,m.default.RED_DOT],propsFilter:(e,t,o)=>{let i=y.default.mapInst.get(o);e.nodeRed.active=i.redCheck(),e.txt.string=i.name,e.btnSelect.evterTouchStart.On(()=>{f.default.inst.VoiceSet(h.default.BTN_VOICE),t.currStatus==t.statusIdle&&t.statusIdle.currRS==i||(f.default.inst.BgmSet(p.default.BGM_TITLE),t.currStatus.OnToggle(i),n.default.mgrUI.ModuleRefresh(m.default.INDEXVIEW_MAIN))})}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.none}),a([g(cc.Label)],S.prototype,"txt",void 0),a([g(s.default)],S.prototype,"btnSelect",void 0),a([g(cc.Node)],S.prototype,"nodeRed",void 0),S=i=a([_],S),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./IndexViewRS":"IndexViewRS"}],IndexViewRS:[function(e,t,o){"use strict";cc._RF.push(t,"ca4e6SuSHdO7pjEuUAezzNw","IndexViewRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/config/src/CfgScene"),r=e("../../../frame/global/Jiang"),s=e("../../../IndexBuildConfig"),n=e("../../../IndexDataModule"),l=e("../../../IndexStorageItem"),c=e("../challenge_select_view/ChallengeSelectView"),d=e("../challenge_select_view/ChallengeSelectViewState"),u=e("../equipment_view/EquipmentView"),m=e("../equipment_view/EquipmentViewState"),p=e("../loading_view/LoadingView"),h=e("../loading_view/LoadingViewState"),f=e("../lottery_view/LotteryView"),y=e("../lottery_view/LotteryViewState"),_=e("../setting/SettingView"),g=e("../setting/SettingViewState"),b=e("../share_view/ShareView"),S=e("../share_view/ShareViewState"),P=e("../store_view/StoreView"),B=e("../store_view/StoreViewState"),C=e("../voice_ogg/VoiceOggViewState"),M="IndexViewRS";class x{constructor(e){this.id=e.id,this.name=e.name,this.init=e.init,this.fill=e.fill,this.onEnter=e.onEnter,this.onExit=e.onExit,this.onMatch=e.onMatch,this.onUnMatch=e.onUnMatch,this.onUpdate=e.onUpdate,this.validCheck=e.validCheck,this.redCheck=e.redCheck,this.validCheck()&&(x.mapInst.set(this.id,this),x.listInst.push(this))}}(function(e){e.mapInst=i.default.Pop(i.default.typeMap,M),e.listInst=i.default.Pop(i.default.typeArray,M),e.fightQuick=new e({id:1,name:"\u5f00\u59cb",init:()=>{},fill:()=>{},onEnter:()=>{},onExit:()=>{},onMatch:()=>{},onUnMatch:()=>{},onUpdate:()=>{},validCheck:()=>!0,redCheck:()=>!1}),e.challenge=new e({id:2,name:"\u56fe\u9274",init:e=>{e.stateChallenge=d.default.Pop(M)},fill:(t,o)=>{o.push(c.default.nodeType.CreateNode(t,e.challenge.id,e.challenge.id))},onEnter:e=>{let t=r.default.mgrCfg.cfgScene.select(a.default.idGetter,r.default.mgrData.Get(l.default.selectedChapter))._list[0];C.default.inst.BgmSet(t.bgm);let o=e.stateChallenge.chapterLayout._idToEleMap.get(r.default.mgrData.Get(l.default.selectedChapter));e.stateChallenge.chapterScrollViewY=o.posY-d.default.CHAPTER_VIEW_HEIGHT/2+d.default.CHAPTER_ITEM_HEIGHT/2;let i=e.stateChallenge.chapterLayout.containerHeight-d.default.CHAPTER_VIEW_HEIGHT;e.stateChallenge.chapterScrollViewY=Math.max(e.stateChallenge.chapterScrollViewY,0),e.stateChallenge.chapterScrollViewY=Math.min(e.stateChallenge.chapterScrollViewY,i),e.stateChallenge.chapterLayout.UpdateActive(0,e.stateChallenge.chapterScrollViewY,d.default.CHAPTER_VIEW_WIDTH,d.default.CHAPTER_VIEW_HEIGHT),e.stateChallenge.bookScrollViewY=e.stateChallenge.bookLayout.containerHeight-d.default.BOOK_VIEW_HEIGHT,e.stateChallenge.bookLayout.UpdateActive(0,e.stateChallenge.bookScrollViewY,d.default.BOOK_VIEW_WIDTH,d.default.BOOK_VIEW_HEIGHT),r.default.mgrUI.ModuleRefresh(n.default.INDEXVIEW_CHALLENGE)},onExit:e=>{e.stateChallenge.scrollStop.currStatus.OnStop(),r.default.mgrUI.ModuleRefresh(n.default.INDEXVIEW_CHALLENGE)},onMatch:e=>{e.stateChallenge.childrenAble=!0},onUnMatch:e=>{e.stateChallenge.childrenAble=!1},onUpdate:()=>{},validCheck:()=>!0,redCheck:()=>!1}),e.lotteryView=new e({id:3,name:"\u5f3a\u5316",init:e=>{e.stateLottery=y.default.Pop(M)},fill:(t,o)=>{o.push(f.default.nodeType.CreateNode(t,e.lotteryView.id,e.lotteryView.id))},onEnter:e=>{e.stateLottery.childrenAble=!0},onExit:e=>{e.stateLottery.childrenAble=!1},onMatch:()=>{},onUnMatch:()=>{},onUpdate:(e,t)=>{null!=e.stateLottery&&e.stateLottery.OnStep(t)},validCheck:()=>!0,redCheck:()=>!1}),e.storeView=new e({id:4,name:"\u98de\u5347",init:e=>{e.stateStore=B.default.Pop(M)},fill:(t,o)=>{o.push(P.default.nodeType.CreateNode(t,e.storeView.id,e.storeView.id))},onEnter:e=>{e.stateStore.scrollY=e.stateStore.layout.containerHeight-B.default.VIEW_HEIGHT,e.stateStore.layout.UpdateActive(0,e.stateStore.scrollY,B.default.VIEW_WIDTH,B.default.VIEW_HEIGHT),e.stateStore.scrollEnable=!0,r.default.mgrUI.ModuleRefresh(n.default.INDEXVIEW_STORE)},onExit:e=>{e.stateStore.scrollEnable=!1,r.default.mgrUI.ModuleRefresh(n.default.INDEXVIEW_STORE)},onMatch:e=>{e.stateStore.childrenAble=!0},onUnMatch:e=>{e.stateStore.childrenAble=!1},onUpdate:()=>{},validCheck:()=>s.default.VIDEO_ENABLE,redCheck:()=>!1}),e.equip=new e({id:5,name:"\u80cc\u5305",init:e=>{e.stateEquip=m.default.Pop(M)},fill:(t,o)=>{o.push(u.default.nodeType.CreateNode(t,e.equip.id,e.equip.id))},onEnter:e=>{e.stateEquip.scrollY=e.stateEquip.layout.containerHeight-m.default.VIEW_HEIGHT,e.stateEquip.scrollEnable=!0,r.default.mgrUI.ModuleRefresh(n.default.INDEXVIEW_EQUIP)},onExit:()=>{},onMatch:e=>{e.stateEquip.childrenAble=!0},onUnMatch:e=>{e.stateEquip.childrenAble=!1},onUpdate:()=>{},validCheck:()=>!0,redCheck:()=>{let e=r.default.mgrData.Get(l.default.listBackpackProp);for(let o=0;o<e.length;o++)if(!e[o].isRead)return!0;let t=r.default.mgrData.Get(l.default.listEquipment);for(let o=0;o<t.length;o++)if(!t[o].isRead)return!0;return!1}}),e.setting=new e({id:6,name:"\u8bbe\u7f6e",init:e=>{e.stateSetting=g.default.Pop(M)},fill:(t,o)=>{o.push(_.default.nodeType.CreateNode(t,e.setting.id,e.setting.id))},onEnter:()=>{},onExit:()=>{},onMatch:e=>{e.stateSetting.childrenAble=!0},onUnMatch:()=>{},onUpdate:()=>{},validCheck:()=>!0,redCheck:()=>!1}),e.share=new e({id:7,name:"\u798f\u5229",init:e=>{e.stateShare=S.default.Pop(M)},fill:(t,o)=>{o.push(b.default.nodeType.CreateNode(t,e.share.id,e.share.id))},onEnter:()=>{},onExit:()=>{},onMatch:e=>{e.stateShare.childrenAble=!0,r.default.mgrUI.Open(p.default.nodeType,h.default.Pop(M,e.stateShare.RequestJoinData()))},onUnMatch:()=>{},onUpdate:()=>{},validCheck:()=>!0,redCheck:()=>!1})})(x||(x={})),o.default=x,cc._RF.pop()},{"../../../IndexBuildConfig":"IndexBuildConfig","../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../challenge_select_view/ChallengeSelectView":"ChallengeSelectView","../challenge_select_view/ChallengeSelectViewState":"ChallengeSelectViewState","../equipment_view/EquipmentView":"EquipmentView","../equipment_view/EquipmentViewState":"EquipmentViewState","../loading_view/LoadingView":"LoadingView","../loading_view/LoadingViewState":"LoadingViewState","../lottery_view/LotteryView":"LotteryView","../lottery_view/LotteryViewState":"LotteryViewState","../setting/SettingView":"SettingView","../setting/SettingViewState":"SettingViewState","../share_view/ShareView":"ShareView","../share_view/ShareViewState":"ShareViewState","../store_view/StoreView":"StoreView","../store_view/StoreViewState":"StoreViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],IndexViewStateStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"a51aa9UYppAtYQyJACSgmIi","IndexViewStateStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexView"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/ui/MgrUI"),n=e("./IndexViewRS"),l=e("./IndexViewStateStatus");class c extends l.default{constructor(){super(),this.currRS=n.default.fightQuick}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.currRSIdx=n.default.listInst.indexOf(this.currRS),this.currRSIdxYTag=i.default.GetNodeBtnSelectedPos(this.currRSIdx),this.currRSIdxYPage=this.currRSIdx*s.default.FAT_WIDTH}OnToggle(e){e!=this.currRS&&(this.relMachine.statusMoving.currRS=e,this.relMachine.EnterStatus(this.relMachine.statusMoving))}OnGetTagY(){return this.currRSIdxYTag}OnGetPageY(){return this.currRSIdxYPage}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"IndexViewStateStatusIdle"}),cc._RF.pop()},{"../../../IndexView":"IndexView","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/MgrUI":"MgrUI","./IndexViewRS":"IndexViewRS","./IndexViewStateStatus":"IndexViewStateStatus"}],IndexViewStateStatusMoving:[function(e,t,o){"use strict";cc._RF.push(t,"1024aJOO4lLk6g1kUm4OyBV","IndexViewStateStatusMoving"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexView"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/MgrUI"),c=e("./IndexViewRS"),d=e("./IndexViewStateStatus"),u=100;class m extends d.default{constructor(){super(),this.currRS=c.default.fightQuick}static Pop(e,t){let o=r.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.currRSIdx=c.default.listInst.indexOf(this.currRS),this.currRSIdxYTag=a.default.GetNodeBtnSelectedPos(this.currRSIdx),this.currRSIdxYPage=this.currRSIdx*l.default.FAT_WIDTH,this._msTotal=Math.abs(this.currRSIdx-this.relMachine.statusIdle.currRSIdx)*u,this._msCount=0,this.OnStep(0),this.relMachine.statusIdle.currRS.onExit(this.relMachine),this.currRS.onEnter(this.relMachine)}OnStep(e){n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_MAIN),this._msCount+=e,this._msCount=Math.min(this._msCount,this._msTotal);let t=this._msCount/this._msTotal;if(this.currRSIdxYTagCurrent=t*this.currRSIdxYTag+(1-t)*this.relMachine.statusIdle.currRSIdxYTag,this.currRSIdxYPageCurrent=t*this.currRSIdxYPage+(1-t)*this.relMachine.statusIdle.currRSIdxYPage,1==t){n.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_CHILDREN_ABLE);let e=this.relMachine.statusIdle.currRS;this.relMachine.statusIdle.currRS=this.currRS,this.relMachine.EnterStatus(this.relMachine.statusIdle),e.onUnMatch(this.relMachine),this.currRS.onMatch(this.relMachine)}}OnGetTagY(){return this.currRSIdxYTagCurrent}OnGetPageY(){return this.currRSIdxYPageCurrent}}o.default=m,m._t=new s.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:"IndexViewStateStatusMoving"}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexView":"IndexView","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/MgrUI":"MgrUI","./IndexViewRS":"IndexViewRS","./IndexViewStateStatus":"IndexViewStateStatus"}],IndexViewStateStatus:[function(e,t,o){"use strict";cc._RF.push(t,"6c650Sq3QJP+q+SECIQmVIF","IndexViewStateStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnToggle(e){}},cc._RF.pop()},{}],IndexViewState:[function(e,t,o){"use strict";cc._RF.push(t,"07fe7ci6qpEqI/AmgqfbQC/","IndexViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexLayer"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../frame/basic/UtilObjPool"),l=e("../../../frame/basic/UtilObjPoolType"),c=e("../../../IndexLoading"),d=e("./IndexViewRS"),u=e("../voice_ogg/VoiceOggViewState"),m=e("./IndexViewStateStatusIdle"),p=e("./IndexViewStateStatusMoving"),h=e("../../game_element/body/DefineVoice"),f="IndexViewState";class y extends s.default{constructor(){super(a.default.GAME,s.default.BG_TYPE.SELF,!1)}static Pop(e){let t=n.default.Pop(y._t,e);return t.statusIdle=m.default.Pop(f,t),t.statusMoving=p.default.Pop(f,t),t.EnterStatus(t.statusIdle),c.default.promiseAllLoad._promise.then(()=>{u.default.inst.BgmSet(h.default.BGM_TITLE);for(let e=0;e<d.default.listInst.length;e++)d.default.listInst[e].init(t)}),t}OnInit(){this._msListen=r.default.mgrEvter.evterUpdate.On(e=>{this.currStatus.OnStep(e);for(let t=0;t<d.default.listInst.length;t++)d.default.listInst[t].onUpdate(this,e)}),this._secondListen=r.default.mgrEvter.evterSecondUpdate.On(()=>{r.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_MAIN)})}OnDestory(){r.default.mgrEvter.evterUpdate.Off(this._msListen),r.default.mgrEvter.evterSecondUpdate.Off(this._secondListen)}OnChange(e){this.stateEquip&&this.stateEquip.OnChange(e),this.stateLottery&&this.stateLottery.OnChange(e),this.stateStore&&this.stateStore.OnChange(e),this.stateShare&&this.stateShare.OnChange(e)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=y,y._t=new l.default({instantiate:()=>new y,onPop:()=>{},onPush:()=>{},tag:f}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../IndexLoading":"IndexLoading","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./IndexViewRS":"IndexViewRS","./IndexViewStateStatusIdle":"IndexViewStateStatusIdle","./IndexViewStateStatusMoving":"IndexViewStateStatusMoving"}],IndexViewTag:[function(e,t,o){"use strict";cc._RF.push(t,"ef280EYL7JJ86fJF3XMa9Fu","IndexViewTag");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="IndexViewTag";let f=i=class extends d.default{};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/index_view_tag`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_MAIN],propsFilter:(e,t)=>{e.node.y=t.currStatus.OnGetTagY()}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],IndexView:[function(e,t,o){"use strict";cc._RF.push(t,"9b5b6JBY0xLeZdX4KWtLTXd","IndexView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("./frame/basic/BCType"),s=e("./frame/component/ComponentNodeEventer"),n=e("./frame/global/Jiang"),l=e("./frame/ui/UINodeType"),c=e("./frame/ui/UIViewComponent"),d=e("./game/GameCommon"),u=e("./game/view/game_play/GamePlayViewState"),m=e("./IndexDataModule"),p=e("./IndexLoading"),h=e("./IndexStorageItem"),f=e("./game/view/index_view/IndexViewRS"),y=e("./game/view/index_view/IndexViewBtn"),_=e("./game/view/voice_ogg/VoiceOggViewState"),g=e("./frame/ui/UINodeInstHideRS"),b=e("./game/view/index_view/IndexViewTag"),S=e("./game/view/guide_view/GuideMgr"),P=e("./game/GameMath"),B=e("./frame/basic/UtilString"),C=e("./frame/basic/UtilObjPool"),M=e("./game/game_element/body/GameCfgBodyCacheDropRS"),x=e("./game/view/reward_view/RewardViewState"),V=e("./game/view/tips_view/TipsViewState"),I=e("./frame/ui/UINodeInstEnterRS"),O=e("./frame/basic/UtilMath"),w=e("./IndexBuildConfig"),{ccclass:E,property:A}=cc._decorator,R="IndexView";let v=i=class extends c.default{constructor(){super(...arguments),this.nodeProgress=null,this.labProgress=null,this.anim=null,this.containerBtn=null,this.nodePagePos=null,this.containerPage=null,this.containerLeft=null,this.btnStart=null,this.containerTag=null,this.nodeInited=null,this.nodeGold=null,this.goldTxtTime=null,this.goldTxtCurrent=null,this.goldTxtMax=null,this.listGoldBtn=[],this.goldBtnDouble=null,this.goldBtnInc=null,this.nodeForVideo=null,this.nodeForUnVideo=null,this.txtAdGotImm=null,this.nodeBar=null,this.nodeBarLen=null,this.nodeTime=null}onLoad(){this.labProgress.node.active=!0,this.containerLeft.opacity=0,this.nodeInited.opacity=0,this.nodeInited.active=!1}onDisable(){this._currAnimName=null,this.containerLeft.opacity=0,this.nodeInited.opacity=0,this.anim.stop()}Status(e){e!=this._currAnimName&&(this._currAnimName=e,this.anim.play(this._currAnimName,0))}static GetNodeBtnSelectedPos(e){return(60*f.default.listInst.length+0*(f.default.listInst.length-1))/2-30-60*e}};v.nodeType=l.default.Pop(R,{prefabPath:"IndexView",componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(R,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_MAIN],propsFilter:(e,t)=>{e.containerPage.x=0;let o=660-n.default.mgrUI._containerUI.width/2;if(e.containerPage.x=Math.max(e.containerPage.x,o),e.labProgress.string=`${p.default.indexCurrent}/${p.default.indexTotal} ${p.default.information}${Math.floor(p.default.finishedCount/p.default.totalCount*100)}%`,e.nodeBar.width=((p.default.indexCurrent-1)/p.default.indexTotal+1/p.default.indexTotal*p.default.finishedCount/p.default.totalCount)*e.nodeBarLen.width,e.nodeProgress.active=!p.default.promiseAllLoad.isResolved,e.nodeInited.active=p.default.promiseAllLoad.isResolved,e.nodePagePos.y=t.currStatus.OnGetPageY(),e.nodeGold.active=S.default.inst.currStatus==S.default.inst.statusIdle,e.nodeTime.active=S.default.inst.currStatus==S.default.inst.statusIdle,p.default.promiseAllLoad._promise.then(()=>{e.Status("IndexView")}),e.btnStart.evterTouchStart.On(()=>{_.default.inst.VoiceSet(d.default.BTN_VOICE)}),e.btnStart.evterTouchEnd.On(()=>{S.default.inst.currStatus.P1U1OnGotNodeIndexViewBtnStartTouch(e.btnStart),u.default.FightLast()}),S.default.inst.currStatus.P1U1OnGotNodeIndexViewBtnStart(e.btnStart),p.default.promiseAllLoad.isResolved){let t=0,o=n.default.mgrData.Get(h.default.listEquipment);for(let e=0;e<o.length;e++){let i=o[e],a=P.default.equip.ParseCountToPower(i.count),r=P.default.ParsePowerToLev(a);t=Math.max(t,r)}let a=n.default.mgrDateNow.DateNow()-n.default.mgrData.Get(h.default.goldLastDate);a=Math.min(a,P.default.GOLD_MS_MAX);let r=P.default.GOLD_MS_MAX-a,s=Math.ceil(r/1e3),l=Math.floor(s/3600),c=Math.floor(s%3600/60),u=s%60;e.goldTxtTime.string=`${B.default.KeepLen(`${l}`,2,"0")}:${B.default.KeepLen(`${c}`,2,"0")}:${B.default.KeepLen(`${u}`,2,"0")}`;let p=t,f=P.default.ParseLevToPower(p),y=P.default.equip.ParsePowerToCount(f),g=p+P.default.HOOK_LV_UP,b=P.default.ParseLevToPower(g),S=P.default.equip.ParsePowerToCount(b)-y,I=S*a/P.default.GOLD_MS_MAX;function i(e){let t=C.default.Pop(C.default.typeArray,R),o=C.default.Pop(C.default.typeArray,R);o.push(d.default.COIN_FOR_LOTTERY,I*e),t.push({rs:M.default.xlsxBackpackProp,props:o}),x.default.GotRewardOrdinary(d.default.TITLE_REWARD,t),n.default.mgrData.Set(h.default.goldLastDate,n.default.mgrDateNow.DateNow()),n.default.mgrUI.ModuleRefresh(m.default.INDEXVIEW_MAIN)}e.goldTxtCurrent.string=`${O.default.ParseNumToKMBTAABB(I,Math.floor)}`,e.goldTxtMax.string=`${O.default.ParseNumToKMBTAABB(S,Math.floor)}`;for(let n=0;n<e.listGoldBtn.length;n++){let t=e.listGoldBtn[n];t.evterTouchStart.On(()=>{_.default.inst.VoiceSet(d.default.BTN_VOICE)}),t.evterTouchEnd.On(()=>{I<1?V.default.inst.Tip("\u5f53\u524d\u5956\u52b1\u592a\u5c11\uff0c\u65e0\u6cd5\u9886\u53d6"):i(1)})}e.goldBtnDouble.evterTouchStart.On(()=>{_.default.inst.VoiceSet(d.default.BTN_VOICE)}),e.goldBtnDouble.evterTouchEnd.On(()=>{I<1?V.default.inst.Tip("\u5f53\u524d\u5956\u52b1\u592a\u5c11\uff0c\u65e0\u6cd5\u9886\u53d6"):n.default.mgrSdk.core.WXVideo().then(e=>{e.isRewardAble&&i(2)})}),e.goldBtnInc.evterTouchStart.On(()=>{_.default.inst.VoiceSet(d.default.BTN_VOICE)}),e.goldBtnInc.evterTouchStart.On(()=>{n.default.mgrSdk.core.WXVideo().then(e=>{if(e.isRewardAble){let e=C.default.Pop(C.default.typeArray,R),t=C.default.Pop(C.default.typeArray,R);t.push(d.default.COIN_FOR_LOTTERY,S*P.default.AD_GOT_IMM),e.push({rs:M.default.xlsxBackpackProp,props:t}),x.default.GotRewardOrdinary(d.default.TITLE_REWARD,e)}})}),e.txtAdGotImm.string=`+${100*P.default.AD_GOT_IMM}%`,e.nodeForVideo.active=w.default.VIDEO_ENABLE,e.nodeForUnVideo.active=!w.default.VIDEO_ENABLE}}})],childrenCreator:[l.default.ChildrenGeneration.Pop(R,{containerGetter:e=>e.containerBtn,uiNodeCreator:(e,t,o)=>{if(S.default.inst.currStatus==S.default.inst.statusIdle&&p.default.promiseAllLoad.isResolved)for(let i=0;i<f.default.listInst.length;i++){let t=f.default.listInst[i];o.push(y.default.nodeType.CreateNode(e,t.id,t.id))}}}),l.default.ChildrenGeneration.Pop(R,{containerGetter:e=>e.containerTag,uiNodeCreator:(e,t,o)=>{S.default.inst.currStatus==S.default.inst.statusIdle&&p.default.promiseAllLoad.isResolved&&o.push(b.default.nodeType.CreateNode(e,null,null))}}),l.default.ChildrenGeneration.Pop(R,{containerGetter:e=>e.containerPage,uiNodeCreator:(e,t,o)=>{if(S.default.inst.currStatus==S.default.inst.statusIdle&&p.default.promiseAllLoad.isResolved)for(let i=0;i<f.default.listInst.length;i++)f.default.listInst[i].fill(e,o)}})],propsType:r.default.typeNumber,hideRS:g.default.setParentNull,enterRS:I.default.none}),a([A(cc.Node)],v.prototype,"nodeProgress",void 0),a([A(cc.Label)],v.prototype,"labProgress",void 0),a([A(cc.Animation)],v.prototype,"anim",void 0),a([A(cc.Node)],v.prototype,"containerBtn",void 0),a([A(cc.Node)],v.prototype,"nodePagePos",void 0),a([A(cc.Node)],v.prototype,"containerPage",void 0),a([A(cc.Node)],v.prototype,"containerLeft",void 0),a([A(s.default)],v.prototype,"btnStart",void 0),a([A(cc.Node)],v.prototype,"containerTag",void 0),a([A(cc.Node)],v.prototype,"nodeInited",void 0),a([A(cc.Node)],v.prototype,"nodeGold",void 0),a([A(cc.Label)],v.prototype,"goldTxtTime",void 0),a([A(cc.Label)],v.prototype,"goldTxtCurrent",void 0),a([A(cc.Label)],v.prototype,"goldTxtMax",void 0),a([A([s.default])],v.prototype,"listGoldBtn",void 0),a([A(s.default)],v.prototype,"goldBtnDouble",void 0),a([A(s.default)],v.prototype,"goldBtnInc",void 0),a([A(cc.Node)],v.prototype,"nodeForVideo",void 0),a([A(cc.Node)],v.prototype,"nodeForUnVideo",void 0),a([A(cc.Label)],v.prototype,"txtAdGotImm",void 0),a([A(cc.Node)],v.prototype,"nodeBar",void 0),a([A(cc.Node)],v.prototype,"nodeBarLen",void 0),a([A(cc.Node)],v.prototype,"nodeTime",void 0),v=i=a([E],v),o.default=v,cc._RF.pop()},{"./IndexBuildConfig":"IndexBuildConfig","./IndexDataModule":"IndexDataModule","./IndexLoading":"IndexLoading","./IndexStorageItem":"IndexStorageItem","./frame/basic/BCType":"BCType","./frame/basic/UtilMath":"UtilMath","./frame/basic/UtilObjPool":"UtilObjPool","./frame/basic/UtilString":"UtilString","./frame/component/ComponentNodeEventer":"ComponentNodeEventer","./frame/global/Jiang":"Jiang","./frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","./frame/ui/UINodeInstHideRS":"UINodeInstHideRS","./frame/ui/UINodeType":"UINodeType","./frame/ui/UIViewComponent":"UIViewComponent","./game/GameCommon":"GameCommon","./game/GameMath":"GameMath","./game/game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","./game/view/game_play/GamePlayViewState":"GamePlayViewState","./game/view/guide_view/GuideMgr":"GuideMgr","./game/view/index_view/IndexViewBtn":"IndexViewBtn","./game/view/index_view/IndexViewRS":"IndexViewRS","./game/view/index_view/IndexViewTag":"IndexViewTag","./game/view/reward_view/RewardViewState":"RewardViewState","./game/view/tips_view/TipsViewState":"TipsViewState","./game/view/voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],Index:[function(e,t,o){"use strict";cc._RF.push(t,"2f4c5zQACBJlZQv82hC1obT","Index");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Index=void 0;const r=e("../debug/DebugView"),s=e("../debug/DebugViewBtn"),n=e("../debug/DebugViewGraphics"),l=e("../debug/DebugViewGroupFast"),c=e("../debug/DebugViewGroupFastBtn"),d=e("../debug/DebugViewGroupMessage"),u=e("../debug/DebugViewGroupModule"),m=e("../debug/DebugViewGroupModuleBtn"),p=e("../debug/DebugViewState"),h=e("../../IndexView"),f=e("../../game/view/index_view/IndexViewState"),y=e("../ui/UIMask"),_=e("./Jiang"),g=e("../debug/DebugViewGroupMessageBtn"),b=e("../../IndexLoading"),S=e("../debug/DebugViewGroupMessageTxt"),P=e("../../IndexBuildConfig"),{ccclass:B,property:C}=cc._decorator;let M=i=class extends cc.Component{constructor(){super(...arguments),this.cameraUI=null,this.nodeUIContainer=null,this.prefabLoading=null,this.prefabMask=null,this.prefabDebugGroupFastBtn=null,this.prefabDebugGroupFast=null,this.prefabDebugGroupModuleBtn=null,this.prefabDebugGroupModule=null,this.prefabDebugGroupGraphics=null,this.prefabDebugGroupMessage=null,this.prefabDebugGroupMessageBtn=null,this.prefabDebugGroupMessageTxt=null,this.prefabDebugViewBtn=null,this.prefabDebug=null}onLoad(){i.inst=this,Promise.resolve().then(()=>{_.default.mgrUI.Init(this.cameraUI,this.nodeUIContainer),_.default.mgrRes._staticPrefabCache.set(h.default.nodeType._prefabPath,this.prefabLoading),_.default.mgrRes._staticPrefabCache.set(y.default.nodeType._prefabPath,this.prefabMask),_.default.mgrRes._staticPrefabCache.set(c.default.nodeType._prefabPath,this.prefabDebugGroupFastBtn),_.default.mgrRes._staticPrefabCache.set(l.default.nodeType._prefabPath,this.prefabDebugGroupFast),_.default.mgrRes._staticPrefabCache.set(m.default.nodeType._prefabPath,this.prefabDebugGroupModuleBtn),_.default.mgrRes._staticPrefabCache.set(u.default.nodeType._prefabPath,this.prefabDebugGroupModule),_.default.mgrRes._staticPrefabCache.set(n.default.nodeType._prefabPath,this.prefabDebugGroupGraphics),_.default.mgrRes._staticPrefabCache.set(d.default.nodeType._prefabPath,this.prefabDebugGroupMessage),_.default.mgrRes._staticPrefabCache.set(g.default.nodeType._prefabPath,this.prefabDebugGroupMessageBtn),_.default.mgrRes._staticPrefabCache.set(S.default.nodeType._prefabPath,this.prefabDebugGroupMessageTxt),_.default.mgrRes._staticPrefabCache.set(s.default.nodeType._prefabPath,this.prefabDebugViewBtn),_.default.mgrRes._staticPrefabCache.set(r.default.nodeType._prefabPath,this.prefabDebug),P.default.IS_DEBUG&&(p.default.Init(),_.default.mgrUI.Open(r.default.nodeType,p.default.inst)),_.default.mgrUI.Open(h.default.nodeType,f.default.Pop("Index")),b.default.Init()})}};a([C({displayName:"UI \u76f8\u673a",type:cc.Node})],M.prototype,"cameraUI",void 0),a([C({displayName:"UI \u5bb9\u5668",type:cc.Node})],M.prototype,"nodeUIContainer",void 0),a([C({displayName:"\u901a\u7528\u7684 ui \u906e\u7f69",type:cc.Prefab})],M.prototype,"prefabLoading",void 0),a([C({displayName:"\u901a\u7528\u7684 ui \u906e\u7f69",type:cc.Prefab})],M.prototype,"prefabMask",void 0),a([C({displayName:"debug \u5de5\u5177-\u5feb\u6377\u65b9\u5f0f-\u6309\u94ae",type:cc.Prefab})],M.prototype,"prefabDebugGroupFastBtn",void 0),a([C({displayName:"debug \u5de5\u5177-\u5feb\u6377\u65b9\u5f0f",type:cc.Prefab})],M.prototype,"prefabDebugGroupFast",void 0),a([C({displayName:"debug \u5de5\u5177-\u6a21\u5757\u5f00\u5173-\u6309\u94ae",type:cc.Prefab})],M.prototype,"prefabDebugGroupModuleBtn",void 0),a([C({displayName:"debug \u5de5\u5177-\u6a21\u5757\u5f00\u5173",type:cc.Prefab})],M.prototype,"prefabDebugGroupModule",void 0),a([C({displayName:"debug \u5de5\u5177-\u753b\u7b14",type:cc.Prefab})],M.prototype,"prefabDebugGroupGraphics",void 0),a([C({displayName:"debug \u5de5\u5177-\u4fe1\u606f",type:cc.Prefab})],M.prototype,"prefabDebugGroupMessage",void 0),a([C({displayName:"debug \u5de5\u5177-\u4fe1\u606f\u6309\u94ae",type:cc.Prefab})],M.prototype,"prefabDebugGroupMessageBtn",void 0),a([C({displayName:"debug \u5de5\u5177-\u4fe1\u606f\u6587\u672c",type:cc.Prefab})],M.prototype,"prefabDebugGroupMessageTxt",void 0),a([C({displayName:"debug \u5de5\u5177-\u6309\u94ae",type:cc.Prefab})],M.prototype,"prefabDebugViewBtn",void 0),a([C({displayName:"debug \u5de5\u5177",type:cc.Prefab})],M.prototype,"prefabDebug",void 0),M=i=a([B],M),o.Index=M,cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../IndexLoading":"IndexLoading","../../IndexView":"IndexView","../../game/view/index_view/IndexViewState":"IndexViewState","../debug/DebugView":"DebugView","../debug/DebugViewBtn":"DebugViewBtn","../debug/DebugViewGraphics":"DebugViewGraphics","../debug/DebugViewGroupFast":"DebugViewGroupFast","../debug/DebugViewGroupFastBtn":"DebugViewGroupFastBtn","../debug/DebugViewGroupMessage":"DebugViewGroupMessage","../debug/DebugViewGroupMessageBtn":"DebugViewGroupMessageBtn","../debug/DebugViewGroupMessageTxt":"DebugViewGroupMessageTxt","../debug/DebugViewGroupModule":"DebugViewGroupModule","../debug/DebugViewGroupModuleBtn":"DebugViewGroupModuleBtn","../debug/DebugViewState":"DebugViewState","../ui/UIMask":"UIMask","./Jiang":"Jiang"}],Jiang:[function(e,t,o){"use strict";cc._RF.push(t,"ba18dJ6OAdC2bqCDbz/ocwS","Jiang"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../config/MgrCfg"),a=e("../data/MgrData"),r=e("../date/MgrDateNow"),s=e("../evter/MgrEvter"),n=e("../res/MgrRes"),l=e("../sdk/MgrSdk"),c=e("../ui/MgrUI");var d;(function(e){e.mgrRes=n.default.inst,e.mgrUI=c.default.inst,e.mgrCfg=i.default.inst,e.mgrData=a.default.inst,e.mgrEvter=s.default.inst,e.mgrSdk=l.default.inst,e.mgrDateNow=r.default.inst})(d||(d={})),window.jiang=d,o.default=d,cc._RF.pop()},{"../config/MgrCfg":"MgrCfg","../data/MgrData":"MgrData","../date/MgrDateNow":"MgrDateNow","../evter/MgrEvter":"MgrEvter","../res/MgrRes":"MgrRes","../sdk/MgrSdk":"MgrSdk","../ui/MgrUI":"MgrUI"}],LayoutAlignmentHorCenter:[function(e,t,o){"use strict";cc._RF.push(t,"e7d5cpkTydJ47KyaIEev3X2","LayoutAlignmentHorCenter"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentHor"),s="LayoutAlignmentHorCenter";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosX(e,t,o){return e+(t-o)/2}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentHor":"LayoutAlignmentHor"}],LayoutAlignmentHorLeft:[function(e,t,o){"use strict";cc._RF.push(t,"84b82ZVxV5LUYF3WgLazf42","LayoutAlignmentHorLeft"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentHor"),s="LayoutAlignmentHorLeft";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosX(e,t,o){return e}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentHor":"LayoutAlignmentHor"}],LayoutAlignmentHorRight:[function(e,t,o){"use strict";cc._RF.push(t,"afb16cSOPxJk5kWzY4pfKoO","LayoutAlignmentHorRight"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentHor"),s="LayoutAlignmentHorRight";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosX(e,t,o){return e+t-o}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentHor":"LayoutAlignmentHor"}],LayoutAlignmentHor:[function(e,t,o){"use strict";cc._RF.push(t,"e7c44in3ARHEryDjoxIjW6D","LayoutAlignmentHor"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],LayoutAlignmentVerLower:[function(e,t,o){"use strict";cc._RF.push(t,"d11afVM9mBETY2GZG4PzX/u","LayoutAlignmentVerLower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentVer"),s="LayoutAlignmentVerLower";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosY(e,t,o){return e}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentVer":"LayoutAlignmentVer"}],LayoutAlignmentVerMiddle:[function(e,t,o){"use strict";cc._RF.push(t,"33ae1mLJEdH9bF5eIoIE3AH","LayoutAlignmentVerMiddle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentVer"),s="LayoutAlignmentVerMiddle";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosY(e,t,o){return e+(t-o)/2}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentVer":"LayoutAlignmentVer"}],LayoutAlignmentVerUpper:[function(e,t,o){"use strict";cc._RF.push(t,"1c00bKAuSdBOLOoA8o9N9VC","LayoutAlignmentVerUpper"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutAlignmentVer"),s="LayoutAlignmentVerUpper";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}GetPosY(e,t,o){return e+t-o}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=i.default.Pop(n._t,s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutAlignmentVer":"LayoutAlignmentVer"}],LayoutAlignmentVer:[function(e,t,o){"use strict";cc._RF.push(t,"e011bfbWPZMqZdRyVlyMp0c","LayoutAlignmentVer"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],LayoutCollectionColumn:[function(e,t,o){"use strict";cc._RF.push(t,"bc0a0fhzfBNibeIK0DD4Evp","LayoutCollectionColumn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r="LayoutCollectionColumn";class s{constructor(){this.listEle=i.default.Pop(i.default.typeArray,r)}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.idx=t,o}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:e=>{e.listEle.length=0},tag:r}),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType"}],LayoutConstraintColumn:[function(e,t,o){"use strict";cc._RF.push(t,"a06a95h5khPIJOCjyz3DT97","LayoutConstraintColumn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutConstraint"),s="LayoutConstraintColumn";class n extends r.default{constructor(){super()}static Pop(e,t,o){let a=i.default.Pop(n._t,e);return a.constraintCount=t,a.minRowCount=o,a}GetColumnCount(e){return this.constraintCount}GetRowCount(e){let t=Math.ceil(e._listEle.length/this.constraintCount);return Math.max(t,this.minRowCount)}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.one=n.Pop(s,1,0),n.two=n.Pop(s,2,0),n.three=n.Pop(s,3,0),n.four=n.Pop(s,4,0),n.five=n.Pop(s,5,0),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutConstraint":"LayoutConstraint"}],LayoutConstraintRow:[function(e,t,o){"use strict";cc._RF.push(t,"f6fdf+RPexFxYtLdwyiw7ok","LayoutConstraintRow"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutConstraint"),s="LayoutConstraintRow";class n extends r.default{constructor(){super()}static Pop(e,t,o){let a=i.default.Pop(n._t,e);return a.constraintCount=t,a.minColumnCount=o,a}GetRowCount(e){return this.constraintCount}GetColumnCount(e){let t=Math.ceil(e._listEle.length/this.constraintCount);return Math.max(t,this.minColumnCount)}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.one=n.Pop(s,1,0),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutConstraint":"LayoutConstraint"}],LayoutConstraint:[function(e,t,o){"use strict";cc._RF.push(t,"3cfe8+wh+9I15Nldv0WpnPm","LayoutConstraint"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],LayoutEle:[function(e,t,o){"use strict";cc._RF.push(t,"e0c2bnmpCRLoKqeKTQDlWtd","LayoutEle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType");class r{constructor(){}static Pop(e,t,o,a){let s=i.default.Pop(r._t,e);return s.id=t,s.sizeWidth=o,s.sizeHeight=a,s}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"LayoutEle"}),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType"}],LayoutStartAxisHor:[function(e,t,o){"use strict";cc._RF.push(t,"93844y74gFPi6rKrCQO4/fX","LayoutStartAxisHor"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartAxis"),s="LayoutStartAxisHor";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdx(e,t,o){for(let i=0;i<e._listEle.length;i++){let o=e._listEle[i];o.gridIdxX=i%t,o.gridIdxY=(i-o.gridIdxX)/t}}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartAxis":"LayoutStartAxis"}],LayoutStartAxisVer:[function(e,t,o){"use strict";cc._RF.push(t,"452b3zxeadBOZBlR9oGAPtB","LayoutStartAxisVer"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartAxis"),s="LayoutStartAxisVer";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdx(e,t,o){for(let i=0;i<e._listEle.length;i++){let t=e._listEle[i];t.gridIdxY=i%o,t.gridIdxX=(i-t.gridIdxY)/o}}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartAxis":"LayoutStartAxis"}],LayoutStartAxis:[function(e,t,o){"use strict";cc._RF.push(t,"71b55km33dICqZN4iG/XzkK","LayoutStartAxis"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],LayoutStartCornerHorLeft:[function(e,t,o){"use strict";cc._RF.push(t,"ad180vu5E1BLY9oRtE1IRb1","LayoutStartCornerHorLeft"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartCornerHor"),s="LayoutStartCornerHorLeft";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdxHor(e,t){}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartCornerHor":"LayoutStartCornerHor"}],LayoutStartCornerHorRight:[function(e,t,o){"use strict";cc._RF.push(t,"ba243mZE6hHbZWoxxVpQtsw","LayoutStartCornerHorRight"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartCornerHor"),s="LayoutStartCornerHorRight";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdxHor(e,t){for(let o=0;o<e._listEle.length;o++){let i=e._listEle[o];i.gridIdxX=t-1-i.gridIdxX}}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartCornerHor":"LayoutStartCornerHor"}],LayoutStartCornerHor:[function(e,t,o){"use strict";cc._RF.push(t,"cd0b44trGRFJ7F0KBP1c+ON","LayoutStartCornerHor"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],LayoutStartCornerVerLower:[function(e,t,o){"use strict";cc._RF.push(t,"9c7edUNJmNNPIqinOdW8QEZ","LayoutStartCornerVerLower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartCornerVer"),s="LayoutStartCornerVerLower";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdxVer(e,t){}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartCornerVer":"LayoutStartCornerVer"}],LayoutStartCornerVerUpper:[function(e,t,o){"use strict";cc._RF.push(t,"61dbcENjNlEtIFVhLEjVfqg","LayoutStartCornerVerUpper"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutStartCornerVer"),s="LayoutStartCornerVerUpper";class n extends r.default{constructor(){super()}static Pop(e){return i.default.Pop(n._t,e)}UpdateGridIdxVer(e,t){for(let o=0;o<e._listEle.length;o++){let i=e._listEle[o];i.gridIdxY=t-1-i.gridIdxY}}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutStartCornerVer":"LayoutStartCornerVer"}],LayoutStartCornerVer:[function(e,t,o){"use strict";cc._RF.push(t,"1bc4bC7dahKZIB/73iPxkKd","LayoutStartCornerVer"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{},cc._RF.pop()},{}],Layout:[function(e,t,o){"use strict";cc._RF.push(t,"5d9d8faNaJD5LbUonHRSsqI","Layout"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../UtilObjPool"),a=e("../UtilObjPoolType"),r=e("./LayoutCollectionColumn"),s=e("./LayoutEle"),n="Layout";class l{constructor(){this._idToEleMap=i.default.Pop(i.default.typeMap,n),this._listEle=i.default.Pop(i.default.typeArray,n),this.listColumn=i.default.Pop(i.default.typeArray,n),this.listRow=i.default.Pop(i.default.typeArray,n)}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.paddingTop=t.paddingTop,o.paddingRight=t.paddingRight,o.paddingBottom=t.paddingBottom,o.paddingLeft=t.paddingLeft,o.spacingColumn=t.spacingColumn,o.spacingRow=t.spacingRow,o.defSizeWidth=t.defSizeWidth,o.defSizeHeight=t.defSizeHeight,o.startCornerHor=t.startCornerHor,o.startCornerVer=t.startCornerVer,o.startAxis=t.startAxis,o.constraint=t.constraint,o.alignmentHor=t.alignmentHor,o.alignmentVer=t.alignmentVer,o}Create(e,t,o){if(this._idToEleMap.has(o))return void console.error(`id \u51b2\u7a81[${o}]`);let i=s.default.Pop(n,o,e,t);this._idToEleMap.set(o,i),this._listEle.push(i)}Clear(){for(let e=0;e<this._listEle.length;e++)i.default.Push(this._listEle[e]);this._idToEleMap.clear(),this._listEle.length=0}UpdatePos(){let e=this.constraint.GetColumnCount(this),t=this.constraint.GetRowCount(this);this._idToEleMap.get(1028),this.startAxis.UpdateGridIdx(this,e,t),this.startCornerHor.UpdateGridIdxHor(this,e),this.startCornerVer.UpdateGridIdxVer(this,t);for(let r=0;r<this.listColumn.length;r++)i.default.Push(this.listColumn[r]);for(this.listColumn.length=0;this.listColumn.length<e;)this.listColumn.push(r.default.Pop(n,this.listColumn.length));for(let r=0;r<this.listRow.length;r++)i.default.Push(this.listRow[r]);for(this.listRow.length=0;this.listRow.length<t;)this.listRow.push(r.default.Pop(n,this.listRow.length));for(let i=0;i<this._listEle.length;i++){let e=this._listEle[i];this.listColumn[e.gridIdxX].listEle.push(e),this.listRow[e.gridIdxY].listEle.push(e)}for(let i=0;i<this.listColumn.length;i++){let e=this.listColumn[i];if(e.listEle.sort((e,t)=>e.gridIdxY-t.gridIdxY),0<e.listEle.length){let t=e.listEle[0];for(let o=0;o<t.gridIdxY;o++)e.listEle.unshift(null)}}for(let i=0;i<this.listRow.length;i++){let e=this.listRow[i];if(e.listEle.sort((e,t)=>e.gridIdxX-t.gridIdxX),0<e.listEle.length){let t=e.listEle[0];for(let o=0;o<t.gridIdxX;o++)e.listEle.unshift(null)}}for(let i=0;i<this.listColumn.length;i++){let e=this.listColumn[i];e.size=this.defSizeWidth;for(let t=0;t<e.listEle.length;t++){let o=e.listEle[t];null!=o&&(e.size=Math.max(e.size,o.sizeWidth))}}for(let i=0;i<this.listRow.length;i++){let e=this.listRow[i];e.size=this.defSizeHeight;for(let t=0;t<e.listEle.length;t++){let o=e.listEle[t];null!=o&&(e.size=Math.max(e.size,o.sizeHeight))}}let o=0;for(let i=0;i<this.listColumn.length;i++){let e=this.listColumn[i];e.posStart=this.paddingLeft+i*this.spacingColumn+o,e.posEnd=e.posStart+e.size,e.extendStart=e.posStart-(0<i?this.spacingColumn:0),e.extendEnd=e.posEnd+(i<this.listColumn.length-1?this.spacingColumn:0),o+=e.size}let a=0;for(let i=0;i<this.listRow.length;i++){let e=this.listRow[i];e.posStart=this.paddingBottom+i*this.spacingRow+a,e.posEnd=e.posStart+e.size,e.extendStart=e.posStart-(0<i?this.spacingRow:0),e.extendEnd=e.posEnd+(i<this.listRow.length-1?this.spacingRow:0),a+=e.size}for(let i=0;i<this.listColumn.length;i++){let e=this.listColumn[i];for(let t=0;t<e.listEle.length;t++){let o=e.listEle[t];null!=o&&(o.posX=this.alignmentHor.GetPosX(e.posStart,e.size,o.sizeWidth))}}for(let i=0;i<this.listRow.length;i++){let e=this.listRow[i];for(let t=0;t<e.listEle.length;t++){let o=e.listEle[t];null!=o&&(o.posY=this.alignmentVer.GetPosY(e.posStart,e.size,o.sizeHeight))}}this.containerWidth=this.paddingLeft;for(let i=0;i<this.listColumn.length;i++){let e=this.listColumn[i];this.containerWidth=e.posStart+e.size}this.containerWidth+=this.paddingRight,this.containerHeight=this.paddingBottom;for(let i=0;i<this.listRow.length;i++){let e=this.listRow[i];this.containerHeight=e.posStart+e.size}this.containerHeight+=this.paddingTop,this._recHorStart=0,this._recHorEnd=-1,this._recVerStart=0,this._recVerEnd=-1}UpdateActive(e,t,o,i){this._recHorStart=this.GetCoverIdxStartToEnd(this.listColumn,e),this._recHorEnd=this.GetCoverIdxEndToStart(this.listColumn,e+o),this._recVerStart=this.GetCoverIdxStartToEnd(this.listRow,t),this._recVerEnd=this.GetCoverIdxEndToStart(this.listRow,t+i)}GetCoverIdxStartToEnd(e,t){if(0==e.length)return 0;let o=e[0],i=e[e.length-1];return t<o.posStart?0:i.posEnd<t?e.length:this.GetIdx(e,e=>e.extendStart,e=>e.posEnd,0,e.length-1,t)}GetCoverIdxEndToStart(e,t){if(0==e.length)return-1;let o=e[0];return e[e.length-1].posEnd<t?e.length-1:t<o.posStart?-1:this.GetIdx(e,e=>e.posStart,e=>e.extendEnd,0,e.length-1,t)}GetIdx(e,t,o,i,a,r){let s=Math.ceil((i+a)/2),n=e[s];return r<t(n)?this.GetIdx(e,t,o,i,s-1,r):o(n)<r?this.GetIdx(e,t,o,s+1,a,r):s}SetElePos(e,t){let o=this._idToEleMap.get(t);null!=o?(e.x=o.posX,e.y=o.posY):console.error("SetElePos ele == null")}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../UtilObjPool":"UtilObjPool","../UtilObjPoolType":"UtilObjPoolType","./LayoutCollectionColumn":"LayoutCollectionColumn","./LayoutEle":"LayoutEle"}],LoadingViewState:[function(e,t,o){"use strict";cc._RF.push(t,"4867cCC3XFEVZVyzlYZTi9I","LoadingViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/BCPromiseCtrl"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c="LoadingViewState";class d extends l.default{constructor(){super(i.default.GAME,l.default.BG_TYPE.MASK,!0),this._listLoading=r.default.Pop(r.default.typeArray,c),this.ctrl=a.default.Pop(c)}static Pop(e,t){let o=r.default.Pop(d._t,e);return o._listLoading.push(...t),o._listLoading.push(new Promise(e=>{setTimeout(e,200)})),o}OnInit(){Promise.all(this._listLoading).then(()=>{n.default.mgrUI.Close(this._idView),this.ctrl.resolve(null)})}}o.default=d,d._t=new s.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState"}],LoadingView:[function(e,t,o){"use strict";cc._RF.push(t,"86fbdq6/IhGo6odxk57Leyv","LoadingView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../GameCommon"),{ccclass:u,property:m}=cc._decorator;let p=i=class extends c.default{};p.nodeType=l.default.Pop("LoadingView",{prefabPath:`${d.default.SUB_MAIN}/prefab_ui/loading_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.opacityInForTemp200}),p=i=a([u],p),o.default=p,cc._RF.pop()},{"../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],LockViewState:[function(e,t,o){"use strict";cc._RF.push(t,"8c927PP6FhMRazrwTmfFQWy","LockViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c="LockViewState";class d extends l.default{constructor(){super(i.default.SYSTEM,l.default.BG_TYPE.NONE,!1),this._idLockGen=0,this._setLocked=r.default.Pop(r.default.typeSet,c),d.inst=this}static Pop(e){return r.default.Pop(d._t,e)}get isLocking(){return 0<this._setLocked.size}LockApp(){let e=++this._idLockGen;return this._setLocked.add(e),n.default.mgrUI.ModuleRefresh(a.default.LOCK),e}LockCancel(e){this._setLocked.delete(e),n.default.mgrUI.ModuleRefresh(a.default.LOCK)}}o.default=d,d._t=new s.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState"}],LockView:[function(e,t,o){"use strict";cc._RF.push(t,"dd7e04hkdhO1q00VHmRP7bD","LockView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator;let h=i=class extends d.default{constructor(){super(...arguments),this.nodeLock=null}};h.nodeType=c.default.Pop("LockView",{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/lock_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop("LockView",{listRefModule:[r.default.LOCK],propsFilter:(e,t)=>{e.nodeLock.active=t.isLocking}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Node)],h.prototype,"nodeLock",void 0),h=i=a([m],h),o.default=h,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],Logic3001Args:[function(e,t,o){"use strict";cc._RF.push(t,"0612emVIiZDCpWBlw8kCNoK","Logic3001Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3001StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"bcff19YmoxI14dzLtk2HggD","Logic3001StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3001Status"),s="Logic3001StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3001Status":"Logic3001Status"}],Logic3001StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"526de24OQJDAqerdxFx2r0e","Logic3001StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3001"),l=e("./Logic3001Status"),c="Logic3001StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3001":"Logic3001","./Logic3001Status":"Logic3001Status"}],Logic3001StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"eb493dFm9lBf5Mv/uWtcjup","Logic3001StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3001Status"),n="Logic3001StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3001Status":"Logic3001Status"}],Logic3001StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"a49ce0KPuxBGob0MqnZXL9p","Logic3001StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/guide_view/GuideMgr"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("./Logic3001Status"),c="Logic3001StatusPower";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){r.default.inst.currStatus.P1U6OnBodyWarning(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),s.default.inst.VoiceSet(n.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=l.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,c);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/guide_view/GuideMgr":"GuideMgr","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3001Status":"Logic3001Status"}],Logic3001Status:[function(e,t,o){"use strict";cc._RF.push(t,"23794UoJ3lA0KLHcN5+GOBQ","Logic3001Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3001:[function(e,t,o){"use strict";cc._RF.push(t,"45258Ekc/xNZJ1KUU9AydNO","Logic3001"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3001StatusCD"),h=e("./Logic3001StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3001StatusPower"),g=e("./Logic3001StatusJumped"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C=e("../../../view/guide_view/GuideMgr"),M="Logic3001";class x extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(M,this),this.statusPower=_.default.Pop(M,this),this.statusJumped=g.default.Pop(M,this),this.statusCD=p.default.Pop(M,this)}static Pop(e,t,o){let i=a.default.Pop(x._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(S.default.Pop(M,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,M);e.gravityScale=x.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(M,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,M);let o=a.default.Pop(a.default.typeCircleShape,M),r=a.default.Pop(a.default.typeccVec2,M);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(M,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,M);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,M),c=a.default.Pop(a.default.typeccVec2,M);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(M,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){if(d.default.PopForDmg(M,e,this.relBody.relState),C.default.inst.currStatus!=C.default.inst.statusIdle&&e.type!=P.default.shield){if(0==C.default.inst.dmgAble)return;C.default.inst.dmgAble--}this.currStatus.OnDmg(e),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(M,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(M,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3001OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(M,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3001OnDestory(){}}o.default=x,x.GRAVITY_SCALE=1,x._t=new r.default({instantiate:()=>new x,onPop:()=>{},onPush:()=>{},tag:M}),x.rs=m.default.Pop(M,{logicCode:3001,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9)}),init:(e,t)=>{e.commonBehaviour=x.Pop(M,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,M),aditionalEff:()=>a.default.Pop(a.default.typeArray,M),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,M);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/guide_view/GuideMgr":"GuideMgr","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3001StatusCD":"Logic3001StatusCD","./Logic3001StatusJumped":"Logic3001StatusJumped","./Logic3001StatusOrdinary":"Logic3001StatusOrdinary","./Logic3001StatusPower":"Logic3001StatusPower"}],Logic3002Args:[function(e,t,o){"use strict";cc._RF.push(t,"1bc7ez2pO1Da7M+FjvwsrqY","Logic3002Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3002:[function(e,t,o){"use strict";cc._RF.push(t,"c6166R5201GRqXyBo7kTW1t","Logic3002"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/basic/UtilString"),s=e("../../../../frame/global/Jiang"),n=e("../GameElementBody"),l=e("../GameElementBodyBehaviourRS"),c=e("../logic_3001/Logic3001"),d="Logic3002";class u extends c.default{static Pop(e,t,o){let a=i.default.Pop(u._logic3002t,e);return a.logic3002Args=o,a.relBody=t,a.args=o,a.EnterStatus(a.statusOrdinary),a}Logic3001OnDestory(){let e=Math.PI/6/this.logic3002Args.listSplit.length,t=-this.relBody.relState.b2Gravity*c.default.GRAVITY_SCALE/s.default.mgrUI._sizePerPixel/1e3/4;for(let o=0;o<this.logic3002Args.listSplit.length;o++){let i=Math.PI/2-o*e,a=n.default.PopForCall(d,{posX:this.relBody.commonFootPos.x,posY:this.relBody.commonFootPos.y,vecX:Math.cos(i)*t,vecY:Math.sin(i)*t,cfgId:this.logic3002Args.listSplit[o],camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(a)}}}o.default=u,u._logic3002t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),u.rs=l.default.Pop(d,{logicCode:3002,cfgToArgs:e=>Object.assign(Object.assign({},c.default.rs.cfgToArgs(e)),{listSplit:r.default.ParseStrToListNum(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=u.Pop(d,e,t)},instDisplay:c.default.rs.instDisplay,boardDisplay:c.default.rs.boardDisplay,atkGetter:c.default.rs.atkGetter,hpGetter:c.default.rs.hpGetter,sizeGetter:c.default.rs.sizeGetter,aditionalBody:(e,t)=>{let o=i.default.Pop(i.default.typeArray,d);return o.push(...t.listSplit),o},aditionalEff:()=>i.default.Pop(i.default.typeArray,d),aditionalVoice:(e,t)=>{let o=i.default.Pop(i.default.typeArray,d);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../GameElementBody":"GameElementBody","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../logic_3001/Logic3001":"Logic3001"}],Logic3003Args:[function(e,t,o){"use strict";cc._RF.push(t,"67962GpgjVNT5IMRgBzCznQ","Logic3003Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3003StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"2ff6ecnPNFIRb1M/xyDGY+H","Logic3003StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3003Status"),s="Logic3003StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3003Status":"Logic3003Status"}],Logic3003StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"02effrcUIVNEYez4+cMaE5Q","Logic3003StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3003"),l=e("./Logic3003Status"),c="Logic3003StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3003":"Logic3003","./Logic3003Status":"Logic3003Status"}],Logic3003StatusMoveJump:[function(e,t,o){"use strict";cc._RF.push(t,"aff08s9w9JDY6ys6F2BhFha","Logic3003StatusMoveJump"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3003"),n=e("./Logic3003Status"),l="Logic3003StatusMoveJump";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=n.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,l);e.x=-this.relMachine.args.moveSpeed*r.default.mgrUI._sizePerPixel*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*s.default.GRAVITY_SCALE/2,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnTimeStep(e){this.relMachine.relBody.IsConcatWithGround()&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3003":"Logic3003","./Logic3003Status":"Logic3003Status"}],Logic3003StatusMovePower:[function(e,t,o){"use strict";cc._RF.push(t,"344b8IWV9VLRaFxUaCfBbZa","Logic3003StatusMovePower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3003Status"),s="Logic3003StatusMovePower";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime/2;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusMoveJump))}OnTarget(e){this._target=e}OnDmg(e){}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3003Status":"Logic3003Status"}],Logic3003StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"dac01rM7ldP0aNEjEAL6jtl","Logic3003StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3003Status");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY}OnTimeStep(e){if(this.relMachine.relBody.IsConcatWithGround()){for(let e=0;e<this.relMachine.relBody.listConcatedBodyEnemy.length;e++){let t=this.relMachine.relBody.listConcatedBodyEnemy[e];if(t.fixtureSelf==this.relMachine.fixArea)return this.relMachine.EnterStatus(this.relMachine.statusPower),void this.relMachine.currStatus.OnTarget(t.relFixture.relBody.relEle)}this.relMachine.EnterStatus(this.relMachine.statusMovePower)}}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"Logic3003StatusOrdinary"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3003Status":"Logic3003Status"}],Logic3003StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"0d61fNNbR1HMoAFkmWH09az","Logic3003StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3003Status"),l="Logic3003StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}OnDmg(e){}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3003Status":"Logic3003Status"}],Logic3003Status:[function(e,t,o){"use strict";cc._RF.push(t,"2ce87uoWiNDLI6+edZRbFt+","Logic3003Status"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a="Logic3003Status";class r{OnEnter(){}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,a),r=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(r.x/2,r.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,a).Set(0,t),i.default.Pop(i.default.typeB2Vec2,a))}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return r.ANIM_ORDINARY}}o.default=r,r.ANIM_ORDINARY="npc_slime_2001001001_ordinary",r.ANIM_POWER="npc_slime_2001001001_power",r.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool"}],Logic3003:[function(e,t,o){"use strict";cc._RF.push(t,"18775wbLF1Ddpoan8z5uzhB","Logic3003"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3003StatusCD"),h=e("./Logic3003StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3003StatusPower"),g=e("./Logic3003StatusJumped"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("./Logic3003StatusMovePower"),B=e("./Logic3003StatusMoveJump"),C=e("../GameElementBodyCtxDmgType"),M=e("../GameSizeMarkRS"),x="Logic3003";class V extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(x,this),this.statusPower=_.default.Pop(x,this),this.statusJumped=g.default.Pop(x,this),this.statusCD=p.default.Pop(x,this),this.statusMovePower=P.default.Pop(x,this),this.statusMoveJump=B.default.Pop(x,this)}static Pop(e,t,o){let i=a.default.Pop(V._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(S.default.Pop(x,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,x);e.gravityScale=V.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(x,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,x);let o=a.default.Pop(a.default.typeCircleShape,x),r=a.default.Pop(a.default.typeccVec2,x);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(x,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,x);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,x),c=a.default.Pop(a.default.typeccVec2,x);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(x,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(x,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),M.default.PlayEffHitByConcat(x,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(x,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:C.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3003OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(x,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3003OnDestory(){}}o.default=V,V.GRAVITY_SCALE=1,V._t=new r.default({instantiate:()=>new V,onPop:()=>{},onPush:()=>{},tag:x}),V.rs=m.default.Pop(x,{logicCode:3003,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9)}),init:(e,t)=>{e.commonBehaviour=V.Pop(x,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,x),aditionalEff:()=>a.default.Pop(a.default.typeArray,x),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,x);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3003StatusCD":"Logic3003StatusCD","./Logic3003StatusJumped":"Logic3003StatusJumped","./Logic3003StatusMoveJump":"Logic3003StatusMoveJump","./Logic3003StatusMovePower":"Logic3003StatusMovePower","./Logic3003StatusOrdinary":"Logic3003StatusOrdinary","./Logic3003StatusPower":"Logic3003StatusPower"}],Logic3004Args:[function(e,t,o){"use strict";cc._RF.push(t,"76033F6Z1tIHqdjCmk6Ym27","Logic3004Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3004StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"d74fel/ZM5LoYxJqi1Mab5h","Logic3004StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3004Status"),s="Logic3004StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3004Status":"Logic3004Status"}],Logic3004StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"63cfc2jX5ZDVqtCjKJmqcek","Logic3004StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3004Status"),n="Logic3004StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&0!=this.relMachine.relBody.listConcatedGround.length&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3004Status":"Logic3004Status"}],Logic3004StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"f95ddmp/A1OFY4RHaIKd2HF","Logic3004StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/config/src/CfgGameElement"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../DefineVoice"),c=e("../GameElementBody"),d=e("./Logic3004Status"),u="Logic3004StatusPower";class m extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),n.default.inst.VoiceSet(l.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=d.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,u);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0){let e=s.default.mgrCfg.cfgGameElement.select(r.default.idGetter,this.relMachine.args.bullet)._list[0],t=i.default.Pop(i.default.typeB2Vec2,u);t.x=(this._target.commonCenterPos.x-this.relMachine.relBody.commonCenterPos.x+this._target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3/s.default.mgrUI._sizePerPixel)/this.relMachine.args.atkTime,t.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*e.gravity_scale/s.default.mgrUI._sizePerPixel/1e3;let o=c.default.PopForCall(u,{posX:this.relMachine.relBody.commonCenterPos.x,posY:this.relMachine.relBody.commonCenterPos.y,vecX:t.x,vecY:t.y,cfgId:this.relMachine.args.bullet,camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(o),this.relMachine.EnterStatus(this.relMachine.statusCD)}}OnTarget(e){this._target=e}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","./Logic3004Status":"Logic3004Status"}],Logic3004Status:[function(e,t,o){"use strict";cc._RF.push(t,"d56869DIoJHgp2Z+v/93IFb","Logic3004Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3004:[function(e,t,o){"use strict";cc._RF.push(t,"c73f1rN14FIm4+n8LVpj2yP","Logic3004"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3004StatusCD"),h=e("./Logic3004StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3004StatusPower"),g=e("../../../display/GameDisplayBody002"),b=e("../../common/GameElementLightPoint"),S=e("../GameElementBodyCtxDmgType"),P=e("../GameSizeMarkRS"),B="Logic3004";class C extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(B,this),this.statusPower=_.default.Pop(B,this),this.statusCD=p.default.Pop(B,this)}static Pop(e,t,o){let i=a.default.Pop(C._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(B,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,B);e.gravityScale=C.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(B,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,B);let o=a.default.Pop(a.default.typeCircleShape,B),r=a.default.Pop(a.default.typeccVec2,B);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(B,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,B);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,B),c=a.default.Pop(a.default.typeccVec2,B);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(B,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(B,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),P.default.PlayEffHitByConcat(B,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(B,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3004OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(B,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3004OnDestory(){}}o.default=C,C.GRAVITY_SCALE=1,C._t=new r.default({instantiate:()=>new C,onPop:()=>{},onPush:()=>{},tag:B}),C.rs=m.default.Pop(B,{logicCode:3004,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),bullet:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=C.Pop(B,e,t)},instDisplay:(e,t,o)=>{o.push(g.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.bullet),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,B),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3004StatusCD":"Logic3004StatusCD","./Logic3004StatusOrdinary":"Logic3004StatusOrdinary","./Logic3004StatusPower":"Logic3004StatusPower"}],Logic3005Args:[function(e,t,o){"use strict";cc._RF.push(t,"d6596bFv8ZKSqVBW6mlEFrg","Logic3005Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3005DefendStatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"2c465Gmv/FKZ6dPLL9W4fPl","Logic3005DefendStatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementTxt"),n=e("./Logic3005DefendStatus"),l="Logic3005DefendStatusCD";class c extends n.default{constructor(){super(),this.cd=0}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.cd=this.relMachine.args.defendCD}OnTimeStep(e){this.cd-=e,this.cd<=0&&this.relMachine.HMEnterStatus(this.relMachine.hmStatusOrdinary)}OnDmg(e){this.cd=this.relMachine.args.defendCD,this.relMachine.amCurrStatus.OnDmg(e),s.default.PopForDmg(l,e,this.relMachine.relBody.relState),r.default.inst.VoiceSet(this.relMachine.args.hurtedOgg),this.relMachine.relBody.commonHpCurrent-=e.dmg,this.relMachine.relBody.commonHpCurrent=Math.max(0,this.relMachine.relBody.commonHpCurrent),0==this.relMachine.relBody.commonHpCurrent&&this.relMachine.relBody.relState.RemEle(this.relMachine.relBody)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementTxt":"GameElementTxt","./Logic3005DefendStatus":"Logic3005DefendStatus"}],Logic3005DefendStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"ed9b4YMqBJL+ohNARS0CvGz","Logic3005DefendStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementTxt"),n=e("./Logic3005DefendStatus"),l="Logic3005DefendStatusOrdinary";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnDmg(e){this.relMachine.amCurrStatus.OnDmg(e),s.default.PopForTips(l,"\u663e\u5f62",e.posX,e.posY,this.relMachine.relBody),r.default.inst.VoiceSet(this.relMachine.args.hurtedOgg),this.relMachine.HMEnterStatus(this.relMachine.hmStatusCD)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementTxt":"GameElementTxt","./Logic3005DefendStatus":"Logic3005DefendStatus"}],Logic3005DefendStatus:[function(e,t,o){"use strict";cc._RF.push(t,"9798e5lYMlG+IytUudRolQO","Logic3005DefendStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnDmg(e){}OnTimeStep(e){}},cc._RF.pop()},{}],Logic3005StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"ec942fCAC9MZaw3ej/aaWC8","Logic3005StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3005Status"),s="Logic3005StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.AMEnterStatus(this.relMachine.amStatusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3005Status":"Logic3005Status"}],Logic3005StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"01e91OV4whHP5z0WI6jxN1c","Logic3005StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../../common/GameElementTxt"),l=e("../GameElementBodyCtxDmgType"),c=e("./Logic3005"),d=e("./Logic3005Status"),u="Logic3005StatusJumped";class m extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=d.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,u);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*c.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e),s.default.inst.VoiceSet(this.relMachine.args.hurtedOgg),this.relMachine.hmCurrStatus==this.relMachine.hmStatusOrdinary&&n.default.PopForTips(u,"\u663e\u5f62",this.relMachine.relBody.commonCenterPos.x,this.relMachine.relBody.commonCenterPos.y,this.relMachine.relBody),this.relMachine.HMEnterStatus(this.relMachine.hmStatusCD)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnDmg(e){e.type==l.default.shield&&this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3005":"Logic3005","./Logic3005Status":"Logic3005Status"}],Logic3005StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"0fabcZj9hZO7bl6rVzV/BSi","Logic3005StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3005Status"),n="Logic3005StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.AMEnterStatus(this.relMachine.amStatusPower),this.relMachine.amCurrStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3005Status":"Logic3005Status"}],Logic3005StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"d810bf0/c1MKocx1AWY4N42","Logic3005StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3005Status"),l="Logic3005StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.amStatusJumped.target=this._target,this.relMachine.AMEnterStatus(this.relMachine.amStatusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3005Status":"Logic3005Status"}],Logic3005Status:[function(e,t,o){"use strict";cc._RF.push(t,"9bfa0v2K4FGCbm/AA1wA+/X","Logic3005Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3005:[function(e,t,o){"use strict";cc._RF.push(t,"b9166vXFNZEm6RmjGTyNUic","Logic3005"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../../common/GameElementPart"),c=e("../GameElementBodyBehaviour"),d=e("../GameElementBodyBehaviourRS"),u=e("./Logic3005StatusCD"),m=e("./Logic3005StatusOrdinary"),p=e("../../GameCtxB2BodyFixtureTypeRS"),h=e("../GameElementBodyCtxDmg"),f=e("./Logic3005StatusPower"),y=e("./Logic3005StatusJumped"),_=e("./Logic3005DefendStatusOrdinary"),g=e("./Logic3005DefendStatusCD"),b=e("../../../display/GameDisplayBody003"),S=e("../GameElementBodyCtxDmgType"),P=e("../../../display/GameDisplayHp01"),B=e("../GameSizeMarkRS"),C="Logic3005";class M extends c.default{constructor(){super(),this.amStatusOrdinary=m.default.Pop(C,this),this.amStatusPower=f.default.Pop(C,this),this.amStatusJumped=y.default.Pop(C,this),this.amStatusCD=u.default.Pop(C,this),this.hmStatusOrdinary=_.default.Pop(C,this),this.hmStatusCD=g.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.AMEnterStatus(i.amStatusOrdinary),i.HMEnterStatus(i.hmStatusOrdinary),i}AMEnterStatus(e){let t=this.amCurrStatus;this.amCurrStatus=e,t&&t.OnExit(),this.amCurrStatus&&this.amCurrStatus.OnEnter()}HMEnterStatus(e){let t=this.hmCurrStatus;this.hmCurrStatus=e,t&&t.OnExit(),this.hmCurrStatus&&this.hmCurrStatus.OnEnter()}OnInit(){this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,p.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,p.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.hmCurrStatus.OnDmg(e)}OnConcatA(e){this.amCurrStatus.OnConcatA(e)}OnConcatB(e){this.amCurrStatus.OnConcatB(e)}OnTimeStep(e){this.amCurrStatus.OnTimeStep(e),this.hmCurrStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,h.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.amCurrStatus.OnTarget(t)}}}OnDestory(){this.Logic3005OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),l.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),n.default.inst.VoiceSet(this.args.deathOgg)}Logic3005OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=d.default.Pop(C,{logicCode:3005,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),defendCD:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(P.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody003":"GameDisplayBody003","../../../display/GameDisplayHp01":"GameDisplayHp01","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3005DefendStatusCD":"Logic3005DefendStatusCD","./Logic3005DefendStatusOrdinary":"Logic3005DefendStatusOrdinary","./Logic3005StatusCD":"Logic3005StatusCD","./Logic3005StatusJumped":"Logic3005StatusJumped","./Logic3005StatusOrdinary":"Logic3005StatusOrdinary","./Logic3005StatusPower":"Logic3005StatusPower"}],Logic3006Args:[function(e,t,o){"use strict";cc._RF.push(t,"82aa9TenxtPpriGuoYxlQzE","Logic3006Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3006StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"5c97f+yWORCq5dT4nIMjjl4","Logic3006StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3006Status"),s="Logic3006StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3006Status":"Logic3006Status"}],Logic3006StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"b8b30Q9ZmJK3ay1c4ZAXDZt","Logic3006StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3006"),l=e("./Logic3006Status"),c="Logic3006StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c),t=this.relMachine.args.atkTime/this.relMachine.relBody.commonTimeScaleSelf;e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*t/1e3)/t*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*t/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3006":"Logic3006","./Logic3006Status":"Logic3006Status"}],Logic3006StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"32c7f/FYIdFu66GksLtUFlG","Logic3006StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3006Status"),n="Logic3006StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3*this.relMachine.relBody.commonTimeScaleSelf)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3*this.relMachine.relBody.commonTimeScaleSelf)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3006Status":"Logic3006Status"}],Logic3006StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"b93d1f8nE1PtKY+9rdnEhuj","Logic3006StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3006Status"),l="Logic3006StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3006Status":"Logic3006Status"}],Logic3006Status:[function(e,t,o){"use strict";cc._RF.push(t,"bbb79yswytDD5VSbFcQY/W5","Logic3006Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3006:[function(e,t,o){"use strict";cc._RF.push(t,"82fd8PdjGBMxqjKXp8nZUea","Logic3006"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3006StatusCD"),h=e("./Logic3006StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3006StatusPower"),g=e("./Logic3006StatusJumped"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3006";class M extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(C,this),this.statusPower=_.default.Pop(C,this),this.statusJumped=g.default.Pop(C,this),this.statusCD=p.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.commonTimeScaleSelf=this.args.timeScale,this.relBody.relState.AddEle(S.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(C,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){e*=this.relBody.commonTimeScaleSelf,this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3006OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3006OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=m.default.Pop(C,{logicCode:3006,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),timeScale:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3006StatusCD":"Logic3006StatusCD","./Logic3006StatusJumped":"Logic3006StatusJumped","./Logic3006StatusOrdinary":"Logic3006StatusOrdinary","./Logic3006StatusPower":"Logic3006StatusPower"}],Logic3007Args:[function(e,t,o){"use strict";cc._RF.push(t,"ca0db6ivoFLoriC5+OOEilw","Logic3007Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3007DefendStatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"dc156CE97hO8bj0TSCex/aa","Logic3007DefendStatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementTxt"),n=e("./Logic3007DefendStatus"),l="Logic3007DefendStatusCD";class c extends n.default{constructor(){super(),this.cd=0}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonCD.currStatus.OnTryCall(),this.cd=this.relMachine.args.defendCD}OnTimeStep(e){this.cd-=e,this.cd<=0&&this.relMachine.HMEnterStatus(this.relMachine.hmStatusOrdinary)}OnDmg(e){this.relMachine.amCurrStatus.OnDmg(e),s.default.PopForTips(l,"\u683c\u6321",e.posX,e.posY,this.relMachine.relBody),r.default.inst.VoiceSet(this.relMachine.args.hurtedOgg)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementTxt":"GameElementTxt","./Logic3007DefendStatus":"Logic3007DefendStatus"}],Logic3007DefendStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"8730fN9EVdKs4UAA7E5lwxT","Logic3007DefendStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementTxt"),n=e("./Logic3007DefendStatus"),l="Logic3007DefendStatusOrdinary";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnDmg(e){this.relMachine.amCurrStatus.OnDmg(e),s.default.PopForDmg(l,e,this.relMachine.relBody.relState),r.default.inst.VoiceSet(this.relMachine.args.hurtedOgg),this.relMachine.relBody.commonHpCurrent-=e.dmg,this.relMachine.relBody.commonHpCurrent=Math.max(0,this.relMachine.relBody.commonHpCurrent),0==this.relMachine.relBody.commonHpCurrent?this.relMachine.relBody.relState.RemEle(this.relMachine.relBody):this.relMachine.HMEnterStatus(this.relMachine.hmStatusCD)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementTxt":"GameElementTxt","./Logic3007DefendStatus":"Logic3007DefendStatus"}],Logic3007DefendStatus:[function(e,t,o){"use strict";cc._RF.push(t,"d778f05zMBINKTfdlSpXqp9","Logic3007DefendStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnDmg(e){}OnTimeStep(e){}},cc._RF.pop()},{}],Logic3007StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"9e1766LgEpGnoGhwT4j6hpn","Logic3007StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3007Status"),s="Logic3007StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.AMEnterStatus(this.relMachine.amStatusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3007Status":"Logic3007Status"}],Logic3007StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"8e77aQH+npJdqM+fWf3Dzs3","Logic3007StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3007"),l=e("./Logic3007Status"),c="Logic3007StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3007":"Logic3007","./Logic3007Status":"Logic3007Status"}],Logic3007StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"1c642zkIPhNSbh7wZCYXT0Q","Logic3007StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3007Status"),n="Logic3007StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.AMEnterStatus(this.relMachine.amStatusPower),this.relMachine.amCurrStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3007Status":"Logic3007Status"}],Logic3007StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"96127odt9VItKnu7bNWgpeH","Logic3007StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3007Status"),l="Logic3007StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.amStatusJumped.target=this._target,this.relMachine.AMEnterStatus(this.relMachine.amStatusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3007Status":"Logic3007Status"}],Logic3007Status:[function(e,t,o){"use strict";cc._RF.push(t,"162f3qaANJDRI89OjjEQz9O","Logic3007Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3007:[function(e,t,o){"use strict";cc._RF.push(t,"30ac9eGkBVKu57sYHJfjbfW","Logic3007"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../GameElementBodyBehaviour"),u=e("../GameElementBodyBehaviourRS"),m=e("./Logic3007StatusCD"),p=e("./Logic3007StatusOrdinary"),h=e("../../GameCtxB2BodyFixtureTypeRS"),f=e("../GameElementBodyCtxDmg"),y=e("./Logic3007StatusPower"),_=e("./Logic3007StatusJumped"),g=e("../../common/GameElementLightPoint"),b=e("./Logic3007DefendStatusOrdinary"),S=e("./Logic3007DefendStatusCD"),P=e("../../../display/GameDisplayBody005"),B=e("../GameElementBodyCtxDmgType"),C=e("../../common/GameCD"),M=e("../GameSizeMarkRS"),x="Logic3007";class V extends d.default{constructor(){super(),this.amStatusOrdinary=p.default.Pop(x,this),this.amStatusPower=y.default.Pop(x,this),this.amStatusJumped=_.default.Pop(x,this),this.amStatusCD=m.default.Pop(x,this),this.hmStatusOrdinary=b.default.Pop(x,this),this.hmStatusCD=S.default.Pop(x,this)}static Pop(e,t,o){let i=a.default.Pop(V._t,e);return i.relBody=t,i.args=o,i.AMEnterStatus(i.amStatusOrdinary),i.HMEnterStatus(i.hmStatusOrdinary),i}AMEnterStatus(e){let t=this.amCurrStatus;this.amCurrStatus=e,t&&t.OnExit(),this.amCurrStatus&&this.amCurrStatus.OnEnter()}HMEnterStatus(e){let t=this.hmCurrStatus;this.hmCurrStatus=e,t&&t.OnExit(),this.hmCurrStatus&&this.hmCurrStatus.OnEnter()}OnInit(){this.relBody.commonCD=C.default.Pop(x,this.args.defendCD),this.relBody.relState.AddEle(g.default.Pop(x,this.relBody.id,this.relBody.commonCache.colorMain,u.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,x);e.gravityScale=V.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(x,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,x);let o=a.default.Pop(a.default.typeCircleShape,x),r=a.default.Pop(a.default.typeccVec2,x);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(x,t,h.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,x);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,x),c=a.default.Pop(a.default.typeccVec2,x);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(x,n,h.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.hmCurrStatus.OnDmg(e)}OnConcatA(e){this.amCurrStatus.OnConcatA(e)}OnConcatB(e){this.amCurrStatus.OnConcatB(e)}OnTimeStep(e){this.amCurrStatus.OnTimeStep(e),this.hmCurrStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),M.default.PlayEffHitByConcat(x,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,f.default.Pop(x,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:B.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.amCurrStatus.OnTarget(t)}}}OnDestory(){this.Logic3007OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(x,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3007OnDestory(){}}o.default=V,V.GRAVITY_SCALE=1,V._t=new r.default({instantiate:()=>new V,onPop:()=>{},onPush:()=>{},tag:x}),V.rs=u.default.Pop(x,{logicCode:3007,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),defendCD:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=V.Pop(x,e,t)},instDisplay:(e,t,o)=>{o.push(P.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,x),aditionalEff:()=>a.default.Pop(a.default.typeArray,x),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,x);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody005":"GameDisplayBody005","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameCD":"GameCD","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3007DefendStatusCD":"Logic3007DefendStatusCD","./Logic3007DefendStatusOrdinary":"Logic3007DefendStatusOrdinary","./Logic3007StatusCD":"Logic3007StatusCD","./Logic3007StatusJumped":"Logic3007StatusJumped","./Logic3007StatusOrdinary":"Logic3007StatusOrdinary","./Logic3007StatusPower":"Logic3007StatusPower"}],Logic3008Args:[function(e,t,o){"use strict";cc._RF.push(t,"719ef77amtJ/7KE7SU2SQYE","Logic3008Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3008StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"a2fbepEHzRCFLaJS1Jpb85Z","Logic3008StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3008Status"),s="Logic3008StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3008Status":"Logic3008Status"}],Logic3008StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"91164kIUfNLG57faLTAfpSo","Logic3008StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../GameCommon"),n=e("../../common/GameElementPart"),l=e("../GameElementBodyCtxDmgType"),c=e("./Logic3008"),d=e("./Logic3008Status"),u="Logic3008StatusJumped";class m extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.jumpedMS=0;let e=i.default.Pop(i.default.typeB2Vec2,u),t=this.relMachine.relBody.relState.player.commonFootPos.x+this.relMachine.args.atkArea+this.relMachine.args.bodyRadius;e.x=t,e.x*=r.default.mgrUI._sizePerPixel,e.y=s.default.GROUND_Y*r.default.mgrUI._sizePerPixel,this.relMachine.relBody.commonBody.b2Body.SetPosition(e),this.relMachine.relBody.commonAnim=d.default.ANIM_JUMPED;let o=i.default.Pop(i.default.typeB2Vec2,u);o.x=((this.target.commonFootPos.x-t+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,o.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*c.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),n.default.BoomForBody(u,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.args.bodyRadius,this.relMachine.relBody.commonBody.b2Body.GetPosition().x/r.default.mgrUI._sizePerPixel,this.relMachine.relBody.commonBody.b2Body.GetPosition().y/r.default.mgrUI._sizePerPixel,0,-1)}OnTimeStep(e){this.jumpedMS+=e}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==l.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../common/GameElementPart":"GameElementPart","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3008":"Logic3008","./Logic3008Status":"Logic3008Status"}],Logic3008StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"1e61bA30vNLD5oqTQrHssuS","Logic3008StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3008Status"),n="Logic3008StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3008Status":"Logic3008Status"}],Logic3008StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"e5b9f1opA5CLaTGhB5JC8sR","Logic3008StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementPart"),n=e("../DefineVoice"),l=e("./Logic3008Status"),c="Logic3008StatusPower";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(n.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=l.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,c);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e),s.default.BoomForBody(c,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.args.bodyRadius,this.relMachine.relBody.commonCenterPos.x,this.relMachine.relBody.commonCenterPos.y,0,-1)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementPart":"GameElementPart","../DefineVoice":"DefineVoice","./Logic3008Status":"Logic3008Status"}],Logic3008Status:[function(e,t,o){"use strict";cc._RF.push(t,"a5878hc1a5HQIa6BdJzuIWV","Logic3008Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3008:[function(e,t,o){"use strict";cc._RF.push(t,"31369zwu9xI6ZJAPktYyxRm","Logic3008"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3008StatusCD"),h=e("./Logic3008StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3008StatusPower"),g=e("./Logic3008StatusJumped"),b=e("../../common/GameElementLightPoint"),S=e("../../../display/GameDisplayBody006"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3008";class M extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(C,this),this.statusPower=_.default.Pop(C,this),this.statusJumped=g.default.Pop(C,this),this.statusCD=p.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(C,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3008OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3008OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=m.default.Pop(C,{logicCode:3008,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(S.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody006":"GameDisplayBody006","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3008StatusCD":"Logic3008StatusCD","./Logic3008StatusJumped":"Logic3008StatusJumped","./Logic3008StatusOrdinary":"Logic3008StatusOrdinary","./Logic3008StatusPower":"Logic3008StatusPower"}],Logic3009Args:[function(e,t,o){"use strict";cc._RF.push(t,"b14ed1MczlFHKuRsTA7HHdE","Logic3009Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3009StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"fa8efwWeQNKk4+H6dIWqU1z","Logic3009StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3009Status"),s="Logic3009StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3009Status":"Logic3009Status"}],Logic3009StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"3f8a515ZMlJpb9IqNH3VA5A","Logic3009StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3009"),l=e("./Logic3009Status"),c="Logic3009StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3009":"Logic3009","./Logic3009Status":"Logic3009Status"}],Logic3009StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"d2b489sBl9A5ZZnyC45hxUy","Logic3009StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3009Status"),n="Logic3009StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3009Status":"Logic3009Status"}],Logic3009StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"84787FDz8tCi7LB8NhoSh/V","Logic3009StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3009Status"),l="Logic3009StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3009Status":"Logic3009Status"}],Logic3009Status:[function(e,t,o){"use strict";cc._RF.push(t,"65992RweBhAhoGiT38VLYag","Logic3009Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3009:[function(e,t,o){"use strict";cc._RF.push(t,"9b6ab9ShrdDEYYn8MAin6ee","Logic3009"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3009StatusCD"),h=e("./Logic3009StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3009StatusPower"),g=e("./Logic3009StatusJumped"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3009";class M extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(C,this),this.statusPower=_.default.Pop(C,this),this.statusJumped=g.default.Pop(C,this),this.statusCD=p.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this._cdRecovery=this.args.cdRecovery,this.relBody.relState.AddEle(S.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(C,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){if(this._cdRecovery-=e,this._cdRecovery<=0){let e=this.args.countRecovery*this.relBody.commonArgsPower;this.relBody.commonHpCurrent+=e,this.relBody.commonHpCurrent=Math.min(this.relBody.commonHpMax,this.relBody.commonHpCurrent),d.default.PopForCure(C,e,this.relBody),this._cdRecovery=this.args.cdRecovery}this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3009OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3009OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=m.default.Pop(C,{logicCode:3009,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),countRecovery:Number.parseFloat(e.lv_inc_10),cdRecovery:Number.parseFloat(e.prop_11)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3009StatusCD":"Logic3009StatusCD","./Logic3009StatusJumped":"Logic3009StatusJumped","./Logic3009StatusOrdinary":"Logic3009StatusOrdinary","./Logic3009StatusPower":"Logic3009StatusPower"}],Logic3010Args:[function(e,t,o){"use strict";cc._RF.push(t,"235ecdwKslMF6f7tJQG3U/Q","Logic3010Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3010:[function(e,t,o){"use strict";cc._RF.push(t,"b6151Od67BJKK1XMBNQKfTZ","Logic3010"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../../common/GameElementPart"),p=e("../GameElementBodyCtxDmgType"),h=e("../../../display/GameDisplayBody013"),f=e("../GameSizeMarkRS"),y="Logic3010";class _ extends l.default{constructor(){super(),this.dmgAbleCount=1,this.vecPre=a.default.Pop(a.default.typeB2Vec2,y)}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.timeLess=this.args.deadTime,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typeCircleShape,y);o.Set(a.default.Pop(a.default.typeccVec2,y),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,d.default.BODY_BULLET_GROUND);let r=this.relBody.commonArgsInitVec.y*s.default.mgrUI._sizePerPixel*1e3/Math.abs(this.relBody.relState.b2Gravity)*2e3,n=this.args.xOffset/r;this.relBody.commonArgsInitVec.x+=n;let l=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(l),this.relBody.commonBody.b2Body.SetAngularVelocity(2*Math.PI/1)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.timeLess-=e,this.timeLess<=0)return void this.relBody.relState.RemEle(this.relBody);this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y;let t=this.relBody.commonBody.b2Body.GetLinearVelocity();if(0<this.relBody.listConcatedGround.length&&this.vecPre.y<0)if(Math.abs(.1*this.relBody.commonArgsInitVec.x)<Math.abs(this.vecPre.x)){let e=a.default.Pop(a.default.typeB2Vec2,y);e.x=this.vecPre.x*this.args.speedMul,e.y=-this.vecPre.y*this.args.speedMul,this.relBody.commonBody.b2Body.SetLinearVelocity(e);let t=this.relBody.commonBody.b2Body.GetAngularVelocity();this.relBody.commonBody.b2Body.SetAngularVelocity(t*this.args.speedMul)}else{let e=a.default.Pop(a.default.typeB2Vec2,y);e.x=.001,e.y=.001,this.relBody.commonBody.b2Body.SetLinearVelocity(e)}if(this.vecPre.x=t.x,this.vecPre.y=t.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;f.default.PlayEffHitByConcat(y,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,u.default.Pop(y,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:p.default.equipment})),this.dmgAbleCount--,0==this.dmgAbleCount&&this.relBody.relState.RemEle(this.relBody)}}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),m.default.BoomForBody(y,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=c.default.Pop(y,{logicCode:3010,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),deadTime:Number.parseFloat(e.prop_2),xOffset:Number.parseFloat(e.prop_3),speedMul:Number.parseFloat(e.prop_4)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,y),aditionalEff:()=>a.default.Pop(a.default.typeArray,y),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.deathOgg),o}})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3011Args:[function(e,t,o){"use strict";cc._RF.push(t,"d9d33/X7jxJlqmTvhGMTnEK","Logic3011Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3011StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"951e1sxFmVIO61ENByj+BGw","Logic3011StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3011Status"),s="Logic3011StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3011Status":"Logic3011Status"}],Logic3011StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"58e1a7jGUtHUqDaMO3JKPEE","Logic3011StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("../GameSizeMarkRS"),l=e("./Logic3011"),c=e("./Logic3011Status"),d="Logic3011StatusJumped";class u extends c.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(u._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=c.default.ANIM_JUMPED,this.jumpedMS=0;let e=i.default.Pop(i.default.typeB2Vec2,d);e.x=this.target.commonFootPos.x,e.y=this.target.commonHeadPos.y-.5*this.relMachine.relBody.relState.b2Gravity*l.default.GRAVITY_SCALE*Math.pow(this.relMachine.args.atkTime/1e3,2)/r.default.mgrUI._sizePerPixel,e.x*=r.default.mgrUI._sizePerPixel,e.y*=r.default.mgrUI._sizePerPixel,this.relMachine.relBody.commonBody.b2Body.SetPosition(e);let t=i.default.Pop(i.default.typeB2Vec2,d);t.x=this.target.commonBehaviour.b2GetSpeedX(),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.UpdatePosData(),n.default.PlayEffTransition(d,this.relMachine.relBody)}OnTimeStep(e){this.jumpedMS+=e}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=u,u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3011":"Logic3011","./Logic3011Status":"Logic3011Status"}],Logic3011StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"7ed30AluANNUom9gFJEuAqj","Logic3011StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3011Status"),n="Logic3011StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3011Status":"Logic3011Status"}],Logic3011StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"938df8kdbVFOJ1NULEobCkd","Logic3011StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementPart"),n=e("../DefineVoice"),l=e("./Logic3011Status"),c="Logic3011StatusPower";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(n.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=l.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,c);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e),s.default.BoomForBody(c,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.args.bodyRadius,this.relMachine.relBody.commonCenterPos.x,this.relMachine.relBody.commonCenterPos.y,0,-1)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementPart":"GameElementPart","../DefineVoice":"DefineVoice","./Logic3011Status":"Logic3011Status"}],Logic3011Status:[function(e,t,o){"use strict";cc._RF.push(t,"e7bb7jDcxdK5KakJtHxt+DZ","Logic3011Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3011:[function(e,t,o){"use strict";cc._RF.push(t,"f5d8cu0wb5JSbtIKXm7jKKA","Logic3011"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3011StatusCD"),h=e("./Logic3011StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3011StatusPower"),g=e("./Logic3011StatusJumped"),b=e("../../common/GameElementLightPoint"),S=e("../../../display/GameDisplayBody007"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3011";class M extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(C,this),this.statusPower=_.default.Pop(C,this),this.statusJumped=g.default.Pop(C,this),this.statusCD=p.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(C,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.UpdatePosData();for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&this.currStatus==this.statusJumped&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}UpdatePosData(){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius}OnDestory(){this.Logic3011OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3011OnDestory(){}}o.default=M,M.GRAVITY_SCALE=.5,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=m.default.Pop(C,{logicCode:3011,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(S.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody007":"GameDisplayBody007","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3011StatusCD":"Logic3011StatusCD","./Logic3011StatusJumped":"Logic3011StatusJumped","./Logic3011StatusOrdinary":"Logic3011StatusOrdinary","./Logic3011StatusPower":"Logic3011StatusPower"}],Logic3012Args:[function(e,t,o){"use strict";cc._RF.push(t,"9e4d4dLF+RLPrn3FImTojyg","Logic3012Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3012StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"13d95bXezxHvre5PSS1a9c+","Logic3012StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3012Status"),s="Logic3012StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3012Status":"Logic3012Status"}],Logic3012StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"a8733RfToBDgp5jgnjz7gEw","Logic3012StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3012Status"),n="Logic3012StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3012Status":"Logic3012Status"}],Logic3012StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"e5437bK46hIrp4SqAycVdXN","Logic3012StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../DefineVoice"),c=e("../GameElementBody"),d=e("./Logic3012"),u=e("./Logic3012Status"),m="Logic3012StatusPower";class p extends u.default{constructor(){super()}static Pop(e,t){let o=a.default.Pop(p._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),n.default.inst.VoiceSet(l.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=u.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=a.default.Pop(a.default.typeccVec2,m);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0){for(let e=0;e<this.relMachine.args.count;e++){let e=a.default.Pop(a.default.typeB2Vec2,m);e.x=(this._target.commonCenterPos.x-this.relMachine.relBody.commonCenterPos.x+this._target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3/s.default.mgrUI._sizePerPixel)/this.relMachine.args.atkTime,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*d.default.GRAVITY_SCALE/s.default.mgrUI._sizePerPixel/1e3,e.x*=1+this.relMachine.args.random*i.default.RandomLowerToUpper(),e.y*=1+this.relMachine.args.random*i.default.RandomLowerToUpper();let t=c.default.PopForCall(m,{posX:this.relMachine.relBody.commonCenterPos.x,posY:this.relMachine.relBody.commonCenterPos.y,vecX:e.x,vecY:e.y,cfgId:this.relMachine.args.bullet,camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(t)}this.relMachine.EnterStatus(this.relMachine.statusCD)}}OnTarget(e){this._target=e}}o.default=p,p._t=new r.default({instantiate:()=>new p,onPop:()=>{},onPush:()=>{},tag:m}),cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","./Logic3012":"Logic3012","./Logic3012Status":"Logic3012Status"}],Logic3012Status:[function(e,t,o){"use strict";cc._RF.push(t,"04c14F/pd5EqpN8Im0x91mX","Logic3012Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3012:[function(e,t,o){"use strict";cc._RF.push(t,"543afnT51dNYr5+cHBULOtu","Logic3012"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3012StatusCD"),h=e("./Logic3012StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3012StatusPower"),g=e("../../../display/GameDisplayBody002"),b=e("../../common/GameElementLightPoint"),S=e("../GameElementBodyCtxDmgType"),P=e("../GameSizeMarkRS"),B="Logic3012";class C extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(B,this),this.statusPower=_.default.Pop(B,this),this.statusCD=p.default.Pop(B,this)}static Pop(e,t,o){let i=a.default.Pop(C._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(B,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,B);e.gravityScale=C.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(B,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,B);let o=a.default.Pop(a.default.typeCircleShape,B),r=a.default.Pop(a.default.typeccVec2,B);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(B,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,B);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,B),c=a.default.Pop(a.default.typeccVec2,B);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(B,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(B,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),P.default.PlayEffHitByConcat(B,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(B,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3012OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(B,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3012OnDestory(){}}o.default=C,C.GRAVITY_SCALE=1,C._t=new r.default({instantiate:()=>new C,onPop:()=>{},onPush:()=>{},tag:B}),C.rs=m.default.Pop(B,{logicCode:3012,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),bullet:Number.parseFloat(e.prop_10),count:Number.parseFloat(e.prop_11),random:Number.parseFloat(e.prop_12)}),init:(e,t)=>{e.commonBehaviour=C.Pop(B,e,t)},instDisplay:(e,t,o)=>{o.push(g.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.bullet),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,B),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3012StatusCD":"Logic3012StatusCD","./Logic3012StatusOrdinary":"Logic3012StatusOrdinary","./Logic3012StatusPower":"Logic3012StatusPower"}],Logic3013Args:[function(e,t,o){"use strict";cc._RF.push(t,"707c49IMjxKKZm0vChEZRhB","Logic3013Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3013:[function(e,t,o){"use strict";cc._RF.push(t,"6597cD7owhIU7pw0WptBUyj","Logic3013"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../GameElementBodyBehaviour"),l=e("../GameElementBodyBehaviourRS"),c=e("../../GameCtxB2BodyFixtureTypeRS"),d=e("../../../display/GameDisplayBody008"),u="Logic3013";class m extends n.default{constructor(){super(),this._curedSet=a.default.Pop(a.default.typeSet,u)}static Pop(e,t,o){let i=a.default.Pop(m._t,e);return i.relBody=t,i.args=o,i}OnInit(){this._life=this.args.life,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,u);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=0,this.relBody.commonBody=this.relBody.BodyCreate(u,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,u);let o=a.default.Pop(a.default.typeCircleShape,u),r=a.default.Pop(a.default.typeccVec2,u);r.y=this.args.bodyRadius/2,r.mulSelf(s.default.mgrUI._sizePerPixel),o.Set(r,this.args.bodyRadius/2*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(u,t,c.default.AREA);const n=a.default.Pop(a.default.typeFixtureDef,u);let l=a.default.Pop(a.default.typeCircleShape,u),d=a.default.Pop(a.default.typeccVec2,u);d.x=-this.args.bodyRadius/2,d.y=this.args.bodyRadius/2,d.mulSelf(s.default.mgrUI._sizePerPixel),l.Set(d,this.args.bodyRadius/2*s.default.mgrUI._sizePerPixel),n.shape=l,this.relBody.commonBody.FixtureCreate(u,n,c.default.AREA);const m=a.default.Pop(a.default.typeFixtureDef,u);let p=a.default.Pop(a.default.typeCircleShape,u),h=a.default.Pop(a.default.typeccVec2,u);h.x=this.args.bodyRadius/2,h.y=this.args.bodyRadius/2,h.mulSelf(s.default.mgrUI._sizePerPixel),p.Set(h,this.args.bodyRadius/2*s.default.mgrUI._sizePerPixel),m.shape=p,this.relBody.commonBody.FixtureCreate(u,m,c.default.AREA)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this._life-=e,this._life<0)this.relBody.relState.RemEle(this.relBody);else{this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y;for(let e=0;e<this.relBody.listConcatedBodyFriendNoBullet.length;e++){let t=this.relBody.listConcatedBodyFriendNoBullet[e].relFixture.relBody.relEle;this._curedSet.has(t.id)||(this._curedSet.add(t.id),t.commonHpMax+=this.args.cureCount*this.relBody.commonArgsPower,t.commonEvterCureWithEff.Call(this.args.cureCount*t.commonArgsPower))}}}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody)}}m._t=new r.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),function(e){e.rs=l.default.Pop(u,{logicCode:3013,cfgToArgs:e=>({bodyRadius:Number.parseFloat(e.prop_0),life:Number.parseFloat(e.prop_1),cureCount:Number.parseFloat(e.lv_inc_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(u,t,o)},instDisplay:(e,t,o)=>{o.push(d.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,u),aditionalEff:()=>a.default.Pop(a.default.typeArray,u),aditionalVoice:()=>a.default.Pop(a.default.typeArray,u)})}(m||(m={})),o.default=m,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody008":"GameDisplayBody008","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS"}],Logic3014Args:[function(e,t,o){"use strict";cc._RF.push(t,"ebd45zlFNhLCpa2ClGkVSDC","Logic3014Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3014:[function(e,t,o){"use strict";cc._RF.push(t,"a792bmYU7hIBL+LGkBoTz+d","Logic3014"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/basic/UtilString"),s=e("../../../../frame/global/Jiang"),n=e("../GameElementBody"),l=e("../GameElementBodyBehaviourRS"),c=e("../logic_3001/Logic3001"),d="Logic3014";class u extends c.default{static Pop(e,t,o){let a=i.default.Pop(u._Logic3014t,e);return a.Logic3014Args=o,a.relBody=t,a.args=o,a.EnterStatus(a.statusOrdinary),a}Logic3001OnDestory(){let e=Math.PI/3/this.Logic3014Args.listSplit.length,t=-this.relBody.relState.b2Gravity*c.default.GRAVITY_SCALE/s.default.mgrUI._sizePerPixel/1e3/2;for(let o=0;o<this.Logic3014Args.listSplit.length;o++){let i=2*Math.PI/3-o*e,a=n.default.PopForCall(d,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:Math.cos(i)*t,vecY:Math.sin(i)*t,cfgId:this.Logic3014Args.listSplit[o],camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(a)}}}o.default=u,u._Logic3014t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),u.rs=l.default.Pop(d,{logicCode:3014,cfgToArgs:e=>Object.assign(Object.assign({},c.default.rs.cfgToArgs(e)),{listSplit:r.default.ParseStrToListNum(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=u.Pop(d,e,t)},instDisplay:c.default.rs.instDisplay,boardDisplay:c.default.rs.boardDisplay,atkGetter:c.default.rs.atkGetter,hpGetter:c.default.rs.hpGetter,sizeGetter:c.default.rs.sizeGetter,aditionalBody:(e,t)=>{let o=i.default.Pop(i.default.typeArray,d);return o.push(...t.listSplit),o},aditionalEff:()=>i.default.Pop(i.default.typeArray,d),aditionalVoice:()=>i.default.Pop(i.default.typeArray,d)}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../GameElementBody":"GameElementBody","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../logic_3001/Logic3001":"Logic3001"}],Logic3015Args:[function(e,t,o){"use strict";cc._RF.push(t,"38779TeJMdLmKg9CFl0HZOV","Logic3015Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3015StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"5caa4YgLKpOybatkfLIpFwU","Logic3015StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3015Status"),s="Logic3015StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3015Status":"Logic3015Status"}],Logic3015StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"664ddbiimVMWrrzPQzwzIlX","Logic3015StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3015"),l=e("./Logic3015Status"),c="Logic3015StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3015":"Logic3015","./Logic3015Status":"Logic3015Status"}],Logic3015StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"342cafhWeRKua/SsmQxgEAd","Logic3015StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3015Status"),n="Logic3015StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3015Status":"Logic3015Status"}],Logic3015StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"3a183IaOL1JwoSHXXl6q6sm","Logic3015StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3015Status"),l="Logic3015StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3015Status":"Logic3015Status"}],Logic3015Status:[function(e,t,o){"use strict";cc._RF.push(t,"778b13Ua99G5YPue0/4vhIJ","Logic3015Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3015:[function(e,t,o){"use strict";cc._RF.push(t,"6159avFO5pCdL5XV3Kc+uGX","Logic3015"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilString"),n=e("../../../../frame/global/Jiang"),l=e("../../../display/GameDisplayHp"),c=e("../../../view/voice_ogg/VoiceOggViewState"),d=e("../../common/GameElementPart"),u=e("../../common/GameElementTxt"),m=e("../GameElementBody"),p=e("../GameElementBodyBehaviour"),h=e("../GameElementBodyBehaviourRS"),f=e("./Logic3015StatusCD"),y=e("./Logic3015StatusOrdinary"),_=e("../../GameCtxB2BodyFixtureTypeRS"),g=e("../GameElementBodyCtxDmg"),b=e("./Logic3015StatusPower"),S=e("./Logic3015StatusJumped"),P=e("../../../display/GameDisplayBody002"),B=e("../../common/GameElementLightPoint"),C=e("../../../../frame/basic/UtilMath"),M=e("../GameElementBodyCtxDmgType"),x=e("../../common/GameCD"),V=e("../GameSizeMarkRS"),I="Logic3015";class O extends p.default{constructor(){super(),this.statusOrdinary=y.default.Pop(I,this),this.statusPower=b.default.Pop(I,this),this.statusJumped=S.default.Pop(I,this),this.statusCD=f.default.Pop(I,this)}static Pop(e,t,o){let i=a.default.Pop(O._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.commonCD=x.default.Pop(I,this.args.cdSkill),this.relBody.relState.AddEle(B.default.Pop(I,this.relBody.id,this.relBody.commonCache.colorMain,h.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,I);e.gravityScale=O.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(I,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,I);let o=a.default.Pop(a.default.typeCircleShape,I),r=a.default.Pop(a.default.typeccVec2,I);r.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(I,t,_.default.BODY);const s=a.default.Pop(a.default.typeFixtureDef,I);s.density=0;let l=a.default.Pop(a.default.typeCircleShape,I),c=a.default.Pop(a.default.typeccVec2,I);c.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*n.default.mgrUI._sizePerPixel),s.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(I,s,_.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*n.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){if(this.relBody.commonCD.currStatus.OnTryCall()){let e=Math.PI/3/this.args.listSplit.length,t=-this.relBody.relState.b2Gravity*O.GRAVITY_SCALE/n.default.mgrUI._sizePerPixel/1e3/2;for(let o=0;o<this.args.listSplit.length;o++){let i=2*Math.PI/3-o*e*(1+C.default.RandomLowerToUpper()*this.args.random),a=m.default.PopForCall(I,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:Math.cos(i)*t*(1+C.default.RandomLowerToUpper()*this.args.random),vecY:Math.sin(i)*t*(1+C.default.RandomLowerToUpper()*this.args.random),cfgId:this.args.listSplit[o],camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(a)}}this.currStatus.OnDmg(e),u.default.PopForDmg(I,e,this.relBody.relState),c.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),V.default.PlayEffHitByConcat(I,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,g.default.Pop(I,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:M.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3015OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),d.default.BoomForBody(I,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),c.default.inst.VoiceSet(this.args.deathOgg)}Logic3015OnDestory(){}}o.default=O,O.GRAVITY_SCALE=1,O._t=new r.default({instantiate:()=>new O,onPop:()=>{},onPush:()=>{},tag:I}),O.rs=h.default.Pop(I,{logicCode:3015,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),listSplit:s.default.ParseStrToListNum(e.prop_10),random:Number.parseFloat(e.prop_11),msUp:Number.parseFloat(e.prop_12),cdSkill:Number.parseFloat(e.prop_13)}),init:(e,t)=>{e.commonBehaviour=O.Pop(I,e,t)},instDisplay:(e,t,o)=>{o.push(P.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(l.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(...t.listSplit),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,I),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameCD":"GameCD","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3015StatusCD":"Logic3015StatusCD","./Logic3015StatusJumped":"Logic3015StatusJumped","./Logic3015StatusOrdinary":"Logic3015StatusOrdinary","./Logic3015StatusPower":"Logic3015StatusPower"}],Logic3016Args:[function(e,t,o){"use strict";cc._RF.push(t,"2d144bggUNGrZCaURW7FH+I","Logic3016Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3016:[function(e,t,o){"use strict";cc._RF.push(t,"a4b3dLkR1JIlppfaCcnlyYN","Logic3016"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../GameElementBodyCtxDmgType"),p=e("../../../display/GameDisplayBody001"),h=e("../../common/GameElementEff"),f=e("../GameSizeMarkRS"),y="Logic3016";class _ extends l.default{constructor(){super(),this.effAbleCount=1,this._isFloat=!1}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typeCircleShape,y);o.Set(a.default.Pop(a.default.typeccVec2,y),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,d.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(!this._isFloat&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<0){this._isFloat=!0,this.relBody.commonBody.b2Body.SetGravityScale(0);let e=a.default.Pop(a.default.typeB2Vec2,y);e.x=this.relBody.relState.player.commonBehaviour.b2GetSpeedX(),e.y=-this.relBody.commonArgsInitVec.len()/10,this.relBody.commonBody.b2Body.SetLinearVelocity(e)}if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.effAbleCount)return;if(f.default.PlayEffHitByConcat(y,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,u.default.Pop(y,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:m.default.equipment})),this.effAbleCount--,0==this.effAbleCount)return void this.relBody.relState.RemEle(this.relBody)}if(this._isFloat&&0<this.relBody.listConcatedBodyFriendNoBullet.length){let e=this.relBody.listConcatedBodyFriendNoBullet[0];if(0==this.effAbleCount)return;if(e.relFixture.relBody.relEle.commonEvterCureWithEff.Call(this.relBody.commonInfluence),this.effAbleCount--,0==this.effAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),this.relBody.relState.AddEle(h.default.PopForXYStatic(y,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,1,this.args.effDismiss,this.relBody.commonCache.colorMain)),n.default.inst.VoiceSet(this.args.deathOgg)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=c.default.Pop(y,{logicCode:3016,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),effDismiss:Number.parseFloat(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{o.push(p.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,y),aditionalEff:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.effDismiss),o},aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.deathOgg),o}})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody001":"GameDisplayBody001","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementEff":"GameElementEff","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3017Args:[function(e,t,o){"use strict";cc._RF.push(t,"7271aqhfKBLAocYqhqBN7ut","Logic3017Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3017DefendStatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"bf30fbCMEVOcr3BFQXa9n8e","Logic3017DefendStatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3017DefendStatus");class s extends r.default{constructor(){super(),this.cd=0,this.enteredMS=0}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonCD.Enter(this.relMachine.relBody.commonCD.statusIng),this.enteredMS=0,this.cd=this.relMachine.args.defendCD}OnTimeStep(e){this.enteredMS+=e,this.cd-=e,this.cd<=0&&this.relMachine.HMEnterStatus(this.relMachine.hmStatusOrdinary)}OnDmg(e){this.relMachine.relBody.commonCD.Enter(this.relMachine.relBody.commonCD.statusIng),this.cd=this.relMachine.args.defendCD}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"Logic3017DefendStatusCD"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3017DefendStatus":"Logic3017DefendStatus"}],Logic3017DefendStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"89b949+D4RD8JUVI5TgS4KE","Logic3017DefendStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3017DefendStatus");class s extends r.default{constructor(){super(),this.enteredMS=0}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnEnter(){this.enteredMS=0,this.relMachine.relBody.commonShield+=this.relMachine.relBody.commonArgsPower*this.relMachine.args.shieldCount}OnDmg(e){this.relMachine.HMEnterStatus(this.relMachine.hmStatusCD)}OnTimeStep(e){this.enteredMS+=e}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"Logic3017DefendStatusOrdinary"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3017DefendStatus":"Logic3017DefendStatus"}],Logic3017DefendStatus:[function(e,t,o){"use strict";cc._RF.push(t,"1420cGJRRVBlqblZj2eWIkI","Logic3017DefendStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnDmg(e){}OnTimeStep(e){}},cc._RF.pop()},{}],Logic3017StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"8872d7T/S9IZrQO6VnNHxgk","Logic3017StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3017Status"),s="Logic3017StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.AMEnterStatus(this.relMachine.amStatusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3017Status":"Logic3017Status"}],Logic3017StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"4434fINGB1D9oX0pylFejxO","Logic3017StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3017"),l=e("./Logic3017Status"),c="Logic3017StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3017":"Logic3017","./Logic3017Status":"Logic3017Status"}],Logic3017StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"cc76e09DjdDgr01R29gc6SL","Logic3017StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3017Status"),n="Logic3017StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.AMEnterStatus(this.relMachine.amStatusPower),this.relMachine.amCurrStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3017Status":"Logic3017Status"}],Logic3017StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"25ae6g0RPlIsKlaUkzCRgOT","Logic3017StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3017Status"),l="Logic3017StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.amStatusJumped.target=this._target,this.relMachine.AMEnterStatus(this.relMachine.amStatusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3017Status":"Logic3017Status"}],Logic3017Status:[function(e,t,o){"use strict";cc._RF.push(t,"6d801jlWt9HT4ajKUlUmHXn","Logic3017Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3017:[function(e,t,o){"use strict";cc._RF.push(t,"8cbcbN+EkxOzoTJY73DVdHj","Logic3017"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3017StatusCD"),h=e("./Logic3017StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3017StatusPower"),g=e("./Logic3017StatusJumped"),b=e("../../common/GameElementLightPoint"),S=e("./Logic3017DefendStatusOrdinary"),P=e("./Logic3017DefendStatusCD"),B=e("../../../display/GameDisplayBody010"),C=e("../GameElementBodyCtxDmgType"),M=e("../../common/GameCD"),x=e("../GameSizeMarkRS"),V=e("../../../../frame/basic/UtilMath"),I="Logic3017";class O extends u.default{constructor(){super(),this.shieldOnedMS=0,this.shieldOffedMS=0}static Pop(e,t,o){let i=a.default.Pop(O._t,e);return i.relBody=t,i.args=o,i.relBody.commonCD=M.default.Pop(I,i.args.defendCD),i.amStatusOrdinary=h.default.Pop(I,i),i.amStatusPower=_.default.Pop(I,i),i.amStatusJumped=g.default.Pop(I,i),i.amStatusCD=p.default.Pop(I,i),i.hmStatusOrdinary=S.default.Pop(I,i),i.hmStatusCD=P.default.Pop(I,i),i.AMEnterStatus(i.amStatusOrdinary),i.HMEnterStatus(i.hmStatusOrdinary),i}AMEnterStatus(e){let t=this.amCurrStatus;this.amCurrStatus=e,t&&t.OnExit(),this.amCurrStatus&&this.amCurrStatus.OnEnter()}HMEnterStatus(e){let t=this.hmCurrStatus;this.hmCurrStatus=e,t&&t.OnExit(),this.hmCurrStatus&&this.hmCurrStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(I,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,I);e.gravityScale=O.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(I,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,I);let o=a.default.Pop(a.default.typeCircleShape,I),r=a.default.Pop(a.default.typeccVec2,I);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(I,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,I);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,I),c=a.default.Pop(a.default.typeccVec2,I);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(I,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){if(0<this.relBody.commonShield){let t=Math.min(this.relBody.commonShield,e.dmg);this.relBody.commonShield-=t,e.dmg-=t,d.default.PopForTips(I,`\u62b5\u6d88 ${V.default.ParseNumToKMBTAABB(t,Math.ceil)}`,e.posX,e.posY,this.relBody)}this.hmCurrStatus.OnDmg(e),this.amCurrStatus.OnDmg(e),0<e.dmg&&d.default.PopForDmg(I,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.amCurrStatus.OnConcatA(e)}OnConcatB(e){this.amCurrStatus.OnConcatB(e)}OnTimeStep(e){0<this.relBody.commonShield?(this.shieldOffedMS=0,this.shieldOnedMS+=e):(this.shieldOnedMS=0,this.shieldOffedMS+=e),this.amCurrStatus.OnTimeStep(e),this.hmCurrStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),x.default.PlayEffHitByConcat(I,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(I,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:C.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.amCurrStatus.OnTarget(t)}}}OnDestory(){this.Logic3017OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(I,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3017OnDestory(){}}o.default=O,O.GRAVITY_SCALE=1,O._t=new r.default({instantiate:()=>new O,onPop:()=>{},onPush:()=>{},tag:I}),O.rs=m.default.Pop(I,{logicCode:3017,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),defendCD:Number.parseFloat(e.prop_10),shieldCount:Number.parseFloat(e.lv_inc_11)}),init:(e,t)=>{e.commonBehaviour=O.Pop(I,e,t)},instDisplay:(e,t,o)=>{o.push(B.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,I),aditionalEff:()=>a.default.Pop(a.default.typeArray,I),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody010":"GameDisplayBody010","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameCD":"GameCD","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3017DefendStatusCD":"Logic3017DefendStatusCD","./Logic3017DefendStatusOrdinary":"Logic3017DefendStatusOrdinary","./Logic3017StatusCD":"Logic3017StatusCD","./Logic3017StatusJumped":"Logic3017StatusJumped","./Logic3017StatusOrdinary":"Logic3017StatusOrdinary","./Logic3017StatusPower":"Logic3017StatusPower"}],Logic3018Args:[function(e,t,o){"use strict";cc._RF.push(t,"d8a243KFzhLC6M3Xl6zyenb","Logic3018Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3018StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"b8c22P7XiVMSJ34Og33P3ua","Logic3018StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3018Status"),s="Logic3018StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3018Status":"Logic3018Status"}],Logic3018StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"9438aSCqI9INJD5cVDNv4Hc","Logic3018StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3018"),l=e("./Logic3018Status"),c="Logic3018StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3018":"Logic3018","./Logic3018Status":"Logic3018Status"}],Logic3018StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"937edTmAepG25AMeX8EWnxz","Logic3018StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3018Status"),n="Logic3018StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3018Status":"Logic3018Status"}],Logic3018StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"44558XkqjJJOo2uE9Fw7EvZ","Logic3018StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3018Status"),l="Logic3018StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3018Status":"Logic3018Status"}],Logic3018Status:[function(e,t,o){"use strict";cc._RF.push(t,"3e059fcRiVCyJ6s5NL6JmXo","Logic3018Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3018:[function(e,t,o){"use strict";cc._RF.push(t,"a8d40UUozFI27bChBHNhTrl","Logic3018"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilString"),n=e("../../../../frame/global/Jiang"),l=e("../../../display/GameDisplayHp"),c=e("../../../view/voice_ogg/VoiceOggViewState"),d=e("../../common/GameElementPart"),u=e("../../common/GameElementTxt"),m=e("../GameElementBody"),p=e("../GameElementBodyBehaviour"),h=e("../GameElementBodyBehaviourRS"),f=e("./Logic3018StatusCD"),y=e("./Logic3018StatusOrdinary"),_=e("../../GameCtxB2BodyFixtureTypeRS"),g=e("../GameElementBodyCtxDmg"),b=e("./Logic3018StatusPower"),S=e("./Logic3018StatusJumped"),P=e("../../../display/GameDisplayBody002"),B=e("../../common/GameElementLightPoint"),C=e("../../../../frame/basic/UtilMath"),M=e("../GameElementBodyCtxDmgType"),x=e("../../common/GameCD"),V=e("../GameSizeMarkRS"),I="Logic3018";class O extends p.default{constructor(){super(),this.statusOrdinary=y.default.Pop(I,this),this.statusPower=b.default.Pop(I,this),this.statusJumped=S.default.Pop(I,this),this.statusCD=f.default.Pop(I,this)}static Pop(e,t,o){let i=a.default.Pop(O._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.commonCD=x.default.Pop(I,this.args.cdDefend),this.relBody.relState.AddEle(B.default.Pop(I,this.relBody.id,this.relBody.commonCache.colorMain,h.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,I);e.gravityScale=O.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(I,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,I);let o=a.default.Pop(a.default.typeCircleShape,I),r=a.default.Pop(a.default.typeccVec2,I);r.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(I,t,_.default.BODY);const s=a.default.Pop(a.default.typeFixtureDef,I);s.density=0;let l=a.default.Pop(a.default.typeCircleShape,I),c=a.default.Pop(a.default.typeccVec2,I);c.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*n.default.mgrUI._sizePerPixel),s.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(I,s,_.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*n.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){if(this.relBody.commonCD.currStatus.OnTryCall()){let e=Math.PI/4/this.args.listSplit.length,t=-this.relBody.relState.b2Gravity*O.GRAVITY_SCALE/n.default.mgrUI._sizePerPixel/1e3*this.args.speedScale;for(let o=0;o<this.args.listSplit.length;o++){let i=3*Math.PI/4-o*e*(1+C.default.RandomLowerToUpper()*this.args.random),a=m.default.PopForCall(I,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:Math.cos(i)*t*(1+C.default.RandomLowerToUpper()*this.args.random)+this.relBody.relState.player.commonBehaviour.b2GetSpeedX()/n.default.mgrUI._sizePerPixel/1e3,vecY:Math.sin(i)*t*(1+C.default.RandomLowerToUpper()*this.args.random),cfgId:this.args.listSplit[o],camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(a)}}this.currStatus.OnDmg(e),u.default.PopForDmg(I,e,this.relBody.relState),c.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),V.default.PlayEffHitByConcat(I,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,g.default.Pop(I,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:M.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3018OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),d.default.BoomForBody(I,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),c.default.inst.VoiceSet(this.args.deathOgg)}Logic3018OnDestory(){}}o.default=O,O.GRAVITY_SCALE=1,O._t=new r.default({instantiate:()=>new O,onPop:()=>{},onPush:()=>{},tag:I}),O.rs=h.default.Pop(I,{logicCode:3018,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),listSplit:s.default.ParseStrToListNum(e.prop_10),random:Number.parseFloat(e.prop_11),cdDefend:Number.parseFloat(e.prop_12),speedScale:Number.parseFloat(e.prop_13)}),init:(e,t)=>{e.commonBehaviour=O.Pop(I,e,t)},instDisplay:(e,t,o)=>{o.push(P.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(l.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(...t.listSplit),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,I),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameCD":"GameCD","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3018StatusCD":"Logic3018StatusCD","./Logic3018StatusJumped":"Logic3018StatusJumped","./Logic3018StatusOrdinary":"Logic3018StatusOrdinary","./Logic3018StatusPower":"Logic3018StatusPower"}],Logic3019Args:[function(e,t,o){"use strict";cc._RF.push(t,"c40c08ichBHn6F5RY12AX95","Logic3019Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3019:[function(e,t,o){"use strict";cc._RF.push(t,"465bbSMVnFEUI4FJCy5Roib","Logic3019"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBody"),c=e("../GameElementBodyBehaviour"),d=e("../GameElementBodyBehaviourRS"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../../common/GameElementPart"),h=e("../GameElementBodyCtxDmgType"),f=e("../../../display/GameDisplayBody013"),y=e("../GameSizeMarkRS"),_="Logic3019";class g extends c.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(g._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,_);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(_,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,_);let o=a.default.Pop(a.default.typeCircleShape,_);o.Set(a.default.Pop(a.default.typeccVec2,_),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(_,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*Math.PI/(this.args.circleTime/1e3))}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(y.default.PlayEffHitByConcat(_,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,m.default.Pop(_,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:h.default.equipment})),this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){if(this.relBody.relState.GetIdCfgCount(this.args.callTarget)<this.args.maxCount){let e=l.default.PopForCall(_,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:0,vecY:0,cfgId:this.args.callTarget,camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(e)}this.relBody.BodyDestory(this.relBody.commonBody),p.default.BoomForBody(_,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}g._t=new r.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),function(e){e.rs=d.default.Pop(_,{logicCode:3019,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),callTarget:Number.parseFloat(e.prop_2),circleTime:Number.parseFloat(e.prop_3),maxCount:Number.parseFloat(e.prop_4)}),init:(t,o)=>{t.commonBehaviour=e.Pop(_,t,o)},instDisplay:(e,t,o)=>{o.push(f.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,_);return o.push(t.callTarget),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,_),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,_);return o.push(t.deathOgg),o}})}(g||(g={})),o.default=g,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3020Args:[function(e,t,o){"use strict";cc._RF.push(t,"3fa44nnmY1CGZtyu/XNLSSF","Logic3020Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3020StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"29e177cpbVKxavPmP5bKCNe","Logic3020StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3020Status"),s="Logic3020StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3020Status":"Logic3020Status"}],Logic3020StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"3d31cR3mk5FiLOVGsyGS6CM","Logic3020StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3020Status"),n="Logic3020StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){this.Atk(this.relMachine.relBody.relState.player);let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&0!=this.relMachine.relBody.listConcatedGround.length&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3020Status":"Logic3020Status"}],Logic3020StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"30f3c1RQo5PbrPcKEACQEf0","Logic3020StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3020Status"),l="Logic3020StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.Atk(this._target),this.relMachine.EnterStatus(this.relMachine.statusCD))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3020Status":"Logic3020Status"}],Logic3020Status:[function(e,t,o){"use strict";cc._RF.push(t,"57cb4jMEIhJsZitTHi08QYO","Logic3020Status"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/global/Jiang"),r=e("../GameElementBody"),s=e("./Logic3020"),n="Logic3020Status";class l{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return l.ANIM_ORDINARY}Atk(e){let t=i.default.Pop(i.default.typeB2Vec2,n);t.x=(e.commonCenterPos.x-this.relMachine.relBody.commonCenterPos.x+e.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3/a.default.mgrUI._sizePerPixel)/this.relMachine.args.atkTime,t.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*s.default.GRAVITY_SCALE/a.default.mgrUI._sizePerPixel/1e3;let o=r.default.PopForCall(n,{posX:this.relMachine.relBody.commonCenterPos.x,posY:this.relMachine.relBody.commonCenterPos.y,vecX:t.x,vecY:t.y,cfgId:this.relMachine.args.bullet,camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(o)}}o.default=l,l.ANIM_ORDINARY="npc_slime_2001001001_ordinary",l.ANIM_POWER="npc_slime_2001001001_power",l.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/global/Jiang":"Jiang","../GameElementBody":"GameElementBody","./Logic3020":"Logic3020"}],Logic3020:[function(e,t,o){"use strict";cc._RF.push(t,"66710Sa48hI5LPmLBVb7fqA","Logic3020"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3020StatusCD"),h=e("./Logic3020StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3020StatusPower"),g=e("../../../display/GameDisplayBody002"),b=e("../../common/GameElementLightPoint"),S=e("../GameElementBodyCtxDmgType"),P=e("../GameSizeMarkRS"),B="Logic3020";class C extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(B,this),this.statusPower=_.default.Pop(B,this),this.statusCD=p.default.Pop(B,this)}static Pop(e,t,o){let i=a.default.Pop(C._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(B,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,B);e.gravityScale=C.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(B,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,B);let o=a.default.Pop(a.default.typeCircleShape,B),r=a.default.Pop(a.default.typeccVec2,B);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(B,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,B);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,B),c=a.default.Pop(a.default.typeccVec2,B);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(B,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(B,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),P.default.PlayEffHitByConcat(B,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(B,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3020OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(B,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3020OnDestory(){}}o.default=C,C.GRAVITY_SCALE=1,C._t=new r.default({instantiate:()=>new C,onPop:()=>{},onPush:()=>{},tag:B}),C.rs=m.default.Pop(B,{logicCode:3020,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),bullet:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=C.Pop(B,e,t)},instDisplay:(e,t,o)=>{o.push(g.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.bullet),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,B),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3020StatusCD":"Logic3020StatusCD","./Logic3020StatusOrdinary":"Logic3020StatusOrdinary","./Logic3020StatusPower":"Logic3020StatusPower"}],Logic3021Args:[function(e,t,o){"use strict";cc._RF.push(t,"6194bxqh9hPBZryA3h74Dt7","Logic3021Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3021StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"9f98bJrp8dARYRs0uxugrw7","Logic3021StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3021Status"),s="Logic3021StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3021Status":"Logic3021Status"}],Logic3021StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"6d566Oh6/hBMp6iEhp8lgt0","Logic3021StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3021Status"),n="Logic3021StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&0!=this.relMachine.relBody.listConcatedGround.length&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3021Status":"Logic3021Status"}],Logic3021StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"8b1f7kmoC9DS6e7THoolM/y","Logic3021StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("../GameElementBody"),l=e("../GameSizeMarkRS"),c=e("./Logic3021Status"),d="Logic3021StatusPower";class u extends c.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(u._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.CALL),this.relMachine.relBody.commonAnim=c.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,d);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0){l.default.PlayEffCall(d,this.relMachine.relBody);let e=1==this.relMachine.args.listCallTarget.length?0:this.relMachine.args.areaCall,t=0==e?0:2*e/(this.relMachine.args.listCallTarget.length-1);for(let o=0;o<this.relMachine.args.listCallTarget.length;o++){let a=this.relMachine.args.listCallTarget[o],r=this.relMachine.relBody.relState.GetIdCfgCount(a);if(this.relMachine.args.maxCount<=r)continue;let s=i.default.Pop(i.default.typeB2Vec2,d),c=n.default.PopForCall(d,{posX:this.relMachine.relBody.commonCenterPos.x-e+t*o,posY:this.relMachine.relBody.commonCenterPos.y,vecX:s.x,vecY:s.y,cfgId:a,camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(c),l.default.PlayEffCall(d,c)}this.relMachine.EnterStatus(this.relMachine.statusCD)}}OnTarget(e){this._target=e}}o.default=u,u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3021Status":"Logic3021Status"}],Logic3021Status:[function(e,t,o){"use strict";cc._RF.push(t,"1284c89/mxBtJF+2PqbHxwY","Logic3021Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3021:[function(e,t,o){"use strict";cc._RF.push(t,"55861LN6d9PAYSoDbVJW6VP","Logic3021"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilString"),n=e("../../../../frame/global/Jiang"),l=e("../../../display/GameDisplayHp"),c=e("../../../view/voice_ogg/VoiceOggViewState"),d=e("../../common/GameElementPart"),u=e("../../common/GameElementTxt"),m=e("../GameElementBodyBehaviour"),p=e("../GameElementBodyBehaviourRS"),h=e("./Logic3021StatusCD"),f=e("./Logic3021StatusOrdinary"),y=e("../../GameCtxB2BodyFixtureTypeRS"),_=e("../GameElementBodyCtxDmg"),g=e("./Logic3021StatusPower"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3021";class M extends m.default{constructor(){super(),this.statusOrdinary=f.default.Pop(C,this),this.statusPower=g.default.Pop(C,this),this.statusCD=h.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(S.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,p.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,y.default.BODY);const s=a.default.Pop(a.default.typeFixtureDef,C);s.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*n.default.mgrUI._sizePerPixel),s.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,s,y.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*n.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),u.default.PopForDmg(C,e,this.relBody.relState),c.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,_.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3021OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),d.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),c.default.inst.VoiceSet(this.args.deathOgg)}Logic3021OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=p.default.Pop(C,{logicCode:3021,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),listCallTarget:s.default.ParseStrToListNum(e.prop_10),areaCall:Number.parseFloat(e.prop_11),maxCount:Number.parseFloat(e.prop_12)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(l.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(...t.listCallTarget),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3021StatusCD":"Logic3021StatusCD","./Logic3021StatusOrdinary":"Logic3021StatusOrdinary","./Logic3021StatusPower":"Logic3021StatusPower"}],Logic3022Args:[function(e,t,o){"use strict";cc._RF.push(t,"ad7b9vdfBNFSoHBArE5ezv2","Logic3022Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3022DefendStatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"2dd550FfldAtqZ53xP9vhsE","Logic3022DefendStatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../common/GameElementTxt"),s=e("./Logic3022DefendStatus"),n="Logic3022DefendStatusCD";class l extends s.default{constructor(){super(),this.cd=0,this.cdCure=0}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.animKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonCD.Enter(this.relMachine.relBody.commonCD.statusIng),this.cd=this.relMachine.args.cdCure,this.cdCure=0}OnExit(){this.relMachine.animKeep.currStatus.OnFadeOut()}OnTimeStep(e){if(this.cdCure-=e,this.cdCure<=0){this.cdCure=this.relMachine.args.cdCircle;let e=this.relMachine.args.cureCount*this.relMachine.relBody.commonArgsPower;this.relMachine.relBody.commonHpCurrent+=e,this.relMachine.relBody.commonHpCurrent=Math.min(this.relMachine.relBody.commonHpMax,this.relMachine.relBody.commonHpCurrent),r.default.PopForCure(n,e,this.relMachine.relBody)}this.cd-=e,this.cd<=0&&this.relMachine.HMEnterStatus(this.relMachine.hmStatusOrdinary)}OnDmg(e){this.relMachine.relBody.commonCD.Enter(this.relMachine.relBody.commonCD.statusIng),this.cd=this.relMachine.args.cdCure}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../common/GameElementTxt":"GameElementTxt","./Logic3022DefendStatus":"Logic3022DefendStatus"}],Logic3022DefendStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"7e3dcFZSCFBI67j8RAfVyfq","Logic3022DefendStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3022DefendStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnDmg(e){this.relMachine.HMEnterStatus(this.relMachine.hmStatusCD)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"Logic3022DefendStatusOrdinary"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3022DefendStatus":"Logic3022DefendStatus"}],Logic3022DefendStatus:[function(e,t,o){"use strict";cc._RF.push(t,"2424b34UktNybznK0vmNRoV","Logic3022DefendStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnDmg(e){}OnTimeStep(e){}},cc._RF.pop()},{}],Logic3022StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"460cePk/wBPVbqfMwRUL13O","Logic3022StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3022Status"),s="Logic3022StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.AMEnterStatus(this.relMachine.amStatusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3022Status":"Logic3022Status"}],Logic3022StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"4cc754hMBJM6YLzEJt8ShKt","Logic3022StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3022"),l=e("./Logic3022Status"),c="Logic3022StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.AMEnterStatus(this.relMachine.amStatusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3022":"Logic3022","./Logic3022Status":"Logic3022Status"}],Logic3022StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"d32153ZDyJFupDdl0IUNzVw","Logic3022StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3022Status"),n="Logic3022StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.AMEnterStatus(this.relMachine.amStatusPower),this.relMachine.amCurrStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3022Status":"Logic3022Status"}],Logic3022StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"d70caC0WrJEOLSYBHX10T1u","Logic3022StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3022Status"),l="Logic3022StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.amStatusJumped.target=this._target,this.relMachine.AMEnterStatus(this.relMachine.amStatusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3022Status":"Logic3022Status"}],Logic3022Status:[function(e,t,o){"use strict";cc._RF.push(t,"b99198GQZ5EtJHQbV5aA8oo","Logic3022Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3022:[function(e,t,o){"use strict";cc._RF.push(t,"d1970BtR75PVZf4lpZXgsqR","Logic3022"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3022StatusCD"),h=e("./Logic3022StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3022StatusPower"),g=e("./Logic3022StatusJumped"),b=e("../../common/GameElementLightPoint"),S=e("./Logic3022DefendStatusOrdinary"),P=e("./Logic3022DefendStatusCD"),B=e("../GameElementBodyCtxDmgType"),C=e("../../../display/GameDisplayBody014"),M=e("../../common/GameCD"),x=e("../../common/AnimKeep"),V=e("../GameSizeMarkRS"),I="Logic3022";class O extends u.default{constructor(){super(),this.animKeep=x.default.Pop(I,200,200),this.amStatusOrdinary=h.default.Pop(I,this),this.amStatusPower=_.default.Pop(I,this),this.amStatusJumped=g.default.Pop(I,this),this.amStatusCD=p.default.Pop(I,this),this.hmStatusOrdinary=S.default.Pop(I,this),this.hmStatusCD=P.default.Pop(I,this)}static Pop(e,t,o){let i=a.default.Pop(O._t,e);return i.relBody=t,i.args=o,i.AMEnterStatus(i.amStatusOrdinary),i.HMEnterStatus(i.hmStatusOrdinary),i}AMEnterStatus(e){let t=this.amCurrStatus;this.amCurrStatus=e,t&&t.OnExit(),this.amCurrStatus&&this.amCurrStatus.OnEnter()}HMEnterStatus(e){let t=this.hmCurrStatus;this.hmCurrStatus=e,t&&t.OnExit(),this.hmCurrStatus&&this.hmCurrStatus.OnEnter()}OnInit(){this.relBody.commonCD=M.default.Pop(I,this.args.cdCure),this.relBody.relState.AddEle(b.default.Pop(I,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,I);e.gravityScale=O.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(I,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,I);let o=a.default.Pop(a.default.typeCircleShape,I),r=a.default.Pop(a.default.typeccVec2,I);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(I,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,I);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,I),c=a.default.Pop(a.default.typeccVec2,I);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(I,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.hmCurrStatus.OnDmg(e),this.amCurrStatus.OnDmg(e),d.default.PopForDmg(I,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.amCurrStatus.OnConcatA(e)}OnConcatB(e){this.amCurrStatus.OnConcatB(e)}OnTimeStep(e){this.animKeep.currStatus.OnStep(e),this.amCurrStatus.OnTimeStep(e),this.hmCurrStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),V.default.PlayEffHitByConcat(I,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(I,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:B.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.amCurrStatus.OnTarget(t)}}}OnDestory(){this.Logic3022OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(I,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3022OnDestory(){}}o.default=O,O.GRAVITY_SCALE=1,O._t=new r.default({instantiate:()=>new O,onPop:()=>{},onPush:()=>{},tag:I}),O.rs=m.default.Pop(I,{logicCode:3022,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),cdCure:Number.parseFloat(e.prop_10),cureCount:Number.parseFloat(e.lv_inc_11),cdCircle:Number.parseFloat(e.prop_12)}),init:(e,t)=>{e.commonBehaviour=O.Pop(I,e,t)},instDisplay:(e,t,o)=>{o.push(C.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,I),aditionalEff:()=>a.default.Pop(a.default.typeArray,I),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,I);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody014":"GameDisplayBody014","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/AnimKeep":"AnimKeep","../../common/GameCD":"GameCD","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3022DefendStatusCD":"Logic3022DefendStatusCD","./Logic3022DefendStatusOrdinary":"Logic3022DefendStatusOrdinary","./Logic3022StatusCD":"Logic3022StatusCD","./Logic3022StatusJumped":"Logic3022StatusJumped","./Logic3022StatusOrdinary":"Logic3022StatusOrdinary","./Logic3022StatusPower":"Logic3022StatusPower"}],Logic3023Args:[function(e,t,o){"use strict";cc._RF.push(t,"12d7aoMlzFF3oGBGJWhMeYl","Logic3023Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3023StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"5227cnvl9ZF/qjsPWb+QNeT","Logic3023StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3023Status"),s="Logic3023StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3023Status":"Logic3023Status"}],Logic3023StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"9e132djYhZOQaYyqZTKigzt","Logic3023StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3023Status"),n="Logic3023StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&0!=this.relMachine.relBody.listConcatedGround.length&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3023Status":"Logic3023Status"}],Logic3023StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"8ee5dBuCD1D8pfbWg3whqus","Logic3023StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("../GameElementBody"),c=e("./Logic3023"),d=e("./Logic3023Status"),u="Logic3023StatusPower";class m extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),s.default.inst.VoiceSet(n.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=d.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,u);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0){let e=i.default.Pop(i.default.typeB2Vec2,u),t=this.relMachine.fixBall.b2Fixture.GetShape().m_p,o=this.relMachine.relBody.commonCenterPos.x+t.x/r.default.mgrUI._sizePerPixel,a=this.relMachine.relBody.commonCenterPos.y+t.y/r.default.mgrUI._sizePerPixel;e.x=(this._target.commonCenterPos.x-o+this._target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3/r.default.mgrUI._sizePerPixel)/this.relMachine.args.atkTime,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*c.default.GRAVITY_SCALE/r.default.mgrUI._sizePerPixel/1e3;let s=l.default.PopForCall(u,{posX:o,posY:a,vecX:e.x,vecY:e.y,cfgId:this.relMachine.args.bullet,camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(s),this.relMachine.EnterStatus(this.relMachine.statusCD)}}OnTarget(e){this._target=e}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","./Logic3023":"Logic3023","./Logic3023Status":"Logic3023Status"}],Logic3023Status:[function(e,t,o){"use strict";cc._RF.push(t,"f3217Rn6+xD0ZFnMcNViWLK","Logic3023Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3023:[function(e,t,o){"use strict";cc._RF.push(t,"63a8debdvdAF7YZDi9i6gQq","Logic3023"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3023StatusCD"),h=e("./Logic3023StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3023StatusPower"),g=e("../../common/GameElementLightPoint"),b=e("../../../display/GameDisplayBody011"),S=e("../GameElementBodyCtxDmgType"),P=e("../GameSizeMarkRS"),B="Logic3023";class C extends u.default{constructor(){super(),this.pos=a.default.Pop(a.default.typeB2Vec2,B),this.angle=0,this.statusOrdinary=h.default.Pop(B,this),this.statusPower=_.default.Pop(B,this),this.statusCD=p.default.Pop(B,this)}static Pop(e,t,o){let i=a.default.Pop(C._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(g.default.Pop(B,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,B);e.gravityScale=C.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(B,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,B);let o=a.default.Pop(a.default.typeCircleShape,B),r=a.default.Pop(a.default.typeccVec2,B);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(B,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,B);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,B),c=a.default.Pop(a.default.typeccVec2,B);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(B,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel));let d=a.default.Pop(a.default.typeFixtureDef,B),u=a.default.Pop(a.default.typeCircleShape,B),p=a.default.Pop(a.default.typeccVec2,B);u.Set(p,this.args.defenderRadius*s.default.mgrUI._sizePerPixel),d.shape=u,this.fixBall=this.relBody.commonBody.FixtureCreate(B,d,f.default.AREA_SHIELD),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(B,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.angle+=2*Math.PI*e/this.args.timeCircle,this.pos.x=Math.cos(this.angle)*this.args.moveRadius*s.default.mgrUI._sizePerPixel,this.pos.y=this.args.defenderY*s.default.mgrUI._sizePerPixel,this.fixBall.b2Fixture.GetShape().Set(this.pos),this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t],o=e.relFixture.relBody.relEle;e.fixtureSelf==this.fixBody&&(P.default.PlayEffHitByConcat(B,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,y.default.Pop(B,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixBall&&e.relFixture.type==f.default.BODY_BULLET&&(this.relBody.relState.RemEle(e.relFixture.relBody.relEle),d.default.PopForTips(B,"\u62b5\u6321",e.position.x,e.position.y,this.relBody)),e.fixtureSelf==this.fixArea&&this.currStatus.OnTarget(o)}}OnDestory(){c.default.BoomForBody(B,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1);let e=this.fixBall.b2Fixture.GetShape().m_p;c.default.BoomForBody(B,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.defenderRadius,this.relBody.commonFootPos.x+e.x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y+e.y/s.default.mgrUI._sizePerPixel,0,-1),this.relBody.BodyDestory(this.relBody.commonBody),l.default.inst.VoiceSet(this.args.deathOgg)}}o.default=C,C.GRAVITY_SCALE=1,C._t=new r.default({instantiate:()=>new C,onPop:()=>{},onPush:()=>{},tag:B}),C.rs=m.default.Pop(B,{logicCode:3023,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),bullet:Number.parseFloat(e.prop_10),defenderRadius:Number.parseFloat(e.prop_11),moveRadius:Number.parseFloat(e.prop_12),timeCircle:Number.parseFloat(e.prop_13),defenderY:Number.parseFloat(e.prop_14)}),init:(e,t)=>{e.commonBehaviour=C.Pop(B,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.bullet),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,B),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,B);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody011":"GameDisplayBody011","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3023StatusCD":"Logic3023StatusCD","./Logic3023StatusOrdinary":"Logic3023StatusOrdinary","./Logic3023StatusPower":"Logic3023StatusPower"}],Logic3024Args:[function(e,t,o){"use strict";cc._RF.push(t,"dbe04q6lTVKBpoNyN7dxKb9","Logic3024Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3024StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"f183bbJ22lB7asyiloJaa3I","Logic3024StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3024Status"),s="Logic3024StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3024Status":"Logic3024Status"}],Logic3024StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"778b67y9cBHyKDaIIMWZjix","Logic3024StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3024"),l=e("./Logic3024Status"),c="Logic3024StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c);e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3)/this.relMachine.args.atkTime*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3024":"Logic3024","./Logic3024Status":"Logic3024Status"}],Logic3024StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"b4e57cQul1F47opV7VCthU9","Logic3024StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3024Status"),n="Logic3024StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3024Status":"Logic3024Status"}],Logic3024StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"eb5e43EYExP0YX6zKoHcwdA","Logic3024StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../DefineVoice"),c=e("../GameElementBody"),d=e("../logic_3015/Logic3015"),u=e("./Logic3024Status"),m="Logic3024StatusPower";class p extends u.default{constructor(){super()}static Pop(e,t){let o=a.default.Pop(p._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),n.default.inst.VoiceSet(l.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=u.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=a.default.Pop(a.default.typeccVec2,m);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0){let e=Math.PI/6,t=e/this.relMachine.args.listSplit.length,o=-this.relMachine.relBody.relState.b2Gravity*d.default.GRAVITY_SCALE/s.default.mgrUI._sizePerPixel/1e3/2;for(let a=0;a<this.relMachine.args.listSplit.length;a++){let r=Math.PI/2+e/2-a*t*(1+i.default.RandomLowerToUpper()*this.relMachine.args.random),s=c.default.PopForCall(m,{posX:this.relMachine.relBody.commonCenterPos.x,posY:this.relMachine.relBody.commonCenterPos.y,vecX:Math.cos(r)*o*(1+i.default.RandomLowerToUpper()*this.relMachine.args.random),vecY:Math.sin(r)*o*(1+i.default.RandomLowerToUpper()*this.relMachine.args.random),cfgId:this.relMachine.args.listSplit[a],camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(s)}this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}}OnTarget(e){this._target=e}}o.default=p,p._t=new r.default({instantiate:()=>new p,onPop:()=>{},onPush:()=>{},tag:m}),cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","../logic_3015/Logic3015":"Logic3015","./Logic3024Status":"Logic3024Status"}],Logic3024Status:[function(e,t,o){"use strict";cc._RF.push(t,"1321abo7stLgYL9PFAXzk6I","Logic3024Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3024:[function(e,t,o){"use strict";cc._RF.push(t,"01a2etHMbFDeo3jSnpJsNfl","Logic3024"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilString"),n=e("../../../../frame/global/Jiang"),l=e("../../../display/GameDisplayHp"),c=e("../../../view/voice_ogg/VoiceOggViewState"),d=e("../../common/GameElementPart"),u=e("../../common/GameElementTxt"),m=e("../GameElementBodyBehaviour"),p=e("../GameElementBodyBehaviourRS"),h=e("./Logic3024StatusCD"),f=e("./Logic3024StatusOrdinary"),y=e("../../GameCtxB2BodyFixtureTypeRS"),_=e("../GameElementBodyCtxDmg"),g=e("./Logic3024StatusPower"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3024";class M extends m.default{constructor(){super(),this.statusOrdinary=f.default.Pop(C,this),this.statusPower=g.default.Pop(C,this),this.statusCD=h.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(S.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,p.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,y.default.BODY);const s=a.default.Pop(a.default.typeFixtureDef,C);s.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*n.default.mgrUI._sizePerPixel),s.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,s,y.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*n.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),u.default.PopForDmg(C,e,this.relBody.relState),c.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,_.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3024OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),d.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),c.default.inst.VoiceSet(this.args.deathOgg)}Logic3024OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=p.default.Pop(C,{logicCode:3024,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),listSplit:s.default.ParseStrToListNum(e.prop_10),random:Number.parseFloat(e.prop_11)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(l.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(...t.listSplit),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3024StatusCD":"Logic3024StatusCD","./Logic3024StatusOrdinary":"Logic3024StatusOrdinary","./Logic3024StatusPower":"Logic3024StatusPower"}],Logic3026Args:[function(e,t,o){"use strict";cc._RF.push(t,"5e9d2W0JJpAy5unPBBJPuNO","Logic3026Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3026StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"d8296TOGp5F6IilgspwP2U3","Logic3026StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3026Status"),s="Logic3026StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3026Status":"Logic3026Status"}],Logic3026StatusJumped:[function(e,t,o){"use strict";cc._RF.push(t,"81181ocg+lBOolAbfJDgVZT","Logic3026StatusJumped"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../GameElementBodyCtxDmgType"),n=e("./Logic3026"),l=e("./Logic3026Status"),c="Logic3026StatusJumped";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=l.default.ANIM_JUMPED;let e=i.default.Pop(i.default.typeB2Vec2,c),t=this.relMachine.args.atkTime/this.relMachine.relBody.commonTimeScaleSelf;e.x=((this.target.commonFootPos.x-this.relMachine.relBody.commonFootPos.x+this.relMachine.args.bodyRadius)*r.default.mgrUI._sizePerPixel+this.target.commonBehaviour.b2GetSpeedX()*t/1e3)/t*1e3,e.y=-this.relMachine.relBody.relState.b2Gravity*t/1e3/2*n.default.GRAVITY_SCALE,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnConcatB(e){e.SetTangentSpeed(0),this.relMachine.EnterStatus(this.relMachine.statusCD)}OnDmg(e){e.type==s.default.shield&&this.relMachine.EnterStatus(this.relMachine.statusCD)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","./Logic3026":"Logic3026","./Logic3026Status":"Logic3026Status"}],Logic3026StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"7ad1aW2zV1J55dNfRgJoFk8","Logic3026StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3026Status"),n="Logic3026StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3*this.relMachine.relBody.commonTimeScaleSelf)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3*this.relMachine.relBody.commonTimeScaleSelf)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3026Status":"Logic3026Status"}],Logic3026StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"cb47eSXg8FPELBxxfsWHBX9","Logic3026StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./Logic3026Status"),l="Logic3026StatusPower";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),r.default.inst.VoiceSet(s.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=n.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,l);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&(this.relMachine.statusJumped.target=this._target,this.relMachine.EnterStatus(this.relMachine.statusJumped))}OnTarget(e){this._target=e}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./Logic3026Status":"Logic3026Status"}],Logic3026Status:[function(e,t,o){"use strict";cc._RF.push(t,"232d32hIJhCDLrunAx7KWJ7","Logic3026Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3026:[function(e,t,o){"use strict";cc._RF.push(t,"409f9mNP+ZECp3xi5SiUyhI","Logic3026"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../display/GameDisplayHp"),l=e("../../../view/voice_ogg/VoiceOggViewState"),c=e("../../common/GameElementPart"),d=e("../../common/GameElementTxt"),u=e("../GameElementBodyBehaviour"),m=e("../GameElementBodyBehaviourRS"),p=e("./Logic3026StatusCD"),h=e("./Logic3026StatusOrdinary"),f=e("../../GameCtxB2BodyFixtureTypeRS"),y=e("../GameElementBodyCtxDmg"),_=e("./Logic3026StatusPower"),g=e("./Logic3026StatusJumped"),b=e("../../common/GameElementLightPoint"),S=e("../GameElementBodyCtxDmgType"),P=e("../../../display/GameDisplayBody015"),B=e("../GameSizeMarkRS"),C="Logic3026";class M extends u.default{constructor(){super(),this.statusOrdinary=h.default.Pop(C,this),this.statusPower=_.default.Pop(C,this),this.statusJumped=g.default.Pop(C,this),this.statusCD=p.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(b.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,m.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,f.default.BODY);const n=a.default.Pop(a.default.typeFixtureDef,C);n.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*s.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*s.default.mgrUI._sizePerPixel),n.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,n,f.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),d.default.PopForDmg(C,e,this.relBody.relState),l.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),this.relBody.commonTimeScaleSelf=2-this.relBody.commonHpCurrent/this.relBody.commonHpMax,0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){e*=this.relBody.commonTimeScaleSelf,this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,y.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:S.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3026OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),c.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),l.default.inst.VoiceSet(this.args.deathOgg)}Logic3026OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=m.default.Pop(C,{logicCode:3026,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),timeScale:Number.parseFloat(e.prop_10)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(P.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(n.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,C),aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody015":"GameDisplayBody015","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3026StatusCD":"Logic3026StatusCD","./Logic3026StatusJumped":"Logic3026StatusJumped","./Logic3026StatusOrdinary":"Logic3026StatusOrdinary","./Logic3026StatusPower":"Logic3026StatusPower"}],Logic3027Args:[function(e,t,o){"use strict";cc._RF.push(t,"bc410sB4cVJM59Z7Wzsl7Wz","Logic3027Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3027:[function(e,t,o){"use strict";cc._RF.push(t,"1e2acIen0RMSKOzbdRoKvox","Logic3027"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../../common/GameElementPart"),p=e("../GameElementBodyCtxDmgType"),h=e("../GameSizeMarkRS"),f=e("../../../display/GameDisplayBody013"),y="Logic3027";class _ extends l.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typeCircleShape,y);o.Set(a.default.Pop(a.default.typeccVec2,y),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,d.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*Math.PI/(this.args.circleTime/1e3))}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(h.default.PlayEffHitByConcat(y,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,u.default.Pop(y,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:p.default.equipment})),e.relFixture.relBody.relEle,this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),m.default.BoomForBody(y,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=c.default.Pop(y,{logicCode:3027,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),circleTime:Number.parseFloat(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{o.push(f.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,y),aditionalEff:()=>a.default.Pop(a.default.typeArray,y),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.deathOgg),o}})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3028Args:[function(e,t,o){"use strict";cc._RF.push(t,"a0b8d2Wp5ZLLa6U/vQ/7Xg1","Logic3028Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3028:[function(e,t,o){"use strict";cc._RF.push(t,"bec56J1lKpDXK8sOTHn89Nf","Logic3028"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../GameElementBodyCtxDmgType"),p=e("../../../display/GameDisplayBody001"),h=e("../../common/GameElementEff"),f=e("../GameSizeMarkRS"),y="Logic3028";class _ extends l.default{constructor(){super(),this.effAbleCount=1,this._isFloat=!1}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typeCircleShape,y);o.Set(a.default.Pop(a.default.typeccVec2,y),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,d.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(!this._isFloat&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<0){this._isFloat=!0,this.relBody.commonBody.b2Body.SetGravityScale(0);let e=a.default.Pop(a.default.typeB2Vec2,y);e.x=.5*this.relBody.relState.player.commonBehaviour.b2GetSpeedX()+this.relBody.commonBody.b2Body.GetLinearVelocity().x,e.y=-this.relBody.commonArgsInitVec.len()/10,this.relBody.commonBody.b2Body.SetLinearVelocity(e)}if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.effAbleCount)return;if(f.default.PlayEffHitByConcat(y,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,u.default.Pop(y,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:m.default.equipment})),this.effAbleCount--,0==this.effAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),this.relBody.relState.AddEle(h.default.PopForXYStatic(y,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,1,this.args.effDismiss,this.relBody.commonCache.colorMain)),n.default.inst.VoiceSet(this.args.deathOgg)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=c.default.Pop(y,{logicCode:3028,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),effDismiss:Number.parseFloat(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{o.push(p.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,y),aditionalEff:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.effDismiss),o},aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.deathOgg),o}})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody001":"GameDisplayBody001","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementEff":"GameElementEff","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3030Args:[function(e,t,o){"use strict";cc._RF.push(t,"ae945GruKxK9ZGewf46ZI5Z","Logic3030Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3030StatusDown:[function(e,t,o){"use strict";cc._RF.push(t,"785fe/cRbhJ9Zet2fAy1ceM","Logic3030StatusDown"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../GameElementBodyCtxDmg"),r=e("../GameElementBodyCtxDmgType"),s=e("../GameSizeMarkRS"),n=e("./Logic3030Status"),l="Logic3030StatusDown";o.default=class extends n.default{OnUp(){this.relMachine.EnterStatus(this.relMachine.statusUp)}OnEnter(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord()}OnDmg(e){this.Bounce()}OnStep(e){if(0<this.relMachine.relBody.listConcatedGround.length)this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);else for(let t=0;t<this.relMachine.relBody.listConcatedBodyEnemy.length;t++){let e=this.relMachine.relBody.listConcatedBodyEnemy[0];e.relFixture.relBody.relEle,this.relMachine.relBody.CheckDmgAble(e)&&(s.default.PlayEffHitByConcat(l,e,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.relBody.commonArgsCfg.size_mark),this.relMachine.relBody.CauseDmg(e,a.default.Pop(l,{dmg:this.relMachine.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relMachine.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:r.default.equipment})))}}Bounce(){if(this.relMachine.relBody.commonHpCurrent--,0==this.relMachine.relBody.commonHpCurrent)return void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);let e=i.default.Pop(i.default.typeB2Vec2,l);e.x=this.relMachine.relBody.relState.player.commonBehaviour.b2GetSpeedX(),e.y=-this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y,this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}},cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3030Status":"Logic3030Status"}],Logic3030StatusUp:[function(e,t,o){"use strict";cc._RF.push(t,"c4f5ePRRvBLCLIxJ+NGCozc","Logic3030StatusUp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./Logic3030Status");o.default=class extends i.default{OnDown(){this.relMachine.EnterStatus(this.relMachine.statusDown)}},cc._RF.pop()},{"./Logic3030Status":"Logic3030Status"}],Logic3030Status:[function(e,t,o){"use strict";cc._RF.push(t,"a0216AFxk9OR5QqCpe2i3O6","Logic3030Status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnStep(e){}OnUp(){}OnDown(){}OnDmg(e){}},cc._RF.pop()},{}],Logic3030:[function(e,t,o){"use strict";cc._RF.push(t,"811b7cm/BJHR7xCetsniLKO","Logic3030"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBody"),c=e("../GameElementBodyBehaviour"),d=e("../GameElementBodyBehaviourRS"),u=e("../../../display/GameDisplayBody000"),m=e("../../GameCtxB2BodyFixtureTypeRS"),p=e("../../../display/GameDisplayHp"),h=e("./Logic3030StatusUp"),f=e("./Logic3030StatusDown"),y="Logic3030";class _ extends c.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i.statusUp=new h.default(i),i.statusDown=new f.default(i),i.EnterStatus(i.statusUp),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnInit(){this.relBody.commonHpMax=this.args.countDefend,this.relBody.commonHpCurrent=this.args.countDefend;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typeCircleShape,y);o.Set(a.default.Pop(a.default.typeccVec2,y),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,m.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r)}OnDmg(e){this.currStatus.OnDmg(e)}OnTimeStep(e){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonCenterPos.x,this.relBody.commonHeadPos.y=this.relBody.commonCenterPos.y+this.args.bodyRadius,this.relBody.commonBody.b2Body.GetLinearVelocity().y<0&&this.currStatus.OnDown(),0<this.relBody.commonBody.b2Body.GetLinearVelocity().y&&this.currStatus.OnUp(),this.currStatus.OnStep(e)}OnDestory(){let e=l.default.PopForCall(y,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:0,vecY:0,cfgId:this.args.effDestory,camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(e),this.relBody.BodyDestory(this.relBody.commonBody),n.default.inst.VoiceSet(this.args.deathOgg)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=d.default.Pop(y,{logicCode:3030,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),effDestory:Number.parseFloat(e.prop_2),countDefend:Number.parseFloat(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{o.push(u.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(p.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.effDestory),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,y),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,y);return o.push(t.deathOgg),o}})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./Logic3030StatusDown":"Logic3030StatusDown","./Logic3030StatusUp":"Logic3030StatusUp"}],Logic3031Args:[function(e,t,o){"use strict";cc._RF.push(t,"2a413gfRXdCI6YLbNemYJz5","Logic3031Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3031:[function(e,t,o){"use strict";cc._RF.push(t,"fbd0bvYbrpGab7vh+mKvhtB","Logic3031"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MBPlayer"),a=e("../GameElementBodyBehaviourRS"),r=e("../../../display/GameDisplayPlayer000"),s=e("../../../../frame/basic/UtilObjPool"),n="Logic3031";o.default=class{},a.default.Pop(n,{logicCode:3031,cfgToArgs:e=>({speed:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),bodyRadius:Number.parseFloat(e.prop_2),mpMax:Number.parseFloat(e.prop_3),mpInc:Number.parseFloat(e.prop_4),equipOffsetX:Number.parseFloat(e.prop_5),equipOffsetY:Number.parseFloat(e.prop_6),defendRadius:Number.parseFloat(e.prop_7)}),init:(e,t)=>{e.commonHpMax=t.hpMax,e.commonBehaviour=i.default.Pop(n,e,t)},instDisplay:(e,t,o)=>{o.push(r.default.nodeType.CreateNode(e,t.id,t.id))},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>s.default.Pop(s.default.typeArray,n),aditionalEff:()=>s.default.Pop(s.default.typeArray,n),aditionalVoice:()=>s.default.Pop(s.default.typeArray,n)}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../display/GameDisplayPlayer000":"GameDisplayPlayer000","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./MBPlayer":"MBPlayer"}],Logic3032Args:[function(e,t,o){"use strict";cc._RF.push(t,"818d38QwdZDfaPjg2O0vtKc","Logic3032Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3032:[function(e,t,o){"use strict";cc._RF.push(t,"c8ce0ITzI1II75iR5Y5ENE/","Logic3032"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../GameElementBodyCtxDmgType"),h=e("../GameSizeMarkRS"),f=e("../../../display/GameDisplayBody017"),y=e("../../../../frame/basic/UtilString"),_=e("../../../display/GameDisplayBody013"),g=e("../../../GameCommon"),b="Logic3032";class S extends l.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(S._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,b);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(b,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,b);let o=a.default.Pop(a.default.typeCircleShape,b);o.Set(a.default.Pop(a.default.typeccVec2,b),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(b,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(h.default.PlayEffHitByConcat(b,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,m.default.Pop(b,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:p.default.equipment})),this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<g.default.GROUND_Y&&(h.default.PlayEffHitByBodyForHitGround(b,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){n.default.inst.VoiceSet(this.args.deathOgg),this.relBody.BodyDestory(this.relBody.commonBody)}}S._t=new r.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),function(e){e.rs=c.default.Pop(b,{logicCode:3032,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:y.default.ParseStrToNum(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(b,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(_.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(f.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,b),aditionalEff:()=>a.default.Pop(a.default.typeArray,b),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,b);return o.push(t.deathOgg),o}})}(S||(S={})),o.default=S,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3033Args:[function(e,t,o){"use strict";cc._RF.push(t,"c9974XL3RdMdYOstA50HDyd","Logic3033Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3033:[function(e,t,o){"use strict";cc._RF.push(t,"0c36dyifb1HJJGvH+q/30GR","Logic3033"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../GameCtxB2BodyFixtureTypeRS"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../GameElementBodyCtxDmg"),u=e("../GameElementBodyCtxDmgType"),m=e("../../../display/GameDisplayBody016"),p=e("../../../display/GameDisplayBody018"),h=e("../../../../frame/basic/UtilString"),f=e("../GameSizeMarkRS"),y="Logic3033";class _ extends l.default{constructor(){super(),this.vecRel=a.default.Pop(a.default.typeccVec2,y),this.posToSet=a.default.Pop(a.default.typeB2Vec2,y)}static Pop(e,t,o){let i=a.default.Pop(_._t,e);return i.relBody=t,i.args=o,i}OnInit(){this._lifeLess=this.args.keep,this.vecRel.x=this.relBody.commonFootPos.x-this.relBody.commonCaller.commonFootPos.x,this.vecRel.y=this.relBody.commonFootPos.y-this.relBody.commonCaller.commonFootPos.y,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,y);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(y,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0),this.relBody.commonBody.b2Body.SetAngle(Math.atan2(this.relBody.commonArgsInitVec.y,this.relBody.commonArgsInitVec.x));const t=a.default.Pop(a.default.typeFixtureDef,y);let o=a.default.Pop(a.default.typePolygonShape,y),r=a.default.Pop(a.default.typeArray,y);r.push(a.default.Pop(a.default.typeccVec2,y));for(let i=0;i<=1;i+=.25){let e=1-Math.pow(2*(i-.5),2);e=Math.sqrt(e);let t=a.default.Pop(a.default.typeccVec2,y);t.x=e*this.args.height*s.default.mgrUI._sizePerPixel,t.y=(i-.5)*this.args.width*s.default.mgrUI._sizePerPixel,r.push(t)}r.reverse(),o.Set(r),t.shape=o,this.relBody.commonBody.FixtureCreate(y,t,n.default.AREA_SWORD)}OnTimeStep(e){this.relBody.commonFootPos.x=this.relBody.commonCaller.commonFootPos.x+this.vecRel.x,this.relBody.commonFootPos.y=this.relBody.commonCaller.commonFootPos.y+this.vecRel.y,this.posToSet.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,this.posToSet.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,this.relBody.commonBody.b2Body.SetPosition(this.posToSet);for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];this.relBody.CheckDmgAble(e)&&(f.default.PlayEffHitByConcat(y,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,d.default.Pop(y,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:u.default.equipment})))}this._lifeLess-=e,this._lifeLess<=0&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody)}}_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),function(e){e.rs=c.default.Pop(y,{logicCode:3033,cfgToArgs:e=>({width:Number.parseFloat(e.prop_0),height:Number.parseFloat(e.prop_1),keep:h.default.ParseStrToNum(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(y,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1018:o.push(p.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(m.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:()=>0,aditionalBody:()=>a.default.Pop(a.default.typeArray,y),aditionalEff:()=>a.default.Pop(a.default.typeArray,y),aditionalVoice:()=>a.default.Pop(a.default.typeArray,y)})}(_||(_={})),o.default=_,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody016":"GameDisplayBody016","../../../display/GameDisplayBody018":"GameDisplayBody018","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3034Args:[function(e,t,o){"use strict";cc._RF.push(t,"14401DYX9BLEY4Nq+ctpHAo","Logic3034Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3034StatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"47c18G0xApOm5AkopEk5SoO","Logic3034StatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./Logic3034Status"),s="Logic3034StatusCD";class n extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnim=r.default.ANIM_ORDINARY,this._cd=this.relMachine.args.cd;let e=i.default.Pop(i.default.typeccVec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){this._cd-=e,this._cd<0&&this.relMachine.EnterStatus(this.relMachine.statusOrdinary)}OnDmg(e){let t=i.default.Pop(i.default.typeB2Vec2,s);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(t),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,s).Set(0,1).SelfMul(e.repel*this.relMachine.args.repel),i.default.Pop(i.default.typeB2Vec2,s))}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./Logic3034Status":"Logic3034Status"}],Logic3034StatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"4e08eU+9OtERKSILWXLgauC","Logic3034StatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./Logic3034Status"),n="Logic3034StatusOrdinary";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnConcatA(e){e.SetTangentSpeed(this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}OnConcatB(e){e.SetTangentSpeed(-this.GetSpeed()*r.default.mgrUI._sizePerPixel*1e3)}GetSpeed(){return this.relMachine.args.moveSpeed}OnEnter(){if(this.relMachine.relBody.commonAnim=s.default.ANIM_ORDINARY,!this.relMachine.relBody.commonBody)return;let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-1,this.relMachine.relBody.commonBody.b2Body.ApplyForceToCenter(e)}OnDmg(e){let t=e.repel*this.relMachine.args.repel;if(0==t)return;let o=i.default.Pop(i.default.typeB2Vec2,n),a=this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity();o.Set(a.x/2,a.y/2),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(o),this.relMachine.relBody.commonBody.b2Body.ApplyLinearImpulse(i.default.Pop(i.default.typeB2Vec2,n).Set(0,t),i.default.Pop(i.default.typeB2Vec2,n))}OnTarget(e){0==this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y&&0!=this.relMachine.relBody.listConcatedGround.length&&(this.relMachine.EnterStatus(this.relMachine.statusPower),this.relMachine.currStatus.OnTarget(e))}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./Logic3034Status":"Logic3034Status"}],Logic3034StatusPower:[function(e,t,o){"use strict";cc._RF.push(t,"64938FHCz1Isbhfrj6gUOss","Logic3034StatusPower"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("../GameElementBody"),c=e("./Logic3034"),d=e("./Logic3034Status"),u="Logic3034StatusPower";class m extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeIn(),this.relMachine.relBody.commonAnimTipsFlash.currStatus.OnFlash(),s.default.inst.VoiceSet(n.default.MONSTER_ATK),this.relMachine.relBody.commonAnim=d.default.ANIM_POWER,this._cd=this.relMachine.args.powerTime;let e=i.default.Pop(i.default.typeccVec2,u);this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnExit(){this.relMachine.relBody.commonActionId++,this.relMachine.relBody.ClearDmgRecord(),this.relMachine.relBody.commonAnimTipsKeep.currStatus.OnFadeOut()}OnConcatA(e){e.SetTangentSpeed(0)}OnConcatB(e){e.SetTangentSpeed(0)}OnTimeStep(e){if(this._cd-=e,this._cd<0)for(let t=0;t<this.relMachine.args.bullet.length;t++){let e=i.default.Pop(i.default.typeB2Vec2,u);e.x=(this._target.commonCenterPos.x-this.relMachine.relBody.commonCenterPos.x+this._target.commonBehaviour.b2GetSpeedX()*this.relMachine.args.atkTime/1e3/r.default.mgrUI._sizePerPixel)/this.relMachine.args.atkTime,e.y=-this.relMachine.relBody.relState.b2Gravity*this.relMachine.args.atkTime/1e3/2*c.default.GRAVITY_SCALE/r.default.mgrUI._sizePerPixel/1e3;let o=l.default.PopForCall(u,{posX:this.relMachine.relBody.commonCenterPos.x,posY:this.relMachine.relBody.commonCenterPos.y,vecX:e.x,vecY:e.y,cfgId:this.relMachine.args.bullet[t],camp:this.relMachine.relBody.commonArgsCamp,caller:this.relMachine.relBody});this.relMachine.relBody.relState.AddEle(o),this.relMachine.EnterStatus(this.relMachine.statusCD)}}OnTarget(e){this._target=e}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","../GameElementBody":"GameElementBody","./Logic3034":"Logic3034","./Logic3034Status":"Logic3034Status"}],Logic3034Status:[function(e,t,o){"use strict";cc._RF.push(t,"186ecOfw7pGopjbZk+BRmFC","Logic3034Status"),Object.defineProperty(o,"__esModule",{value:!0});class i{OnEnter(){}OnDmg(e){}OnConcatA(e){}OnConcatB(e){}OnTimeStep(e){}OnExit(){}OnTarget(e){}GetAnimName(){return i.ANIM_ORDINARY}}o.default=i,i.ANIM_ORDINARY="npc_slime_2001001001_ordinary",i.ANIM_POWER="npc_slime_2001001001_power",i.ANIM_JUMPED="npc_slime_2001001001_jumped",cc._RF.pop()},{}],Logic3034:[function(e,t,o){"use strict";cc._RF.push(t,"b2fa7kneMBIxIjYbgUacl61","Logic3034"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilString"),n=e("../../../../frame/global/Jiang"),l=e("../../../display/GameDisplayHp"),c=e("../../../view/voice_ogg/VoiceOggViewState"),d=e("../../common/GameElementPart"),u=e("../../common/GameElementTxt"),m=e("../GameElementBodyBehaviour"),p=e("../GameElementBodyBehaviourRS"),h=e("./Logic3034StatusCD"),f=e("./Logic3034StatusOrdinary"),y=e("../../GameCtxB2BodyFixtureTypeRS"),_=e("../GameElementBodyCtxDmg"),g=e("./Logic3034StatusPower"),b=e("../../../display/GameDisplayBody002"),S=e("../../common/GameElementLightPoint"),P=e("../GameElementBodyCtxDmgType"),B=e("../GameSizeMarkRS"),C="Logic3034";class M extends m.default{constructor(){super(),this.statusOrdinary=f.default.Pop(C,this),this.statusPower=g.default.Pop(C,this),this.statusCD=h.default.Pop(C,this)}static Pop(e,t,o){let i=a.default.Pop(M._t,e);return i.relBody=t,i.args=o,i.EnterStatus(i.statusOrdinary),i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus&&this.currStatus.OnEnter()}OnInit(){this.relBody.relState.AddEle(S.default.Pop(C,this.relBody.id,this.relBody.commonCache.colorMain,p.default.GetSize(this.relBody.commonArgsCfg.id))),this.relBody.commonHpMax=this.args.hpMax+this.args.hpLevInc*this.relBody.commonArgsPower,this.relBody.commonHpCurrent=this.relBody.commonHpMax;const e=a.default.Pop(a.default.typeBodyDef,C);e.gravityScale=M.GRAVITY_SCALE,e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,this.relBody.commonBody=this.relBody.BodyCreate(C,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,C);let o=a.default.Pop(a.default.typeCircleShape,C),r=a.default.Pop(a.default.typeccVec2,C);r.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,o.Set(r,this.args.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=o,this.fixBody=this.relBody.commonBody.FixtureCreate(C,t,y.default.BODY);const s=a.default.Pop(a.default.typeFixtureDef,C);s.density=0;let l=a.default.Pop(a.default.typeCircleShape,C),c=a.default.Pop(a.default.typeccVec2,C);c.y=this.args.bodyRadius*n.default.mgrUI._sizePerPixel,l.Set(c,(this.args.atkArea+this.args.bodyRadius)*n.default.mgrUI._sizePerPixel),s.shape=l,this.fixArea=this.relBody.commonBody.FixtureCreate(C,s,y.default.AREA),this.relBody.commonBody.b2Body.SetLinearVelocity(this.relBody.commonArgsInitVec.mulSelf(1e3*n.default.mgrUI._sizePerPixel)),this.OnTimeStep(0)}OnDmg(e){this.currStatus.OnDmg(e),u.default.PopForDmg(C,e,this.relBody.relState),c.default.inst.VoiceSet(this.args.hurtedOgg),this.relBody.commonHpCurrent-=e.dmg,this.relBody.commonHpCurrent=Math.max(0,this.relBody.commonHpCurrent),0==this.relBody.commonHpCurrent&&this.relBody.relState.RemEle(this.relBody)}OnConcatA(e){this.currStatus.OnConcatA(e)}OnConcatB(e){this.currStatus.OnConcatB(e)}OnTimeStep(e){this.currStatus.OnTimeStep(e),this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius;for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];if(e.fixtureSelf==this.fixBody&&this.relBody.CheckDmgAble(e)&&(this.relBody.BodyStop(),B.default.PlayEffHitByConcat(C,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,_.default.Pop(C,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:0,norX:e.normal.x,norY:e.normal.y,type:P.default.equipment}))),e.fixtureSelf==this.fixArea&&e.CheckValid()){let t=e.relFixture.relBody.relEle;this.currStatus.OnTarget(t)}}}OnDestory(){this.Logic3034OnDestory(),this.relBody.BodyDestory(this.relBody.commonBody),d.default.BoomForBody(C,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonCenterPos.x,this.relBody.commonCenterPos.y,0,-1),c.default.inst.VoiceSet(this.args.deathOgg)}Logic3034OnDestory(){}}o.default=M,M.GRAVITY_SCALE=1,M._t=new r.default({instantiate:()=>new M,onPop:()=>{},onPush:()=>{},tag:C}),M.rs=p.default.Pop(C,{logicCode:3034,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),hpMax:Number.parseFloat(e.prop_1),hpLevInc:Number.parseFloat(e.lv_inc_1),bodyRadius:Number.parseFloat(e.prop_2),moveSpeed:Number.parseFloat(e.prop_3),hurtedOgg:Number.parseFloat(e.prop_4),cd:Number.parseFloat(e.prop_5),repel:Number.parseFloat(e.prop_6),atkArea:Number.parseFloat(e.prop_7),powerTime:Number.parseFloat(e.prop_8),atkTime:Number.parseFloat(e.prop_9),bullet:s.default.ParseStrToListNum(e.prop_10),bulletColor:s.default.ParseStrToCCColor(e.prop_11)}),init:(e,t)=>{e.commonBehaviour=M.Pop(C,e,t)},instDisplay:(e,t,o)=>{o.push(b.default.GetNodeType(t.commonArgsCfg).CreateNode(e,t.id,t.id))},boardDisplay:(e,t,o)=>{o.push(l.default.nodeType.CreateNode(e,t,t[0]))},atkGetter:()=>0,hpGetter:(e,t)=>Math.ceil(t.hpMax+t.hpLevInc*e.power),sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(...t.bullet),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,C),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,C);return o.push(t.hurtedOgg,t.deathOgg),o}}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody002":"GameDisplayBody002","../../../display/GameDisplayHp":"GameDisplayHp","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementLightPoint":"GameElementLightPoint","../../common/GameElementPart":"GameElementPart","../../common/GameElementTxt":"GameElementTxt","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3034StatusCD":"Logic3034StatusCD","./Logic3034StatusOrdinary":"Logic3034StatusOrdinary","./Logic3034StatusPower":"Logic3034StatusPower"}],Logic3035Args:[function(e,t,o){"use strict";cc._RF.push(t,"94067gP62VHrLduUENBfo+M","Logic3035Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3035:[function(e,t,o){"use strict";cc._RF.push(t,"a95999eLQJMAKN5Oc0ccGd2","Logic3035"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../../common/GameElementPart"),h=e("../GameElementBodyCtxDmgType"),f=e("../GameSizeMarkRS"),y=e("../../../display/GameDisplayBody017"),_=e("../../../../frame/basic/UtilString"),g=e("../../../display/GameDisplayBody013"),b=e("../../../GameCommon"),S="Logic3035";class P extends l.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(P._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.jumpCount=this.args.jumpAbleCount,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,S);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(S,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,S);let o=a.default.Pop(a.default.typeCircleShape,S);o.Set(a.default.Pop(a.default.typeccVec2,S),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(S,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.initB2Vec=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),this.initSpeedX=r.x,this.initSpeedY=r.y,this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().y<0&&0<this.relBody.listConcatedBodyEnemy.length){let e=a.default.Pop(a.default.typeB2Vec2,S);e.x=Math.abs(this.initB2Vec*this.args.rateVer),e.y=Math.abs(this.initB2Vec*this.args.rateHor),this.relBody.commonBody.b2Body.SetLinearVelocity(e),this.relBody.ClearDmgRecord();let t=this.relBody.listConcatedBodyEnemy[0];if(f.default.PlayEffHitByConcat(S,t,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(t)&&this.relBody.CauseDmg(t,m.default.Pop(S,{dmg:this.relBody.commonInfluence,posX:t.position.x,posY:t.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:t.normal.x,norY:t.normal.y,type:h.default.equipment})),this.jumpCount--,0==this.jumpCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<b.default.GROUND_Y&&(f.default.PlayEffHitByBodyForHitGround(S,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),p.default.BoomForBody(S,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}P._t=new r.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.rs=c.default.Pop(S,{logicCode:3035,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:_.default.ParseStrToNum(e.prop_2),jumpAbleCount:_.default.ParseStrToNum(e.prop_3),rateHor:_.default.ParseStrToNum(e.prop_4),rateVer:_.default.ParseStrToNum(e.prop_5)}),init:(t,o)=>{t.commonBehaviour=e.Pop(S,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(g.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,S),aditionalEff:()=>a.default.Pop(a.default.typeArray,S),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,S);return o.push(t.deathOgg),o}})}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3036Args:[function(e,t,o){"use strict";cc._RF.push(t,"10c4d+6c05E2a1YSVVFoOYr","Logic3036Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3036:[function(e,t,o){"use strict";cc._RF.push(t,"55bf3ahKPVPm56dIFGF9TGb","Logic3036"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../../common/GameElementPart"),h=e("../GameElementBodyCtxDmgType"),f=e("../GameSizeMarkRS"),y=e("../../../display/GameDisplayBody017"),_=e("../../../../frame/basic/UtilString"),g=e("../../../display/GameDisplayBody013"),b=e("../../../GameCommon"),S="Logic3036";class P extends l.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(P._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,S);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(S,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,S);let o=a.default.Pop(a.default.typeCircleShape,S);o.Set(a.default.Pop(a.default.typeccVec2,S),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(S,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];this.relBody.CheckDmgAble(e)&&(f.default.PlayEffHitByConcat(S,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,m.default.Pop(S,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:h.default.equipment})))}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<b.default.GROUND_Y&&(f.default.PlayEffHitByBodyForHitGround(S,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),p.default.BoomForBody(S,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}P._t=new r.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.rs=c.default.Pop(S,{logicCode:3036,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:_.default.ParseStrToNum(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(S,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(g.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,S),aditionalEff:()=>a.default.Pop(a.default.typeArray,S),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,S);return o.push(t.deathOgg),o}})}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3037Args:[function(e,t,o){"use strict";cc._RF.push(t,"39019H3P25GNKzieiPu9V3u","Logic3037Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3037StatusFly:[function(e,t,o){"use strict";cc._RF.push(t,"88c59zKTRhCfZeVEsaTFSt/","Logic3037StatusFly"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../GameSizeMarkRS"),n=e("./Logic3037Status"),l="Logic3037StatusFly";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnStep(e){if(0<this.relMachine.relBody.listConcatedGround.length&&this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relMachine.relBody.commonCenterPos.y<r.default.GROUND_Y)return s.default.PlayEffHitByBodyForHitGround(l,this.relMachine.relBody),void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);0<this.relMachine.relBody.listConcatedBodyEnemy.length&&(this.relMachine.hookTarget=this.relMachine.relBody.listConcatedBodyEnemy[0].relFixture.relBody.relEle,this.relMachine.EnterStatus(this.relMachine.statusHook))}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3037Status":"Logic3037Status"}],Logic3037StatusHook:[function(e,t,o){"use strict";cc._RF.push(t,"ae356vuXrpJ4pN02dmeMJSg","Logic3037StatusHook"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../GameElementBodyCtxDmg"),s=e("../GameElementBodyCtxDmgType"),n=e("../GameSizeMarkRS"),l=e("./Logic3037Status"),c="Logic3037StatusHook";class d extends l.default{constructor(){super(),this.pos=i.default.Pop(i.default.typeB2Vec2,c)}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this.dmgAbleCount=this.relMachine.args.dmgAbleCount,this.hookMSLimit=this.relMachine.args.hookMSLimit,this.relMachine.relBody.commonBody.b2Body.SetGravityScale(0),this.relX=this.relMachine.relBody.commonBody.b2Body.GetPosition().x-this.relMachine.hookTarget.commonBody.b2Body.GetPosition().x,this.relY=this.relMachine.relBody.commonBody.b2Body.GetPosition().y-this.relMachine.hookTarget.commonBody.b2Body.GetPosition().y}OnStep(e){if(this.hookMSLimit-=e,this.hookMSLimit<=0)this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);else if(this.relMachine.hookTarget.isValid){this.pos.x=this.relMachine.hookTarget.commonBody.b2Body.GetPosition().x+this.relX,this.pos.y=this.relMachine.hookTarget.commonBody.b2Body.GetPosition().y+this.relY,this.relMachine.relBody.commonBody.b2Body.SetPosition(this.pos);for(let e=0;e<this.relMachine.relBody.listConcatedBodyEnemy.length;e++){let t=this.relMachine.relBody.listConcatedBodyEnemy[e];if(this.relMachine.relBody.CheckDmgAble(t)&&(this.relMachine.relBody.CauseDmg(t,r.default.Pop(c,{dmg:this.relMachine.relBody.commonInfluence,posX:t.position.x,posY:t.position.y,repel:this.relMachine.relBody.commonArgsCfg.props_repel,norX:t.normal.x,norY:t.normal.y,type:s.default.equipment})),n.default.PlayEffHitByConcat(c,t,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.relBody.commonArgsCfg.size_mark),this.dmgAbleCount--,0==this.dmgAbleCount))return void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody)}}else this.relMachine.relBody.relState.RemEle(this.relMachine.relBody)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3037Status":"Logic3037Status"}],Logic3037Status:[function(e,t,o){"use strict";cc._RF.push(t,"2e2e5xY7idFU4TWcsAZul3r","Logic3037Status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}},cc._RF.pop()},{}],Logic3037:[function(e,t,o){"use strict";cc._RF.push(t,"bc20fup5lxHSLgdTlgOLxyz","Logic3037"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../../../display/GameDisplayBody017"),p=e("../../../../frame/basic/UtilString"),h=e("../../../display/GameDisplayBody013"),f=e("./Logic3037StatusFly"),y=e("./Logic3037StatusHook"),_="Logic3037";class g extends l.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(g._t,e);return i.relBody=t,i.args=o,i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnInit(){this.statusFly=f.default.Pop(_,this),this.statusHook=y.default.Pop(_,this),this.EnterStatus(this.statusFly),this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,_);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(_,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,_);let o=a.default.Pop(a.default.typeCircleShape,_);o.Set(a.default.Pop(a.default.typeccVec2,_),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(_,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,this.currStatus.OnStep(e)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),n.default.inst.VoiceSet(this.args.deathOgg)}}g._t=new r.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),function(e){e.rs=c.default.Pop(_,{logicCode:3037,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:p.default.ParseStrToNum(e.prop_2),dmgAbleCount:p.default.ParseStrToNum(e.prop_3),hookMSLimit:p.default.ParseStrToNum(e.prop_4)}),init:(t,o)=>{t.commonBehaviour=e.Pop(_,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(m.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,_),aditionalEff:()=>a.default.Pop(a.default.typeArray,_),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,_);return o.push(t.deathOgg),o}})}(g||(g={})),o.default=g,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./Logic3037StatusFly":"Logic3037StatusFly","./Logic3037StatusHook":"Logic3037StatusHook"}],Logic3038Args:[function(e,t,o){"use strict";cc._RF.push(t,"1fc1d4MOqROvqkNPI4iA+ly","Logic3038Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3038:[function(e,t,o){"use strict";cc._RF.push(t,"027edpzJ65O6YeSYQD02sVp","Logic3038"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBody"),c=e("../GameElementBodyBehaviour"),d=e("../GameElementBodyBehaviourRS"),u=e("../../../display/GameDisplayBody000"),m=e("../../GameCtxB2BodyFixtureTypeRS"),p=e("../GameElementBodyCtxDmg"),h=e("../../common/GameElementPart"),f=e("../GameElementBodyCtxDmgType"),y=e("../GameSizeMarkRS"),_=e("../../../display/GameDisplayBody017"),g=e("../../../../frame/basic/UtilString"),b=e("../../../display/GameDisplayBody013"),S=e("../../../GameCommon"),P="Logic3038";class B extends c.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(B._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,P);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(P,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,P);let o=a.default.Pop(a.default.typeCircleShape,P);o.Set(a.default.Pop(a.default.typeccVec2,P),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(P,t,m.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(this.relBody.CheckDmgAble(e)&&(y.default.PlayEffHitByConcat(P,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,p.default.Pop(P,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:f.default.equipment}))),this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<S.default.GROUND_Y&&(y.default.PlayEffHitByBodyForHitGround(P,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){let e=Math.PI/3/(this.args.listSplit.length-1),t=-this.relBody.relState.b2Gravity/s.default.mgrUI._sizePerPixel/1e3/4;for(let o=0;o<this.args.listSplit.length;o++){let i=2*Math.PI/3-o*e,a=l.default.PopForCall(P,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:Math.cos(i)*t,vecY:Math.sin(i)*t,cfgId:this.args.listSplit[o],camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(a)}this.relBody.BodyDestory(this.relBody.commonBody),h.default.BoomForBody(P,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}B._t=new r.default({instantiate:()=>new B,onPop:()=>{},onPush:()=>{},tag:P}),function(e){e.rs=d.default.Pop(P,{logicCode:3038,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:g.default.ParseStrToNum(e.prop_2),listSplit:g.default.ParseStrToListNum(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(P,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(b.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(_.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(u.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,P);return o.push(...t.listSplit),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,P),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,P);return o.push(t.deathOgg),o}})}(B||(B={})),o.default=B,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3039Args:[function(e,t,o){"use strict";cc._RF.push(t,"1008aYepCZIM5ITEuobAhqd","Logic3039Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3039:[function(e,t,o){"use strict";cc._RF.push(t,"7bf44Ork5ZBtpACapLbfScU","Logic3039"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../../common/GameElementPart"),h=e("../GameElementBodyCtxDmgType"),f=e("../GameSizeMarkRS"),y=e("../../../display/GameDisplayBody017"),_=e("../../../../frame/basic/UtilString"),g=e("../../../display/GameDisplayBody013"),b=e("../../../GameCommon"),S="Logic3039";class P extends l.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(P._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,S);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(S,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,S);let o=a.default.Pop(a.default.typeCircleShape,S);o.Set(a.default.Pop(a.default.typeccVec2,S),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(S,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().y<0&&0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(this.relBody.CheckDmgAble(e)&&(f.default.PlayEffHitByConcat(S,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,m.default.Pop(S,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:h.default.equipment}))),this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<b.default.GROUND_Y&&(f.default.PlayEffHitByBodyForHitGround(S,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),p.default.BoomForBody(S,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.bodyRadius,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,this.relBody.commonBody.b2Body.GetLinearVelocity().x,this.relBody.commonBody.b2Body.GetLinearVelocity().y),n.default.inst.VoiceSet(this.args.deathOgg)}}P._t=new r.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.rs=c.default.Pop(S,{logicCode:3039,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:_.default.ParseStrToNum(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(S,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(g.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,S),aditionalEff:()=>a.default.Pop(a.default.typeArray,S),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,S);return o.push(t.deathOgg),o}})}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3040Args:[function(e,t,o){"use strict";cc._RF.push(t,"0ec41HFcKtCi4TSVuMKtNFk","Logic3040Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3040:[function(e,t,o){"use strict";cc._RF.push(t,"02406YhUiZJZaob9C/a0E/y","Logic3040"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../GameElementBodyBehaviour"),l=e("../GameElementBodyBehaviourRS"),c=e("../../../display/GameDisplayBody000"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../GameElementBodyCtxDmgType"),p=e("../GameSizeMarkRS"),h=e("../../../display/GameDisplayBody017"),f=e("../../../../frame/basic/UtilString"),y=e("../../../display/GameDisplayBody013"),_=e("../../../GameCommon"),g="Logic3040";class b extends n.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(b._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,g);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,this.b2PosXinited=e.position.x,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(g,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,g);let o=a.default.Pop(a.default.typeCircleShape,g);o.Set(a.default.Pop(a.default.typeccVec2,g),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(g,t,d.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.MapB2PosToPixelPos(),0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<_.default.GROUND_Y)return p.default.PlayEffHitByBodyForHitGround(g,this.relBody),void this.relBody.relState.RemEle(this.relBody);if(0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];this.relBody.CheckDmgAble(e)&&(p.default.PlayEffHitByConcat(g,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,u.default.Pop(g,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:m.default.equipment})));let t=a.default.Pop(a.default.typeB2Vec2,g);t.y=this.relBody.commonBody.b2Body.GetLinearVelocity().y-this.relBody.relState.b2Gravity*this.relBody.commonArgsCfg.gravity_scale*this.args.msRecovery/1e3,t.x=this.relBody.commonBody.b2Body.GetLinearVelocity().x;let o=a.default.Pop(a.default.typeB2Vec2,g);if(o.x=this.relBody.commonBody.b2Body.GetPosition().x-this.relBody.commonBody.b2Body.GetLinearVelocity().x*this.args.msRecovery/1e3,o.x<=this.b2PosXinited)return void this.relBody.relState.RemEle(this.relBody);let i=this.relBody.relState.player.commonBehaviour.b2GetSpeedX()*this.args.msRecovery/1e3;o.x+=i,this.b2PosXinited+=i,o.y=this.relBody.commonBody.b2Body.GetPosition().y,o.y=this.relBody.commonBody.b2Body.GetPosition().y-t.y*this.args.msRecovery/1e3-.5*this.relBody.relState.b2Gravity*this.relBody.commonArgsCfg.gravity_scale*Math.pow(this.args.msRecovery/1e3,2),this.relBody.commonBody.b2Body.SetPosition(o),this.relBody.commonBody.b2Body.SetLinearVelocity(t),this.MapB2PosToPixelPos(),p.default.PlayEffTransition(g,this.relBody),this.relBody.ClearDmgRecord()}}MapB2PosToPixelPos(){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody)}}b._t=new r.default({instantiate:()=>new b,onPop:()=>{},onPush:()=>{},tag:g}),function(e){e.rs=l.default.Pop(g,{logicCode:3040,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:f.default.ParseStrToNum(e.prop_2),msRecovery:f.default.ParseStrToNum(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(g,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(c.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,g),aditionalEff:()=>a.default.Pop(a.default.typeArray,g),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,g);return o.push(t.deathOgg),o}})}(b||(b={})),o.default=b,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3041Args:[function(e,t,o){"use strict";cc._RF.push(t,"065b1xYIENLk4n2CDXVNDwI","Logic3041Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3041:[function(e,t,o){"use strict";cc._RF.push(t,"aef12yRfFREZpEqkICqs02P","Logic3041"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../GameElementBodyBehaviour"),l=e("../GameElementBodyBehaviourRS"),c=e("../../../display/GameDisplayBody000"),d=e("../../GameCtxB2BodyFixtureTypeRS"),u=e("../GameElementBodyCtxDmg"),m=e("../GameElementBodyCtxDmgType"),p=e("../GameSizeMarkRS"),h=e("../../../display/GameDisplayBody017"),f=e("../../../../frame/basic/UtilString"),y=e("../../../display/GameDisplayBody013"),_="Logic3041";class g extends n.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(g._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.msKeep=this.args.msKeep,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,_);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(_,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,_);let o=a.default.Pop(a.default.typeCircleShape,_);o.Set(a.default.Pop(a.default.typeccVec2,_),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(_,t,d.default.AREA);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.msKeep-=e,this.msKeep<=0)this.relBody.relState.RemEle(this.relBody);else{this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y;for(let e=0;e<this.relBody.listConcatedBodyEnemy.length;e++){let t=this.relBody.listConcatedBodyEnemy[e];this.relBody.CheckDmgAble(t)&&(p.default.PlayEffHitByConcat(_,t,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(t,u.default.Pop(_,{dmg:this.relBody.commonInfluence,posX:t.position.x,posY:t.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:t.normal.x,norY:t.normal.y,type:m.default.equipment})))}}}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody)}}g._t=new r.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),function(e){e.rs=l.default.Pop(_,{logicCode:3041,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:f.default.ParseStrToNum(e.prop_2),msKeep:f.default.ParseStrToNum(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(_,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(c.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,_),aditionalEff:()=>a.default.Pop(a.default.typeArray,_),aditionalVoice:()=>a.default.Pop(a.default.typeArray,_)})}(g||(g={})),o.default=g,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3042Args:[function(e,t,o){"use strict";cc._RF.push(t,"4d4ce+6oiJJH4Di1JzpJW+T","Logic3042Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3042:[function(e,t,o){"use strict";cc._RF.push(t,"a6690ybWytKTaI/VrXSVF24","Logic3042"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBody"),c=e("../GameElementBodyBehaviour"),d=e("../GameElementBodyBehaviourRS"),u=e("../../../display/GameDisplayBody000"),m=e("../../GameCtxB2BodyFixtureTypeRS"),p=e("../GameSizeMarkRS"),h=e("../../../display/GameDisplayBody017"),f=e("../../../../frame/basic/UtilString"),y=e("../../../display/GameDisplayBody013"),_=e("../../../GameCommon"),g="Logic3042";class b extends c.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(b._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,g);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(g,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,g);let o=a.default.Pop(a.default.typeCircleShape,g);o.Set(a.default.Pop(a.default.typeccVec2,g),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(g,t,m.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){if(this.relBody.listConcatedBodyEnemy[0],0==this.dmgAbleCount)return;if(this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<_.default.GROUND_Y&&(p.default.PlayEffHitByBodyForHitGround(g,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){let e=l.default.PopForCall(g,{posX:this.relBody.commonCenterPos.x,posY:this.relBody.commonCenterPos.y,vecX:0,vecY:0,cfgId:this.args.boom,camp:this.relBody.commonArgsCamp,caller:this.relBody});this.relBody.relState.AddEle(e),this.relBody.BodyDestory(this.relBody.commonBody),n.default.inst.VoiceSet(this.args.deathOgg)}}b._t=new r.default({instantiate:()=>new b,onPop:()=>{},onPush:()=>{},tag:g}),function(e){e.rs=d.default.Pop(g,{logicCode:3042,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:f.default.ParseStrToNum(e.prop_2),boom:f.default.ParseStrToNum(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(g,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(y.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(u.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:(e,t)=>{let o=a.default.Pop(a.default.typeArray,g);return o.push(t.boom),o},aditionalEff:()=>a.default.Pop(a.default.typeArray,g),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,g);return o.push(t.deathOgg),o}})}(b||(b={})),o.default=b,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBody":"GameElementBody","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3043Args:[function(e,t,o){"use strict";cc._RF.push(t,"39817GiIFdCoYGvt+mszKDe","Logic3043Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3043StatusFly:[function(e,t,o){"use strict";cc._RF.push(t,"b35c7pKm9pIY7vu9FWvUdah","Logic3043StatusFly"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../GameSizeMarkRS"),n=e("./Logic3043Status"),l="Logic3043StatusFly";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnStep(e){if(0<this.relMachine.relBody.listConcatedGround.length&&this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relMachine.relBody.commonCenterPos.y<r.default.GROUND_Y)return s.default.PlayEffHitByBodyForHitGround(l,this.relMachine.relBody),void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);0<this.relMachine.relBody.listConcatedBodyEnemyNoBullet.length&&this.relMachine.EnterStatus(this.relMachine.statusKeep)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3043Status":"Logic3043Status"}],Logic3043StatusKeep:[function(e,t,o){"use strict";cc._RF.push(t,"5c1d2tJisJLB6vdMJfxvSoY","Logic3043StatusKeep"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../GameElementBodyCtxDmg"),n=e("../GameElementBodyCtxDmgType"),l=e("../GameSizeMarkRS"),c=e("./Logic3043Status"),d="Logic3043StatusKeep";class u extends c.default{constructor(){super(),this.msWait=0}static Pop(e,t){let o=i.default.Pop(u._t,e);return o.relMachine=t,o}OnEnter(){this.ableTime=this.relMachine.args.dmgTimes;let e=i.default.Pop(i.default.typeB2Vec2,d);e.x=this.relMachine.relBody.relState.player.commonBehaviour.b2GetSpeedX(),this.relMachine.relBody.commonBody.b2Body.SetLinearVelocity(e),this.relMachine.relBody.commonBody.b2Body.SetGravityScale(this.relMachine.args.gravityScaleWhileKeep)}OnStep(e){if(0<this.relMachine.relBody.listConcatedGround.length&&this.relMachine.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relMachine.relBody.commonCenterPos.y<r.default.GROUND_Y)return l.default.PlayEffHitByBodyForHitGround(d,this.relMachine.relBody),void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);if(this.msWait-=e,!(0<this.msWait)){this.relMachine.relBody.ClearDmgRecord();for(let e=0;e<this.relMachine.relBody.listConcatedBodyEnemy.length;e++){let e=this.relMachine.relBody.listConcatedBodyEnemy[0];this.relMachine.relBody.CheckDmgAble(e)&&(l.default.PlayEffHitByConcat(d,e,this.relMachine.relBody.relState,this.relMachine.relBody.commonCache.colorMain,this.relMachine.relBody.commonArgsCfg.size_mark),this.relMachine.relBody.CauseDmg(e,s.default.Pop(d,{dmg:this.relMachine.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relMachine.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:n.default.equipment})))}if(this.ableTime--,!(0<this.ableTime))return l.default.PlayEffHitByBody(d,this.relMachine.relBody),void this.relMachine.relBody.relState.RemEle(this.relMachine.relBody);this.msWait=this.relMachine.args.dmgSpacing}}}o.default=u,u._t=new a.default({instantiate:()=>new u,onPop:()=>{},onPush:()=>{},tag:d}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./Logic3043Status":"Logic3043Status"}],Logic3043Status:[function(e,t,o){"use strict";cc._RF.push(t,"d26dbAXkVFGdJ6czdELhDtP","Logic3043Status"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}},cc._RF.pop()},{}],Logic3043:[function(e,t,o){"use strict";cc._RF.push(t,"e606ed3lWtH9Z+VjW+AgFo/","Logic3043"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../../../display/GameDisplayBody017"),p=e("../../../../frame/basic/UtilString"),h=e("../../../display/GameDisplayBody013"),f=e("./Logic3043StatusFly"),y=e("./Logic3043StatusKeep"),_="Logic3043";class g extends l.default{constructor(){super()}static Pop(e,t,o){let i=a.default.Pop(g._t,e);return i.relBody=t,i.args=o,i}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnInit(){this.statusFly=f.default.Pop(_,this),this.statusKeep=y.default.Pop(_,this),this.EnterStatus(this.statusFly),this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,_);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(_,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,_);let o=a.default.Pop(a.default.typeCircleShape,_);o.Set(a.default.Pop(a.default.typeccVec2,_),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(_,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel);this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,this.currStatus.OnStep(e)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody),n.default.inst.VoiceSet(this.args.deathOgg)}}g._t=new r.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),function(e){e.rs=c.default.Pop(_,{logicCode:3043,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:p.default.ParseStrToNum(e.prop_2),dmgTimes:p.default.ParseStrToNum(e.prop_3),dmgSpacing:p.default.ParseStrToNum(e.prop_4),gravityScaleWhileKeep:p.default.ParseStrToNum(e.prop_5)}),init:(t,o)=>{t.commonBehaviour=e.Pop(_,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(h.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(m.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,_),aditionalEff:()=>a.default.Pop(a.default.typeArray,_),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,_);return o.push(t.deathOgg),o}})}(g||(g={})),o.default=g,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./Logic3043StatusFly":"Logic3043StatusFly","./Logic3043StatusKeep":"Logic3043StatusKeep"}],Logic3044Args:[function(e,t,o){"use strict";cc._RF.push(t,"b984b8M2NxFapvvs5csgX65","Logic3044Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3044:[function(e,t,o){"use strict";cc._RF.push(t,"f0719Iqh/FAcIoPW2kuPxFC","Logic3044"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../GameCtxB2BodyFixtureTypeRS"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../GameElementBodyCtxDmg"),u=e("../GameElementBodyCtxDmgType"),m=e("../../../display/GameDisplayBody016"),p=e("../../../display/GameDisplayBody018"),h=e("../../../../frame/basic/UtilString"),f=e("../../common/GameElementPart"),y=e("../GameSizeMarkRS"),_="Logic3044";class g extends l.default{constructor(){super(),this.posToSet=a.default.Pop(a.default.typeB2Vec2,_)}static Pop(e,t,o){let i=a.default.Pop(g._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonFootPos.x=this.relBody.relState.player.commonFootPos.x,this.relBody.commonFootPos.y=this.relBody.relState.player.commonFootPos.y,this.relBody.commonArgsInitVec.x=0,this.relBody.commonArgsInitVec.y=1,this._lifeLess=this.args.keep,this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,_);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(_,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0),this.relBody.commonBody.b2Body.SetAngle(Math.atan2(this.relBody.commonArgsInitVec.y,this.relBody.commonArgsInitVec.x));const t=a.default.Pop(a.default.typeFixtureDef,_);let o=a.default.Pop(a.default.typePolygonShape,_),r=a.default.Pop(a.default.typeArray,_);r.push(a.default.Pop(a.default.typeccVec2,_));for(let i=0;i<=1;i+=.25){let e=1-Math.pow(2*(i-.5),2);e=Math.sqrt(e);let t=a.default.Pop(a.default.typeccVec2,_);t.x=e*this.args.height*s.default.mgrUI._sizePerPixel,t.y=(i-.5)*this.args.width*s.default.mgrUI._sizePerPixel,r.push(t)}r.reverse(),o.Set(r),t.shape=o,this.relBody.commonBody.FixtureCreate(_,t,n.default.AREA_SWORD),f.default.BoomForBody(_,this.relBody.relState,this.relBody.commonCache.colorMain,this.args.width/4,this.relBody.commonFootPos.x,this.relBody.commonFootPos.y,0,-1)}OnTimeStep(e){for(let t=0;t<this.relBody.listConcatedBodyEnemy.length;t++){let e=this.relBody.listConcatedBodyEnemy[t];this.relBody.CheckDmgAble(e)&&(y.default.PlayEffHitByConcat(_,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CauseDmg(e,d.default.Pop(_,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:u.default.equipment})))}this._lifeLess-=e,this._lifeLess<=0&&this.relBody.relState.RemEle(this.relBody)}OnDestory(){this.relBody.BodyDestory(this.relBody.commonBody)}}g._t=new r.default({instantiate:()=>new g,onPop:()=>{},onPush:()=>{},tag:_}),function(e){e.rs=c.default.Pop(_,{logicCode:3044,cfgToArgs:e=>({width:Number.parseFloat(e.prop_0),height:Number.parseFloat(e.prop_1),keep:h.default.ParseStrToNum(e.prop_2)}),init:(t,o)=>{t.commonBehaviour=e.Pop(_,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1018:o.push(p.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(m.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:()=>0,aditionalBody:()=>a.default.Pop(a.default.typeArray,_),aditionalEff:()=>a.default.Pop(a.default.typeArray,_),aditionalVoice:()=>a.default.Pop(a.default.typeArray,_)})}(g||(g={})),o.default=g,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../display/GameDisplayBody016":"GameDisplayBody016","../../../display/GameDisplayBody018":"GameDisplayBody018","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/GameElementPart":"GameElementPart","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],Logic3045Args:[function(e,t,o){"use strict";cc._RF.push(t,"c7279VAK/hCCqJp67I7VfXP","Logic3045Args"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Logic3045:[function(e,t,o){"use strict";cc._RF.push(t,"ca761RtvWdDoahJFG2KzP5Z","Logic3045"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/global/Jiang"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("../GameElementBodyBehaviour"),c=e("../GameElementBodyBehaviourRS"),d=e("../../../display/GameDisplayBody000"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("../GameElementBodyCtxDmg"),p=e("../GameElementBodyCtxDmgType"),h=e("../GameSizeMarkRS"),f=e("../../../display/GameDisplayBody017"),y=e("../../../../frame/basic/UtilString"),_=e("../../../display/GameDisplayBody013"),g=e("../../../GameCommon"),b=e("../../../../frame/basic/UtilMath"),S="Logic3045";class P extends l.default{constructor(){super(),this.dmgAbleCount=1}static Pop(e,t,o){let i=a.default.Pop(P._t,e);return i.relBody=t,i.args=o,i}OnInit(){this.relBody.commonHpMax=0,this.relBody.commonHpCurrent=0;const e=a.default.Pop(a.default.typeBodyDef,S);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=this.relBody.commonFootPos.x*s.default.mgrUI._sizePerPixel,e.position.y=this.relBody.commonFootPos.y*s.default.mgrUI._sizePerPixel,e.gravityScale=this.relBody.commonArgsCfg.gravity_scale,this.relBody.commonBody=this.relBody.BodyCreate(S,e),this.relBody.commonBody.b2Body.SetFixedRotation(!0);const t=a.default.Pop(a.default.typeFixtureDef,S);let o=a.default.Pop(a.default.typeCircleShape,S);o.Set(a.default.Pop(a.default.typeccVec2,S),this.args.bodyRadius*s.default.mgrUI._sizePerPixel),t.shape=o,this.relBody.commonBody.FixtureCreate(S,t,u.default.BODY_BULLET);let r=this.relBody.commonArgsInitVec.mulSelf(1e3*s.default.mgrUI._sizePerPixel*(1+b.default.RandomLowerToUpper()*this.args.randomChange));this.relBody.commonBody.b2Body.SetLinearVelocity(r),this.relBody.commonBody.b2Body.SetAngularVelocity(2*this.args.roundPerSeconds*Math.PI)}OnDmg(e){this.relBody.relState.RemEle(this.relBody)}OnTimeStep(e){if(this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/s.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/s.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y,0<this.relBody.listConcatedBodyEnemy.length){let e=this.relBody.listConcatedBodyEnemy[0];if(0==this.dmgAbleCount)return;if(h.default.PlayEffHitByConcat(S,e,this.relBody.relState,this.relBody.commonCache.colorMain,this.relBody.commonArgsCfg.size_mark),this.relBody.CheckDmgAble(e)&&this.relBody.CauseDmg(e,m.default.Pop(S,{dmg:this.relBody.commonInfluence,posX:e.position.x,posY:e.position.y,repel:this.relBody.commonArgsCfg.props_repel,norX:e.normal.x,norY:e.normal.y,type:p.default.equipment})),this.dmgAbleCount--,0==this.dmgAbleCount)return void this.relBody.relState.RemEle(this.relBody)}0<this.relBody.listConcatedGround.length&&this.relBody.commonBody.b2Body.GetLinearVelocity().y<=0&&this.relBody.commonCenterPos.y<g.default.GROUND_Y&&(h.default.PlayEffHitByBodyForHitGround(S,this.relBody),this.relBody.relState.RemEle(this.relBody))}OnDestory(){n.default.inst.VoiceSet(this.args.deathOgg),this.relBody.BodyDestory(this.relBody.commonBody)}}P._t=new r.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.rs=c.default.Pop(S,{logicCode:3045,cfgToArgs:e=>({deathOgg:Number.parseFloat(e.prop_0),bodyRadius:Number.parseFloat(e.prop_1),roundPerSeconds:y.default.ParseStrToNum(e.prop_2),randomChange:y.default.ParseStrToNum(e.prop_3)}),init:(t,o)=>{t.commonBehaviour=e.Pop(S,t,o)},instDisplay:(e,t,o)=>{switch(t.commonArgsCfg.style_code){case 1013:o.push(_.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;case 1017:o.push(f.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id));break;default:o.push(d.default.GetNodeTypeForAtk(t.commonArgsCfg).CreateNode(e,t.id,t.id))}},boardDisplay:null,atkGetter:()=>0,hpGetter:()=>0,sizeGetter:e=>e.bodyRadius,aditionalBody:()=>a.default.Pop(a.default.typeArray,S),aditionalEff:()=>a.default.Pop(a.default.typeArray,S),aditionalVoice:(e,t)=>{let o=a.default.Pop(a.default.typeArray,S);return o.push(t.deathOgg),o}})}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/basic/UtilString":"UtilString","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../../display/GameDisplayBody000":"GameDisplayBody000","../../../display/GameDisplayBody013":"GameDisplayBody013","../../../display/GameDisplayBody017":"GameDisplayBody017","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../GameElementBodyBehaviour":"GameElementBodyBehaviour","../GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS"}],LotteryTipsViewState:[function(e,t,o){"use strict";cc._RF.push(t,"049da+DPfJB2rcalmsHGSU4","LotteryTipsViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/ViewState"),l=e("../../GameCommon"),c=e("../voice_ogg/VoiceOggViewState");class d extends n.default{constructor(){super(i.default.GAME,n.default.BG_TYPE.MASK,!0)}static Pop(e){return a.default.Pop(d._t,e)}OnMaskTouch(){c.default.inst.VoiceSet(l.default.BTN_VOICE),s.default.mgrUI.Close(this._idView)}}o.default=d,d._t=new r.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"LotteryTipsViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],LotteryTipsView:[function(e,t,o){"use strict";cc._RF.push(t,"95363voR9JF/b5iQcl2a3ji","LotteryTipsView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../GameCommon"),{ccclass:u,property:m}=cc._decorator;let p=i=class extends c.default{};p.nodeType=l.default.Pop("StoreTipsView",{prefabPath:`${d.default.SUB_MAIN}/prefab_ui/lottery_view_tips`,componentGetter:e=>e.getComponent(i),listModuleStyle:[],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.opacityInForTemp200}),p=i=a([u],p),o.default=p,cc._RF.pop()},{"../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],LotteryViewBubbleData:[function(e,t,o){"use strict";cc._RF.push(t,"368efYRFcxFTpTvNlib6T6Z","LotteryViewBubbleData"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r="LotteryViewBubble";class s{constructor(){this.msSteped=0,this.msTotal=0,this.pos=i.default.Pop(i.default.typeccVec2,r),this.rate=0}static Pop(e,t,o,a){let r=i.default.Pop(s._t,e);return r.angle=t,r.msTotal+=o,r.idLottery=a,r}onStep(e){this.msSteped+=e,this.msSteped=Math.min(this.msSteped,this.msTotal),this.rate=this.msSteped/this.msTotal}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],LotteryViewBubble:[function(e,t,o){"use strict";cc._RF.push(t,"68e7d2XTalCSatSNd/Dgbdy","LotteryViewBubble");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/config/src/CfgLottery"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../../game_element/body/GameCfgBodyCacheDropRS"),{ccclass:f,property:y}=cc._decorator,_="LotteryViewBubble";let g=i=class extends m.default{constructor(){super(...arguments),this.containerProp=null}};g.nodeType=u.default.Pop(_,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/lottery_view_bubble`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(_,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_LOTTO],propsFilter:(e,t,o)=>{let i=t.stateLottery.listBubbleData[o];e.node.x=Math.cos(i.angle)*i.rate*200,e.node.y=Math.sin(i.angle)*i.rate*200;let a=1-Math.abs(i.rate-.5)/.5;a=Math.pow(a,.5),e.node.opacity=255*a}})],childrenCreator:[u.default.ChildrenGeneration.Pop(_,{containerGetter:e=>e.containerProp,uiNodeCreator:(e,t,o)=>{let i=e.stateLottery.listBubbleData[t],a=l.default.mgrCfg.cfgLottery.select(n.default.idGetter,i.idLottery)._list[0];h.default.mapCodeToRS.get(a.item_type).onBubleDisplay(e,o,a.item_id)}})],propsType:s.default.typeNumber,hideRS:d.default.localScale0,enterRS:c.default.none}),a([y(cc.Node)],g.prototype,"containerProp",void 0),g=i=a([f],g),o.default=g,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/config/src/CfgLottery":"CfgLottery","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS"}],LotteryViewState:[function(e,t,o){"use strict";cc._RF.push(t,"ce67fBjZkNBeKD4DrWsBswO","LotteryViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../cfg_cache/CfgCacheChapter"),l=e("../../cfg_cache/CfgCacheLottery"),c=e("../lv_up_batch_view/LvUpBatchViewState"),d=e("./LotteryViewBubbleData"),u="LotteryViewState",m=400,p=3e3;class h{constructor(){this.listUnlockedItem=a.default.Pop(a.default.typeArray,u),this.listBubbleData=a.default.Pop(a.default.typeArray,u),this.childrenAble=!1,this.cd=0}static Pop(e){let t=a.default.Pop(h._t,e);t.challengeChapter=n.default.GetChallengeChapter();for(let o=0;o<s.default.mgrCfg.cfgLottery._list.length;o++){let e=s.default.mgrCfg.cfgLottery._list[o];l.default.CheckUsUnlocked(t.challengeChapter,e)&&t.listUnlockedItem.push(e)}return t.stateLvUpBatch=c.default.Pop(u),t.OnChange(i.default.INDEXVIEW_LOTTO),t}OnChange(e){this.stateLvUpBatch.OnChange(e)}OnStep(e){if(this.childrenAble||0!=this.listBubbleData.length){s.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_LOTTO);for(let t=0;t<this.listBubbleData.length;){let o=this.listBubbleData[t];o.onStep(e),1==o.rate?this.listBubbleData.splice(t,1):t++}if(this.cd-=e,this.childrenAble&&this.cd<=0){this.cd=m;let e=this.listUnlockedItem[Math.floor(Math.random()*this.listUnlockedItem.length)];this.listBubbleData.push(d.default.Pop(u,2*Math.random()*Math.PI,p,e.id))}}}}o.default=h,h._t=new r.default({instantiate:()=>new h,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../cfg_cache/CfgCacheChapter":"CfgCacheChapter","../../cfg_cache/CfgCacheLottery":"CfgCacheLottery","../lv_up_batch_view/LvUpBatchViewState":"LvUpBatchViewState","./LotteryViewBubbleData":"LotteryViewBubbleData"}],LotteryView:[function(e,t,o){"use strict";cc._RF.push(t,"04034SJjFhGobZq3nQJVA7Y","LotteryView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/basic/UtilMath"),l=e("../../../frame/component/ComponentNodeEventer"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstEnterRS"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../../../frame/ui/UINodeType"),p=e("../../../frame/ui/UIViewComponent"),h=e("../../GameCommon"),f=e("../../game_element/body/DefineVoice"),y=e("../voice_ogg/VoiceOggViewState"),_=e("./LotteryTipsView"),g=e("./LotteryTipsViewState"),b=e("./LotteryViewBubble"),{ccclass:S,property:P}=cc._decorator,B="LotteryView";let C=i=class extends p.default{constructor(){super(...arguments),this.txtCurrentEnable=null,this.txtCurrentDisable=null,this.txtOwn=null,this.btnGo=null,this.containerBubble=null,this.sprAlchemy=null,this.cameraAlchemy=null,this.nodeBubble=null,this.btnRegular=null,this.containerItem=null}onLoad(){let e=new cc.RenderTexture;e.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),e.initWithSize(c.default.mgrUI._containerUI.width,c.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),e.setPremultiplyAlpha(!0),this.cameraAlchemy.targetTexture=e,this.sprAlchemy.getMaterial(0).setProperty("textureAlchemy",e),this.sprAlchemy.node.width=c.default.mgrUI._containerUI.width,this.sprAlchemy.node.height=c.default.mgrUI._containerUI.height}};C.nodeType=m.default.Pop(B,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/lottery_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[m.default.ModuleStyle.Pop(B,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_LOTTO],propsFilter:(e,t)=>{null!=t.stateLottery.stateLvUpBatch.recCoin&&(e.txtCurrentEnable.string=`${n.default.ParseNumToKMBTAABB(t.stateLottery.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCurrentEnable.node.active=t.stateLottery.stateLvUpBatch.countCost<=t.stateLottery.stateLvUpBatch.recCoin.count,e.txtCurrentDisable.string=`${n.default.ParseNumToKMBTAABB(t.stateLottery.stateLvUpBatch.countCost,Math.ceil)}`,e.txtCurrentDisable.node.active=t.stateLottery.stateLvUpBatch.recCoin.count<t.stateLottery.stateLvUpBatch.countCost,e.txtOwn.string=`${n.default.ParseNumToKMBTAABB(t.stateLottery.stateLvUpBatch.recCoin.count,Math.floor)}`,e.btnGo.evterTouchStart.On(()=>{y.default.inst.VoiceSet(f.default.VOICE_MONEY)}),e.btnGo.evterTouchEnd.On(()=>{t.stateLottery.stateLvUpBatch.Go()}),e.btnRegular.evterTouchStart.On(()=>{y.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.btnRegular.evterTouchEnd.On(()=>{c.default.mgrUI.Open(_.default.nodeType,g.default.Pop(B))}))}})],childrenCreator:[m.default.ChildrenGeneration.Pop(B,{containerGetter:e=>e.containerBubble,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.stateLottery.listBubbleData.length;i++)o.push(b.default.nodeType.CreateNode(e,i,i))}})],propsType:s.default.typeNumber,hideRS:u.default.setParentNull,enterRS:d.default.none}),a([P(cc.Label)],C.prototype,"txtCurrentEnable",void 0),a([P(cc.Label)],C.prototype,"txtCurrentDisable",void 0),a([P(cc.Label)],C.prototype,"txtOwn",void 0),a([P(l.default)],C.prototype,"btnGo",void 0),a([P(cc.Node)],C.prototype,"containerBubble",void 0),a([P(cc.Sprite)],C.prototype,"sprAlchemy",void 0),a([P(cc.Camera)],C.prototype,"cameraAlchemy",void 0),a([P(cc.Node)],C.prototype,"nodeBubble",void 0),a([P(l.default)],C.prototype,"btnRegular",void 0),a([P(cc.Node)],C.prototype,"containerItem",void 0),C=i=a([S],C),o.default=C,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./LotteryTipsView":"LotteryTipsView","./LotteryTipsViewState":"LotteryTipsViewState","./LotteryViewBubble":"LotteryViewBubble"}],LvUpBatchMachineTouchStatus1FadeIn:[function(e,t,o){"use strict";cc._RF.push(t,"538b0Ygpz1Jlaz68lGQcQ0A","LvUpBatchMachineTouchStatus1FadeIn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/global/Jiang"),r=e("../lock_view/LockViewState"),s=e("./LvUpBatchMachineTouchStatus");o.default=class extends s.default{OnEnter(){this.relMachine.lockId=r.default.inst.LockApp(),this.msWait=200}OnStep(e){a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status2FlashIn)}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/global/Jiang":"Jiang","../lock_view/LockViewState":"LockViewState","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus2FlashIn:[function(e,t,o){"use strict";cc._RF.push(t,"d3108aqgypGF7JFmhn9Zh7n","LvUpBatchMachineTouchStatus2FlashIn"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexStorageItem"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/global/Jiang"),n=e("../../cfg_cache/CfgCacheLottery"),l=e("../../game_element/body/DefineVoice"),c=e("../../game_element/body/GameCfgBodyCacheDropRS"),d=e("../voice_ogg/VoiceOggViewState"),u=e("./LvUpBatchMachineTouchStatus"),m="LvUpBatchMachineTouchStatus2FlashIn";o.default=class extends u.default{OnEnter(){d.default.inst.VoiceSet(l.default.EQUIPMENT_DROP_TRIGGER),this.msWait=600;let e=r.default.Pop(r.default.typeArray,m);for(let o=0;o<s.default.mgrCfg.cfgLottery._list.length;o++){let t=s.default.mgrCfg.cfgLottery._list[o];n.default.CheckUsUnlocked(this.relMachine.relState.challengeChapter,t)&&e.push(t)}let t=r.default.Pop(r.default.typeArray,m);for(;t.length<e.length;){let o=Math.floor(Math.random()*e.length),i=e.splice(o,1)[0],a=c.default.mapCodeToRS.get(i.item_type);t.push(a.onLotteryCreateReward(i,this.relMachine.relState.countGot))}for(let o=0;o<this.relMachine.relState.listRecord.length;o++)this.relMachine.relState.listRecord[o].isLvUped=!1;for(let o=0;o<t.length;o++){let e=t[o],i=this.relMachine.relState.mapIdCfgToRecord.get(e.props[0]);i&&(i.isLvUped=!0)}for(let o=0;o<t.length;o++){let e=t[o];e.rs.onEnterBackpack(e.props)}a.default.listBackpackProp.media.onSet(),s.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_EQUIP),s.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_LOTTO)}OnStep(e){s.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status3FlashOut)}GetNodeFlashOpacity(){return 1-this.msWait/600}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/global/Jiang":"Jiang","../../cfg_cache/CfgCacheLottery":"CfgCacheLottery","../../game_element/body/DefineVoice":"DefineVoice","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus3FlashOut:[function(e,t,o){"use strict";cc._RF.push(t,"92ad2TGt9tKSrHxGc0vEcQk","LvUpBatchMachineTouchStatus3FlashOut"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/global/Jiang"),r=e("./LvUpBatchMachineTouchStatus");o.default=class extends r.default{OnEnter(){this.msWait=600;for(let e=0;e<this.relMachine.relState.listRecord.length;e++)this.relMachine.relState.listRecord[e].UpdateTempCount(),a.default.mgrUI.ModuleRefresh(i.default.INDEXVIEW_LOTTO)}OnStep(e){a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status4Sort)}GetNodeLvUpOpacity(){return 1}GetNodeFlashOpacity(){return this.msWait/600}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/global/Jiang":"Jiang","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus4Sort:[function(e,t,o){"use strict";cc._RF.push(t,"fa966adFpxLlKfjGKWXwX/D","LvUpBatchMachineTouchStatus4Sort"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/global/Jiang"),r=e("./LvUpBatchMachineTouchStatus");o.default=class extends r.default{OnEnter(){this.msWait=200,this.relMachine.relState.listRecord.sort((e,t)=>-(e.data.count-t.data.count));for(let e=0;e<this.relMachine.relState.listRecord.length;e++)this.relMachine.relState.listRecord[e].idx=e}OnStep(e){a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_POS),this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status5Idle)}GetNodeStrengthenOpacity(){return 1-this.msWait/200}GetNodeLvUpOpacity(){return 1}GetSortRate(){return 1-this.msWait/200}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/global/Jiang":"Jiang","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus5Idle:[function(e,t,o){"use strict";cc._RF.push(t,"472fds5DrlAd4hbsjRlyE2D","LvUpBatchMachineTouchStatus5Idle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/global/Jiang"),r=e("../lock_view/LockViewState"),s=e("./LvUpBatchMachineTouchStatus");o.default=class extends s.default{OnEnter(){r.default.inst.LockCancel(this.relMachine.lockId);for(let e=0;e<this.relMachine.relState.listRecord.length;e++)this.relMachine.relState.listRecord[e].UpdateTempIdx();a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_POS)}OnExit(){this.relMachine.lockId=r.default.inst.LockApp()}GetNodeStrengthenOpacity(){return 1}GetNodeLvUpOpacity(){return 1}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/global/Jiang":"Jiang","../lock_view/LockViewState":"LockViewState","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus6TipsOut:[function(e,t,o){"use strict";cc._RF.push(t,"95de3PHkExGD5fbrkbvOXrQ","LvUpBatchMachineTouchStatus6TipsOut"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../frame/global/Jiang"),r=e("./LvUpBatchMachineTouchStatus");o.default=class extends r.default{OnEnter(){this.msWait=200}OnStep(e){a.default.mgrUI.ModuleRefresh(i.default.LV_UP_BATCH_OPACITY),this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status2FlashIn)}GetNodeStrengthenOpacity(){return this.msWait/200}GetNodeLvUpOpacity(){return this.msWait/200}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/global/Jiang":"Jiang","./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatusEmpty:[function(e,t,o){"use strict";cc._RF.push(t,"f64afSpXqNGUIyhKNck6UNq","LvUpBatchMachineTouchStatusEmpty"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./LvUpBatchMachineTouchStatus");o.default=class extends i.default{},cc._RF.pop()},{"./LvUpBatchMachineTouchStatus":"LvUpBatchMachineTouchStatus"}],LvUpBatchMachineTouchStatus:[function(e,t,o){"use strict";cc._RF.push(t,"5ce25lTRxBAkpJPXw8ZdRSA","LvUpBatchMachineTouchStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e,t){this.relMachine=e,this.name=t}OnEnter(){}OnExit(){}OnStep(e){}GetNodeStrengthenOpacity(){return 0}GetNodeLvUpOpacity(){return 0}GetNodeFlashOpacity(){return 0}GetSortRate(){return 0}},cc._RF.pop()},{}],LvUpBatchMachineTouch:[function(e,t,o){"use strict";cc._RF.push(t,"3e058nHMZVLVY9gT5y8qRJF","LvUpBatchMachineTouch"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./LvUpBatchMachineTouchStatus1FadeIn"),s=e("./LvUpBatchMachineTouchStatus2FlashIn"),n=e("./LvUpBatchMachineTouchStatus3FlashOut"),l=e("./LvUpBatchMachineTouchStatus4Sort"),c=e("./LvUpBatchMachineTouchStatus5Idle"),d=e("./LvUpBatchMachineTouchStatus6TipsOut"),u=e("./LvUpBatchMachineTouchStatusEmpty"),m="LvUpBatchMachineTouch";class p{constructor(){}static Pop(e,t){let o=i.default.Pop(p._t,m);return o.relState=t,o.statusEmpty=new u.default(o,"LvUpBatchMachineTouchStatusEmpty"),o.status1FadeIn=new r.default(o,"LvUpBatchMachineTouchStatus1FadeIn"),o.status2FlashIn=new s.default(o,"LvUpBatchMachineTouchStatus2FlashIn"),o.status3FlashOut=new n.default(o,"LvUpBatchMachineTouchStatus3FlashOut"),o.status4Sort=new l.default(o,"LvUpBatchMachineTouchStatus4Sort"),o.status5Idle=new c.default(o,"LvUpBatchMachineTouchStatus5Idle"),o.status6TipsOut=new d.default(o,"LvUpBatchMachineTouchStatus6TipsOut"),o.Enter(o.statusEmpty),o}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}p._t=new a.default({instantiate:()=>new p,onPop:()=>{},onPush:()=>{},tag:m}),o.default=p,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./LvUpBatchMachineTouchStatus1FadeIn":"LvUpBatchMachineTouchStatus1FadeIn","./LvUpBatchMachineTouchStatus2FlashIn":"LvUpBatchMachineTouchStatus2FlashIn","./LvUpBatchMachineTouchStatus3FlashOut":"LvUpBatchMachineTouchStatus3FlashOut","./LvUpBatchMachineTouchStatus4Sort":"LvUpBatchMachineTouchStatus4Sort","./LvUpBatchMachineTouchStatus5Idle":"LvUpBatchMachineTouchStatus5Idle","./LvUpBatchMachineTouchStatus6TipsOut":"LvUpBatchMachineTouchStatus6TipsOut","./LvUpBatchMachineTouchStatusEmpty":"LvUpBatchMachineTouchStatusEmpty"}],LvUpBatchViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"eb17cFoWEtIzbexMYKbH261","LvUpBatchViewItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../../GameMath"),f=e("../equipment_preview_view/EquipmentPreviewView"),y=e("../equipment_preview_view/EquipmentPreviewViewState"),_=e("../equipment_view/EquipmentViewEquip"),g=e("../voice_ogg/VoiceOggViewState"),b=e("./LvUpBatchViewState"),{ccclass:S,property:P}=cc._decorator,B="LvUpBatchViewItem";let C=i=class extends m.default{constructor(){super(...arguments),this.txtLv=null,this.container=null,this.btnDetail=null,this.nodeGold=null,this.nodeLvUp=null,this.nodeFlash=null}};C.nodeType=u.default.Pop(B,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/lv_up_batch_view_item`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(B,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_LOTTO],propsFilter:(e,t,o)=>{let i=t.mapIdCfgToRecord.get(o),a=t.mapIdCfgToRecord.get(o).data,r=h.default.ParsePowerToLev(h.default.equip.ParseCountToPower(i.tempCount));e.txtLv.string=`${r}\u7ea7`,e.btnDetail.evterTouchStart.On(()=>{g.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.btnDetail.evterTouchEnd.On(()=>{l.default.mgrUI.Open(f.default.nodeType,y.default.Pop(B,a.idCfg,i.tempCount))})}}),u.default.ModuleStyle.Pop(B,{listRefModule:[r.default.DEFAULT,r.default.LV_UP_BATCH_OPACITY],propsFilter:(e,t,o)=>{t.mapIdCfgToRecord.get(o).isLvUped?(e.nodeGold.opacity=255*t.touchMachine.currStatus.GetNodeLvUpOpacity(),e.nodeLvUp.opacity=255*t.touchMachine.currStatus.GetNodeLvUpOpacity(),e.nodeFlash.opacity=255*t.touchMachine.currStatus.GetNodeFlashOpacity()):(e.nodeGold.opacity=0,e.nodeLvUp.opacity=0,e.nodeFlash.opacity=0)}}),u.default.ModuleStyle.Pop(B,{listRefModule:[r.default.DEFAULT,r.default.LV_UP_BATCH_POS],propsFilter:(e,t,o)=>{let i=t.mapIdCfgToRecord.get(o),a=Math.floor(i.tempIdx/t.countHor),r=(i.tempIdx-a*t.countHor)*(b.default.ITEM_WIDTH+b.default.SPACING_HOR),s=a*(b.default.ITEM_HEIGHT+b.default.SPACING_VER),n=Math.floor(i.idx/t.countHor),l=(i.idx-n*t.countHor)*(b.default.ITEM_WIDTH+b.default.SPACING_HOR),c=n*(b.default.ITEM_HEIGHT+b.default.SPACING_VER),d=t.touchMachine.currStatus.GetSortRate(),u=(1-d)*r+d*l,m=(1-d)*s+d*c;e.node.x=u-t.containerWidth/2+b.default.ITEM_WIDTH/2,e.node.y=t.containerHeight/2-m-b.default.ITEM_HEIGHT/2}})],childrenCreator:[u.default.ChildrenGeneration.Pop(B,{containerGetter:e=>e.container,uiNodeCreator:(e,t,o)=>{let i=e.mapIdCfgToRecord.get(t).data;o.push(_.default.GetNodeTypeForIconUI(i.idCfg).CreateNode(e,null,null))}})],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([P(cc.Label)],C.prototype,"txtLv",void 0),a([P(cc.Node)],C.prototype,"container",void 0),a([P(n.default)],C.prototype,"btnDetail",void 0),a([P(cc.Node)],C.prototype,"nodeGold",void 0),a([P(cc.Node)],C.prototype,"nodeLvUp",void 0),a([P(cc.Node)],C.prototype,"nodeFlash",void 0),C=i=a([S],C),o.default=C,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./LvUpBatchViewState":"LvUpBatchViewState"}],LvUpBatchViewStateItemRecord:[function(e,t,o){"use strict";cc._RF.push(t,"26e17p+4vFE2I1H4kxfeWNN","LvUpBatchViewStateItemRecord"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t,o){let a=i.default.Pop(r._t,e);return a.relState=t,a.data=o,a}UpdateTempCount(){this.tempCount=this.data.count}UpdateTempIdx(){this.tempIdx=this.idx}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"LvUpBatchViewStateItemRecord"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],LvUpBatchViewState:[function(e,t,o){"use strict";cc._RF.push(t,"9e36ck4u4xL2LsRZ3WltR4M","LvUpBatchViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../IndexStorageItem"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/basic/UtilObjPoolType"),l=e("../../../frame/config/src/CfgBackpackProp"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/ViewState"),u=e("../../GameCommon"),m=e("../../GameMath"),p=e("../../cfg_cache/CfgCacheChapter"),h=e("../video_certain_view/VideoCertainView"),f=e("../video_certain_view/VideoCertainViewState"),y=e("../voice_ogg/VoiceOggViewState"),_=e("./LvUpBatchMachineTouch"),g=e("./LvUpBatchView"),b=e("./LvUpBatchViewStateItemRecord"),S="LvUpBatchViewState";class P extends d.default{constructor(){super(i.default.GAME,d.default.BG_TYPE.MASK,!0),this.mapIdCfgToRecord=s.default.Pop(s.default.typeMap,S),this.listRecord=s.default.Pop(s.default.typeArray,S),this.countNeed=0}static Pop(e){let t=s.default.Pop(P._t,e);t.touchMachine=_.default.Pop(S,t);let o=c.default.mgrData.Get(r.default.listEquipment);o.length<=P.HOR_COUNt/2?(t.countHor=o.length,t.countVer=1):o.length<=P.HOR_COUNt?(t.countHor=Math.ceil(o.length/2),t.countVer=2):o.length<=2*P.HOR_COUNt?(t.countHor=Math.ceil(o.length/3),t.countVer=3):o.length<=4*P.HOR_COUNt&&(t.countHor=Math.ceil(o.length/4),t.countVer=4),t.containerWidth=t.countHor*(P.ITEM_WIDTH+P.SPACING_HOR)-P.SPACING_HOR,t.containerHeight=t.countVer*(P.ITEM_HEIGHT+P.SPACING_VER)-P.SPACING_VER;for(let a=0;a<o.length;a++){let e=o[a],i=b.default.Pop(S,t,e);t.listRecord.push(i)}for(let a=0;a<t.listRecord.length;a++){let e=t.listRecord[a];t.mapIdCfgToRecord.set(e.data.idCfg,e)}t.listRecord.sort((e,t)=>-(e.data.count-t.data.count));for(let a=0;a<t.listRecord.length;a++)t.listRecord[a].idx=a;for(let a=0;a<t.listRecord.length;a++){let e=t.listRecord[a];e.UpdateTempCount(),e.UpdateTempIdx()}let i=c.default.mgrData.Get(r.default.listBackpackProp);for(let a=0;a<i.length;a++){let e=i[a];e.idCfg==u.default.COIN_FOR_LOTTERY&&(t.recCoin=e)}return t.challengeChapter=p.default.GetChallengeChapter(),t.OnChange(a.default.INDEXVIEW_LOTTO),t}OnMaskTouch(){y.default.inst.VoiceSet(u.default.BTN_VOICE),c.default.mgrUI.Close(this._idView)}OnInit(){this._listenIdUpdate=c.default.mgrEvter.evterUpdate.On(e=>{this.touchMachine.currStatus.OnStep(e)}),this.touchMachine.Enter(this.touchMachine.status1FadeIn)}OnChange(e){if(e!=a.default.DEFAULT&&e!=a.default.INDEXVIEW_LOTTO)return;let t=c.default.mgrData.Get(r.default.listEquipment);for(let o=0;o<t.length;o++){let e=t[o],i=m.default.equip.ParseCountToPower(e.count),a=m.default.ParsePowerToLev(i)+1,r=m.default.ParseLevToPower(a),s=m.default.equip.ParsePowerToCount(r);this.countNeed=Math.max(this.countNeed,s-e.count)}this.countNeed=Math.ceil(this.countNeed),this.countGot=this.countNeed,this.countPower=m.default.equip.ParseCountToPower(this.countGot),this.countCost=Math.ceil(m.default.coin.ParsePowerToCount(this.countPower))}OnDestory(){c.default.mgrEvter.evterUpdate.Off(this._listenIdUpdate)}GetActionAble(){return Promise.resolve().then(()=>{if(this.recCoin.count<this.countCost){let e=c.default.mgrCfg.cfgBackpackProp.select(l.default.idGetter,u.default.COIN_FOR_LOTTERY)._list[0],t=f.default.Pop(S,`${e.name}\u4e0d\u8db3\uff0c\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u540e\u672c\u6b21\u514d\u8d39`);return c.default.mgrUI.Open(h.default.nodeType,t),t.ctrl._promise}return this.recCoin.count-=this.countCost,this.recCoin.count=Math.ceil(this.recCoin.count),!0})}Go(){this.GetActionAble().then(e=>{e&&c.default.mgrUI.Open(g.default.nodeType,P.Pop(S))})}}P._t=new n.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),function(e){e.HOR_COUNt=8,e.SPACING_HOR=0,e.SPACING_VER=0,e.ITEM_WIDTH=120,e.ITEM_HEIGHT=120}(P||(P={})),o.default=P,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheChapter":"CfgCacheChapter","../video_certain_view/VideoCertainView":"VideoCertainView","../video_certain_view/VideoCertainViewState":"VideoCertainViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./LvUpBatchMachineTouch":"LvUpBatchMachineTouch","./LvUpBatchView":"LvUpBatchView","./LvUpBatchViewStateItemRecord":"LvUpBatchViewStateItemRecord"}],LvUpBatchView:[function(e,t,o){"use strict";cc._RF.push(t,"ff6033CLnJJO6qaM/3X550O","LvUpBatchView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../IndexStorageItem"),n=e("../../../frame/basic/BCType"),l=e("../../../frame/basic/UtilMath"),c=e("../../../frame/component/ComponentNodeEventer"),d=e("../../../frame/global/Jiang"),u=e("../../../frame/ui/UINodeInstEnterRS"),m=e("../../../frame/ui/UINodeInstHideRS"),p=e("../../../frame/ui/UINodeType"),h=e("../../../frame/ui/UIViewComponent"),f=e("../../GameCommon"),y=e("../../game_element/body/DefineVoice"),_=e("../lottery_view/LotteryTipsView"),g=e("../lottery_view/LotteryTipsViewState"),b=e("../voice_ogg/VoiceOggViewState"),S=e("./LvUpBatchViewItem"),{ccclass:P,property:B}=cc._decorator,C="LvUpBatchView";let M=i=class extends h.default{constructor(){super(...arguments),this.container=null,this.btnStrengthen=null,this.txtCurrent=null,this.txtCostEnable=null,this.txtCostDisable=null,this.btnQa=null,this.nodeStrengthen=null}};M.nodeType=p.default.Pop(C,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/lv_up_batch_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[p.default.ModuleStyle.Pop(C,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_LOTTO],propsFilter:(e,t)=>{e.container.width=t.containerWidth,e.container.height=t.containerHeight,e.txtCurrent.string=`${l.default.ParseNumToKMBTAABB(t.recCoin.count,Math.floor)}`,e.txtCostEnable.string=`${l.default.ParseNumToKMBTAABB(t.countCost,Math.ceil)}`,e.txtCostEnable.node.active=t.countCost<=t.recCoin.count,e.txtCostDisable.string=`${l.default.ParseNumToKMBTAABB(t.countCost,Math.ceil)}`,e.txtCostDisable.node.active=t.recCoin.count<t.countCost,e.btnStrengthen.evterTouchStart.On(()=>{b.default.inst.VoiceSet(y.default.VOICE_MONEY)}),e.btnStrengthen.evterTouchEnd.On(()=>{let e=t.countCost<=t.recCoin.count;t.GetActionAble().then(o=>{o&&(e?t.touchMachine.Enter(t.touchMachine.status6TipsOut):t.touchMachine.Enter(t.touchMachine.status2FlashIn))})}),e.btnQa.evterTouchStart.On(()=>{b.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnQa.evterTouchEnd.On(()=>{d.default.mgrUI.Open(_.default.nodeType,g.default.Pop(C))})}}),p.default.ModuleStyle.Pop(C,{listRefModule:[r.default.DEFAULT,r.default.LV_UP_BATCH_OPACITY],propsFilter:(e,t)=>{e.nodeStrengthen.opacity=255*t.touchMachine.currStatus.GetNodeStrengthenOpacity()}})],childrenCreator:[p.default.ChildrenGeneration.Pop(C,{containerGetter:e=>e.container,uiNodeCreator:(e,t,o)=>{let i=d.default.mgrData.Get(s.default.listEquipment);for(let a=0;a<i.length;a++){let t=i[a];o.push(S.default.nodeType.CreateNode(e,t.idCfg,t.idCfg))}}})],propsType:n.default.typeNumber,hideRS:m.default.setParentNull,enterRS:u.default.opacityInForTemp200}),a([B(cc.Node)],M.prototype,"container",void 0),a([B(c.default)],M.prototype,"btnStrengthen",void 0),a([B(cc.Label)],M.prototype,"txtCurrent",void 0),a([B(cc.Label)],M.prototype,"txtCostEnable",void 0),a([B(cc.Label)],M.prototype,"txtCostDisable",void 0),a([B(c.default)],M.prototype,"btnQa",void 0),a([B(cc.Node)],M.prototype,"nodeStrengthen",void 0),M=i=a([P],M),o.default=M,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../lottery_view/LotteryTipsView":"LotteryTipsView","../lottery_view/LotteryTipsViewState":"LotteryTipsViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./LvUpBatchViewItem":"LvUpBatchViewItem"}],MBPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"3895cDjq2xFMo6FBRCVjj/8","MBPlayer"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../../box2d_ts/Box2D"),a=e("./MgrEquipment"),r=e("./MgrActionMachine"),s=e("./MgrHealth"),n=e("../../../../frame/global/Jiang"),l=e("../../../../frame/basic/UtilObjPoolType"),c=e("../../../../frame/basic/UtilObjPool"),d=e("../GameElementBodyBehaviour"),u=e("../../GameCtxB2BodyFixtureTypeRS"),m=e("./MgrBodyDir"),p=e("./MgrDefendCD"),h=e("./MgrDefendAct"),f=e("../../common/AnimKeep"),y=e("../../../GameCommon"),_=e("../../common/AnimFlash"),g=e("./MgrHorseFrame"),b="MBPlayer";class S extends d.default{constructor(){super(),this.animKeepDefend=f.default.Pop(b,y.default.PLAYER_MS_DEFEND_IN,y.default.PLAYER_MS_DEFEND_OUT),this.animKeepShield=f.default.Pop(b,y.default.PLAYER_MS_SHIELD_IN,y.default.PLAYER_MS_SHIELD_OUT),this.animFlashReady=_.default.Pop(b,y.default.PLAYER_MS_READY_IN,y.default.PLAYER_MS_READY_OUT),this.animShieldReady=f.default.Pop(b,100,100),this.playerSkillIncCount=1,this.playerSkillIncAngle=1,this.playerSkillIncSpeed=1,this.playerEquipPos=c.default.Pop(c.default.typeccVec2,b),this.powerEnable=!0,this.animDmgedFlash=_.default.Pop(b,y.default.MS_DMG_FLASH_IN,y.default.MS_DMG_FLASH_OUT),this.animTraceFlash=_.default.Pop(b,y.default.MS_FORWARD_TRACE_FADE_IN,y.default.MS_FORWARD_TRACE_FADE_OUT)}static Pop(e,t,o){let l=c.default.Pop(S._t,e);return l.relBody=t,l.args=o,l.mpMax=o.mpMax,l.mpCurrent=0,l.mpInc=o.mpInc,l.relBody=t,l.relBody.evterAdded.On(()=>{const e=c.default.Pop(c.default.typeBodyDef,b),t=c.default.Pop(c.default.typeFixtureDef,b);e.type=i.b2BodyType.b2_dynamicBody,e.position.x=l.relBody.commonFootPos.x*n.default.mgrUI._sizePerPixel,e.position.y=l.relBody.commonFootPos.y*n.default.mgrUI._sizePerPixel,e.gravityScale=1,l.relBody.commonBody=l.relBody.BodyCreate(b,e),l.relBody.commonBody.b2Body.SetFixedRotation(!0);let d=c.default.Pop(c.default.typeCircleShape,b),f=c.default.Pop(c.default.typeccVec2,b);f.y=o.bodyRadius*n.default.mgrUI._sizePerPixel,d.Set(f,o.bodyRadius*n.default.mgrUI._sizePerPixel),t.shape=d,l.relBody.commonBody.FixtureCreate(b,t,u.default.BODY);const y=c.default.Pop(c.default.typeFixtureDef,b);let _=c.default.Pop(c.default.typeCircleShape,b),S=c.default.Pop(c.default.typeccVec2,b);S.y=o.defendRadius*n.default.mgrUI._sizePerPixel,_.Set(S,o.defendRadius*n.default.mgrUI._sizePerPixel),y.shape=_,l.relBody.commonBody.FixtureCreate(b,y,u.default.SHIELD),l.UpdatePosData(),l.playerMgrHealth=s.default.Pop(b,l),l.playerMgrEquipment=a.default.Pop(b,l),l.playerMgrAction=r.default.Pop(b,l),l.playerMgrBodyDir=m.default.Pop(b,l),l.playerMgrDefendCD=p.default.Pop(b,l),l.playerMgrDefendAct=h.default.Pop(b,l),l.playerMgrHorseFrame=g.default.Pop(b,l),l.relBody.evterContactGroundA.On(e=>{e.SetTangentSpeed(o.speed*n.default.mgrUI._sizePerPixel*1e3),l.playerMgrAction.currStatus.OnConcatWithGround()}),l.relBody.evterContactGroundB.On(e=>{e.SetTangentSpeed(-o.speed*n.default.mgrUI._sizePerPixel*1e3),l.playerMgrAction.currStatus.OnConcatWithGround()}),l.relBody.commonEvterDmg.On(e=>{l.playerMgrDefendAct.currStatus.OnDmg(e)})}),l}UpdatePosData(){this.relBody.commonFootPos.x=this.relBody.commonBody.b2Body.GetPosition().x/n.default.mgrUI._sizePerPixel,this.relBody.commonFootPos.y=this.relBody.commonBody.b2Body.GetPosition().y/n.default.mgrUI._sizePerPixel,this.relBody.commonCenterPos.x=this.relBody.commonFootPos.x,this.relBody.commonCenterPos.y=this.relBody.commonFootPos.y+this.args.bodyRadius,this.relBody.commonHeadPos.x=this.relBody.commonFootPos.x,this.relBody.commonHeadPos.y=this.relBody.commonFootPos.y+2*this.args.bodyRadius,this.playerEquipPos.x=this.relBody.commonFootPos.x+this.args.equipOffsetX,this.playerEquipPos.y=this.relBody.commonFootPos.y+this.args.equipOffsetY}OnTimeStep(e){this.animKeepDefend.currStatus.OnStep(e),this.animKeepShield.currStatus.OnStep(e),this.animFlashReady.currStatus.OnStep(e),this.animShieldReady.currStatus.OnStep(e),this.animDmgedFlash.currStatus.OnStep(e),this.animTraceFlash.currStatus.OnStep(e),this.playerMgrEquipment.equipInst.OnMpRecoveryAble()&&(this.mpCurrent+=e*this.mpInc),this.mpMax<=this.mpCurrent&&(this.mpCurrent=this.mpMax),this.UpdatePosData(),this.playerMgrHealth.machine.currStatus.OnStep(e),this.playerMgrAction.currStatus.OnStep(e),this.playerMgrEquipment.OnStep(e),this.playerMgrDefendCD.currStatus.OnStep(e),this.playerMgrDefendAct.OnStep(e),this.playerMgrHorseFrame.currStatus.OnStep(e)}GetPhysicsTag(){return S}b2GetSpeedX(){return-this.args.speed*n.default.mgrUI._sizePerPixel*1e3}GetTraceOpacity(){return.2*this.animTraceFlash.Get255()}}o.default=S,S._t=new l.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),cc._RF.pop()},{"../../../../../box2d_ts/Box2D":"Box2D","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","../../GameCtxB2BodyFixtureTypeRS":"GameCtxB2BodyFixtureTypeRS","../../common/AnimFlash":"AnimFlash","../../common/AnimKeep":"AnimKeep","../GameElementBodyBehaviour":"GameElementBodyBehaviour","./MgrActionMachine":"MgrActionMachine","./MgrBodyDir":"MgrBodyDir","./MgrDefendAct":"MgrDefendAct","./MgrDefendCD":"MgrDefendCD","./MgrEquipment":"MgrEquipment","./MgrHealth":"MgrHealth","./MgrHorseFrame":"MgrHorseFrame"}],MgrActionMachineStatusBackFloat:[function(e,t,o){"use strict";cc._RF.push(t,"ed908U/SEdNmLgDg1tEIP6M","MgrActionMachineStatusBackFloat"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./MgrActionMachineStatus"),n="MgrActionMachineStatusBackFloat";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.machine=t,o}OnConcatWithGround(){let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,e.y=0,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(e),this.machine.EnterStatus(this.machine.statusWalk)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusBackUp:[function(e,t,o){"use strict";cc._RF.push(t,"4817drwDVxEU49GNKUc0J/P","MgrActionMachineStatusBackUp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./MgrActionMachineStatus"),n="MgrActionMachineStatusBackUp";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.machine=t,o}OnEnter(){let e=i.default.Pop(i.default.typeccVec2,n);e.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,e.y=1e3*-this.machine.npc.relBody.relState.b2Gravity/1e3/2,e.x*=-4,e.y/=2,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnStep(e){0<this.machine.npc.relBody.commonBody.b2Body.GetLinearVelocity().y||this.machine.EnterStatus(this.machine.statusBackFloat)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusForwardFloat:[function(e,t,o){"use strict";cc._RF.push(t,"9fe5e/hCK9IiYsKR9NZTg0C","MgrActionMachineStatusForwardFloat"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./MgrActionMachineStatus"),n="MgrActionMachineStatusForwardFloat";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.machine=t,o}OnEnter(){let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,e.y=0,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnConcatWithGround(){this.machine.EnterStatus(this.machine.statusWalk)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusForwardUp:[function(e,t,o){"use strict";cc._RF.push(t,"a3391gFICZHQYxTKsTCvINo","MgrActionMachineStatusForwardUp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("../../../GameCommon"),n=e("./MgrActionMachineStatus"),l="MgrActionMachineStatusForwardUp";class c extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.machine=t,o}OnEnter(){this.machine.npc.animTraceFlash.currStatus.OnFlash(),this._timeLess=s.default.MS_FORWARD_WHILE_SUFFERED_DMG,this.machine.npc.relBody.commonBody.b2Body.SetGravityScale(0);let e=i.default.Pop(i.default.typeccVec2,l);e.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,e.x*=s.default.HURTED_SPEED_SCALE,e.y=1e3*-this.machine.npc.relBody.relState.b2Gravity/1e3/2,e.y/=1e4,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(e),this.machine.npc.relBody.commonTimeScaleSelf=s.default.HURTED_SPEED_SCALE}OnExit(){this.machine.npc.relBody.commonTimeScaleSelf=1,this.machine.npc.relBody.commonBody.b2Body.SetGravityScale(1)}OnStep(e){this._timeLess-=e,0<this._timeLess||this.machine.EnterStatus(this.machine.statusForwardFloat)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","../../../GameCommon":"GameCommon","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusJumpFloat:[function(e,t,o){"use strict";cc._RF.push(t,"2595c5oH31Prq8qWaQni8Nh","MgrActionMachineStatusJumpFloat"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrActionMachineStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.machine=t,o}OnConcatWithGround(){this.machine.EnterStatus(this.machine.statusWalk)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrActionMachineStatusFloat"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusJumpUp:[function(e,t,o){"use strict";cc._RF.push(t,"9c89bUzU8BNX7W1yqdI1FGz","MgrActionMachineStatusJumpUp"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./MgrActionMachineStatus"),n="MgrActionMachineStatusUp";class l extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.machine=t,o}OnEnter(){let e=i.default.Pop(i.default.typeB2Vec2,n);e.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,e.y=-this.machine.npc.relBody.relState.b2Gravity/2*.95,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(e)}OnStep(e){0<this.machine.npc.relBody.commonBody.b2Body.GetLinearVelocity().y||this.machine.EnterStatus(this.machine.statusJumpFloat)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusJump:[function(e,t,o){"use strict";cc._RF.push(t,"6f21c1SsHJNXIphxrI28eKy","MgrActionMachineStatusJump"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../../frame/global/Jiang"),s=e("./MgrActionMachineStatus"),n="MgrActionMachineStatusJump";class l extends s.default{constructor(){super(),this._vecTemp=i.default.Pop(i.default.typeB2Vec2,n)}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.machine=t,o}OnEnter(){this._vecTemp.x=-this.machine.npc.args.speed*r.default.mgrUI._sizePerPixel*1e3,this._vecTemp.y=1e3*-this.machine.npc.relBody.relState.b2Gravity/1e3/2,this._keepMax=150}OnStep(e){let t=i.default.Pop(i.default.typeB2Vec2,n);t.x=this._vecTemp.x,t.y=this._vecTemp.y,this.machine.npc.relBody.commonBody.b2Body.SetLinearVelocity(t),this._keepMax-=e,this._keepMax<=0&&this.machine.EnterStatus(this.machine.statusJumpUp)}OnJumpRelease(){this.machine.EnterStatus(this.machine.statusJumpUp)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/global/Jiang":"Jiang","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatusWalk:[function(e,t,o){"use strict";cc._RF.push(t,"83191zZ7UdKK6xnZG5ISI7D","MgrActionMachineStatusWalk"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrActionMachineStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.machine=t,o}OnJumpPress(){this.machine.EnterStatus(this.machine.statusJumpUp)}OnForwardPress(){this.machine.EnterStatus(this.machine.statusForwardUp)}OnBackPress(){this.machine.EnterStatus(this.machine.statusBackUp)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrActionMachineStatusWalk"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrActionMachineStatus":"MgrActionMachineStatus"}],MgrActionMachineStatus:[function(e,t,o){"use strict";cc._RF.push(t,"42590LF9k9PirKOEjeVerp/","MgrActionMachineStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnForwardPress(){}OnForwardRelease(){}OnJumpPress(){}OnJumpRelease(){}OnBackPress(){}OnBackRelease(){}OnDeath(){}OnConcatWithGround(){}},cc._RF.pop()},{}],MgrActionMachine:[function(e,t,o){"use strict";cc._RF.push(t,"81621mNWvROQ7/7m+rfvjtc","MgrActionMachine"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/BCEventer"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("./MgrActionMachineStatusJumpFloat"),n=e("./MgrActionMachineStatusJump"),l=e("./MgrActionMachineStatusJumpUp"),c=e("./MgrActionMachineStatusWalk"),d=e("./MgrActionMachineStatusForwardUp"),u=e("./MgrActionMachineStatusForwardFloat"),m=e("./MgrActionMachineStatusBackUp"),p=e("./MgrActionMachineStatusBackFloat"),h="MgrActionMachine";class f{constructor(){this.evterDeath=i.default.Pop(h)}static Pop(e,t){let o=a.default.Pop(f._t,e);return o.npc=t,o.statusWalk=c.default.Pop(h,o),o.statusForwardUp=d.default.Pop(h,o),o.statusForwardFloat=u.default.Pop(h,o),o.statusJump=n.default.Pop(h,o),o.statusJumpUp=l.default.Pop(h,o),o.statusJumpFloat=s.default.Pop(h,o),o.statusBackUp=m.default.Pop(h,o),o.statusBackFloat=p.default.Pop(h,o),o.EnterStatus(o.statusWalk),o}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),null!=this.currStatus&&this.currStatus.OnEnter()}}o.default=f,f._t=new r.default({instantiate:()=>new f,onPop:()=>{},onPush:()=>{},tag:h}),cc._RF.pop()},{"../../../../frame/basic/BCEventer":"BCEventer","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrActionMachineStatusBackFloat":"MgrActionMachineStatusBackFloat","./MgrActionMachineStatusBackUp":"MgrActionMachineStatusBackUp","./MgrActionMachineStatusForwardFloat":"MgrActionMachineStatusForwardFloat","./MgrActionMachineStatusForwardUp":"MgrActionMachineStatusForwardUp","./MgrActionMachineStatusJump":"MgrActionMachineStatusJump","./MgrActionMachineStatusJumpFloat":"MgrActionMachineStatusJumpFloat","./MgrActionMachineStatusJumpUp":"MgrActionMachineStatusJumpUp","./MgrActionMachineStatusWalk":"MgrActionMachineStatusWalk"}],MgrBodyDIrStatusLeft:[function(e,t,o){"use strict";cc._RF.push(t,"0cdd3lhifZNW5hnE5OLGDC4","MgrBodyDIrStatusLeft"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrBodyDirStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.machine=t,o}OnRight(){this.machine.EnterStatus(this.machine.statusRight)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrBodyDirStatusLeft"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrBodyDirStatus":"MgrBodyDirStatus"}],MgrBodyDirStatusRight:[function(e,t,o){"use strict";cc._RF.push(t,"0ef49hmja5LV4J1OArpgHA5","MgrBodyDirStatusRight"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrBodyDirStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.machine=t,o}OnLeft(){this.machine.EnterStatus(this.machine.statusLeft)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrBodyDirStatusRight"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrBodyDirStatus":"MgrBodyDirStatus"}],MgrBodyDirStatus:[function(e,t,o){"use strict";cc._RF.push(t,"04a28wqq2NB6qEL8DnyNMqX","MgrBodyDirStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnLeft(){}OnRight(){}},cc._RF.pop()},{}],MgrBodyDir:[function(e,t,o){"use strict";cc._RF.push(t,"c78a1OzT8pHnadQ1q6n/B8U","MgrBodyDir"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrBodyDIrStatusLeft"),s=e("./MgrBodyDirStatusRight"),n="MgrAnimBodyDir";class l{constructor(){}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.npc=t,o.statusLeft=r.default.Pop(n,o),o.statusRight=s.default.Pop(n,o),o.EnterStatus(o.statusLeft),o}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),null!=this.currStatus&&this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrBodyDIrStatusLeft":"MgrBodyDIrStatusLeft","./MgrBodyDirStatusRight":"MgrBodyDirStatusRight"}],MgrCfg:[function(e,t,o){"use strict";cc._RF.push(t,"2bf43+3nw1GIojnLvDAVrcI","MgrCfg"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCCollection"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("../res/MgrRes"),n=e("./src/CfgBackpackProp"),l=e("./src/CfgBuffProps"),c=e("./src/CfgChapter"),d=e("./src/CfgEff"),u=e("./src/CfgCommon"),m=e("./src/CfgEquipmentProps"),p=e("./src/CfgGameElement"),h=e("./src/CfgLevel"),f=e("./src/CfgLottery"),y=e("./src/CfgNumStringify"),_=e("./src/CfgScene"),g=e("./src/CfgStore"),b=e("./src/CfgVoiceOgg"),S="MgrCfg";class P{constructor(){this.cfgBackpackProp=i.default.Pop(S),this.cfgBuffProps=i.default.Pop(S),this.cfgChapter=i.default.Pop(S),this.cfgEff=i.default.Pop(S),this.cfgCommon=i.default.Pop(S),this.cfgEquipmentProps=i.default.Pop(S),this.cfgGameElement=i.default.Pop(S),this.cfgLevel=i.default.Pop(S),this.cfgLottery=i.default.Pop(S),this.cfgNumStringify=i.default.Pop(S),this.cfgScene=i.default.Pop(S),this.cfgStore=i.default.Pop(S),this.cfgVoiceOgg=i.default.Pop(S)}static Pop(e){return a.default.Pop(P._t,e)}Init(){this.promiseArr=[s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgBackpackProp").process._promise.then(e=>{e.json.forEach(e=>{this.cfgBackpackProp.add(n.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgBuffProps").process._promise.then(e=>{e.json.forEach(e=>{this.cfgBuffProps.add(l.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgChapter").process._promise.then(e=>{e.json.forEach(e=>{this.cfgChapter.add(c.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgEff").process._promise.then(e=>{e.json.forEach(e=>{this.cfgEff.add(d.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgCommon").process._promise.then(e=>{e.json.forEach(e=>{this.cfgCommon.add(u.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgEquipmentProps").process._promise.then(e=>{e.json.forEach(e=>{this.cfgEquipmentProps.add(m.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgGameElement").process._promise.then(e=>{e.json.forEach(e=>{this.cfgGameElement.add(p.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgLevel").process._promise.then(e=>{e.json.forEach(e=>{this.cfgLevel.add(h.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgLottery").process._promise.then(e=>{e.json.forEach(e=>{this.cfgLottery.add(f.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgNumStringify").process._promise.then(e=>{e.json.forEach(e=>{this.cfgNumStringify.add(y.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgScene").process._promise.then(e=>{e.json.forEach(e=>{this.cfgScene.add(_.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgStore").process._promise.then(e=>{e.json.forEach(e=>{this.cfgStore.add(g.default.Pop(S,e))})}),s.default.inst.mgrAssets.GetLoadRecord("resource_sub/json_config/CfgVoiceOgg").process._promise.then(e=>{e.json.forEach(e=>{this.cfgVoiceOgg.add(b.default.Pop(S,e))})})]}}P._t=new r.default({instantiate:()=>new P,onPop:()=>{},onPush:()=>{},tag:S}),P.inst=P.Pop(S),o.default=P,cc._RF.pop()},{"../basic/BCCollection":"BCCollection","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../res/MgrRes":"MgrRes","./src/CfgBackpackProp":"CfgBackpackProp","./src/CfgBuffProps":"CfgBuffProps","./src/CfgChapter":"CfgChapter","./src/CfgCommon":"CfgCommon","./src/CfgEff":"CfgEff","./src/CfgEquipmentProps":"CfgEquipmentProps","./src/CfgGameElement":"CfgGameElement","./src/CfgLevel":"CfgLevel","./src/CfgLottery":"CfgLottery","./src/CfgNumStringify":"CfgNumStringify","./src/CfgScene":"CfgScene","./src/CfgStore":"CfgStore","./src/CfgVoiceOgg":"CfgVoiceOgg"}],MgrDataItem:[function(e,t,o){"use strict";cc._RF.push(t,"062b8UJpgdL4JUUel5zjzgf","MgrDataItem"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrData");class s{constructor(){}static Pop(e,t,o,a,n){let l=i.default.Pop(s._t,e);return l.tag=t,l.valType=o,l.defVal=a,l.media=n,r.default.inst.AddModule(l),l}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrDataItem"}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrData":"MgrData"}],MgrDataType:[function(e,t,o){"use strict";cc._RF.push(t,"d10c1aa6DZPIr5+3S38N8+y","MgrDataType"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r="MgrDataType";class s{constructor(){}static Pop(e,t,o){let a=i.default.Pop(s._t,e);return a.toString=t,a.toVal=o,a}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),function(e){e.typeNumber=e.Pop(r,e=>`${e}`,e=>Number(e)),e.typeString=e.Pop(r,e=>e,e=>e),e.typeBool=e.Pop(r,e=>`${e}`,e=>"true"==e),e.typeObject=e.Pop(r,e=>JSON.stringify(e),e=>JSON.parse(e))}(s||(s={})),o.default=s,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],MgrData:[function(e,t,o){"use strict";cc._RF.push(t,"66181lbGedGf6+DA37Rxg+y","MgrData"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCPromiseCtrl"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("../global/Jiang"),n=e("./MgrDateItemMediaRS"),l="MgrData";class c{constructor(){this._moduleSet=a.default.Pop(a.default.typeSet,l),this._dataCache=a.default.Pop(a.default.typeMap,l),this.promiseArr=a.default.Pop(a.default.typeArray,l),this.initPromise=i.default.Pop(l),this.dataVersion=0}static Pop(e){return a.default.Pop(c._t,e)}AddModule(e){this._moduleSet.add(e)}Init(){this.promiseArr.push(...n.default.listRS.map(e=>e.onLoad())),Promise.all(this.promiseArr).then(()=>{this.initPromise.resolve(null),s.default.mgrEvter.evterUpdate.On(()=>{this.Save()})})}Get(e){return this._dataCache.get(e)}Set(e,t){this._dataCache.set(e,t),e.media.onSet()}Save(){for(let e=0;e<n.default.listRS.length;e++)n.default.listRS[e].onSave()}DoSave(){for(let e=0;e<n.default.listRS.length;e++)n.default.listRS[e].onDoSave()}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),c.inst=c.Pop(l),cc._RF.pop()},{"../basic/BCPromiseCtrl":"BCPromiseCtrl","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../global/Jiang":"Jiang","./MgrDateItemMediaRS":"MgrDateItemMediaRS"}],MgrDateItemMediaRS:[function(e,t,o){"use strict";cc._RF.push(t,"4a6edLDiLpKKoDvP6AxqX+f","MgrDateItemMediaRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCPromiseCtrl"),a=e("../sdk/MgrSdk"),r=e("./MgrData"),s="MgrDataItemMediaRS";class n{constructor(e){this.onLoad=e.onLoad,this.onSet=e.onSet,this.onSave=e.onSave,this.onDoSave=e.onDoSave,n.listRS.push(this)}}(function(e){e.listRS=[];let t=0,o=0;e.local=new e({onLoad:()=>{let t=i.default.Pop(s);return a.default.inst.core.LocalGet().then(o=>{o=o||{},r.default.inst._moduleSet.forEach(t=>{if(t.media!=e.local)return;let i=o[t.tag];null==i?r.default.inst._dataCache.set(t,t.defVal()):r.default.inst._dataCache.set(t,i)}),t.resolve(null)}),t._promise},onSet:()=>{t++},onSave:()=>{o!=t&&(o=t,e.local.onDoSave())},onDoSave:()=>{let t={};r.default.inst._dataCache.forEach((o,i)=>{i.media==e.local&&(t[i.tag]=o)}),a.default.inst.core.LocalSet(t)}});let n=0,l=0;e.server=new e({onLoad:()=>{let t=i.default.Pop(s);return a.default.inst.core.ServerGet().then(o=>{o=o||{},r.default.inst._moduleSet.forEach(t=>{if(t.media!=e.server)return;let i=o[t.tag];null==i?r.default.inst._dataCache.set(t,t.defVal()):r.default.inst._dataCache.set(t,i)}),t.resolve(null)}),t._promise},onSet:()=>{n++},onSave:()=>{l!=n&&(l=n,e.server.onDoSave())},onDoSave:()=>{let t={};r.default.inst._dataCache.forEach((o,i)=>{i.media==e.server&&(t[i.tag]=o)}),a.default.inst.core.ServerSet(t)}})})(n||(n={})),o.default=n,cc._RF.pop()},{"../basic/BCPromiseCtrl":"BCPromiseCtrl","../sdk/MgrSdk":"MgrSdk","./MgrData":"MgrData"}],MgrDateNowStatusGetting:[function(e,t,o){"use strict";cc._RF.push(t,"a94f4Hs2+NJopvBv7+2pjsC","MgrDateNowStatusGetting"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexDataModule"),a=e("../global/Jiang"),r=e("../sdk/MgrSdk"),s=e("./MgrDateNow"),n=e("./MgrDateNowStatus");o.default=class extends n.default{OnEnter(){this._promiseOnTime=r.default.inst.core.DateNow().then(e=>{this.relMachine.timeSpace=e-Date.now(),r.default.inst.Log(`MgrDateNowStatusGetting: timeSpace[${s.default.inst.timeSpace}]`),this.relMachine.EnterStatus(this.relMachine.statusIdle),a.default.mgrUI.ModuleRefresh(i.default.DEFAULT)})}OnTime(){return this._promiseOnTime}},cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../global/Jiang":"Jiang","../sdk/MgrSdk":"MgrSdk","./MgrDateNow":"MgrDateNow","./MgrDateNowStatus":"MgrDateNowStatus"}],MgrDateNowStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"d2d36FHWyRPc45HIMLM6r03","MgrDateNowStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrDateNowStatus");o.default=class extends i.default{OnTime(){return this.relMachine.EnterStatus(this.relMachine.statusGetting),this.relMachine.statusGetting.OnTime()}},cc._RF.pop()},{"./MgrDateNowStatus":"MgrDateNowStatus"}],MgrDateNowStatus:[function(e,t,o){"use strict";cc._RF.push(t,"8ebefV+bhxJJZdgDRQkqzxH","MgrDateNowStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}},cc._RF.pop()},{}],MgrDateNow:[function(e,t,o){"use strict";cc._RF.push(t,"183924t/4xKw7j+homOmACV","MgrDateNow"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrDateNowStatusGetting"),a=e("./MgrDateNowStatusIdle");class r{constructor(){this.timeSpace=0,this.statusIdle=new a.default(this),this.statusGetting=new i.default(this),this.EnterStatus(this.statusIdle)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}DateNow(){return Date.now()+this.timeSpace}}o.default=r,r.inst=new r,cc._RF.pop()},{"./MgrDateNowStatusGetting":"MgrDateNowStatusGetting","./MgrDateNowStatusIdle":"MgrDateNowStatusIdle"}],MgrDefendActStatusIng:[function(e,t,o){"use strict";cc._RF.push(t,"57351fTKbhFeJZhcGBe1aVM","MgrDefendActStatusIng"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("./MgrDefendActStatus");class c extends l.default{constructor(){super(),this.enteredMS=0}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.enteredMS=0,s.default.inst.VoiceSet(n.default.DEFENDING),this.relMachine.relMBPlayer.animKeepDefend.currStatus.OnFadeIn()}OnExit(){this.relMachine.relMBPlayer.animKeepDefend.currStatus.OnFadeOut()}OnStep(e){this.enteredMS+=e,r.default.DEFEND_KEEP<=this.enteredMS&&this.relMachine.Enter(this.relMachine.statusOrdinary);for(let t=0;t<this.relMachine.relMBPlayer.relBody.listConcatedBodyEnemy.length;t++){let e=this.relMachine.relMBPlayer.relBody.listConcatedBodyEnemy[t];if(this.relMachine.CheckConcatValid(e)){this.relMachine.Enter(this.relMachine.statusSuccessed),s.default.inst.VoiceSet(n.default.DEFENDED);break}}}OnDefend(){this.relMachine.Enter(this.relMachine.statusIng)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"MgrDefendActStatusIng"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./MgrDefendActStatus":"MgrDefendActStatus"}],MgrDefendActStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"1f0d8rpExNCerNixXzm0Jj1","MgrDefendActStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrDefendActStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnDefend(){this.relMachine.Enter(this.relMachine.statusIng)}OnDmg(e){this.relMachine.relMBPlayer.playerMgrHealth.machine.currStatus.OnDmg(e)}OnEnter(){this.relMachine.relMBPlayer.relBody.ClearDmgRecord()}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrDefendActStatusOrdinary"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrDefendActStatus":"MgrDefendActStatus"}],MgrDefendActStatusSuccessed:[function(e,t,o){"use strict";cc._RF.push(t,"a19daPlzF5AmaLzGrVziUTL","MgrDefendActStatusSuccessed"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../equipment/EquipmentInstRS"),n=e("../GameElementBodyCtxDmg"),l=e("../GameElementBodyCtxDmgType"),c=e("../GameSizeMarkRS"),d=e("./MgrDefendActStatus"),u="MgrDefendActStatusSuccessed";class m extends d.default{constructor(){super(),this._totalMS=0,this._setDmgedTargetId=i.default.Pop(i.default.typeSet,u)}static Pop(e,t){let o=i.default.Pop(m._t,e);return o.relMachine=t,o}OnEnter(){this.ClearDmgRecord(),this._totalMS=0,this._appIdTimeScale=this.relMachine.relMBPlayer.relBody.relState.ApplyTimeScale(r.default.TIME_SCALE_WHILE_DEFEND_SUCCESSED),this.relMachine.relMBPlayer.animKeepShield.currStatus.OnFadeIn()}OnExit(){this.relMachine.relMBPlayer.relBody.relState.CancelTimeScale(this._appIdTimeScale),this.relMachine.relMBPlayer.animKeepShield.currStatus.OnFadeOut()}OnStep(e){for(let t=0;t<this.relMachine.relMBPlayer.relBody.listConcatedBodyEnemy.length;t++){let e=this.relMachine.relMBPlayer.relBody.listConcatedBodyEnemy[t];this.CheckDmgAble(e)&&this.relMachine.CheckConcatValid(e)&&(this.relMachine.RecordConcatValid(e),c.default.PlayEffHitByConcat(u,e,this.relMachine.relMBPlayer.relBody.relState,this.relMachine.relMBPlayer.relBody.commonCache.colorMain,e.relFixture.relBody.relEle.commonArgsCfg.size_mark),this.CauseDmg(e,n.default.Pop(u,{dmg:s.default.GetSingleDmgByPower(r.default.STANDARD_EQUIP,this.relMachine.relMBPlayer.playerMgrEquipment.equipInst.power),posX:e.position.x,posY:e.position.y,repel:s.default.GetSingleRepel(r.default.STANDARD_EQUIP),norX:e.normal.x,norY:e.normal.y,type:l.default.shield})))}this._totalMS+=e,r.default.DEFEND_SUCCESS_KEEP<=this._totalMS&&this.relMachine.Enter(this.relMachine.statusOrdinary),this.relMachine.relMBPlayer.playerMgrDefendCD.currStatus==this.relMachine.relMBPlayer.playerMgrDefendCD.statusTimeCount&&this.relMachine.relMBPlayer.playerMgrDefendCD.currStatus.OnStep(e/r.default.DEFEND_SUCCESS_KEEP*r.default.CD_DEFEND/r.default.SHIELD_READY_IN_DEFEND_SUCCESS)}OnDefend(){this.relMachine.Enter(this.relMachine.statusIng)}ClearDmgRecord(){this._setDmgedTargetId.clear()}CheckDmgAble(e){if(!e.CheckValid())return!1;let t=e.relFixture.relBody.relEle;return!(this._setDmgedTargetId.has(t.id)||t.commonCaller&&this._setDmgedTargetId.has(t.commonCaller.id))}CauseDmg(e,t){if(!this.CheckDmgAble(e))return;let o=e.relFixture.relBody.relEle;this._setDmgedTargetId.add(o.id),o.commonEvterDmg.Call(t)}}o.default=m,m._t=new a.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../equipment/EquipmentInstRS":"EquipmentInstRS","../GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../GameSizeMarkRS":"GameSizeMarkRS","./MgrDefendActStatus":"MgrDefendActStatus"}],MgrDefendActStatus:[function(e,t,o){"use strict";cc._RF.push(t,"2d4ac+NZoJHrqnsN9e2bUZE","MgrDefendActStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDefend(){}OnDmg(e){}},cc._RF.pop()},{}],MgrDefendAct:[function(e,t,o){"use strict";cc._RF.push(t,"a62067Qk/1Bk6sbMpC7knxB","MgrDefendAct"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrDefendActStatusIng"),s=e("./MgrDefendActStatusOrdinary"),n=e("./MgrDefendActStatusSuccessed"),l="MgrDefendAct";class c{constructor(){this._list=i.default.Pop(i.default.typeArray,l),this._mapBodyToActionId=i.default.Pop(i.default.typeMap,l)}static Pop(e,t){let o=i.default.Pop(c._t,e);return o._call=(e,t)=>{t.isReleased&&o._list.push(t)},o.relMBPlayer=t,o.statusOrdinary=s.default.Pop(l,o),o.statusIng=r.default.Pop(l,o),o.statusSuccessed=n.default.Pop(l,o),o.Enter(o.statusOrdinary),o}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnStep(e){this._list.length=0,this._mapBodyToActionId.forEach(this._call);for(let t=0;t<this._list.length;t++){let e=this._list[t];this._mapBodyToActionId.delete(e)}this.currStatus.OnStep(e)}CheckConcatValid(e){if(!e.CheckValid())return!1;let t=e.relFixture.relBody.relEle;return this._mapBodyToActionId.get(t)!=t.commonActionId}RecordConcatValid(e){let t=e.relFixture.relBody.relEle,o=t.commonActionId;this._mapBodyToActionId.set(t,o)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrDefendActStatusIng":"MgrDefendActStatusIng","./MgrDefendActStatusOrdinary":"MgrDefendActStatusOrdinary","./MgrDefendActStatusSuccessed":"MgrDefendActStatusSuccessed"}],MgrDefendCDStatusReady:[function(e,t,o){"use strict";cc._RF.push(t,"d3de8F/LR9OgL0c0R1rpeMJ","MgrDefendCDStatusReady"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../GameCommon"),n=e("./MgrDefendCDStatus");class l extends n.default{constructor(){super(),this.dir=-1}static Pop(e,t){let o=a.default.Pop(l._t,e);return o.relMachine=t,o}OnStep(e){this.relMachine.opacitySkill+=e/s.default.BTN_SKILL_OPACITY_TRANSITION_COST*255*this.dir,(this.relMachine.opacitySkill<0||255<this.relMachine.opacitySkill)&&(this.dir*=-1),this.relMachine.opacitySkill=i.default.Clamp(this.relMachine.opacitySkill,0,255)}OnEnter(){this.relMachine.relMBPlayer.animFlashReady.currStatus.OnFlash(),this.relMachine.relMBPlayer.animShieldReady.currStatus.OnFadeIn()}OnExit(){this.relMachine.relMBPlayer.animShieldReady.currStatus.OnFadeOut()}OnDefend(){this.relMachine.Enter(this.relMachine.statusTimeCount),this.relMachine.relMBPlayer.playerMgrDefendAct.currStatus.OnDefend()}}o.default=l,l._t=new r.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:"MgrDefendCDStatusReady"}),cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","./MgrDefendCDStatus":"MgrDefendCDStatus"}],MgrDefendCDStatusTimeCount:[function(e,t,o){"use strict";cc._RF.push(t,"96d91MqozpCA6dfLmQyN3i/","MgrDefendCDStatusTimeCount"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../GameCommon"),n=e("../../../view/voice_ogg/VoiceOggViewState"),l=e("./MgrDefendCDStatus");class c extends l.default{constructor(){super(),this.msWait=0}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this.msWait=0}OnStep(e){this.msWait+=e,this.msWait=Math.min(this.msWait,s.default.CD_DEFEND),this.msWait==s.default.CD_DEFEND&&this.relMachine.Enter(this.relMachine.statusReady),this.relMachine.opacitySkill+=e/s.default.BTN_SKILL_OPACITY_TRANSITION_COST*255,this.relMachine.opacitySkill=i.default.Clamp(this.relMachine.opacitySkill,0,255)}OnDefend(){n.default.inst.VoiceSet(s.default.BTN_VOICE)}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"MgrDefendCDStatusTimeCount"}),cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","./MgrDefendCDStatus":"MgrDefendCDStatus"}],MgrDefendCDStatus:[function(e,t,o){"use strict";cc._RF.push(t,"7a3a7aW+e5HKrfQpuq1ujOm","MgrDefendCDStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDefend(){}},cc._RF.pop()},{}],MgrDefendCD:[function(e,t,o){"use strict";cc._RF.push(t,"fbde9JtglpI1LmFhIbIk/b0","MgrDefendCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrDefendCDStatusReady"),s=e("./MgrDefendCDStatusTimeCount"),n="MgrDefendCD";class l{constructor(){this.opacitySkill=255}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMBPlayer=t,o.statusTimeCount=s.default.Pop(n,o),o.statusReady=r.default.Pop(n,o),o.Enter(o.statusTimeCount),o}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrDefendCDStatusReady":"MgrDefendCDStatusReady","./MgrDefendCDStatusTimeCount":"MgrDefendCDStatusTimeCount"}],MgrEquipmentMachineStatusArmo:[function(e,t,o){"use strict";cc._RF.push(t,"b50e5ytwI5FRLJrGDVNe5pr","MgrEquipmentMachineStatusArmo"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrEquipmentMachineStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnFire(e,t){this.relMachine.equip.npc.playerMgrHealth.machine.currStatus!=this.relMachine.equip.npc.playerMgrHealth.machine.statusDeath&&(this.relMachine.EnterStatus(this.relMachine.statusFired),this.relMachine.currStatus.OnFire(e,t))}OnStep(e){this.relMachine.equip.firePos.x=this.relMachine.equip.aimVec.x+this.relMachine.equip.npc.playerEquipPos.x,this.relMachine.equip.firePos.y=this.relMachine.equip.aimVec.y+this.relMachine.equip.npc.playerEquipPos.y}OnDraw(e){this.relMachine.equip.equipInst.OnDraw(e)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrEquipmentMachineStatusArmo"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrEquipmentMachineStatus":"MgrEquipmentMachineStatus"}],MgrEquipmentMachineStatusFired:[function(e,t,o){"use strict";cc._RF.push(t,"bade4deunhKyqZM1tGiabn/","MgrEquipmentMachineStatusFired"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrEquipmentMachineStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.equip.equipInst.OnFireEnter()}OnFire(e,t){this.relMachine.equip.firePos.x=e,this.relMachine.equip.firePos.y=t,this.relMachine.equip.aimVec.x=this.relMachine.equip.firePos.x-this.relMachine.equip.npc.playerEquipPos.x,this.relMachine.equip.aimVec.y=this.relMachine.equip.firePos.y-this.relMachine.equip.npc.playerEquipPos.y}OnExit(){this.relMachine.equip.equipInst.OnFireExit()}OnArmo(){this.relMachine.EnterStatus(this.relMachine.statusArmo)}OnStep(){this.relMachine.equip.npc.playerMgrHealth.machine.currStatus!=this.relMachine.equip.npc.playerMgrHealth.machine.statusDeath?this.relMachine.equip.equipInst.OnFireStep():this.OnArmo()}OnDraw(e){this.relMachine.equip.equipInst.OnDraw(e)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrEquipmentMachineStatusFired"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrEquipmentMachineStatus":"MgrEquipmentMachineStatus"}],MgrEquipmentMachineStatus:[function(e,t,o){"use strict";cc._RF.push(t,"e6d78DJnxlOOLQl5iio7Jwz","MgrEquipmentMachineStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnFire(e,t){}OnArmo(){}OnStep(e){}OnDraw(e){}},cc._RF.pop()},{}],MgrEquipmentMachine:[function(e,t,o){"use strict";cc._RF.push(t,"2f737WLwvZA14Pz0XGBtrqj","MgrEquipmentMachine"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrEquipmentMachineStatusArmo"),s=e("./MgrEquipmentMachineStatusFired"),n="MgrEquipmentMachine";class l{constructor(){}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.equip=t,o.statusFired=s.default.Pop(n,o),o.statusArmo=r.default.Pop(n,o),o.EnterStatus(o.statusArmo),o}EnterStatus(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrEquipmentMachineStatusArmo":"MgrEquipmentMachineStatusArmo","./MgrEquipmentMachineStatusFired":"MgrEquipmentMachineStatusFired"}],MgrEquipment:[function(e,t,o){"use strict";cc._RF.push(t,"80400X+filA7q1VB997hFyv","MgrEquipment"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrEquipmentMachine"),a=e("../../equipment/EquipmentInstRS"),r=e("../../../../frame/basic/UtilObjPoolType"),s=e("../../../../frame/basic/UtilObjPool"),n=e("../../../../frame/global/Jiang"),l=e("../../../../frame/config/src/CfgEquipmentProps"),c=e("../../../../frame/config/src/CfgGameElement"),d=e("../../../GameCommon"),u=e("../../../../IndexStorageItem"),m=e("../../../cfg_cache/CfgCacheEquipment"),p=e("../../../GameMath"),h=e("../../../../frame/ui/MgrUI"),f="MgrEquipment";class y{constructor(){this.equipmentExport=0,this.equipAnimAble=0,this.fired=!1,this.firePos=s.default.Pop(s.default.typeccVec2,f),this.aimVec=s.default.Pop(s.default.typeccVec2,f),this.listEquipmentInst=s.default.Pop(s.default.typeArray,f)}static Pop(e,t){let o=s.default.Pop(y._t,e);return o.aimVec.x=h.default.FAT_HEIGHT/d.default.SCENE_SCALE+d.default.CAMERA_OFFSET_X,o.machine=i.default.Pop(f,o),o.npc=t,o}OnStep(e){this.machine.equip.equipInst.OnStep(e),this.machine.currStatus.OnStep(e)}get equipInst(){return this.listEquipmentInst[this.currEquipIdx]}AddEquipment(e){let t=n.default.mgrData.Get(u.default.listEquipment).find(t=>t.idCfg==e),o=n.default.mgrCfg.cfgEquipmentProps.select(l.default.idGetter,e)._list[0],i=a.default.instMap.get(o.logic),r=i.instCreator(f,m.default.GetCache(o).args);r.relEquip=this,r.cfgProps=o,r.rs=i,r.power=p.default.GetAppPower(p.default.equip.ParseCountToPower(t.count)),r.lev=p.default.ParsePowerToLev(p.default.equip.ParseCountToPower(t.count)),0<n.default.mgrCfg.cfgGameElement.select(c.default.idGetter,o.arrow)._list.length&&(r.bulletGravityScale=n.default.mgrCfg.cfgGameElement.select(c.default.idGetter,o.arrow)._list[0].gravity_scale),r.OnInit(),this.listEquipmentInst.push(r)}SetEquipmentIdx(e){if(e==this.currEquipIdx)return;if(this.listEquipmentInst.length<=e)return;this.npc.playerMgrBodyDir.currStatus.OnLeft();let t=this.listEquipmentInst[this.currEquipIdx];this.currEquipIdx=e;let o=this.listEquipmentInst[this.currEquipIdx];t&&t.OnBackPack(),o.OnHand()}DrawForCommon(e,t,o,i,a){this.Draw(e,t,o,i,a,this.npc.playerEquipPos.x,this.npc.playerEquipPos.y)}Draw(e,t,o,i,a,r,l){a/=1e3;let c=Math.cos(o)*i*1e3*n.default.mgrUI._sizePerPixel,u=Math.sin(o)*i*1e3*n.default.mgrUI._sizePerPixel,m=Math.max(d.default.TRACE_TIPS_SECOND_UNIT,a/20),p=r,h=l;p*=n.default.mgrUI._sizePerPixel,h*=n.default.mgrUI._sizePerPixel;let y=0;for(y+=2*m;y<a;){let o=1-y/a;if((o=Math.sqrt(o))<.1)break;let i=p+c*y;i/=n.default.mgrUI._sizePerPixel;let r=h+u*y+.5*this.npc.relBody.relState.b2Gravity*e.bulletGravityScale*Math.pow(y,2);if(Math.abs(d.default.GROUND_Y-r)<t.Pixel(2))break;r/=n.default.mgrUI._sizePerPixel;let l=this.GetDrawColor(),_=s.default.PopCCColor(f,l.r,l.g,l.b,255*o);t.RoundFill(i,r,t.Pixel(2),l),s.default.Push(_),y+=m}}GetDrawColor(){return this.npc.relBody.relState.cfgSceneCache.colorDark}}o.default=y,y._t=new r.default({instantiate:()=>new y,onPop:()=>{},onPush:()=>{},tag:f}),cc._RF.pop()},{"../../../../IndexStorageItem":"IndexStorageItem","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../../frame/config/src/CfgEquipmentProps":"CfgEquipmentProps","../../../../frame/config/src/CfgGameElement":"CfgGameElement","../../../../frame/global/Jiang":"Jiang","../../../../frame/ui/MgrUI":"MgrUI","../../../GameCommon":"GameCommon","../../../GameMath":"GameMath","../../../cfg_cache/CfgCacheEquipment":"CfgCacheEquipment","../../equipment/EquipmentInstRS":"EquipmentInstRS","./MgrEquipmentMachine":"MgrEquipmentMachine"}],MgrEvter:[function(e,t,o){"use strict";cc._RF.push(t,"2781cPFwo9PHI15qoG8XnkE","MgrEvter"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCEventer"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s="MgrEvter";class n{constructor(){this.evterUpdate=i.default.Pop(s),this.evterKeyDown=i.default.Pop(s),this.evterKeyUp=i.default.Pop(s),this.evterHide=i.default.Pop(s),this.evterShow=i.default.Pop(s),this.evterSecondUpdate=i.default.Pop(s);let e=a.default.Pop(a.default.typeSet,s);cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,t=>{e.has(t.keyCode)||(e.add(t.keyCode),this.evterKeyDown.Call(t.keyCode))}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,t=>{e.delete(t.keyCode),this.evterKeyUp.Call(t.keyCode)}),cc.game.on(cc.game.EVENT_HIDE,()=>{this.evterHide.Call(null)}),cc.game.on(cc.game.EVENT_SHOW,()=>{this.evterShow.Call(null)});let t=0,o=0;this.evterUpdate.On(e=>{t+=e;let i=Math.floor(t/1e3);o!=i&&(o=i,this.evterSecondUpdate.Call(null))})}static Pop(e){return a.default.Pop(n._t,e)}}n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),n.inst=n.Pop(s),o.default=n,cc._RF.pop()},{"../basic/BCEventer":"BCEventer","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],MgrHealthMachineStatusDeath:[function(e,t,o){"use strict";cc._RF.push(t,"7f34eZsNpZCNahbomnrDhm7","MgrHealthMachineStatusDeath"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../DefineVoice"),n=e("./MgrHealthMachineStatus");class l extends n.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(l._t,e);return o.relMachine=t,o}OnDmg(e){r.default.inst.VoiceSet(s.default.ATK_HITTED)}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:"MgrHealthMachineStatusDeath"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./MgrHealthMachineStatus":"MgrHealthMachineStatus"}],MgrHealthMachineStatusHurted:[function(e,t,o){"use strict";cc._RF.push(t,"e493fxG91JKr5ngSV4Cgyg1","MgrHealthMachineStatusHurted"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("./MgrHealthMachineStatus");class c extends l.default{constructor(){super(),this._totalMS=0}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnEnter(){this._totalMS=0}OnStep(e){this._totalMS+=e,r.default.HURTED_CD<this._totalMS&&this.relMachine.Enter(this.relMachine.statusOrdinary)}OnDmg(e){s.default.inst.VoiceSet(n.default.ATK_HITTED)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"MgrHealthMachineStatusHurted"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./MgrHealthMachineStatus":"MgrHealthMachineStatus"}],MgrHealthMachineStatusOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"af92dqcYk5HN4duab8pxJGe","MgrHealthMachineStatusOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("../../../GameCommon"),s=e("../../../view/voice_ogg/VoiceOggViewState"),n=e("../DefineVoice"),l=e("./MgrHealthMachineStatus");class c extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMachine=t,o}OnDmg(e){this.relMachine.relMgrHealth.relNpc.relBody.commonHpCurrent-=1,this.relMachine.relMgrHealth.relNpc.relBody.commonHpCurrent=Math.max(0,this.relMachine.relMgrHealth.relNpc.relBody.commonHpCurrent),this.relMachine.relMgrHealth.relNpc.animDmgedFlash.currStatus.OnFlash(),0==this.relMachine.relMgrHealth.relNpc.relBody.commonHpCurrent?(this.relMachine.relMgrHealth.relNpc.playerMgrAction.currStatus.OnDeath(),this.relMachine.Enter(this.relMachine.statusDeath)):(this.relMachine.Enter(this.relMachine.statusHurted),r.default.FORWARD_WHILE_SUFFERED_DMG&&this.relMachine.relMgrHealth.relNpc.playerMgrAction.currStatus.OnForwardPress()),this.relMachine.currStatus==this.relMachine.statusDeath?s.default.inst.VoiceSet(n.default.FAIL_1):s.default.inst.VoiceSet(n.default.HURTED)}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"MgrHealthMachineStatusOrdinary"}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../GameCommon":"GameCommon","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../DefineVoice":"DefineVoice","./MgrHealthMachineStatus":"MgrHealthMachineStatus"}],MgrHealthMachineStatus:[function(e,t,o){"use strict";cc._RF.push(t,"81b5ahagXZLaJjY8k0bDKMT","MgrHealthMachineStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnDmg(e){}},cc._RF.pop()},{}],MgrHealthMachine:[function(e,t,o){"use strict";cc._RF.push(t,"90877NUkLdIeLONOfSjxNss","MgrHealthMachine"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrHealthMachineStatusDeath"),s=e("./MgrHealthMachineStatusHurted"),n=e("./MgrHealthMachineStatusOrdinary"),l="MgrHealthMachine";class c{constructor(){}static Pop(e,t){let o=i.default.Pop(c._t,e);return o.relMgrHealth=t,o.statusOrdinary=n.default.Pop(l,o),o.statusHurted=s.default.Pop(l,o),o.statusDeath=r.default.Pop(l,o),o.Enter(o.statusOrdinary),o}Enter(e){let t=this.currStatus;this.currStatus=e,null!=t&&t.OnExit(),null!=this.currStatus&&this.currStatus.OnEnter()}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrHealthMachineStatusDeath":"MgrHealthMachineStatusDeath","./MgrHealthMachineStatusHurted":"MgrHealthMachineStatusHurted","./MgrHealthMachineStatusOrdinary":"MgrHealthMachineStatusOrdinary"}],MgrHealth:[function(e,t,o){"use strict";cc._RF.push(t,"41ba274pyJGX5jSX2au7LrJ","MgrHealth"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrHealthMachine"),s="MgrHealth";class n{constructor(){}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relNpc=t,o.machine=r.default.Pop(s,o),o}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrHealthMachine":"MgrHealthMachine"}],MgrHorseFrameStatus:[function(e,t,o){"use strict";cc._RF.push(t,"2692933YMdPVbiW7jhv/STP","MgrHorseFrameStatus"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilMath"),a=e("../../../../frame/basic/UtilObjPool"),r=e("../../../view/voice_ogg/VoiceOggViewState"),s=e("../../common/GameElementPart"),n=e("../DefineVoice"),l="MgrHorrseFrameStatus";o.default=class{constructor(e){this.listPositionDirt=a.default.Pop(a.default.typeArray,l),this.relMachine=e.relMachine,this.idx=e.idx,this.msKeep=e.msKeep,this.listPositionDirt=e.listPositionDirt,this.voice=e.voiceActive}OnEnter(){null!=this.voice&&r.default.inst.VoiceSet(n.default.HORSE_DIRT_1);for(let e=0;e<this.listPositionDirt.length;e++){let t=this.listPositionDirt[e];s.default.BoomForHorse(l,this.relMachine.relNp.relBody.relState,this.relMachine.relNp.relBody.relState.cfgSceneCache.colorDark,8,this.relMachine.relNp.relBody.commonFootPos.x+t.x,this.relMachine.relNp.relBody.commonFootPos.y+t.y,0,1,.64/6,600,.3)}this._msCount=0}OnExit(){}OnStep(e){if(this._msCount+=e,this.msKeep<this._msCount){let e=i.default.Mod(this.idx-1,this.relMachine.listStatus.length);this.relMachine.EnterStatus(this.relMachine.listStatus[e])}}},cc._RF.pop()},{"../../../../frame/basic/UtilMath":"UtilMath","../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../common/GameElementPart":"GameElementPart","../DefineVoice":"DefineVoice"}],MgrHorseFrame:[function(e,t,o){"use strict";cc._RF.push(t,"8abdbdhoulGvZ1S+udhubgY","MgrHorseFrame"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../../frame/basic/UtilObjPool"),a=e("../../../../frame/basic/UtilObjPoolType"),r=e("./MgrHorseFrameStatus"),s="MgrHorseFrame";class n{constructor(){this.listStatus=i.default.Pop(i.default.typeArray,s)}static Pop(e,t){let o=i.default.Pop(i.default.typeccVec2,s);o.x=-30;let a=i.default.Pop(i.default.typeccVec2,s);a.x=15;let l=i.default.Pop(n._t,e);return l.relNp=t,l.listStatus.push(new r.default({relMachine:l,idx:0,msKeep:Math.ceil(125),listPositionDirt:[o],voiceActive:null}),new r.default({relMachine:l,idx:1,msKeep:Math.ceil(125),listPositionDirt:[a],voiceActive:null}),new r.default({relMachine:l,idx:2,msKeep:Math.ceil(125),listPositionDirt:[],voiceActive:null}),new r.default({relMachine:l,idx:3,msKeep:Math.ceil(125),listPositionDirt:[o],voiceActive:null}),new r.default({relMachine:l,idx:4,msKeep:Math.ceil(125),listPositionDirt:[a],voiceActive:null}),new r.default({relMachine:l,idx:5,msKeep:Math.ceil(125),listPositionDirt:[],voiceActive:null})),l.EnterStatus(l.listStatus[0]),l}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../../frame/basic/UtilObjPool":"UtilObjPool","../../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./MgrHorseFrameStatus":"MgrHorseFrameStatus"}],MgrResAssetsLoadRecord:[function(e,t,o){"use strict";cc._RF.push(t,"8db95y49EhEHqo5X/VgOhJr","MgrResAssetsLoadRecord"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCPromiseCtrl"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("./MgrRes"),n="MgrResAssetsLoadRecord";class l{constructor(){this.process=i.default.Pop(n),this.cd=0}get priorityForUI(){return this._priorityForUI}set priorityForUI(e){this._priorityForUI=e,s.default.inst.mgrAssets.priorityVersion++}static Pop(e,t,o){let i=a.default.Pop(l._t,e);return i.pathBundle=t,i.pathAssets=o,i.process._promise.then(e=>{i.content=e}),i}}o.default=l,l._t=new r.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../basic/BCPromiseCtrl":"BCPromiseCtrl","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrRes":"MgrRes"}],MgrResAssetsStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"e7bd7zuKdNER4D8ZnbQ1/wu","MgrResAssetsStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResAssetsStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMgr=t,o}OnTaskAdd(){this.relMgr.EnterStatus(this.relMgr.statusLoading)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrResAssetsStatusIdle"}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResAssetsStatus":"MgrResAssetsStatus"}],MgrResAssetsStatusLoading:[function(e,t,o){"use strict";cc._RF.push(t,"0c85eA4tEFFPZwqrCdZTp2P","MgrResAssetsStatusLoading"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexDataModule"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("../global/Jiang"),n=e("../sdk/MgrSdk"),l=e("./MgrResAssetsStatus");class c extends l.default{constructor(){super(),this.dataVersion=0,this.lastSortedVersion=0}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.relMgr=t,o}OnEnter(){this.Go()}Go(){if(0==this.relMgr.relMgr.listTask.length)return void this.relMgr.EnterStatus(this.relMgr.statusIdle);if(this.relMgr.relMgr.relMgr.asyncAble<=this.relMgr.idx)return void this.relMgr.EnterStatus(this.relMgr.statusIdle);this.relMgr.relMgr.versionSortedLast!=this.relMgr.relMgr.priorityVersion&&(this.relMgr.relMgr.versionSortedLast=this.relMgr.relMgr.priorityVersion,this.relMgr.relMgr.listTask.sort(c._sort));let e=this.relMgr.relMgr.listTask.shift();n.default.inst.Log(`\u52a0\u8f7d [${e.pathBundle}] [${e.pathAssets}]..`);let t=this.relMgr.relMgr.relMgr.mgrBundle.GetBundle(e.pathBundle);t.load(e.pathAssets,o=>{o?(e.cd+=1e3,console.error(`\u52a0\u8f7d [${e.pathBundle}] [${e.pathAssets}] \u5931\u8d25\uff0c[${e.cd}] ms \u540e\u91cd\u8bd5...`),setTimeout(()=>{this.relMgr.relMgr.AddTask(e)},e.cd)):e.process.resolve(t.get(e.pathAssets)),this.Go(),s.default.mgrUI.ModuleRefresh(i.default.RELOAD)})}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:"MgrResStatusLoading"}),c._sort=(e,t)=>e.priorityForUI-t.priorityForUI,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../global/Jiang":"Jiang","../sdk/MgrSdk":"MgrSdk","./MgrResAssetsStatus":"MgrResAssetsStatus"}],MgrResAssetsStatus:[function(e,t,o){"use strict";cc._RF.push(t,"4608aC4XTZI3qscURYYxDnZ","MgrResAssetsStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnTaskAdd(){}},cc._RF.pop()},{}],MgrResAssetsSum:[function(e,t,o){"use strict";cc._RF.push(t,"9e221fxVb9PxJoZY2XkX0Ev","MgrResAssetsSum"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResAssets"),s=e("./MgrResAssetsLoadRecord"),n=e("./MgrResConfig"),l="MgrResAssetsSum";class c{constructor(){this.listAssetsLoader=i.default.Pop(i.default.typeArray,l),this.listTask=i.default.Pop(i.default.typeArray,l),this.mapPathToLoadRecord=i.default.Pop(i.default.typeMap,l),this.priorityVersion=0}static Pop(e,t){let o=i.default.Pop(c._t,e);for(o.relMgr=t;o.listAssetsLoader.length<n.default.MAX_ASYNC_COUNT;)o.listAssetsLoader.push(r.default.Pop(e,o,o.listAssetsLoader.length));return o}GetLoadRecord(e){if(!this.mapPathToLoadRecord.has(e)){let t=e.split(/\//g),o=t.shift(),i=t.join("/"),a=s.default.Pop(l,o,i);this.mapPathToLoadRecord.set(e,a),this.relMgr.mgrBundle.GetLoadRecord(o).process._promise.then(()=>{this.AddTask(a)})}return this.mapPathToLoadRecord.get(e)}AddTask(e){this.listTask.push(e),this.priorityVersion++;for(let t=0;t<this.listAssetsLoader.length;t++)this.listAssetsLoader[t].currStatus.OnTaskAdd()}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResAssets":"MgrResAssets","./MgrResAssetsLoadRecord":"MgrResAssetsLoadRecord","./MgrResConfig":"MgrResConfig"}],MgrResAssets:[function(e,t,o){"use strict";cc._RF.push(t,"9da5e7dO3FJSpgJ9YE2lrwv","MgrResAssets"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResAssetsStatusIdle"),s=e("./MgrResAssetsStatusLoading"),n="MgrResAssets";class l{constructor(){}static Pop(e,t,o){let a=i.default.Pop(l._t,e);return a.idx=o,a.relMgr=t,a.statusIdle=r.default.Pop(n,a),a.statusLoading=s.default.Pop(n,a),a.EnterStatus(a.statusIdle),a}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResAssetsStatusIdle":"MgrResAssetsStatusIdle","./MgrResAssetsStatusLoading":"MgrResAssetsStatusLoading"}],MgrResBundleLoadRecord:[function(e,t,o){"use strict";cc._RF.push(t,"e218eE1sNxEZ7hABIbp2DEH","MgrResBundleLoadRecord"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCPromiseCtrl"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s="MgrResBundleLoadRecord";class n{constructor(){this.process=i.default.Pop(s)}static Pop(e,t){let o=a.default.Pop(n._t,e);return o.path=t,o.process._promise.then(e=>{o.content=e}),o}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../basic/BCPromiseCtrl":"BCPromiseCtrl","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],MgrResBundleStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"5bc07zOAhtBoKeEatdxZxir","MgrResBundleStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResBundleStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMgr=t,o}OnTaskAdd(){this.relMgr.EnterStatus(this.relMgr.statusLoading)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"MgrResBundleStatusIdle"}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResBundleStatus":"MgrResBundleStatus"}],MgrResBundleStatusLoading:[function(e,t,o){"use strict";cc._RF.push(t,"1bca37rYAdGxIgi5AWW43A+","MgrResBundleStatusLoading"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("../sdk/MgrSdk"),s=e("./MgrResBundleStatus");class n extends s.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMgr=t,o}OnEnter(){this.Go()}Go(){if(0==this.relMgr.relMgr.listTask.length)return void this.relMgr.EnterStatus(this.relMgr.statusIdle);if(this.relMgr.relMgr.relMgr.asyncAble<=this.relMgr.idx)return void this.relMgr.EnterStatus(this.relMgr.statusIdle);let e=this.relMgr.relMgr.listTask.shift();r.default.inst.Log(`\u52a0\u8f7d [${e.path}]..`),cc.assetManager.loadBundle(e.path,t=>{if(t)e.process.reject(t);else{let t=cc.assetManager.getBundle(e.path);this.relMgr.relMgr.listLoadedBundle.push(t),e.process.resolve(t)}this.Go()})}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"MgrResBundleStatusLoading"}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../sdk/MgrSdk":"MgrSdk","./MgrResBundleStatus":"MgrResBundleStatus"}],MgrResBundleStatus:[function(e,t,o){"use strict";cc._RF.push(t,"b2a6f1x5oNNgL7AguisSkzY","MgrResBundleStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnTaskAdd(){}},cc._RF.pop()},{}],MgrResBundleSum:[function(e,t,o){"use strict";cc._RF.push(t,"dee7fDdZSxFw635onoWgSjo","MgrResBundleSum"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResBundle"),s=e("./MgrResBundleLoadRecord"),n=e("./MgrResConfig"),l="MgrResBundleSum";class c{constructor(){this.listBundleLoader=i.default.Pop(i.default.typeArray,l),this.listTask=i.default.Pop(i.default.typeArray,l),this.mapPathToLoadRecord=i.default.Pop(i.default.typeMap,l),this.listLoadedBundle=i.default.Pop(i.default.typeArray,l)}static Pop(e,t){let o=i.default.Pop(c._t,e);for(o.relMgr=t;o.listBundleLoader.length<n.default.MAX_ASYNC_COUNT;)o.listBundleLoader.push(r.default.Pop(e,o,o.listBundleLoader.length));return o}GetLoadRecord(e){if(!this.mapPathToLoadRecord.has(e)){let t=s.default.Pop(l,e);this.mapPathToLoadRecord.set(e,t),this.listTask.push(t);for(let e=0;e<this.listBundleLoader.length;e++)this.listBundleLoader[e].currStatus.OnTaskAdd()}return this.mapPathToLoadRecord.get(e)}GetBundle(e){return this.mapPathToLoadRecord.has(e)?this.mapPathToLoadRecord.get(e).content:null}}o.default=c,c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResBundle":"MgrResBundle","./MgrResBundleLoadRecord":"MgrResBundleLoadRecord","./MgrResConfig":"MgrResConfig"}],MgrResBundle:[function(e,t,o){"use strict";cc._RF.push(t,"1bb80QnnF1M0qGCEU4LDJyK","MgrResBundle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResBundleStatusIdle"),s=e("./MgrResBundleStatusLoading"),n="MgrResBundle";class l{constructor(){}static Pop(e,t,o){let a=i.default.Pop(l._t,e);return a.idx=o,a.relMgr=t,a.statusIdle=r.default.Pop(n,a),a.statusLoading=s.default.Pop(n,a),a.EnterStatus(a.statusIdle),a}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=l,l._t=new a.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResBundleStatusIdle":"MgrResBundleStatusIdle","./MgrResBundleStatusLoading":"MgrResBundleStatusLoading"}],MgrResConfig:[function(e,t,o){"use strict";var i;cc._RF.push(t,"6a913dbnOlCwa2IaoZ1Bn2h","MgrResConfig"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.MAX_ASYNC_COUNT=100}(i||(i={})),o.default=i,cc._RF.pop()},{}],MgrRes:[function(e,t,o){"use strict";cc._RF.push(t,"d4a64Nu+j1D6IuFQlJWKOzb","MgrRes"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r=e("./MgrResAssetsSum"),s=e("./MgrResBundleSum"),n=e("./MgrResConfig"),l="MgrRes";class c{constructor(){this._staticPrefabCache=i.default.Pop(i.default.typeMap,l),this._asyncMaxIdGen=0,this._asyncMaxApplied=i.default.Pop(i.default.typeSet,l)}static Pop(e){let t=i.default.Pop(c._t,e);return t.mgrAssets=r.default.Pop(l,t),t.mgrBundle=s.default.Pop(l,t),t}GetPrefab(e){return this._staticPrefabCache.has(e)?this._staticPrefabCache.get(e):this.mgrAssets.GetLoadRecord(e).content}get asyncAble(){return 0<this._asyncMaxApplied.size?n.default.MAX_ASYNC_COUNT:1}AsyncMaxApp(){let e=++this._asyncMaxIdGen;return this._asyncMaxApplied.add(e),e}AsyncMaxCancel(e){this._asyncMaxApplied.delete(e)}}c._t=new a.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),c.inst=c.Pop(l),o.default=c,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrResAssetsSum":"MgrResAssetsSum","./MgrResBundleSum":"MgrResBundleSum","./MgrResConfig":"MgrResConfig"}],MgrSdkCoreH5:[function(e,t,o){"use strict";cc._RF.push(t,"c6ed2PXaUNPM5OU/S6cJ00S","MgrSdkCoreH5"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../game/view/share_view/ShareViewRS"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("./MgrSdkCore"),n="MgrSdkCoreH5",l=`${n}_local`,c=`${n}_server`;class d extends s.default{constructor(){super(),this._listCtxJoined=[{id_prop:i.default.heart.idProp,url:null},{id_prop:i.default.star.idProp,url:null}]}static Pop(e){return a.default.Pop(d._t,e)}Init(){return Promise.resolve()}Author(){return Promise.resolve()}LocalSet(e){return localStorage.setItem(l,JSON.stringify(e)),Promise.resolve()}LocalGet(){return Promise.resolve(JSON.parse(localStorage.getItem(l)))}ServerSet(e){return localStorage.setItem(c,JSON.stringify(e)),Promise.resolve()}ServerGet(){return Promise.resolve(JSON.parse(localStorage.getItem(c)))}ServerClear(){return localStorage.clear(),Promise.resolve()}DateNow(){return Promise.resolve(Date.now())}FillSprByUrl(e,t){e.spriteFrame=null}WXGetPlayerHeadUrl(){return null}WXVideo(){return Promise.resolve({isRewardAble:!0})}WXGetListCtxJoined(){return this._listCtxJoined}WXRefreshListCtxJoined(){return Promise.resolve()}WXShare(e,t,o,i,a){}WXGetOpenId(){return null}WXHelpCommit(e,t){return Promise.resolve(null)}}o.default=d,d._t=new r.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:n}),cc._RF.pop()},{"../../game/view/share_view/ShareViewRS":"ShareViewRS","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrSdkCore":"MgrSdkCore"}],MgrSdkCoreWXCloudCallRecord:[function(e,t,o){"use strict";cc._RF.push(t,"018c08s+IBIurmQH+WmU745","MgrSdkCoreWXCloudCallRecord"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.retryTimeout=0,this.rs=e.rs,this.t=e.t,this.success=e.success,this.fail=e.fail}},cc._RF.pop()},{}],MgrSdkCoreWXCloudFunctionRS:[function(e,t,o){"use strict";cc._RF.push(t,"801afvcmK1MGqHCwmYf+su1","MgrSdkCoreWXCloudFunctionRS"),Object.defineProperty(o,"__esModule",{value:!0});class i{constructor(e){this.name=e.name}}(function(e){e.dateNow=new e({name:"date_now"}),e.infoSet=new e({name:"info_set"}),e.infoGet=new e({name:"info_get"}),e.msgCommit=new e({name:"msg_commit"}),e.helpCommit=new e({name:"help_commit"}),e.getHelpMsg=new e({name:"get_help_msg"})})(i||(i={})),o.default=i,cc._RF.pop()},{}],MgrSdkCoreWXCloudStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"f318dwf3NhFgLO61YpPuGGH","MgrSdkCoreWXCloudStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrSdkCoreWXCloudStatus");o.default=class extends i.default{},cc._RF.pop()},{"./MgrSdkCoreWXCloudStatus":"MgrSdkCoreWXCloudStatus"}],MgrSdkCoreWXCloudStatusInited:[function(e,t,o){"use strict";cc._RF.push(t,"13010IipQhJorXLi3E6Mx1E","MgrSdkCoreWXCloudStatusInited"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MgrSdk"),a=e("./MgrSdkCoreWX"),r=e("./MgrSdkCoreWXCloudStatus");o.default=class extends r.default{constructor(){super(...arguments),this.listCallRecord=[]}OnEnter(){for(let e=0;e<this.listCallRecord.length;e++){let t=this.listCallRecord[e];this.Call(t)}this.listCallRecord.length=0}Call(e){i.default.inst.Log(`wx: cloud call [${e.rs.name}]...`,e),a.default.wx.cloud.callFunction({name:`${e.rs.name}`,data:e.t,success:t=>{i.default.inst.Log(`wx: cloud call [${e.rs.name}] success`,t.result),e.success(t.result)},fail:t=>{i.default.inst.Log(`wx: cloud call [${e.rs.name}] fail`,t),e.fail(t)}})}},cc._RF.pop()},{"../MgrSdk":"MgrSdk","./MgrSdkCoreWX":"MgrSdkCoreWX","./MgrSdkCoreWXCloudStatus":"MgrSdkCoreWXCloudStatus"}],MgrSdkCoreWXCloudStatusIniting:[function(e,t,o){"use strict";cc._RF.push(t,"36ebccrlWNBPb8GsguyY4tC","MgrSdkCoreWXCloudStatusIniting"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MgrSdk"),a=e("./MgrSdkCoreWX"),r=e("./MgrSdkCoreWXCloudStatus");o.default=class extends r.default{OnEnter(){i.default.inst.Log("wx: cloud initing..."),a.default.wx.cloud.init({}).then(e=>{i.default.inst.Log("wx: cloud inited!",e),this.relMachine.CloudEnterStatus(this.relMachine.cloudStatusInited)}).catch(()=>{this.relMachine.CloudEnterStatus(this.relMachine.cloudStatusIniting)})}},cc._RF.pop()},{"../MgrSdk":"MgrSdk","./MgrSdkCoreWX":"MgrSdkCoreWX","./MgrSdkCoreWXCloudStatus":"MgrSdkCoreWXCloudStatus"}],MgrSdkCoreWXCloudStatus:[function(e,t,o){"use strict";cc._RF.push(t,"1667by1J/pIqZRl1SAaeZpY","MgrSdkCoreWXCloudStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnCloudInited(){}},cc._RF.pop()},{}],MgrSdkCoreWXUserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"6d5b1rrL/FA0oOATo/COT7O","MgrSdkCoreWXUserInfo"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],MgrSdkCoreWX:[function(e,t,o){"use strict";cc._RF.push(t,"33889C2un1Oh5xaSiNZjexI","MgrSdkCoreWX"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexStorageItem"),r=e("../../../game/view/share_view/ShareViewRS"),s=e("../../basic/BCPromiseCtrl"),n=e("../../basic/UtilObjPool"),l=e("../../basic/UtilObjPoolType"),c=e("../../basic/UtilString"),d=e("../../config/src/CfgBackpackProp"),u=e("../../global/Jiang"),m=e("../MgrSdk"),p=e("../MgrSdkCore"),h=e("../MgrSdkEnterRS"),f=e("./MgrSdkCoreWXCloudCallRecord"),y=e("./MgrSdkCoreWXCloudFunctionRS"),_=e("./MgrSdkCoreWXCloudStatusIdle"),g=e("./MgrSdkCoreWXCloudStatusInited"),b=e("./MgrSdkCoreWXCloudStatusIniting"),S=e("./WXAudio"),P=e("./WXImgLoader"),B=e("./WXLifeCycle"),C=e("./WXVideoAd"),M="MgrSdkCoreWX",x=`${M}_local`;class V extends p.default{constructor(){super(),this.timeSpace=0,this._listCtxJoined=n.default.Pop(n.default.typeArray,M),this._mapUrlToImgLoader=n.default.Pop(n.default.typeMap,M),this.idSeek=0,this.mapIdToAudioInst=new Map,this.mapUrlToPool=new Map,V.inst=this,this.mgrAd=new C.default({relMgr:this}),this.mgrLife=new B.default({relMgr:this}),this.cloudStatusIdle=new _.default(this),this.cloudStatusIniting=new b.default(this),this.cloudStatusInited=new g.default(this),this.CloudEnterStatus(this.cloudStatusIdle)}static Pop(e){return n.default.Pop(V._t,e)}static get wx(){return window.wx}Init(){return V.wx.showShareMenu(),V.wx.onShareAppMessage(()=>{let e=u.default.mgrData.Get(a.default.listBackpackProp);for(let t=0;t<r.default.listShareViewRS.length;t++){let o=r.default.listShareViewRS[t],i=!1;for(let t=0;t<e.length;t++)if(e[t].idCfg==o.idProp){i=!0;break}if(i)continue;let a=u.default.mgrCfg.cfgBackpackProp.select(d.default.idGetter,o.idProp)._list[0];return this.CreateShareMsg(`\u6211\u60f3\u8981${a.name}\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211`,h.default.invited,{open_id:m.default.inst.core.WXGetOpenId(),id_prop:`${o.idProp}`},o.imgId,o.imgUrl)}return{title:"\u597d\u8036\uff01\u662f\u5c0f\u5192\u9669~",imageUrlId:r.default.heart.imgId,imageUrl:r.default.heart.imgUrl}}),m.default.inst.Log("wx: init"),Promise.resolve().then(()=>{let e=s.default.Pop(M);this.CloudEnterStatus(this.cloudStatusIniting);let t=u.default.mgrEvter.evterUpdate.On(()=>{this.cloudCurrStatus==this.cloudStatusInited&&e.resolve(null)});return e._promise.then(()=>{u.default.mgrEvter.evterUpdate.Off(t)}),e._promise})}Author(){Date.now();return Promise.resolve().then(()=>Promise.resolve().then(()=>{let e=s.default.Pop(M),t=0;return function o(){m.default.inst.Log("wx: getSetting..."),V.wx.getSetting({scope:"scope.userInfo",success:t=>{m.default.inst.Log("wx: getSetting success",t),e.resolve(t.authSetting["scope.userInfo"])},fail:e=>{m.default.inst.Log("wx: getSetting fail",e),setTimeout(()=>{o()},t+=1e3)}})}(),e._promise}).then(e=>{if(e)return Promise.resolve();let t=s.default.Pop(M);m.default.inst.Log("wx: createUserInfoButton...");let o=V.wx.createUserInfoButton({type:"text",text:"",style:{width:window.innerWidth,height:window.innerHeight,backgroundColor:"#00000000"}});return o.onTap(e=>{e.userInfo&&(m.default.inst.Log("wx: createUserInfoButton",e.userInfo),o.destroy(),t.resolve(null))}),t._promise})).then(()=>{let e=s.default.Pop(M),t=0;return function o(){m.default.inst.Log("wx: getUserInfo..."),V.wx.getUserInfo().then(t=>{m.default.inst.Log("wx: getUserInfo then",t),e.resolve(t.userInfo)}).catch(e=>{m.default.inst.Log("wx: getUserInfo catch",e),setTimeout(()=>{o()},t+=1e3)})}(),e._promise}).then(e=>{let t=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.msgCommit,t:{nick_name:e.nickName,avatar_url:e.avatarUrl},success:o=>{t.resolve(null),m.default.inst.Log(`wx: author nickName[${e.nickName}] openId[${o.open_id}] avatarUrl[${e.avatarUrl}]`),this.playerHeadUrl=e.avatarUrl,this.openId=o.open_id},fail:()=>{}})),t._promise}).then(()=>{let e=V.wx.getLaunchOptionsSync();m.default.inst.Log("wx: getLaunchOptionsSync",e);let t=e.query._code,o=h.default.mapCodeToRS.get(t);m.default.inst.Log(`wx: code[${t}]`,o),null==o&&(o=h.default.none),o.init(e.query)}).then(()=>{u.default.mgrUI.ModuleRefresh(i.default.SDK),this.mgrAd.Init()})}LocalSet(e){return V.wx.setStorageSync(x,JSON.stringify(e)),Promise.resolve(null)}LocalGet(){let e=Date.now(),t=V.wx.getStorageSync(x);return m.default.inst.Log(`MgrSdkCoreWX: LocalGet Cost[${Date.now()-e}]`,t),c.default.CheckIsNullOrEmpty(t)?Promise.resolve(null):Promise.resolve(JSON.parse(t))}ServerSet(e){let t=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.infoSet,t:{info_json:e},success:e=>{m.default.inst.Log(`wx: resp.isStorageKeyValid[${e.isStorageKeyValid}]`),e.isStorageKeyValid?t.resolve(e):this.mgrLife.currStatus.OnAppQuit()},fail:e=>{t.resolve(e)}})),t._promise}ServerGet(){let e=Date.now(),t=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.infoGet,t:{},success:o=>{t.resolve(o.info_json),m.default.inst.Log(`MgrSdkCoreWX: ServerGet Cost[${Date.now()-e}]`)},fail:()=>{}})),t._promise}WXVideo(){return this.mgrAd.Play()}DateNow(){let e=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.dateNow,t:{},success:t=>{e.resolve(t.ms)},fail:()=>{}})),e._promise}WXGetPlayerHeadUrl(){return this.playerHeadUrl}WXGetListCtxJoined(){return this._listCtxJoined}WXRefreshListCtxJoined(){let e=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.getHelpMsg,t:{},success:t=>{this._listCtxJoined.length=0,this._listCtxJoined.push(...t.list_ctx),u.default.mgrUI.ModuleRefresh(i.default.SDK),e.resolve(null)},fail:()=>{}})),e._promise}FillSprByUrl(e,t){this._mapUrlToImgLoader.has(t)||this._mapUrlToImgLoader.set(t,P.default.Pop(M,t)),this._mapUrlToImgLoader.get(t).currStatus.OnFill(e)}CloudEnterStatus(e){let t=this.cloudCurrStatus;this.cloudCurrStatus=e,t&&t.OnExit(),this.cloudCurrStatus.OnEnter()}CloudCall(e){this.cloudCurrStatus==this.cloudStatusInited?this.cloudStatusInited.Call(e):this.cloudStatusInited.listCallRecord.push(e)}CloudCertain(e){let t=new f.default({rs:e.rs,t:e.t,success:t=>{e.success(t)},fail:t=>{e.retryTimeout+=1e3,setTimeout(()=>{this.CloudCertain(e)},e.retryTimeout),e.fail(t)}});this.CloudCall(t)}CreateShareMsg(e,t,o,i,a){return{title:e,imageUrl:a,imageUrlId:i,query:t.ToQueryStr(o)}}WXShare(e,t,o,i,a){let r=this.CreateShareMsg(e,t,o,i,a);m.default.inst.Log(`wx: shareAppMessage title[${e}] query[${r.query}] imgId[${i}] `),V.wx.shareAppMessage(r)}WXGetOpenId(){return this.openId}WXHelpCommit(e,t){let o=s.default.Pop(M);return this.CloudCertain(new f.default({rs:y.default.helpCommit,t:{help_open_id:e,help_id_prop:t},success:e=>{o.resolve(e.msg)},fail:()=>{}})),o._promise}AudioPlay(e,t,o){let i=++this.idSeek,a=this.AudioGet(e);return this.mapIdToAudioInst.set(i,a),a.id=i,a.loop=t,a.volume=o,a.currStatus.OnPlay(),i}AudioStop(e){let t=this.mapIdToAudioInst.get(e);t&&(t.currStatus.OnStop(),this.mapUrlToPool.get(t.src).push(t))}AudioVolume(e,t){let o=this.mapIdToAudioInst.get(e);o&&(o.volume=t,o.currStatus.OnVolume())}AudioGet(e){let t=e.nativeUrl;this.mapUrlToPool.has(t)||this.mapUrlToPool.set(t,new Array);let o=this.mapUrlToPool.get(t);return 0==o.length?new S.default(t):o.pop()}}V._t=new l.default({instantiate:()=>new V,onPop:()=>{},onPush:()=>{},tag:M}),o.default=V,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../game/view/share_view/ShareViewRS":"ShareViewRS","../../basic/BCPromiseCtrl":"BCPromiseCtrl","../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","../../basic/UtilString":"UtilString","../../config/src/CfgBackpackProp":"CfgBackpackProp","../../global/Jiang":"Jiang","../MgrSdk":"MgrSdk","../MgrSdkCore":"MgrSdkCore","../MgrSdkEnterRS":"MgrSdkEnterRS","./MgrSdkCoreWXCloudCallRecord":"MgrSdkCoreWXCloudCallRecord","./MgrSdkCoreWXCloudFunctionRS":"MgrSdkCoreWXCloudFunctionRS","./MgrSdkCoreWXCloudStatusIdle":"MgrSdkCoreWXCloudStatusIdle","./MgrSdkCoreWXCloudStatusInited":"MgrSdkCoreWXCloudStatusInited","./MgrSdkCoreWXCloudStatusIniting":"MgrSdkCoreWXCloudStatusIniting","./WXAudio":"WXAudio","./WXImgLoader":"WXImgLoader","./WXLifeCycle":"WXLifeCycle","./WXVideoAd":"WXVideoAd"}],MgrSdkCore:[function(e,t,o){"use strict";cc._RF.push(t,"8ad23ZS2NJM74P12PygiDNH","MgrSdkCore"),Object.defineProperty(o,"__esModule",{value:!0});class i{AudioPlay(e,t,o){return cc.audioEngine.play(e,t,o)}AudioStop(e){cc.audioEngine.stop(e)}AudioVolume(e,t){cc.audioEngine.setVolume(e,t)}}i||(i={}),o.default=i,cc._RF.pop()},{}],MgrSdkEnterRS:[function(e,t,o){"use strict";cc._RF.push(t,"dfc22yBrERB0o98NNu4OWje","MgrSdkEnterRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../game/view/tips_view/TipsViewState"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilString"),s=e("./MgrSdk"),n="MgrSdkEnterRS";class l{constructor(e){this._listQuery=a.default.Pop(a.default.typeArray,n),this.code=e.code,this.init=e.init,l.mapCodeToRS.set(this.code,this)}ToQueryStr(e){this._listQuery.length=0,this._listQuery.push(`_code=${this.code}`);for(let t in e)this._listQuery.push(`${t}=${e[t]}`);return this._listQuery.join("&")}}(function(e){e.mapCodeToRS=a.default.Pop(a.default.typeMap,n),e.none=new e({code:null,init:()=>{s.default.inst.core.WXHelpCommit("self_init",0)}}),e.invited=new e({code:"10001",init:e=>{s.default.inst.Log("wx: invited",e),s.default.inst.core.WXHelpCommit(e.open_id,Number.parseInt(e.id_prop)).then(e=>{r.default.CheckIsNullOrEmpty(e)||i.default.inst.Tip(e)})}})})(l||(l={})),o.default=l,cc._RF.pop()},{"../../game/view/tips_view/TipsViewState":"TipsViewState","../basic/UtilObjPool":"UtilObjPool","../basic/UtilString":"UtilString","./MgrSdk":"MgrSdk"}],MgrSdk:[function(e,t,o){"use strict";cc._RF.push(t,"b627aXiknlMDqjBL06aep2o","MgrSdk"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexBuildConfig"),a=e("../basic/UtilObjPool"),r=e("../basic/UtilObjPoolType"),s=e("./MgrSdkCoreH5"),n=e("./wx/MgrSdkCoreWX"),l="MgrSdk",c=!0;class d{constructor(){n.default.wx?this.core=n.default.Pop(l):this.core=s.default.Pop(l)}static Pop(e){return a.default.Pop(d._t,e)}Log(...e){i.default.IS_DEBUG&&c&&console.log(...e)}Error(...e){i.default.IS_DEBUG&&console.error(...e)}IsPc(){return!cc.sys.isMobile}}o.default=d,d._t=new r.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:l}),d.inst=d.Pop(l),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./MgrSdkCoreH5":"MgrSdkCoreH5","./wx/MgrSdkCoreWX":"MgrSdkCoreWX"}],MgrUI:[function(e,t,o){"use strict";cc._RF.push(t,"e7841dA5GZIIJ6oAWUEHWiC","MgrUI"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCIdGeneration"),a=e("../basic/UtilObjPool"),r=e("./ViewState"),s=e("../basic/UtilObjPoolType"),n="MgrUI";class l{constructor(){this._idGenView=i.default.Pop(n),this._listViewInfo=a.default.Pop(a.default.typeArray,n),this._listViewDisplay=a.default.Pop(a.default.typeArray,n),this.versionListViewInfo=0,this._setDisplay=a.default.Pop(a.default.typeSet,n),this._moduleToVersionMap=a.default.Pop(a.default.typeMap,n)}static Pop(e){return a.default.Pop(l._t,e)}Init(e,t){this._cameraUI=e,this._containerUI=t,this._sizePerPixel=10/Math.min(this._containerUI.width,this._containerUI.height)/4}Open(e,t){let o=a.default.Pop(l.poolType,n);return o.nodeType=e,o.tState=t,o.tProps=null,o.id=this._idGenView.GenId(),t.Init(o.id),this._listViewInfo.push(o),this.versionListViewInfo++,o.id}Close(e){let t=this._listViewInfo.findIndex(t=>t.id==e);t<0||(this._listViewInfo[t].tState._evterDestory.Call(null),this._listViewInfo.splice(t,1),this.versionListViewInfo++)}OnListViewChanged(){this._listViewInfo.sort((e,t)=>e.tState._layer!=t.tState._layer?e.tState._layer-t.tState._layer:e.id-t.id);let e=!1;for(let o=this._listViewInfo.length-1;0<=o;o--){let t=this._listViewInfo[o];e?(this._listViewInfo.splice(o,1),t.tState._evterDestory.Call(null)):t.tState._bgStatus==r.default.BG_TYPE.SELF&&(t.tState._isCloseAble||(e=!0))}let t=!1;this._listViewDisplay.length=0;for(let o=this._listViewInfo.length-1;0<=o;o--){let e=this._listViewInfo[o];if(e.tState._bgStatus==r.default.BG_TYPE.MASK){if(t)continue;t=!0}if(this._listViewDisplay.unshift(e),e.tState._bgStatus==r.default.BG_TYPE.SELF)break}this._maskIdx=null;for(let o=this._listViewDisplay.length-1;0<=o;o--){let e=this._listViewDisplay[o];if(e.tState._bgStatus==r.default.BG_TYPE.SELF)break;if(e.tState._bgStatus==r.default.BG_TYPE.MASK){this._maskIdx=o;break}}for(let o=0;o<this._listViewDisplay.length;o++){let e=this._listViewDisplay[o];this._setDisplay.has(e.id)||e.tState._displayed||(e.tState._displayed=!0,e.tState.OnDisplay())}this._setDisplay.clear();for(let o=0;o<this._listViewDisplay.length;o++){let e=this._listViewDisplay[o];this._setDisplay.add(e.id)}}ModuleGetVersion(e){return this.Promise(e),this._moduleToVersionMap.get(e)}ModuleRefresh(e){this.Promise(e),this._moduleToVersionMap.set(e,this._moduleToVersionMap.get(e)+1)}Promise(e){this._moduleToVersionMap.has(e)||this._moduleToVersionMap.set(e,0)}}l._t=new s.default({instantiate:()=>new l,onPop:()=>{},onPush:()=>{},tag:n}),function(e){e.FAT_WIDTH=640,e.FAT_HEIGHT=1136,e.TALL_WIDTH=750,e.TALL_HEIGHT=1624,e.inst=e.Pop(n);class t{}e.ViewInfo=t,e.poolType=new s.default({instantiate:()=>new t,onPop:()=>{},onPush:e=>{e.nodeType=null,e.tState=null,e.tProps=null,e.id=null},tag:"ViewInfo"})}(l||(l={})),o.default=l,cc._RF.pop()},{"../basic/BCIdGeneration":"BCIdGeneration","../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","./ViewState":"ViewState"}],ParticleDataGroup:[function(e,t,o){"use strict";cc._RF.push(t,"47d0dcJ3g1O1Z0IODEAqEx5","ParticleDataGroup"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./ParticleData"),s="ParticleDataGroup";class n{constructor(){this._idGen=0,this.listParticleData=i.default.Pop(i.default.typeArray,s),this.mapIdToData=i.default.Pop(i.default.typeMap,s)}static Pop(e){return i.default.Pop(n._t,e)}CreateParticle(e,t){let o=++this._idGen,i=r.default.Pop(s,e,o,t);this.mapIdToData.set(o,i),this.listParticleData.push(i)}onStep(e){for(let t=0;t<this.listParticleData.length;){let o=this.listParticleData[t];o.onStep(e),1==o.rate?(this.listParticleData.splice(t,1),this.mapIdToData.delete(o.id),i.default.Push(o)):t++}}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./ParticleData":"ParticleData"}],ParticleData:[function(e,t,o){"use strict";cc._RF.push(t,"71d1bYaVQZH85NrSmWSGu3F","ParticleData"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t,o,a){let s=i.default.Pop(r._t,e);return s.msTotal=t,s.id=o,s.t=a,s.msSteped=0,s.rate=0,s}onStep(e){this.msSteped+=e,this.msSteped=Math.min(this.msSteped,this.msTotal),this.rate=this.msSteped/this.msTotal}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"ParticleData"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],PlayAnimationOnEnable:[function(e,t,o){"use strict";cc._RF.push(t,"21190CtPf1A/4eJxOmeR/iV","PlayAnimationOnEnable");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:a,property:r}=cc._decorator;let s=class extends cc.Component{onLoad(){this._anim=this.getComponent(cc.Animation)}onDisable(){this._anim.stop()}Reset(){null!=this._anim&&this._anim.play()}onEnable(){this.Reset()}};s=i([a],s),o.default=s,cc._RF.pop()},{}],PlayAudioOnEnable:[function(e,t,o){"use strict";cc._RF.push(t,"1e188PtsBhGJrHrghXlMKGM","PlayAudioOnEnable");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:a,property:r}=cc._decorator;let s=class extends cc.Component{onLoad(){this._audio=this.getComponent(cc.AudioSource)}onDisable(){this._audio.stop()}Reset(){null!=this._audio&&this._audio.play()}onEnable(){this.Reset()}};s=i([a],s),o.default=s,cc._RF.pop()},{}],PlayOrdinaryEnemyCallItem:[function(e,t,o){"use strict";cc._RF.push(t,"287d5J/8RVJq4fklew6psdY","PlayOrdinaryEnemyCallItem"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType");class r{static Pop(e,t,o,a,s){let n=i.default.Pop(r._t,e);return n.ms=t,n.idCfg=o,n.x=a,n.y=s,n}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"PlayOrdinaryEnemyCallItemn"}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],PlayOrdinaryEnemyCall:[function(e,t,o){"use strict";cc._RF.push(t,"1b0984A5wxDM4OVv5uWf4OR","PlayOrdinaryEnemyCall"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("./PlayOrdinaryEnemyCallItem"),s="PlayOrdinaryEnemyCall";class n{constructor(){this.listItem=i.default.Pop(i.default.typeArray,s)}static Pop(e,t,o,a,s){let l=i.default.Pop(n._t,e);l.ms=t;for(let i=0;i<a.length;i++)l.listItem.push(r.default.Pop(e,o[i],a[i],s[2*i],s[2*i+1]));return l}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:s}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./PlayOrdinaryEnemyCallItem":"PlayOrdinaryEnemyCallItem"}],PlayOrdinaryRS:[function(e,t,o){"use strict";cc._RF.push(t,"74f512wJVBFM72b3Dek41Gn","PlayOrdinaryRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexStorageItem"),a=e("../../frame/basic/UtilObjPool"),r=e("../../frame/config/src/CfgChapter"),s=e("../../frame/config/src/CfgGameElement"),n=e("../../frame/config/src/CfgLevel"),l=e("../../frame/config/src/CfgScene"),c=e("../../frame/global/Jiang"),d=e("../cfg_cache/CfgCacheChapter"),u=e("../cfg_cache/CfgCacheChapterLevel"),m=e("../game_element/body/DefineAltar"),p=e("./PlayOrdinaryEnemyCall"),h="PlayOrdinaryRS";class f{constructor(e){this.getterSceneId=e.getterThemeId,this.getterListEnemyCall=e.getterListEnemyCall,this.getterTitle=e.getterTitle,this.getterMonsterPower=e.getterMonsterPower,this.getterIsBossLevel=e.getterIsBossLevel,this.getterDropScale=e.getterDropScale}}(function(e){e.ordinary=new e({getterThemeId:e=>c.default.mgrCfg.cfgLevel.select(n.default.idGetter,e)._list[0].theme,getterListEnemyCall:e=>{let t=c.default.mgrCfg.cfgLevel.select(n.default.idGetter,e)._list[0],o=a.default.Pop(a.default.typeArray,h);return o.push(p.default.Pop(h,t.part_0_triger_ms,t.part_0_monster_delay,t.part_0_monster_id,t.part_0_monster_x)),o.push(p.default.Pop(h,t.part_1_triger_ms,t.part_1_monster_delay,t.part_1_monster_id,t.part_1_monster_x)),o.push(p.default.Pop(h,t.part_2_triger_ms,t.part_2_monster_delay,t.part_2_monster_id,t.part_2_monster_x)),o},getterTitle:e=>{let t=c.default.mgrCfg.cfgLevel.select(n.default.idGetter,e)._list[0],o=c.default.mgrCfg.cfgChapter.select(r.default.idGetter,t.relChapter)._list[0],i=d.default.GetCache(o);return`${c.default.mgrCfg.cfgScene.select(l.default.idGetter,t.theme)._list[0].name} ${t.idx} / ${i.levelMax-i.levelMin+1}`},getterMonsterPower:(e,t)=>c.default.mgrCfg.cfgGameElement.select(s.default.idGetter,t)._list[0].power,getterIsBossLevel:e=>u.default.idToCacheMap.get(e).isBossLevel,getterDropScale:e=>{let t=c.default.mgrCfg.cfgLevel.select(n.default.idGetter,e)._list[0],o=c.default.mgrCfg.cfgChapter.select(r.default.idGetter,t.relChapter)._list[0],i=d.default.GetCache(o);return i.powerStandard/i.powerSum}}),e.altar=new e({getterThemeId:()=>0,getterListEnemyCall:e=>{if(c.default.mgrData.Get(i.default.altarInitLev)!=e){let t=a.default.Pop(a.default.typeArray,h),o=a.default.Pop(a.default.typeArray,h),r=a.default.Pop(a.default.typeArray,h);for(let e=0;e<m.default.LIST_MONSTER_ADDITION.length;e++){let t=m.default.LIST_MONSTER_ADDITION[e],i=t[Math.floor(Math.random()*t.length)];o.splice(Math.floor(Math.random()*(o.length+1)),0,i)}for(let e=0;e<o.length;e++)t.push(2e3*e+1200*(Math.random()-.5)),r.push(0,0);let s=a.default.Pop(a.default.typeArray,h);s.push(p.default.Pop(h,0,t,o,r)),c.default.mgrData.Set(i.default.altarInitLev,e),c.default.mgrData.Set(i.default.altarInitListBody,s),i.default.altarInitListBody.media.onSet()}return JSON.parse(JSON.stringify(c.default.mgrData.Get(i.default.altarInitListBody)))},getterTitle:t=>`${c.default.mgrCfg.cfgScene.select(l.default.idGetter,e.altar.getterSceneId(t))._list[0].name} ${t-c.default.mgrCfg.cfgLevel._list.length}`,getterMonsterPower:e=>{let t=e-c.default.mgrCfg.cfgLevel._list.length-1,o=c.default.mgrCfg.cfgCommon._list[0];return Math.pow(o.inc_for_chapter,c.default.mgrCfg.cfgChapter._list.length)*Math.pow(o.inc_for_level,t)},getterIsBossLevel:()=>!1,getterDropScale:()=>1}),e.GetRS=function(t){return null==c.default.mgrCfg.cfgLevel.select(n.default.idGetter,t)._list[0]?e.altar:e.ordinary}})(f||(f={})),o.default=f,cc._RF.pop()},{"../../IndexStorageItem":"IndexStorageItem","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/config/src/CfgChapter":"CfgChapter","../../frame/config/src/CfgGameElement":"CfgGameElement","../../frame/config/src/CfgLevel":"CfgLevel","../../frame/config/src/CfgScene":"CfgScene","../../frame/global/Jiang":"Jiang","../cfg_cache/CfgCacheChapter":"CfgCacheChapter","../cfg_cache/CfgCacheChapterLevel":"CfgCacheChapterLevel","../game_element/body/DefineAltar":"DefineAltar","./PlayOrdinaryEnemyCall":"PlayOrdinaryEnemyCall"}],PlayOrdinaryStatusDestory:[function(e,t,o){"use strict";cc._RF.push(t,"9c2a0PB/xJLz4o9jVDaY9DD","PlayOrdinaryStatusDestory"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("./PlayOrdinaryStatus");class s extends r.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.relMachine=t,o}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:"PlayOrdinaryStatusDestory"}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusFailed:[function(e,t,o){"use strict";cc._RF.push(t,"cc0e3sSIRlJnorZGGRrbI/a","PlayOrdinaryStatusFailed"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("../../frame/global/Jiang"),s=e("../view/game_failed_view/GameFailedView"),n=e("../view/game_failed_view/GameFailedViewState"),l=e("./PlayOrdinaryStatus"),c=e("../view/reward_view/RewardViewState"),d=e("../GameCommon"),u=e("../GameMath"),m=e("../../IndexBuildConfig"),p="PlayOrdinaryStatusFailed";class h extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(h._t,e);return o.relMachine=t,o}OnEnter(){this.relMachine.gameState.ApplyTimeScale(0),r.default.mgrUI.Open(s.default.nodeType,n.default.Pop(p,this.relMachine.idCfgLev,this.relMachine.gameState)),!m.default.VIDEO_ENABLE&&u.default.IsStandardRewardScene(this.relMachine.gameState.cfgSceneCache.idCfg)&&(c.default.GotRewardOrdinary(d.default.TITLE_REWARD,this.relMachine.gameState.listRewardIdCfg),this.relMachine.gameState.listRewardIdCfg.length=0)}OnExit(){}}o.default=h,h._t=new a.default({instantiate:()=>new h,onPop:()=>{},onPush:()=>{},tag:p}),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../GameMath":"GameMath","../view/game_failed_view/GameFailedView":"GameFailedView","../view/game_failed_view/GameFailedViewState":"GameFailedViewState","../view/reward_view/RewardViewState":"RewardViewState","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusFailing:[function(e,t,o){"use strict";cc._RF.push(t,"a642e6MmNNOu6Kcykipt8nK","PlayOrdinaryStatusFailing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexBuildConfig"),a=e("../../frame/basic/UtilObjPool"),r=e("../../frame/basic/UtilObjPoolType"),s=e("./PlayOrdinaryStatus");class n extends s.default{constructor(){super()}static Pop(e,t){let o=a.default.Pop(n._t,e);return o.relMachine=t,o}OnEnter(){this.cd=1e3}OnStep(e){this.relMachine.gameState.StepMS(e),this.cd-=e,0<this.cd||(i.default.VIDEO_ENABLE?this.relMachine.Enter(this.relMachine.statusRelife):this.relMachine.Enter(this.relMachine.statusFailed))}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"PlayOrdinaryStatusFailing"}),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusPaused:[function(e,t,o){"use strict";cc._RF.push(t,"07ea0e0UmFDBLlXrlAdeB+J","PlayOrdinaryStatusPaused"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("../../frame/global/Jiang"),s=e("../view/game_options/GameOptionsView"),n=e("../view/game_options/GameOptionsViewState"),l=e("./PlayOrdinaryStatus"),c="PlayOrdinaryStatusPaused";class d extends l.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(d._t,e);return o.relMachine=t,o}OnEnter(){this._timeScaleAppId=this.relMachine.gameState.ApplyTimeScale(0);let e=n.default.Pop(c,this.relMachine.idCfgLev,this.relMachine.gameState);e._evterDestory.On(()=>{this.relMachine.Enter(this.relMachine.statusPlaying)}),r.default.mgrUI.Open(s.default.nodeType,e)}OnExit(){this.relMachine.gameState.CancelTimeScale(this._timeScaleAppId)}}o.default=d,d._t=new a.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:c}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/global/Jiang":"Jiang","../view/game_options/GameOptionsView":"GameOptionsView","../view/game_options/GameOptionsViewState":"GameOptionsViewState","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusPlaying:[function(e,t,o){"use strict";cc._RF.push(t,"ccab6zSFmxOxaeex5b9kLkC","PlayOrdinaryStatusPlaying"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("../../frame/config/src/CfgGameElement"),s=e("../../frame/global/Jiang"),n=e("../GameCommon"),l=e("../game_element/body/GameElementBody"),c=e("../game_element/body/GameElementBodyBehaviourRS"),d=e("./PlayOrdinaryStatus"),u="PlayOrdinaryStatusPlaying";let m=0;class p extends d.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(p._t,e);return o.relMachine=t,o}OnStep(e){if(this.relMachine.totalPassedMS+=e,this.relMachine.mbPlayer.playerMgrHealth.machine.currStatus==this.relMachine.mbPlayer.playerMgrHealth.machine.statusDeath)return void this.relMachine.Enter(this.relMachine.statusFailing);this.relMachine.gameState.StepMS(e);let t=this.relMachine.gameState.GetTypeAllEle(l.default),o=0,i=0;if(t.forEach(e=>{1!=e.commonArgsCamp&&(o++,null==e.commonCaller&&i++)}),0!=m&&1<=i)return;if(n.default.COUNT_MONSTER<=i)return;if(null!=this.enemyCall){for(let t=0;t<this.enemyCall.listItem.length;){let o=this.enemyCall.listItem[t];if(0<o.ms){o.ms-=e,t++;continue}let i=this.relMachine.gameState.player.commonBehaviour,a=Math.max(i.relBody.commonFootPos.x,-i.args.speed*this.relMachine.totalPassedMS)+s.default.mgrUI._containerUI.width/n.default.SCENE_SCALE+n.default.CAMERA_OFFSET_X/n.default.SCENE_SCALE+2*c.default.GetSize(o.idCfg)+o.x,d=n.default.GROUND_Y+o.y,p=s.default.mgrCfg.cfgGameElement.select(r.default.idGetter,o.idCfg)._list[0],h=l.default.Pop(u,{posX:a,posY:d,vecX:0,vecY:0,cfgId:m||o.idCfg,camp:2,power:this.relMachine.rsInit.getterMonsterPower(this.relMachine.idCfgLev,p.id),caller:null});this.relMachine.gameState.AddEle(h),this.enemyCall.listItem.splice(t,1)}return void(0==this.enemyCall.listItem.length&&(this.enemyCall=null))}if(0!=o)return;if(0==this.relMachine.listEnemyCall.length)return void this.relMachine.Enter(this.relMachine.statusSuccessing);let a=this.relMachine.listEnemyCall[0];0<a.ms?a.ms-=e:(this.enemyCall=a,this.relMachine.listEnemyCall.splice(0,1))}OnPause(){this.relMachine.Enter(this.relMachine.statusPaused)}}o.default=p,p._t=new a.default({instantiate:()=>new p,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/config/src/CfgGameElement":"CfgGameElement","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../game_element/body/GameElementBody":"GameElementBody","../game_element/body/GameElementBodyBehaviourRS":"GameElementBodyBehaviourRS","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusRelife:[function(e,t,o){"use strict";cc._RF.push(t,"624cdHmN8xDkKVriomSTlvP","PlayOrdinaryStatusRelife"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("../../frame/global/Jiang"),s=e("../GameCommon"),n=e("../game_element/body/DefineVoice"),l=e("../game_element/body/GameElementBody"),c=e("../game_element/body/GameElementBodyCtxDmg"),d=e("../game_element/body/GameElementBodyCtxDmgType"),u=e("../game_element/common/GameElementEff"),m=e("../game_element/equipment/EquipmentInstRS"),p=e("../view/seconds_view/SecondsView"),h=e("../view/seconds_view/SecondsViewState"),f=e("../view/video_certain_view/VideoCertainView"),y=e("../view/video_certain_view/VideoCertainViewState"),_=e("../view/voice_ogg/VoiceOggViewState"),g=e("./PlayOrdinaryStatus"),b="PlayOrdinaryStatusRelife";class S extends g.default{constructor(){super()}static Pop(e,t){let o=i.default.Pop(S._t,e);return o.relMachine=t,o}OnEnter(){this._timeScaleAppId=this.relMachine.gameState.ApplyTimeScale(0);let e=y.default.Pop(b,"\u89c2\u770b\u89c6\u9891\uff0c\u91ca\u653e\u5168\u5c4f\u9ad8\u4f24\u5bb3\u51b2\u51fb\u6ce2\u5e76\u590d\u6d3b");r.default.mgrUI.Open(f.default.nodeType,e),Promise.resolve().then(()=>e.ctrl._promise).then(e=>{if(!e)return void this.relMachine.Enter(this.relMachine.statusFailed);let t=h.default.Pop(b);return r.default.mgrUI.Open(p.default.nodeType,t),new Promise(e=>{t._evterDestory.On(e)}).then(()=>{this.relMachine.Enter(this.relMachine.statusPlaying);let e=this.relMachine.gameState.player.commonBehaviour;e.playerMgrHealth.machine.relMgrHealth.relNpc.relBody.commonHpCurrent+=1,e.playerMgrHealth.machine.Enter(e.playerMgrHealth.machine.statusHurted),u.default.PopForXYBind(b,e.relBody.commonCenterPos.x,e.relBody.commonCenterPos.y,0,1,10003,cc.Color.WHITE,this.relMachine.gameState.player),_.default.inst.VoiceSet(n.default.CLEAR_SCREEN);let t=this.relMachine.gameState.GetTypeAllEle(l.default),o=i.default.Pop(i.default.typeArray,b);o.push(...t);let a=m.default.GetSingleDmgByPower(s.default.STANDARD_EQUIP,e.playerMgrEquipment.equipInst.power),r=m.default.GetSingleRepel(s.default.STANDARD_EQUIP);for(let i=0;i<o.length;i++){let e=o[i];if(!e.isValid)continue;if(e.commonArgsCamp==s.default.FRIENDLY_CAMP)continue;let t=e.commonHpMax||0;e.commonEvterDmg.Call(c.default.Pop(b,{dmg:Math.max(a,t/5),posX:e.commonCenterPos.x,posY:e.commonCenterPos.y,repel:r,norX:1,norY:1,type:d.default.shield}))}})})}OnExit(){this.relMachine.gameState.CancelTimeScale(this._timeScaleAppId)}}o.default=S,S._t=new a.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),cc._RF.pop()},{"../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../game_element/body/DefineVoice":"DefineVoice","../game_element/body/GameElementBody":"GameElementBody","../game_element/body/GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../game_element/body/GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../game_element/common/GameElementEff":"GameElementEff","../game_element/equipment/EquipmentInstRS":"EquipmentInstRS","../view/seconds_view/SecondsView":"SecondsView","../view/seconds_view/SecondsViewState":"SecondsViewState","../view/video_certain_view/VideoCertainView":"VideoCertainView","../view/video_certain_view/VideoCertainViewState":"VideoCertainViewState","../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusSuccessed:[function(e,t,o){"use strict";cc._RF.push(t,"e413f13SphGJIs5U1iOBfMO","PlayOrdinaryStatusSuccessed"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/BCPromiseCtrl"),a=e("../../frame/basic/UtilObjPool"),r=e("../../frame/basic/UtilObjPoolType"),s=e("../../frame/config/src/CfgScene"),n=e("../../frame/config/src/CfgStore"),l=e("../../frame/config/src/CfgVoiceOgg"),c=e("../../frame/global/Jiang"),d=e("../../IndexBuildConfig"),u=e("../../IndexStorageItem"),m=e("../game_element/body/DefineVoice"),p=e("../game_element/body/GameCfgBodyCacheDropRS"),h=e("../GameCommon"),f=e("../GameMath"),y=e("../view/chapter_unlock_view/ChapterUnlockView"),_=e("../view/chapter_unlock_view/ChapterUnlockViewState"),g=e("../view/game_play/GamePlayViewState"),b=e("../view/game_successed_view/GameSuccessedView"),S=e("../view/game_successed_view/GameSuccessedViewState"),P=e("../view/loading_view/LoadingView"),B=e("../view/loading_view/LoadingViewState"),C=e("../view/reward_view/RewardViewState"),M=e("./PlayOrdinaryRS"),x=e("./PlayOrdinaryStatus"),V="PlayOrdinaryStatusSuccessed";class I extends x.default{constructor(){super(),this.ready=i.default.Pop(V)}static Pop(e,t){let o=a.default.Pop(I._t,e);return o.relMachine=t,o}OnEnter(){let e=this.relMachine.idCfgLev+1,t=M.default.GetRS(c.default.mgrData.Get(u.default.challengeLev)).getterSceneId(c.default.mgrData.Get(u.default.challengeLev));Promise.resolve().then(()=>this.ready._promise).then(()=>{c.default.mgrData.Set(u.default.challengeLev,e)}).then(()=>{let e=M.default.GetRS(c.default.mgrData.Get(u.default.challengeLev)).getterSceneId(c.default.mgrData.Get(u.default.challengeLev));if(c.default.mgrUI.Open(b.default.nodeType,S.default.Pop(V,this.relMachine.idCfgLev,this.relMachine.gameState)),d.default.VIDEO_ENABLE&&f.default.IsStandardRewardScene(this.relMachine.gameState.cfgSceneCache.idCfg)||(C.default.GotRewardOrdinary(h.default.TITLE_REWARD,this.relMachine.gameState.listRewardIdCfg),this.relMachine.gameState.listRewardIdCfg.length=0),t!=e){let t=c.default.mgrCfg.cfgStore.select(n.default.unlock_val_0Getter,e)._list;if(0<t.length){let e,o=c.default.mgrData.Get(u.default.listEquipment);e=0;for(let t=0;t<o.length;t++){let i=o[t];e=Math.max(i.count,e)}let i=a.default.Pop(a.default.typeArray,V);for(let r=0;r<t.length;r++){let e=t[r],o=a.default.Pop(a.default.typeArray,V);o.push(e.item_id,1),i.push({rs:p.default.xlsxEquipment,props:o})}C.default.GotRewardOrdinary(h.default.TITLE_REWARD,i);for(let r=0;r<t.length;r++){let o=t[r],i=a.default.Pop(a.default.typeArray,V);i.push(o.item_id,e-1),p.default.xlsxEquipment.onEnterBackpack(i)}}c.default.mgrUI.Open(y.default.nodeType,_.default.Pop(V,e)),g.default.Load(c.default.mgrData.Get(u.default.challengeLev));let o=c.default.mgrCfg.cfgScene.select(s.default.idGetter,e)._list[0],i=c.default.mgrCfg.cfgVoiceOgg.select(l.default.idGetter,o.bgm)._list[0],r=a.default.Pop(a.default.typeArray,V),d=c.default.mgrCfg.cfgVoiceOgg.select(l.default.idGetter,m.default.NEW)._list[0];r.push(o.card,i.res,d.res,y.default.nodeType._prefabPath);let f=(r=r.filter(e=>null==c.default.mgrRes.GetPrefab(e))).map(e=>c.default.mgrRes.mgrAssets.GetLoadRecord(e).process._promise),b=c.default.mgrRes.AsyncMaxApp();Promise.all(f).then(()=>{c.default.mgrRes.AsyncMaxCancel(b)});let S=B.default.Pop(V,f);c.default.mgrUI.Open(P.default.nodeType,S)}})}OnStep(e){this.relMachine.gameState.StepMS(e),this.relMachine.gameState.counterAnimNeed.active||this.ready.resolve(null)}}o.default=I,I._t=new r.default({instantiate:()=>new I,onPop:()=>{},onPush:()=>{},tag:V}),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../IndexStorageItem":"IndexStorageItem","../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/config/src/CfgScene":"CfgScene","../../frame/config/src/CfgStore":"CfgStore","../../frame/config/src/CfgVoiceOgg":"CfgVoiceOgg","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../GameMath":"GameMath","../game_element/body/DefineVoice":"DefineVoice","../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","../view/chapter_unlock_view/ChapterUnlockView":"ChapterUnlockView","../view/chapter_unlock_view/ChapterUnlockViewState":"ChapterUnlockViewState","../view/game_play/GamePlayViewState":"GamePlayViewState","../view/game_successed_view/GameSuccessedView":"GameSuccessedView","../view/game_successed_view/GameSuccessedViewState":"GameSuccessedViewState","../view/loading_view/LoadingView":"LoadingView","../view/loading_view/LoadingViewState":"LoadingViewState","../view/reward_view/RewardViewState":"RewardViewState","./PlayOrdinaryRS":"PlayOrdinaryRS","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatusSuccessing:[function(e,t,o){"use strict";cc._RF.push(t,"6c7e30RtZlGwIpCTxTGpXky","PlayOrdinaryStatusSuccessing"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../IndexBuildConfig"),a=e("../../frame/basic/UtilObjPool"),r=e("../../frame/basic/UtilObjPoolType"),s=e("./PlayOrdinaryStatus");class n extends s.default{constructor(){super(),this.cd=1e3}static Pop(e,t){let o=a.default.Pop(n._t,e);return o.relMachine=t,o}OnStep(e){this.relMachine.gameState.StepMS(e),i.default.IS_FAKE_ENEMY||(this.cd-=e),0<this.cd||this.relMachine.Enter(this.relMachine.statusSuccessed)}}o.default=n,n._t=new r.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"PlayOrdinaryStatusSuccessing"}),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./PlayOrdinaryStatus":"PlayOrdinaryStatus"}],PlayOrdinaryStatus:[function(e,t,o){"use strict";cc._RF.push(t,"f6178MjRehPdoko+i/C65b/","PlayOrdinaryStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnStep(e){}OnPause(){}},cc._RF.pop()},{}],PlayOrdinary:[function(e,t,o){"use strict";cc._RF.push(t,"51620/+zAZNyK1Hrd+40KoR","PlayOrdinary"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../frame/basic/UtilObjPool"),a=e("../../frame/basic/UtilObjPoolType"),r=e("../../frame/global/Jiang"),s=e("../../IndexStorageItem"),n=e("../GameCommon"),l=e("../game_element/common/GameElementScene"),c=e("../game_element/GameState"),d=e("./PlayOrdinaryEnemyCall"),u=e("./PlayOrdinaryStatusDestory"),m=e("./PlayOrdinaryStatusFailed"),p=e("./PlayOrdinaryStatusPaused"),h=e("./PlayOrdinaryStatusPlaying"),f=e("./PlayOrdinaryStatusSuccessed"),y=e("../game_element/body/GameElementBody"),_=e("./PlayOrdinaryStatusSuccessing"),g=e("./PlayOrdinaryStatusFailing"),b=e("../view/voice_ogg/VoiceOggViewState"),S=e("../view/game_play/GamePlayViewMachine"),P=e("./PlayOrdinaryRS"),B=e("../../frame/config/src/CfgScene"),C=e("../view/share_view/ShareViewRS"),M=e("../game_element/body/DefineVoice"),x=e("../../IndexBuildConfig"),V=e("./PlayOrdinaryStatusRelife"),I="PlayOrdinary";class O extends S.default{constructor(){super(),this.listEnemyCall=i.default.Pop(i.default.typeArray,I),this.totalPassedMS=0}static Pop(e,t){let o=r.default.mgrData.Get(s.default.listBackpackProp),a=!1,S=!1;for(let i=0;i<o.length;i++){let e=o[i];e.idCfg==C.default.heart.idProp&&(a=!0),e.idCfg==C.default.star.idProp&&(S=!0)}let w=i.default.Pop(O._t,e);w.idCfgLev=t,w.rsInit=P.default.GetRS(t),w.idCfgScene=w.rsInit.getterSceneId(t);let E=r.default.mgrCfg.cfgScene.select(B.default.idGetter,w.idCfgScene)._list[0];w.rsInit.getterIsBossLevel(t)?b.default.inst.BgmSet(M.default.BGM_BOSS):b.default.inst.BgmSet(E.bgm),w.statusDestory=u.default.Pop(I,w),w.statusFailing=g.default.Pop(I,w),w.statusFailed=m.default.Pop(I,w),w.statusPaused=p.default.Pop(I,w),w.statusPlaying=h.default.Pop(I,w),w.statusSuccessing=_.default.Pop(I,w),w.statusSuccessed=f.default.Pop(I,w),w.statusRelife=V.default.Pop(I,w);let A=w.rsInit.getterDropScale(t),R=c.default.Pop(I,w.idCfgScene,A);w.gameState=R,R.AddEle(l.default.Pop(I));let v=y.default.Pop(I,{posX:0,posY:n.default.GROUND_Y,vecX:0,vecY:0,cfgId:n.default.PLAYER_CFG_ID,camp:n.default.FRIENDLY_CAMP,power:1,caller:null});R.AddEle(v),w.mbPlayer=v.commonBehaviour,a&&(v.commonHpMax+=1),S&&(w.mbPlayer.mpMax+=50),R.player=v,v.commonHpCurrent=v.commonHpMax;let T=r.default.mgrData.Get(s.default.listCurrentEquiped);for(let i=0;i<T.length;i++)0!=T[i]&&w.mbPlayer.playerMgrEquipment.AddEquipment(T[i]);if(w.mbPlayer.playerMgrEquipment.SetEquipmentIdx(0),x.default.IS_FAKE_ENEMY){let e=i.default.Pop(i.default.typeArray,I),t=i.default.Pop(i.default.typeArray,I),o=i.default.Pop(i.default.typeArray,I);e.push(0),t.push(4001003),o.push(0,0),e.push(600),t.push(4001004),o.push(0,0),w.listEnemyCall=i.default.Pop(i.default.typeArray,I),w.listEnemyCall.push(d.default.Pop(I,0,e,t,o))}else w.listEnemyCall=w.rsInit.getterListEnemyCall(t);return w.Enter(w.statusPlaying),w.gameState.mgrRain.speedX=E.rain_speed_x,w.gameState.mgrRain.speedY=E.rain_speed_y,w.gameState.mgrRain.countPerMS=E.rain_count_per_ms,w.gameState.mgrRain.WarmUp(),w.gameState.mgrSnow.speedX=E.snow_speed_x,w.gameState.mgrSnow.speedY=E.snow_speed_y,w.gameState.mgrSnow.countPerMS=E.snow_count_per_ms,w.gameState.mgrSnow.WarmUp(),w}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}OnPause(){this.currStatus.OnPause()}OnGetTitle(){return this.rsInit.getterTitle(this.idCfgLev)}OnGetSceneId(){return this.idCfgScene}OnStep(e){this.currStatus.OnStep(e)}IsBossLevel(){return this.rsInit.getterIsBossLevel(this.idCfgLev)}}o.default=O,O._t=new a.default({instantiate:()=>new O,onPop:()=>{},onPush:()=>{},tag:I}),cc._RF.pop()},{"../../IndexBuildConfig":"IndexBuildConfig","../../IndexStorageItem":"IndexStorageItem","../../frame/basic/UtilObjPool":"UtilObjPool","../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../frame/config/src/CfgScene":"CfgScene","../../frame/global/Jiang":"Jiang","../GameCommon":"GameCommon","../game_element/GameState":"GameState","../game_element/body/DefineVoice":"DefineVoice","../game_element/body/GameElementBody":"GameElementBody","../game_element/common/GameElementScene":"GameElementScene","../view/game_play/GamePlayViewMachine":"GamePlayViewMachine","../view/share_view/ShareViewRS":"ShareViewRS","../view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","./PlayOrdinaryEnemyCall":"PlayOrdinaryEnemyCall","./PlayOrdinaryRS":"PlayOrdinaryRS","./PlayOrdinaryStatusDestory":"PlayOrdinaryStatusDestory","./PlayOrdinaryStatusFailed":"PlayOrdinaryStatusFailed","./PlayOrdinaryStatusFailing":"PlayOrdinaryStatusFailing","./PlayOrdinaryStatusPaused":"PlayOrdinaryStatusPaused","./PlayOrdinaryStatusPlaying":"PlayOrdinaryStatusPlaying","./PlayOrdinaryStatusRelife":"PlayOrdinaryStatusRelife","./PlayOrdinaryStatusSuccessed":"PlayOrdinaryStatusSuccessed","./PlayOrdinaryStatusSuccessing":"PlayOrdinaryStatusSuccessing"}],RewardGridArgs:[function(e,t,o){"use strict";cc._RF.push(t,"90edcBwgWZJGoVXK5IX6fP+","RewardGridArgs"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCType"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s="RewardGridArgs";class n{static Pop(e,t){let o=a.default.Pop(n._t,s);return o.rs=e,o.props=t,o}}o.default=n,n._t=new r.default({instantiate:()=>({rs:null,props:null}),onPop:()=>{},onPush:()=>{},tag:s}),n.bcType=i.default.Pop(s,(e,t)=>e.rs==t.rs&&i.default.typeArray._equal(e.props,t.props),e=>{a.default.Push(e)},e=>{let t=a.default.Pop(a.default.typeArray,s);return t.push(...e.props),n.Pop(e.rs,t)}),cc._RF.pop()},{"../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],RewardGrid:[function(e,t,o){"use strict";cc._RF.push(t,"a1b27xmC2JC3JMrWXQmPIdI","RewardGrid");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/UtilMath"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../GameCommon"),h=e("../backpack_prop_preview_view/BackpackPropPreviewView"),f=e("../backpack_prop_preview_view/BackpackPropPreviewViewState"),y=e("../equipment_preview_view/EquipmentPreviewView"),_=e("../equipment_preview_view/EquipmentPreviewViewState"),g=e("../equipment_view/EquipmentViewBackpackProp"),b=e("../equipment_view/EquipmentViewEquip"),S=e("../voice_ogg/VoiceOggViewState"),P=e("./RewardGridArgs"),{ccclass:B,property:C}=cc._decorator,M="RewardGrid";let x=i=class extends u.default{constructor(){super(...arguments),this.containerEquipment=null,this.btnInfo=null,this.txtCount=null,this.nodeCount=null}};x.nodeTypeForEquipment=d.default.Pop(M,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/item_equipment_reward`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(M,{listRefModule:[m.default.DEFAULT,m.default.PLAYING],propsFilter:(e,t,o)=>{let i=o.props[0],a=o.props[1];e.btnInfo.evterTouchStart.On(()=>{S.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.btnInfo.evterTouchEnd.On(()=>{n.default.mgrUI.Open(y.default.nodeType,_.default.Pop(M,i,a))}),e.txtCount.string=`${r.default.ParseNumToKMBTAABB(a,Math.floor)}`,e.nodeCount.active=1!=a}})],childrenCreator:[d.default.ChildrenGeneration.Pop(M,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{let i=t.props[0];t.props[1],o.push(b.default.GetNodeTypeForIconUI(i).CreateNode(e,i,i))}})],propsType:P.default.bcType,hideRS:c.default.setParentNull,enterRS:l.default.opacityInForIdx16A200}),x.nodeTypeForBackpackProp=d.default.Pop(M,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/item_backpack_prop_reward`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(M,{listRefModule:[m.default.DEFAULT,m.default.PLAYING],propsFilter:(e,t,o)=>{let i=o.props[0],a=o.props[1];e.btnInfo.evterTouchStart.On(()=>{S.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.btnInfo.evterTouchEnd.On(()=>{n.default.mgrUI.Open(h.default.nodeType,f.default.Pop(M,i,a))}),e.txtCount.string=`${r.default.ParseNumToKMBTAABB(a,Math.floor)}`,e.nodeCount.active=1!=a}})],childrenCreator:[d.default.ChildrenGeneration.Pop(M,{containerGetter:e=>e.containerEquipment,uiNodeCreator:(e,t,o)=>{if(null==t)return;let i=t.props[0];t.props[1],o.push(g.default.GetNodeTypeForUI(i).CreateNode(e,null,i))}})],propsType:P.default.bcType,hideRS:c.default.setParentNull,enterRS:l.default.opacityInForIdx16A200}),a([C(cc.Node)],x.prototype,"containerEquipment",void 0),a([C(s.default)],x.prototype,"btnInfo",void 0),a([C(cc.Label)],x.prototype,"txtCount",void 0),a([C(cc.Node)],x.prototype,"nodeCount",void 0),x=i=a([B],x),o.default=x,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/UtilMath":"UtilMath","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../backpack_prop_preview_view/BackpackPropPreviewView":"BackpackPropPreviewView","../backpack_prop_preview_view/BackpackPropPreviewViewState":"BackpackPropPreviewViewState","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewBackpackProp":"EquipmentViewBackpackProp","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./RewardGridArgs":"RewardGridArgs"}],RewardViewParticleData:[function(e,t,o){"use strict";cc._RF.push(t,"701365RtN5EvJFkPxF2IXY6","RewardViewParticleData"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t,o,a,s){let n=i.default.Pop(r._t,e);return n.angle=t,n.posHor=o,n.posVer=a,n.sizeScale=s,n}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"RewardViewParticleData"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],RewardViewParticle:[function(e,t,o){"use strict";cc._RF.push(t,"f6aecbz31JHyaOWbKoaozv6","RewardViewParticle");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="RewardViewParticle";let f=i=class extends d.default{};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/reward_view_particle`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.DEFAULT,r.default.REWARD],propsFilter:(e,t,o)=>{let i=t.particleGroup.mapIdToData.get(o),a=i.rate;a=Math.pow(a,.25),e.node.x=Math.cos(i.t.angle)*a*i.t.posHor,e.node.y=Math.sin(i.t.angle)*a*i.t.posVer;let r=1-Math.abs(i.rate-.5)/.5;r=Math.pow(r,.5),e.node.opacity=255*r,e.node.scale=i.t.sizeScale}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.localScale0,enterRS:n.default.none}),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],RewardViewStateReportEquipment:[function(e,t,o){"use strict";cc._RF.push(t,"66762gPnwFNsKsY6Lca1dVL","RewardViewStateReportEquipment"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){}static Pop(e){return i.default.Pop(r._t,e)}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"RewardViewStateReportEquipment"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],RewardViewStateReport:[function(e,t,o){"use strict";cc._RF.push(t,"d61bcsc+NRMRoOpN8b8Y4Ro","RewardViewStateReport"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r="RewardViewStateReport";class s{constructor(){this.listEquipmentInfo=i.default.Pop(i.default.typeArray,r)}static Pop(e){return i.default.Pop(s._t,e)}}o.default=s,s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],RewardViewState:[function(e,t,o){"use strict";cc._RF.push(t,"e0730aClYpPuKGoUITkUDPh","RewardViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCPromiseCtrl"),a=e("../../../frame/basic/UtilMath"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/MgrUI"),c=e("../../../frame/ui/ViewState"),d=e("../../../IndexLayer"),u=e("../../../IndexDataModule"),m=e("../../../IndexStorageItem"),p=e("../../game_element/common/ParticleDataGroup"),h=e("../../GameCommon"),f=e("../../GameMath"),y=e("../equipment_lv_up_sum_view/EquipmentLvUpSumView"),_=e("../equipment_lv_up_sum_view/EquipmentLvUpSumViewState"),g=e("../flash_view/FlashView"),b=e("../flash_view/FlashViewState"),S=e("../voice_ogg/VoiceOggViewState"),P=e("./RewardView"),B=e("./RewardViewParticleData"),C=e("./RewardViewStateReport"),M=e("./RewardViewStateReportEquipment"),x="RewardViewState",V=50,I=1200,O=600,w=250,E=200,A=w*l.default.FAT_WIDTH/l.default.FAT_HEIGHT,R=E*l.default.FAT_WIDTH/l.default.FAT_HEIGHT,v=1,T=.35;class G extends c.default{constructor(){super(d.default.GAME,c.default.BG_TYPE.MASK,!0),this.listReward=r.default.Pop(r.default.typeArray,x),this.particleGroup=p.default.Pop(x),this.ctrlDestoried=i.default.Pop(x)}static Pop(e,t,o){let i,a,s=r.default.Pop(G._t,e);s.title=t;for(let n=0;n<o.length;n++){let e=o[n],t={rs:e.rs,props:r.default.Pop(r.default.typeArray,x)};for(let o=0;o<e.props.length;o++)t.props.push(e.props[o]);s.listReward.push(t)}return s.listReward.sort((e,t)=>e.rs!=t.rs?e.rs.code-t.rs.code:e.props[0]-t.props[0]),o.length<=G.LINE_MAX?(i=o.length,a=1):o.length<=2*G.LINE_MAX?(i=Math.ceil(o.length/2),a=2):(i=Math.ceil(o.length/3),a=3),s.containerWidth=i*(G.ITEM_SIZE+G.SPACE_HOR)-G.SPACE_HOR+2*G.PADDING,s.containerHeight=a*(G.ITEM_SIZE+G.SPACE_VER)-G.SPACE_VER+2*G.PADDING,s}OnInit(){this._listenIdStep=n.default.mgrEvter.evterUpdate.On(e=>{this.particleGroup.onStep(e),n.default.mgrUI.ModuleRefresh(u.default.REWARD)})}OnDestory(){n.default.mgrEvter.evterUpdate.Off(this._listenIdStep),this.ctrlDestoried.resolve(null)}OnMaskTouch(){S.default.inst.VoiceSet(h.default.BTN_VOICE),n.default.mgrUI.Close(this._idView)}OnDisplay(){let e=2*Math.PI/V;for(let t=0;t<V;t++){let o=B.default.Pop(x,t*e,w+a.default.RandomLowerToUpper()*E,A+a.default.RandomLowerToUpper()*R,v+a.default.RandomLowerToUpper()*T);this.particleGroup.CreateParticle(I+a.default.RandomLowerToUpper()*O,o)}S.default.inst.VoiceSet(1001001005)}static GotRewardOrdinary(e,t){if(0==t.length)return Promise.resolve();let o=n.default.mgrData.Get(m.default.listEquipment),i=r.default.Pop(r.default.typeMap,x);for(let r=0;r<o.length;r++){let e=o[r];i.set(e.idCfg,f.default.ParsePowerToLev(f.default.equip.ParseCountToPower(e.count)))}for(let r=0;r<t.length;r++){let e=t[r];e.rs.onEnterBackpack(e.props)}let a=C.default.Pop(x);for(let r=0;r<o.length;r++){let e=o[r];if(!i.has(e.idCfg))continue;let t=i.get(e.idCfg),s=f.default.ParsePowerToLev(f.default.equip.ParseCountToPower(e.count));if(t==s)continue;let n=M.default.Pop(x);n.idCfg=e.idCfg,n.lvBefore=t,n.lvAfter=s,a.listEquipmentInfo.push(n)}if(0<a.listEquipmentInfo.length)return Promise.resolve().then(()=>{let e=b.default.Pop(x);return n.default.mgrUI.Open(g.default.nodeType,e),e.promiseOut._promise}).then(()=>{let e=_.default.Pop(x,a.listEquipmentInfo.map(e=>e.idCfg));return n.default.mgrUI.Open(y.default.nodeType,e),new Promise(t=>{e._evterDestory.On(t)})});let s=G.Pop(x,e,t);return n.default.mgrUI.Open(P.default.nodeType,s),s.ctrlDestoried._promise}}G._t=new s.default({instantiate:()=>new G,onPop:()=>{},onPush:()=>{},tag:x}),function(e){e.LINE_MAX=6,e.PADDING=10,e.ITEM_SIZE=100,e.SPACE_HOR=20,e.SPACE_VER=20}(G||(G={})),o.default=G,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilMath":"UtilMath","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/MgrUI":"MgrUI","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../game_element/common/ParticleDataGroup":"ParticleDataGroup","../equipment_lv_up_sum_view/EquipmentLvUpSumView":"EquipmentLvUpSumView","../equipment_lv_up_sum_view/EquipmentLvUpSumViewState":"EquipmentLvUpSumViewState","../flash_view/FlashView":"FlashView","../flash_view/FlashViewState":"FlashViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./RewardView":"RewardView","./RewardViewParticleData":"RewardViewParticleData","./RewardViewStateReport":"RewardViewStateReport","./RewardViewStateReportEquipment":"RewardViewStateReportEquipment"}],RewardView:[function(e,t,o){"use strict";cc._RF.push(t,"1dcdfzhxrND7qAxp/rnHlGA","RewardView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),m=e("../common/RewardGridArgs"),p=e("./RewardViewParticle"),{ccclass:h,property:f}=cc._decorator,y="RewardView";let _=i=class extends c.default{constructor(){super(...arguments),this.txtTitle=null,this.containerReward=null,this.containerParticle=null}};_.nodeType=l.default.Pop(y,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/reward_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(y,{listRefModule:[d.default.DEFAULT,d.default.REWARD],propsFilter:(e,t)=>{e.txtTitle.string=t.title,e.containerReward.width=t.containerWidth,e.containerReward.height=t.containerHeight}})],childrenCreator:[l.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.listReward.length;i++){let t=e.listReward[i];o.push(t.rs.onGetUIRewardNodeType().CreateNode(e,m.default.Pop(t.rs,t.props),i))}}}),l.default.ChildrenGeneration.Pop(y,{containerGetter:e=>e.containerParticle,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.particleGroup.listParticleData.length;i++){let t=e.particleGroup.listParticleData[i];o.push(p.default.nodeType.CreateNode(e,t.id,t.id))}}})],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.none}),a([f(cc.Label)],_.prototype,"txtTitle",void 0),a([f(cc.Node)],_.prototype,"containerReward",void 0),a([f(cc.Node)],_.prototype,"containerParticle",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../common/RewardGridArgs":"RewardGridArgs","./RewardViewParticle":"RewardViewParticle"}],ScreenShotViewState:[function(e,t,o){"use strict";cc._RF.push(t,"e627b9cHIBKYZqMX7m/N4vi","ScreenShotViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState");class n extends s.default{constructor(){super(i.default.SYSTEM,s.default.BG_TYPE.NONE,!1),this._setApp=new Set,this._idGen=0,this.rtScreen=new cc.RenderTexture,this.rtScreen.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),this.rtScreen.initWithSize(r.default.mgrUI._containerUI.width,r.default.mgrUI._containerUI.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),this.rtScreen.setPremultiplyAlpha(!1),n.inst=this}get isRendering(){return 0<this._setApp.size}App(){let e=++this._idGen;return this._setApp.add(e),r.default.mgrUI.ModuleRefresh(a.default.SCREEN_SHOT),e}Cancel(e){this._setApp.delete(e),r.default.mgrUI.ModuleRefresh(a.default.SCREEN_SHOT)}}o.default=n,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState"}],ScreenShotView:[function(e,t,o){"use strict";cc._RF.push(t,"45593NH3+RLaILYldiAk4cZ","ScreenShotView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="ScreenShotView";let f=i=class extends d.default{constructor(){super(...arguments),this.camera=null}};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/screen_shot_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.SCREEN_SHOT],propsFilter:(e,t)=>{e.camera.targetTexture=t.rtScreen,e.camera.node.active=t.isRendering}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Camera)],f.prototype,"camera",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],ScrollStopStatusGo:[function(e,t,o){"use strict";cc._RF.push(t,"f5813HQ141BQ5e5f4cl2cyx","ScrollStopStatusGo"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("./ScrollStopStatus");class n extends s.default{static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnApply(){this.relMachine.Enter(this.relMachine.statusIdle),r.default.mgrUI.ModuleRefresh(this.relMachine.relModule)}OnScrollAble(){return!1}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"ScrollStopStatusGo"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","./ScrollStopStatus":"ScrollStopStatus"}],ScrollStopStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"3cee8c4OKxNQqdK0KGpMLf2","ScrollStopStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("./ScrollStopStatus");class n extends s.default{static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relMachine=t,o}OnStop(){this.relMachine.Enter(this.relMachine.statusGo),r.default.mgrUI.ModuleRefresh(this.relMachine.relModule)}OnScrollAble(){return!0}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"ScrollStopStatusIdle"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","./ScrollStopStatus":"ScrollStopStatus"}],ScrollStopStatus:[function(e,t,o){"use strict";cc._RF.push(t,"9bf30hHCWdAo6Arao7EUNrp","ScrollStopStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{OnEnter(){}OnExit(){}OnApply(){}OnStop(){}OnScrollAble(){return!0}},cc._RF.pop()},{}],ScrollStop:[function(e,t,o){"use strict";cc._RF.push(t,"1176bKQbNxMSrlIOWBOyg/0","ScrollStop"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./ScrollStopStatusGo"),s=e("./ScrollStopStatusIdle");class n{constructor(){}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.relModule=t,o.statusIdle=s.default.Pop(e,o),o.statusGo=r.default.Pop(e,o),o.Enter(o.statusIdle),o}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"ScrollStop"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./ScrollStopStatusGo":"ScrollStopStatusGo","./ScrollStopStatusIdle":"ScrollStopStatusIdle"}],SecondsStatus1:[function(e,t,o){"use strict";cc._RF.push(t,"6c71dzq+hROqbun/xjrbbHw","SecondsStatus1"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/global/Jiang"),a=e("./SecondsStatus");o.default=class extends a.default{constructor(){super(...arguments),this.msWait=600}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&i.default.mgrUI.Close(this.relMachine._idView)}GetTxtScale(){let e=this.msWait/600;return e=Math.pow(e,2),e*=2,Math.max(e,1)}GetTxtOpacity(){return 1-this.msWait/600}GetTxtCtx(){return"\u5f00\u59cb!"}},cc._RF.pop()},{"../../../frame/global/Jiang":"Jiang","./SecondsStatus":"SecondsStatus"}],SecondsStatus2:[function(e,t,o){"use strict";cc._RF.push(t,"e385fiZ3nNLlrHL1BpNnBne","SecondsStatus2"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./SecondsStatus");o.default=class extends i.default{constructor(){super(...arguments),this.msWait=600}OnStep(e){this.msWait-=e,this.msWait=Math.max(this.msWait,0),0==this.msWait&&this.relMachine.Enter(this.relMachine.status1)}GetTxtScale(){let e=1-this.msWait/600;return Math.pow(e,.25)}GetTxtOpacity(){let e=1-Math.abs(this.msWait-300)/300;return Math.pow(e,.5)}GetTxtCtx(){return"\u51c6\u5907!"}},cc._RF.pop()},{"./SecondsStatus":"SecondsStatus"}],SecondsStatus3:[function(e,t,o){"use strict";cc._RF.push(t,"6072cbbjDlO4psclkR0FDNz","SecondsStatus3"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./SecondsStatus");o.default=class extends i.default{},cc._RF.pop()},{"./SecondsStatus":"SecondsStatus"}],SecondsStatus:[function(e,t,o){"use strict";cc._RF.push(t,"23bce0sCoJNrKwpphVkRJpf","SecondsStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnStep(e){}GetTxtScale(){return 1}GetTxtOpacity(){return 1}GetTxtCtx(){return"0"}},cc._RF.pop()},{}],SecondsViewState:[function(e,t,o){"use strict";cc._RF.push(t,"5ac0fcNTa5Bw5LR7vQqw9Gn","SecondsViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../IndexDataModule"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c=e("./SecondsStatus1"),d=e("./SecondsStatus2"),u=e("./SecondsStatus3");class m extends l.default{constructor(){super(i.default.GAME,l.default.BG_TYPE.MASK,!0)}static Pop(e){let t=r.default.Pop(m._t,e);return t.status1=new c.default(t),t.status2=new d.default(t),t.status3=new u.default(t),t.Enter(t.status2),t}OnInit(){this._listenIdUpdate=n.default.mgrEvter.evterUpdate.On(e=>{this.currStatus.OnStep(e),n.default.mgrUI.ModuleRefresh(a.default.SECONDS)})}OnDestory(){n.default.mgrEvter.evterUpdate.Off(this._listenIdUpdate)}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}m._t=new s.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:"SecondsViewState"}),o.default=m,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","./SecondsStatus1":"SecondsStatus1","./SecondsStatus2":"SecondsStatus2","./SecondsStatus3":"SecondsStatus3"}],SecondsView:[function(e,t,o){"use strict";cc._RF.push(t,"22038yk781LI4hFLdFEOK/4","SecondsView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/ui/UINodeInstEnterRS"),l=e("../../../frame/ui/UINodeInstHideRS"),c=e("../../../frame/ui/UINodeType"),d=e("../../../frame/ui/UIViewComponent"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="SecondsView";let f=i=class extends d.default{constructor(){super(...arguments),this.txt=null}};f.nodeType=c.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/seconds_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[c.default.ModuleStyle.Pop(h,{listRefModule:[r.default.DEFAULT,r.default.SECONDS],propsFilter:(e,t)=>{e.txt.node.scale=t.currStatus.GetTxtScale(),e.txt.node.opacity=255*t.currStatus.GetTxtOpacity(),e.txt.string=t.currStatus.GetTxtCtx()}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:l.default.setParentNull,enterRS:n.default.none}),a([p(cc.Label)],f.prototype,"txt",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],SettingViewState:[function(e,t,o){"use strict";cc._RF.push(t,"736feO8pfJKRKSocUP3Gaue","SettingViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType");class r{constructor(){this.childrenAble=!1}static Pop(e){return i.default.Pop(r._t,e)}}o.default=r,r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:()=>{},tag:"SettingViewState"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType"}],SettingView:[function(e,t,o){"use strict";cc._RF.push(t,"f78dfu6dpFAcaNNHnV7d9n9","SettingView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/component/ComponentNodeEventer"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../../IndexDataModule"),p=e("../../../IndexStorageItem"),h=e("../../GameCommon"),f=e("../voice_ogg/VoiceOggViewState"),{ccclass:y,property:_}=cc._decorator,g="SettingView";let b=i=class extends u.default{constructor(){super(...arguments),this.txtMusic=null,this.sliderMusic=null,this.evterMusic=null,this.txtVoice=null,this.sliderVoice=null,this.evterVoice=null}};b.nodeType=d.default.Pop(g,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/setting_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_SETTING],propsFilter:e=>{e.txtMusic.string=`\u97f3\u4e50\u97f3\u91cf ${Math.ceil(100*n.default.mgrData.Get(p.default.volumeMusic))}%`,e.sliderMusic.slider.progress=n.default.mgrData.Get(p.default.volumeMusic),e.sliderMusic.evterSlide.On(()=>{n.default.mgrData.Set(p.default.volumeMusic,e.sliderMusic.slider.progress),n.default.mgrUI.ModuleRefresh(m.default.INDEXVIEW_SETTING),n.default.mgrUI.ModuleRefresh(m.default.VOLUME_CHANGE)}),e.evterMusic.evterTouchStart.On(()=>{f.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.txtVoice.string=`\u97f3\u6548\u97f3\u91cf ${Math.ceil(100*n.default.mgrData.Get(p.default.volumeVoice))}%`,e.sliderVoice.slider.progress=n.default.mgrData.Get(p.default.volumeVoice),e.sliderVoice.evterSlide.On(()=>{n.default.mgrData.Set(p.default.volumeVoice,e.sliderVoice.slider.progress),n.default.mgrUI.ModuleRefresh(m.default.INDEXVIEW_SETTING),n.default.mgrUI.ModuleRefresh(m.default.VOLUME_CHANGE)}),e.evterVoice.evterTouchStart.On(()=>{f.default.inst.VoiceSet(h.default.BTN_VOICE)})}}),d.default.ModuleStyle.Pop(g,{listRefModule:[m.default.DEFAULT,m.default.INDEXVIEW_CHILDREN_ABLE],propsFilter:()=>{c.default.ClearScale0()}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.none}),a([_(cc.Label)],b.prototype,"txtMusic",void 0),a([_(s.default)],b.prototype,"sliderMusic",void 0),a([_(s.default)],b.prototype,"evterMusic",void 0),a([_(cc.Label)],b.prototype,"txtVoice",void 0),a([_(s.default)],b.prototype,"sliderVoice",void 0),a([_(s.default)],b.prototype,"evterVoice",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],ShareViewGroup:[function(e,t,o){"use strict";cc._RF.push(t,"abb01/SpqxJS4IOMA69PU9e","ShareViewGroup"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../game_element/body/GameCfgBodyCacheDropRS");o.default=class{constructor(e){this.idx=e.idx,this.rs=e.rs;let t=i.default.Pop(i.default.typeArray,"ShareViewGroup");t.push(this.rs.idProp,1),this.reward={rs:a.default.xlsxBackpackProp,props:t}}},cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS"}],ShareViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"457dahbAE1FkY08pkGHYWlA","ShareViewItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/basic/UtilObjPool"),l=e("../../../frame/component/ComponentNodeEventer"),c=e("../../../frame/config/src/CfgBackpackProp"),d=e("../../../frame/global/Jiang"),u=e("../../../frame/sdk/MgrSdk"),m=e("../../../frame/sdk/MgrSdkEnterRS"),p=e("../../../frame/ui/UINodeInstEnterRS"),h=e("../../../frame/ui/UINodeInstHideRS"),f=e("../../../frame/ui/UINodeType"),y=e("../../../frame/ui/UIViewComponent"),_=e("../../GameCommon"),g=e("../backpack_prop_preview_view/BackpackPropPreviewView"),b=e("../backpack_prop_preview_view/BackpackPropPreviewViewState"),S=e("../common/RewardGridArgs"),P=e("../reward_view/RewardViewState"),B=e("../voice_ogg/VoiceOggViewState"),{ccclass:C,property:M}=cc._decorator,x="ShareViewItem";let V=i=class extends y.default{constructor(){super(...arguments),this.containerReward=null,this.nodeLight=null,this.nodeGotted=null,this.evterShare=null,this.evterGot=null,this.sprHelper=null,this.nodeHelped=null,this.evterDetail=null}};V.nodeType=f.default.Pop(x,{prefabPath:`${_.default.SUB_MAIN}/prefab_ui/share_view_item`,componentGetter:e=>e.getComponent(i),listModuleStyle:[f.default.ModuleStyle.Pop(x,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_SHARE,r.default.INDEXVIEW_EQUIP,r.default.SDK],propsFilter:(e,t,o)=>{let i=t.stateShare.listGroup[o],a=t.stateShare.mapIdxToJoinItem.has(i.rs.idProp),r=t.stateShare.mapIdCfgToBackPackPropRecord.has(i.rs.idProp),s=d.default.mgrCfg.cfgBackpackProp.select(c.default.idGetter,i.rs.idProp)._list[0];if(e.nodeLight.active=!r,e.nodeGotted.active=r,e.evterGot.node.active=a&&!r,e.evterGot.evterTouchStart.On(()=>{B.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.evterGot.evterTouchEnd.On(()=>{let e=n.default.Pop(n.default.typeArray,x);e.push(i.reward),P.default.GotRewardOrdinary(_.default.TITLE_REWARD,e)}),e.evterShare.node.active=!a,e.evterShare.evterTouchStart.On(()=>{B.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.evterShare.evterTouchEnd.On(()=>{u.default.inst.core.WXShare(`\u6211\u60f3\u8981${s.name}\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211`,m.default.invited,{open_id:u.default.inst.core.WXGetOpenId(),id_prop:`${i.rs.idProp}`},i.rs.imgId,i.rs.imgUrl)}),e.nodeHelped.active=a,a){let o=t.stateShare.mapIdxToJoinItem.get(i.rs.idProp);u.default.inst.core.FillSprByUrl(e.sprHelper,o.url)}e.evterDetail.evterTouchStart.On(()=>{B.default.inst.VoiceSet(_.default.BTN_VOICE)}),e.evterDetail.evterTouchEnd.On(()=>{d.default.mgrUI.Open(g.default.nodeType,b.default.Pop(x,i.rs.idProp,1))})}})],childrenCreator:[f.default.ChildrenGeneration.Pop(x,{containerGetter:e=>e.containerReward,uiNodeCreator:(e,t,o)=>{let i=e.stateShare.listGroup[t];o.push(i.reward.rs.onGetUIRewardNodeType().CreateNode(e,S.default.Pop(i.reward.rs,i.reward.props),null))}})],propsType:s.default.typeNumber,hideRS:h.default.setParentNull,enterRS:p.default.opacityInForPrefab200}),a([M(cc.Node)],V.prototype,"containerReward",void 0),a([M(cc.Node)],V.prototype,"nodeLight",void 0),a([M(cc.Node)],V.prototype,"nodeGotted",void 0),a([M(l.default)],V.prototype,"evterShare",void 0),a([M(l.default)],V.prototype,"evterGot",void 0),a([M(cc.Sprite)],V.prototype,"sprHelper",void 0),a([M(cc.Node)],V.prototype,"nodeHelped",void 0),a([M(l.default)],V.prototype,"evterDetail",void 0),V=i=a([C],V),o.default=V,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgBackpackProp":"CfgBackpackProp","../../../frame/global/Jiang":"Jiang","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/sdk/MgrSdkEnterRS":"MgrSdkEnterRS","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../backpack_prop_preview_view/BackpackPropPreviewView":"BackpackPropPreviewView","../backpack_prop_preview_view/BackpackPropPreviewViewState":"BackpackPropPreviewViewState","../common/RewardGridArgs":"RewardGridArgs","../reward_view/RewardViewState":"RewardViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],ShareViewRS:[function(e,t,o){"use strict";cc._RF.push(t,"278e67sMy1HV4pvt5kxSmdJ","ShareViewRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool");class a{constructor(e){this.idProp=e.idProp,this.imgId=e.imgId,this.imgUrl=e.imgUrl,a.listShareViewRS.push(this)}}(function(e){e.listShareViewRS=i.default.Pop(i.default.typeArray,"ShareViewRS"),e.heart=new e({idProp:10002,imgId:"2aC63Du6SQSkbKF3HUnbXA==",imgUrl:"https://mmocgame.qpic.cn/wechatgame/1iagYwZj3s9VMIcQzCTZAkZp0qR75objq9LYYnu51VLPkMgbPHlejNAvn5AYmTJTX/0"}),e.star=new e({idProp:10003,imgId:"o8Tr4tmBRnizesvAt9OEZg==",imgUrl:"https://mmocgame.qpic.cn/wechatgame/1iagYwZj3s9VUcYNzmibWRtyfIumPutpE6DNlIibUatj8mrgCkoFKVicjJCzgibWclcxC/0"})})(a||(a={})),o.default=a,cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool"}],ShareViewState:[function(e,t,o){"use strict";cc._RF.push(t,"9e5f2UkqIVDHYRs3+pqjhKI","ShareViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexStorageItem"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/sdk/MgrSdk"),c=e("../loading_view/LoadingView"),d=e("../loading_view/LoadingViewState"),u=e("./ShareViewGroup"),m=e("./ShareViewRS"),p="ShareViewState",h=200;class f{constructor(){this.listGroup=r.default.Pop(r.default.typeArray,p),this.childrenAble=!1,this.mapIdxToJoinItem=r.default.Pop(r.default.typeMap,p),this.mapIdCfgToBackPackPropRecord=r.default.Pop(r.default.typeMap,p)}static Pop(e){let t=r.default.Pop(f._t,e);for(let o=0;o<m.default.listShareViewRS.length;o++){let e=m.default.listShareViewRS[o];t.listGroup.push(new u.default({idx:o,rs:e}))}return t.OnChange(i.default.INDEXVIEW_SHARE),t}OnChange(e){if(e!=i.default.DEFAULT&&e!=i.default.INDEXVIEW_SHARE&&e!=i.default.INDEXVIEW_EQUIP&&e!=i.default.SDK)return;this.mapIdxToJoinItem.clear();let t=l.default.inst.core.WXGetListCtxJoined();for(let i=0;i<t.length;i++){let e=t[i];this.mapIdxToJoinItem.has(e.id_prop)||this.mapIdxToJoinItem.set(e.id_prop,e)}this.mapIdCfgToBackPackPropRecord.clear();let o=n.default.mgrData.Get(a.default.listBackpackProp);for(let i=0;i<o.length;i++){let e=o[i];this.mapIdCfgToBackPackPropRecord.set(e.idCfg,e)}}RequestJoinData(){let e=!1;for(let o=0;o<this.listGroup.length;o++){let t=this.listGroup[o],i=this.mapIdxToJoinItem.has(t.rs.idProp),a=this.mapIdCfgToBackPackPropRecord.has(t.rs.idProp);if(!i||!a){e=!0;break}}let t=r.default.Pop(r.default.typeArray,p);return e&&(t.push(new Promise(e=>{setTimeout(()=>{e(null)},h)})),t.push(l.default.inst.core.WXRefreshListCtxJoined())),t}RefreshJoinData(){let e=r.default.Pop(r.default.typeArray,p);e.push(new Promise(e=>{setTimeout(()=>{e(null)},h)})),e.push(...this.RequestJoinData()),n.default.mgrUI.Open(c.default.nodeType,d.default.Pop(p,e))}}o.default=f,f._t=new s.default({instantiate:()=>new f,onPop:()=>{},onPush:()=>{},tag:p}),cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/sdk/MgrSdk":"MgrSdk","../loading_view/LoadingView":"LoadingView","../loading_view/LoadingViewState":"LoadingViewState","./ShareViewGroup":"ShareViewGroup","./ShareViewRS":"ShareViewRS"}],ShareView:[function(e,t,o){"use strict";cc._RF.push(t,"3f66b9vJS9A1ZbUiv3TUrqh","ShareView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/sdk/MgrSdk"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../GameCommon"),h=e("../voice_ogg/VoiceOggViewState"),f=e("./ShareViewItem"),{ccclass:y,property:_}=cc._decorator,g="ShareView";let b=i=class extends m.default{constructor(){super(...arguments),this.sprPlayerHead=null,this.containerItem=null,this.evterRefresh=null}};b.nodeType=u.default.Pop(g,{prefabPath:`${p.default.SUB_MAIN}/prefab_ui/share_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(g,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_SHARE,r.default.SDK],propsFilter:(e,t)=>{l.default.inst.core.FillSprByUrl(e.sprPlayerHead,l.default.inst.core.WXGetPlayerHeadUrl()),e.evterRefresh.evterTouchStart.On(()=>{h.default.inst.VoiceSet(p.default.BTN_VOICE)}),e.evterRefresh.evterTouchEnd.On(()=>{t.stateShare.RefreshJoinData()})}})],childrenCreator:[u.default.ChildrenGeneration.Pop(g,{containerGetter:e=>e.containerItem,uiNodeCreator:(e,t,o)=>{if(e.stateShare.childrenAble)for(let i=0;i<e.stateShare.listGroup.length;i++)o.push(f.default.nodeType.CreateNode(e,i,i))}})],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none}),a([_(cc.Sprite)],b.prototype,"sprPlayerHead",void 0),a([_(cc.Node)],b.prototype,"containerItem",void 0),a([_(n.default)],b.prototype,"evterRefresh",void 0),b=i=a([y],b),o.default=b,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/sdk/MgrSdk":"MgrSdk","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./ShareViewItem":"ShareViewItem"}],StoreTipsViewState:[function(e,t,o){"use strict";cc._RF.push(t,"0c3e3PjJ1ZDiKO4Z8TM2EPF","StoreTipsViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/ViewState"),l=e("../../GameCommon"),c=e("../voice_ogg/VoiceOggViewState");class d extends n.default{constructor(){super(i.default.GAME,n.default.BG_TYPE.MASK,!0)}static Pop(e){return a.default.Pop(d._t,e)}OnMaskTouch(){c.default.inst.VoiceSet(l.default.BTN_VOICE),s.default.mgrUI.Close(this._idView)}}o.default=d,d._t=new r.default({instantiate:()=>new d,onPop:()=>{},onPush:()=>{},tag:"StoreTipsViewState"}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],StoreTipsView:[function(e,t,o){"use strict";cc._RF.push(t,"00034HdnDBJ/KXHUcbHphwd","StoreTipsView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../GameCommon"),{ccclass:u,property:m}=cc._decorator;let p=i=class extends c.default{};p.nodeType=l.default.Pop("StoreTipsView",{prefabPath:`${d.default.SUB_MAIN}/prefab_ui/store_view_tips`,componentGetter:e=>e.getComponent(i),listModuleStyle:[],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.scaleInForTemp200}),p=i=a([u],p),o.default=p,cc._RF.pop()},{"../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],StoreViewItemEquipment:[function(e,t,o){"use strict";cc._RF.push(t,"6f66doOYMRFFJPjVEO3M9O/","StoreViewItemEquipment");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/basic/UtilObjPool"),l=e("../../../frame/component/ComponentNodeEventer"),c=e("../../../frame/config/src/CfgStore"),d=e("../../../frame/global/Jiang"),u=e("../../../frame/ui/UINodeInstEnterRS"),m=e("../../../frame/ui/UINodeInstHideRS"),p=e("../../../frame/ui/UINodeType"),h=e("../../../frame/ui/UIViewComponent"),f=e("../../GameCommon"),y=e("../../GameMath"),_=e("../../game_element/body/GameCfgBodyCacheDropRS"),g=e("../equipment_preview_view/EquipmentPreviewView"),b=e("../equipment_preview_view/EquipmentPreviewViewState"),S=e("../equipment_view/EquipmentViewEquip"),P=e("../reward_view/RewardViewState"),B=e("../tips_view/TipsViewState"),C=e("../voice_ogg/VoiceOggViewState"),{ccclass:M,property:x}=cc._decorator,V="StoreViewItem";let I=i=class extends h.default{constructor(){super(...arguments),this.txtLvCurrent=null,this.containerItem=null,this.btnBought=null,this.btnWatch=null,this.nodeMask=null,this.nodeLvUp=null}};I.nodeType=p.default.Pop(V,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/item_equipment_store_view_item_bought`,componentGetter:e=>e.getComponent(i),listModuleStyle:[p.default.ModuleStyle.Pop(V,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_STORE],propsFilter:(e,t,o)=>{t.stateStore.layout.SetElePos(e.node,o);let i=d.default.mgrCfg.cfgStore.select(c.default.idGetter,o)._list[0],a=0,s=0;if(t.stateStore.mapIdToEquipRec.has(i.item_id)){let e=t.stateStore.mapIdToEquipRec.get(i.item_id),o=y.default.equip.ParseCountToPower(e.count);s=y.default.ParsePowerToLev(o),a=y.default.ParseLevToPower(t.stateStore.levMax)-o,a=Math.max(a,0)}else a=y.default.ParseLevToPower(t.stateStore.levMax);let l=y.default.equip.ParsePowerToCount(a);e.txtLvCurrent.string=`+${t.stateStore.levMax-s}\u7ea7`,e.nodeMask.active=!1,e.btnWatch.evterTouchStart.On(()=>{C.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnWatch.evterTouchEnd.On(()=>{d.default.mgrUI.Open(g.default.nodeType,b.default.Pop(V,i.item_id,l))}),e.btnBought.evterTouchStart.On(()=>{C.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnBought.evterTouchEnd.On(()=>{s!=t.stateStore.levMax?d.default.mgrSdk.core.WXVideo().then(e=>{if(e.isRewardAble){let e=n.default.Pop(n.default.typeArray,V),t=n.default.Pop(n.default.typeArray,V);t.push(i.item_id,l),e.push({rs:_.default.xlsxEquipment,props:t}),P.default.GotRewardOrdinary(f.default.TITLE_REWARD,e),d.default.mgrUI.ModuleRefresh(r.default.INDEXVIEW_EQUIP),d.default.mgrUI.ModuleRefresh(r.default.INDEXVIEW_STORE)}}):B.default.inst.Tip("\u80cc\u5305\u4e2d\u8be5\u6b66\u5668\u7b49\u7ea7\u6700\u5927\uff0c\u4e0d\u53ef\u89c6\u9891\u5347\u7ea7")}),e.nodeLvUp.active=s<t.stateStore.levMax}})],childrenCreator:[p.default.ChildrenGeneration.Pop(V,{containerGetter:e=>e.containerItem,uiNodeCreator:(e,t,o)=>{let i=d.default.mgrCfg.cfgStore.select(c.default.idGetter,t)._list[0];o.push(S.default.GetNodeTypeForIconUI(i.item_id).CreateNode(e,null,i.item_id))}})],propsType:s.default.typeNumber,hideRS:m.default.localScale0,enterRS:u.default.opacityInForPrefab200}),a([x(cc.Label)],I.prototype,"txtLvCurrent",void 0),a([x(cc.Node)],I.prototype,"containerItem",void 0),a([x(l.default)],I.prototype,"btnBought",void 0),a([x(l.default)],I.prototype,"btnWatch",void 0),a([x(cc.Node)],I.prototype,"nodeMask",void 0),a([x(cc.Node)],I.prototype,"nodeLvUp",void 0),I=i=a([M],I),o.default=I,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgStore":"CfgStore","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","../equipment_preview_view/EquipmentPreviewView":"EquipmentPreviewView","../equipment_preview_view/EquipmentPreviewViewState":"EquipmentPreviewViewState","../equipment_view/EquipmentViewEquip":"EquipmentViewEquip","../reward_view/RewardViewState":"RewardViewState","../tips_view/TipsViewState":"TipsViewState","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],StoreViewState:[function(e,t,o){"use strict";cc._RF.push(t,"6a5094g6ilLGKvgx9rO7UcE","StoreViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../IndexStorageItem"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/basic/layout/Layout"),l=e("../../../frame/basic/layout/LayoutAlignmentHorCenter"),c=e("../../../frame/basic/layout/LayoutAlignmentVerMiddle"),d=e("../../../frame/basic/layout/LayoutConstraintColumn"),u=e("../../../frame/basic/layout/LayoutStartAxisHor"),m=e("../../../frame/basic/layout/LayoutStartCornerHorLeft"),p=e("../../../frame/basic/layout/LayoutStartCornerVerUpper"),h=e("../../../frame/global/Jiang"),f=e("../../GameCommon"),y=e("../../GameMath"),_=e("../../cfg_cache/CfgCacheChapter"),g=e("../../cfg_cache/CfgCacheStore"),b="StoreViewState";class S{constructor(){this.scrollEnable=!1,this.childrenAble=!1,this.listDisplayEquip=r.default.Pop(r.default.typeArray,b),this.mapIdToEquipRec=r.default.Pop(r.default.typeMap,b);let e=h.default.mgrData.Get(a.default.listBackpackProp);for(let t=0;t<e.length;t++){let o=e[t];o.idCfg==f.default.COIN_FOR_STORE&&(this.recCoin=o)}this.challengeChapter=_.default.GetChallengeChapter(),this.layout=n.default.Pop(b,{paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,spacingColumn:S.SPACING_HOR,spacingRow:S.SPACING_VER,defSizeWidth:S.ITEM_WIDTH,defSizeHeight:S.ITEM_HEIGHT,startCornerHor:m.default.inst,startCornerVer:p.default.inst,startAxis:u.default.inst,constraint:d.default.four,alignmentHor:l.default.inst,alignmentVer:c.default.inst});for(let t=0;t<h.default.mgrCfg.cfgStore._list.length;t++){let e=h.default.mgrCfg.cfgStore._list[t];g.default.CheckIsUnlocked(this,e)&&this.layout.Create(S.ITEM_WIDTH,S.ITEM_HEIGHT,h.default.mgrCfg.cfgStore._list[t].id)}this.layout.UpdatePos(),this.OnChange(i.default.INDEXVIEW_STORE)}OnChange(e){if(e!=i.default.DEFAULT&&e!=i.default.INDEXVIEW_STORE)return;this.listDisplayEquip.length=0,this.listDisplayEquip.push(...h.default.mgrData.Get(a.default.listEquipment)),this.mapIdToEquipRec.clear();for(let o=0;o<this.listDisplayEquip.length;o++){let e=this.listDisplayEquip[o];this.mapIdToEquipRec.set(e.idCfg,e)}this.levMax=0;let t=h.default.mgrData.Get(a.default.listEquipment);for(let o=0;o<t.length;o++){let e=t[o],i=y.default.equip.ParseCountToPower(e.count),a=y.default.ParsePowerToLev(i);this.levMax=Math.max(this.levMax,a)}}UpdateActive(){this.layout.UpdateActive(0,this.scrollY,S.VIEW_WIDTH,S.VIEW_HEIGHT),h.default.mgrUI.ModuleRefresh(i.default.RELOAD)}static Pop(e){return r.default.Pop(S._t,e)}}S._t=new s.default({instantiate:()=>new S,onPop:()=>{},onPush:()=>{},tag:b}),function(e){e.VIEW_WIDTH=530,e.VIEW_HEIGHT=520,e.ITEM_WIDTH=120,e.ITEM_HEIGHT=166,e.SPACING_HOR=10,e.SPACING_VER=Math.floor((520-3*e.ITEM_HEIGHT)/2)}(S||(S={})),o.default=S,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/basic/layout/Layout":"Layout","../../../frame/basic/layout/LayoutAlignmentHorCenter":"LayoutAlignmentHorCenter","../../../frame/basic/layout/LayoutAlignmentVerMiddle":"LayoutAlignmentVerMiddle","../../../frame/basic/layout/LayoutConstraintColumn":"LayoutConstraintColumn","../../../frame/basic/layout/LayoutStartAxisHor":"LayoutStartAxisHor","../../../frame/basic/layout/LayoutStartCornerHorLeft":"LayoutStartCornerHorLeft","../../../frame/basic/layout/LayoutStartCornerVerUpper":"LayoutStartCornerVerUpper","../../../frame/global/Jiang":"Jiang","../../GameCommon":"GameCommon","../../GameMath":"GameMath","../../cfg_cache/CfgCacheChapter":"CfgCacheChapter","../../cfg_cache/CfgCacheStore":"CfgCacheStore"}],StoreView:[function(e,t,o){"use strict";cc._RF.push(t,"8ebf1XITgxH05i63fDFlj1t","StoreView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/config/src/CfgStore"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstEnterRS"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../../../frame/ui/UINodeType"),p=e("../../../frame/ui/UIRoot"),h=e("../../../frame/ui/UIViewComponent"),f=e("../../GameCommon"),y=e("../../game_element/body/GameCfgBodyCacheDropRS"),_=e("../voice_ogg/VoiceOggViewState"),g=e("./StoreTipsView"),b=e("./StoreTipsViewState"),S=e("./StoreViewState"),{ccclass:P,property:B}=cc._decorator,C="StoreView";let M=i=class extends h.default{constructor(){super(...arguments),this.scroll=null,this.containerItem=null,this.btnRegular=null,this.bgTiled=null}};M.nodeType=m.default.Pop(C,{prefabPath:`${f.default.SUB_MAIN}/prefab_ui/store_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[m.default.ModuleStyle.Pop(C,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_STORE],propsFilter:(e,t)=>{null!=t.stateStore.recCoin&&(e.scroll.scroll.content.width=t.stateStore.layout.containerWidth,e.scroll.scroll.content.height=t.stateStore.layout.containerHeight,e.scroll.scroll.enabled=t.stateStore.scrollEnable,e.scroll.scroll.content.y=t.stateStore.layout.containerHeight-t.stateStore.scrollY-S.default.VIEW_HEIGHT,e.scroll.evterScrolling.On(()=>{t.stateStore.scrollY=t.stateStore.layout.containerHeight-e.scroll.scroll.content.y-S.default.VIEW_HEIGHT,t.stateStore.UpdateActive(),p.default.inst.update(0)}),e.btnRegular.evterTouchStart.On(()=>{_.default.inst.VoiceSet(f.default.BTN_VOICE)}),e.btnRegular.evterTouchEnd.On(()=>{c.default.mgrUI.Open(g.default.nodeType,b.default.Pop(C))}),e.bgTiled.width=t.stateStore.layout.containerWidth,e.bgTiled.height=Math.max(t.stateStore.layout.containerHeight,3*(S.default.ITEM_HEIGHT+S.default.SPACING_VER)-S.default.SPACING_VER))}}),m.default.ModuleStyle.Pop(C,{listRefModule:[r.default.DEFAULT,r.default.INDEXVIEW_CHILDREN_ABLE],propsFilter:()=>{}})],childrenCreator:[m.default.ChildrenGeneration.Pop(C,{containerGetter:e=>e.containerItem,uiNodeCreator:(e,t,o)=>{if(!e.stateStore.childrenAble)return;let i=e.stateStore.layout;for(let a=i._recHorStart;a<=i._recHorEnd;a++){let t=i.listColumn[a];for(let a=i._recVerStart;a<=i._recVerEnd;a++){let i=t.listEle[a];if(null==i)continue;let r=c.default.mgrCfg.cfgStore.select(l.default.idGetter,i.id)._list[0];y.default.mapCodeToRS.get(r.item_type).onStoreDisplay(e,o,i.id)}}}})],propsType:s.default.typeNumber,hideRS:u.default.setParentNull,enterRS:d.default.none}),a([B(n.default)],M.prototype,"scroll",void 0),a([B(cc.Node)],M.prototype,"containerItem",void 0),a([B(n.default)],M.prototype,"btnRegular",void 0),a([B(cc.Node)],M.prototype,"bgTiled",void 0),M=i=a([P],M),o.default=M,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgStore":"CfgStore","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIRoot":"UIRoot","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../game_element/body/GameCfgBodyCacheDropRS":"GameCfgBodyCacheDropRS","../voice_ogg/VoiceOggViewState":"VoiceOggViewState","./StoreTipsView":"StoreTipsView","./StoreTipsViewState":"StoreTipsViewState","./StoreViewState":"StoreViewState"}],TipsViewLine:[function(e,t,o){"use strict";cc._RF.push(t,"583fbC3AHdLEKADrsrr4/Yi","TipsViewLine");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),{ccclass:m,property:p}=cc._decorator,h="TipsViewLine";let f=i=class extends c.default{constructor(){super(...arguments),this.txt=null}};f.nodeType=l.default.Pop(h,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/tips_view_line`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(h,{listRefModule:[d.default.DEFAULT,d.default.TIPSVIEW],propsFilter:(e,t,o)=>{let i;for(let n=0;n<t.listRecord.length;n++)o==t.listRecord[n].id&&(i=t.listRecord[n]);e.txt.string=i.txt;let a=1-i.lessMS/u.default.TIPS_HOLD,r=1-Math.abs(a-.5)/.5;r=Math.pow(r,.25),e.node.opacity=255*r;let s=1-a;s=Math.pow(s,8),e.node.scale=1+2*s}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.none}),a([p(cc.Label)],f.prototype,"txt",void 0),f=i=a([m],f),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon"}],TipsViewState:[function(e,t,o){"use strict";cc._RF.push(t,"36798Tnk1VLNb6jOLwu87cU","TipsViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexDataModule"),l=e("../../../IndexLayer"),c=e("../../GameCommon"),d="TipsViewState";class u extends s.default{constructor(){super(l.default.SYSTEM,s.default.BG_TYPE.NONE,!1),this.listRecord=i.default.Pop(i.default.typeArray,d),this.idGen=0}static Pop(e){return i.default.Pop(u._t,e)}Tip(e){if(0<this.listRecord.length&&this.listRecord[this.listRecord.length-1].txt==e)return void(this.listRecord[this.listRecord.length-1].lessMS=c.default.TIPS_HOLD);let t=u.Record.Pop(d);t.id=++this.idGen,t.txt=e,t.lessMS=c.default.TIPS_HOLD,this.listRecord.push(t),r.default.mgrUI.ModuleRefresh(n.default.TIPSVIEW)}}u._t=new a.default({instantiate:()=>{let e=new u;return u.inst=e,e},onPop:e=>{r.default.mgrEvter.evterUpdate.On(t=>{if(0!=e.listRecord.length){for(let o=0;o<e.listRecord.length;){let i=e.listRecord[o];i.lessMS-=t,i.lessMS=Math.max(i.lessMS,0),i.lessMS<=0?e.listRecord.splice(o,1):o++}r.default.mgrUI.ModuleRefresh(n.default.TIPSVIEW)}})},onPush:()=>{},tag:d}),function(e){e.inst=null,e.APP="Record";class t{constructor(){}static Pop(e){return i.default.Pop(t._t,e)}}t._t=new a.default({instantiate:()=>new t,onPop:()=>{},onPush:()=>{},tag:e.APP}),e.Record=t}(u||(u={})),o.default=u,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon"}],TipsView:[function(e,t,o){"use strict";cc._RF.push(t,"7d1d5WyL69H/Lt5ta/tbJLs","TipsView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),m=e("./TipsViewLine"),{ccclass:p,property:h}=cc._decorator,f="TipsView";let y=i=class extends c.default{constructor(){super(...arguments),this.containerLine=null}};y.nodeType=l.default.Pop(f,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/tips_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(f,{listRefModule:[d.default.DEFAULT,d.default.TIPSVIEW],propsFilter:(e,t)=>{e.containerLine.active=0!=t.listRecord.length}})],childrenCreator:[l.default.ChildrenGeneration.Pop(f,{containerGetter:e=>e.containerLine,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.listRecord.length;i++){let t=e.listRecord[i];o.push(m.default.nodeType.CreateNode(e,t.id,t.id))}}})],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.none}),a([h(cc.Node)],y.prototype,"containerLine",void 0),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./TipsViewLine":"TipsViewLine"}],UIMask:[function(e,t,o){"use strict";cc._RF.push(t,"9d7c7CoA0VE874vgDHVAkHq","UIMask");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../IndexDataModule"),s=e("../basic/BCType"),n=e("../component/ComponentNodeEventer"),l=e("../global/Jiang"),c=e("./UINodeInstEnterRS"),d=e("./UINodeInstHideRS"),u=e("./UINodeType"),m=e("./UIViewComponent"),{ccclass:p,property:h}=cc._decorator;let f=i=class extends m.default{constructor(){super(...arguments),this.sprBg=null,this.btnMask=null}onEnable(){}onDisable(){}onLoad(){}};f.nodeType=u.default.Pop("UIMask",{prefabPath:"UIMask",componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop("UIMask",{listRefModule:[r.default.DEFAULT],propsFilter:e=>{e.btnMask.evterTouchEnd.On(()=>{l.default.mgrUI._listViewDisplay[l.default.mgrUI._maskIdx].tState.OnMaskTouch()})}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.opacityInForTemp200}),a([h(cc.Sprite)],f.prototype,"sprBg",void 0),a([h(n.default)],f.prototype,"btnMask",void 0),f=i=a([p],f),o.default=f,cc._RF.pop()},{"../../IndexDataModule":"IndexDataModule","../basic/BCType":"BCType","../component/ComponentNodeEventer":"ComponentNodeEventer","../global/Jiang":"Jiang","./UINodeInstEnterRS":"UINodeInstEnterRS","./UINodeInstHideRS":"UINodeInstHideRS","./UINodeType":"UINodeType","./UIViewComponent":"UIViewComponent"}],UINodeInstEnterRS:[function(e,t,o){"use strict";cc._RF.push(t,"dd579nOf/5KnIMa0j8SRhS4","UINodeInstEnterRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r="UINodeInstEnterRS";class s{constructor(){}static Pop(e,t){let o=i.default.Pop(s._t,e);return o._update=t.update,o}Update(e,t,o){this._update(e,t,o)}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),function(e){e.none=e.Pop(r,{update:()=>{}}),e.opacityInForPrefab200=e.Pop(r,{update:(e,t)=>{let o=e.msDisplayed/200*255;o=Math.min(o,255),t.node.opacity!=o&&(t.node.opacity=o)}}),e.opacityInForTemp200=e.Pop(r,{update:(e,t)=>{let o=t._msDisplayedTemp/200*255;o=Math.min(o,255),t.node.opacity!=o&&(t.node.opacity=o)}}),e.opacityInForTemp600=e.Pop(r,{update:(e,t)=>{let o=t._msDisplayedTemp/600*255;o=Math.min(o,255),t.node.opacity!=o&&(t.node.opacity=o)}}),e.opacityInForIdx16A200=e.Pop(r,{update:(e,t,o)=>{let i=16*o,a=(t._msDisplayedTemp-i)/200*255;a=Math.min(a,255),a=Math.max(a,0),t.node.opacity!=a&&(t.node.opacity=a)}}),e.scaleInForPrefab200=e.Pop(r,{update:(e,t)=>{let o=e.msDisplayed/200;o=Math.min(o,1),t.node.scale!=o&&(t.node.scale=o)}}),e.scaleInForTemp200=e.Pop(r,{update:(e,t)=>{let o=t._msDisplayedTemp/200;o=Math.min(o,1),t.node.scale!=o&&(t.node.scale=o)}})}(s||(s={})),o.default=s,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],UINodeInstHideRS:[function(e,t,o){"use strict";cc._RF.push(t,"48db9/wZOpDOrg3v7UvE5tI","UINodeInstHideRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r="UINodeInstHideRS";class s{constructor(){}static Pop(e,t){let o=i.default.Pop(s._t,e);return o.hide=t.hide,o.show=t.show,o}}s._t=new a.default({instantiate:()=>new s,onPop:()=>{},onPush:()=>{},tag:r}),function(e){const t=i.default.Pop(i.default.typeSet,r);function o(e){e.setParent(null),e.scale=1}e.ClearScale0=function(){t.forEach(o),t.clear()},e.localScale0=e.Pop(r,{hide:e=>{e.setSiblingIndex(e.parent.children.length-1),e.scale=0,t.add(e)},show:e=>{t.delete(e)}}),e.setParentNull=e.Pop(r,{hide:e=>{e.setParent(null)},show:()=>{}})}(s||(s={})),o.default=s,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],UINodePrefabRecord:[function(e,t,o){"use strict";var i;cc._RF.push(t,"a7a72itMFlIRJxGpyANUfQz","UINodePrefabRecord"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=Symbol("UINodePrefabRecord");e.GetCache=function(e){return null==e?null:(null==e[t]&&(e[t]={msDisplayed:0}),e[t])}}(i||(i={})),o.default=i,cc._RF.pop()},{}],UINodeType:[function(e,t,o){"use strict";cc._RF.push(t,"ab723XXtzVFPYuvB/o94723","UINodeType"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("./MgrUI"),r=e("./UINode"),s=e("../basic/UtilObjPoolType"),n=e("../basic/UtilString"),l="UINodeType";class c{constructor(){}static Pop(e,t){n.default.CheckIsNullOrEmpty(t.prefabPath)&&console.error("\u4e0d\u8be5\u5b58\u5728\u7a7a\u5730\u5740\u7684\u8282\u70b9\u7c7b\u578b\uff01");let o=i.default.Pop(c._t,e);return o._prefabPath=t.prefabPath,o._componentGetter=t.componentGetter,o._listModuleStyle=t.listModuleStyle,o._childrenCreator=t.childrenCreator,o._propsType=t.propsType,o._hideRS=t.hideRS,o._enterRS=t.enterRS,null==o._enterRS&&console.error(`[${t.prefabPath}] val._enterRS == null`),c.totalPrefabPathList.push(o._prefabPath),o}CreateNode(e,t,o){let s=i.default.Pop(r.default._t,l);s.nodeType=this;for(let i=0;i<this._listModuleStyle.length;i++){let e=this._listModuleStyle[i],t=0;for(let o=0;o<e._listRefModule.length;o++)t+=a.default.inst.ModuleGetVersion(e._listRefModule[o]);s.listStyleVersion.push(t)}s.state=e,s.props=t;for(let a=0;a<this._childrenCreator.length;a++){let o=this._childrenCreator[a],r=i.default.Pop(i.default.typeArray,l);o._uiNodeCreator(e,t,r),s.listChildrenNode.push(r)}return s.id=o,s}}c._t=new s.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),c.totalPrefabPathList=i.default.Pop(i.default.typeArray,l),function(e){class t{constructor(){}static Pop(e,o){let a=i.default.Pop(t._t,e);return a._listRefModule=o.listRefModule,a._propsFilter=o.propsFilter,a}}t._t=new s.default({instantiate:()=>new t,onPop:()=>{},onPush:()=>{},tag:"ModuleStyle"}),e.ModuleStyle=t;class o{constructor(){}static Pop(e,t){let a=i.default.Pop(o._t,e);return a._containerGetter=t.containerGetter,a._uiNodeCreator=t.uiNodeCreator,a}}o._t=new s.default({instantiate:()=>new o,onPop:()=>{},onPush:()=>{},tag:"ChildrenGeneration"}),e.ChildrenGeneration=o}(c||(c={})),o.default=c,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType","../basic/UtilString":"UtilString","./MgrUI":"MgrUI","./UINode":"UINode"}],UINode:[function(e,t,o){"use strict";cc._RF.push(t,"fc3b5342eJHoIC1SAWZ9PJU","UINode"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType"),r="UINode";let s=0;class n{constructor(){this._id=++s}static Pop(e){return i.default.Pop(n._t,e)}MapPropsTo(e){null!=e.props&&e.nodeType._propsType._release(e.props),e.nodeType=this.nodeType,e.listStyleVersion.length=0,e.listStyleVersion.push(...this.listStyleVersion),e.state=this.state,e.props=e.nodeType._propsType._clone(this.props),e.id=this.id}CopyShallow(){let e=i.default.Pop(n._t,r);this.MapPropsTo(e);for(let t=0;t<this.listChildrenNode.length;t++)e.listChildrenNode.push(i.default.Pop(i.default.typeArray,r));return e}}n._t=new a.default({instantiate:()=>new n,onPop:e=>{e.listStyleVersion=i.default.Pop(i.default.typeArray,r),e.listChildrenNode=i.default.Pop(i.default.typeArray,r)},onPush:e=>{e.nodeType._propsType._release(e.props),e.nodeType=null,i.default.Push(e.listStyleVersion),e.listStyleVersion=null,e.state=null,e.props=null;for(let t=0;t<e.listChildrenNode.length;t++){let o=e.listChildrenNode[t];for(let e=0;e<o.length;e++){let t=o[e];i.default.Push(t)}i.default.Push(o)}i.default.Push(e.listChildrenNode),e.listChildrenNode=null,e.id=null,e.match=null,e.com=null},tag:r}),o.default=n,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],UIRootTreeJson:[function(e,t,o){"use strict";cc._RF.push(t,"0f5f08WmRNBE7o/YG8PH12X","UIRootTreeJson"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/UtilObjPool"),a=e("../basic/UtilObjPoolType");class r{constructor(){}static Pop(e,t,o){let a=i.default.Pop(r._t,e);return a.res=t,a.children=o,a}}r._t=new a.default({instantiate:()=>new r,onPop:()=>{},onPush:e=>{for(let t=0;t<e.children.length;t++){let o=e.children[t];i.default.Push(o)}i.default.Push(e.children),e.res=null,e.children=null},tag:"UIRootTreeJson"}),o.default=r,cc._RF.pop()},{"../basic/UtilObjPool":"UtilObjPool","../basic/UtilObjPoolType":"UtilObjPoolType"}],UIRoot:[function(e,t,o){"use strict";cc._RF.push(t,"b4293ioFhdA+YxAORI3XV2p","UIRoot");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../basic/UtilObjPool"),s=e("./UIViewComponent"),n=e("./MgrUI"),l=e("../res/MgrRes"),c=e("../global/Jiang"),d=e("./UIMask"),u=e("../basic/UtilNode"),m=e("./UIRootTreeJson"),p=e("./UINodeInstHideRS"),h=e("../evter/MgrEvter"),f=e("../basic/UtilArray"),y=e("./UINodePrefabRecord"),_="UIRoot",{ccclass:g,property:b}=cc._decorator;let S=i=class extends s.default{constructor(){super(),this._moduleToVersion=r.default.Pop(r.default.typeMap,_),this._listChangedModule=r.default.Pop(r.default.typeArray,_),this._frameId=0,this._listPrefab=r.default.Pop(r.default.typeArray,_),this.viewListCurrent=r.default.Pop(r.default.typeArray,_),this.viewListWill=r.default.Pop(r.default.typeArray,_),this.count=0,this._map=r.default.Pop(r.default.typeMap,_),i.inst=this}update(e){let t=Date.now();this.versionListViewInfo!=n.default.inst.versionListViewInfo&&(this.versionListViewInfo=n.default.inst.versionListViewInfo,n.default.inst.OnListViewChanged()),this._frameId=++i._frameIdGen,h.default.inst.evterUpdate.Call(1e3*e);let o=this._currViewRefreshedId!=n.default.inst._idGenView._genId;this._currViewRefreshedId=n.default.inst._idGenView._genId;let a=this._currViewRefreshedCount!=n.default.inst._listViewDisplay.length;this._currViewRefreshedCount=n.default.inst._listViewDisplay.length,this._listChangedModule.length=0,n.default.inst._moduleToVersionMap.forEach((e,t)=>{this._moduleToVersion.get(t)!=e&&(this._moduleToVersion.set(t,e),this._listChangedModule.push(t))});let r=0<this._listChangedModule.length;for(let i=0;i<n.default.inst._listViewInfo.length;i++)for(let e=0;e<this._listChangedModule.length;e++)n.default.inst._listViewInfo[i].tState.OnChange(this._listChangedModule[e]);for((o||a||r)&&this.Refresh();!(this.renderIteratorResult.done||(this.renderIteratorResult=this.renderIterator.next(),1e3/30<=Date.now()-t)););let s=1e3*e;s=Math.min(s,1e3/60),this._listPrefab.length=0,this.AnimEnterPrefabUpdate(this.node,this.viewListCurrent,s),f.default.RemRepeat(this._listPrefab);for(let i=0;i<this._listPrefab.length;i++){let e=this._listPrefab[i];y.default.GetCache(e).msDisplayed+=s}this.AnimEnterInstUpdate(this.node,this.viewListCurrent,s,0)}AnimEnterPrefabUpdate(e,t,o){for(let i=0;i<t.length;i++){let a=t[i],r=e.children[i],s=a.nodeType._componentGetter(r),n=c.default.mgrRes.GetPrefab(a.nodeType._prefabPath);this._listPrefab.push(n);for(let e=0;e<a.nodeType._childrenCreator.length;e++){let t=a.nodeType._childrenCreator[e]._containerGetter(s),i=a.listChildrenNode[e];this.AnimEnterPrefabUpdate(t,i,o)}}}AnimEnterInstUpdate(e,t,o,i){for(let a=0;a<t.length;a++){let i=t[a],r=e.children[a],s=i.nodeType._componentGetter(r);s._msDisplayed+=o,s._msDisplayedTemp+=o;let n=c.default.mgrRes.GetPrefab(i.nodeType._prefabPath),l=y.default.GetCache(n);i.nodeType._enterRS.Update(l,s,a);for(let e=0;e<i.nodeType._childrenCreator.length;e++){let t=i.nodeType._childrenCreator[e]._containerGetter(s),a=i.listChildrenNode[e];this.AnimEnterInstUpdate(t,a,o,e)}}}Refresh(){for(let e=0;e<this.viewListWill.length;e++)r.default.Push(this.viewListWill[e]);this.viewListWill.length=0;for(let e=0;e<n.default.inst._listViewDisplay.length;e++){let t=n.default.inst._listViewDisplay[e];this.viewListWill.push(t.nodeType.CreateNode(t.tState,t.tProps,t.id))}null!=c.default.mgrUI._maskIdx&&this.viewListWill.splice(c.default.mgrUI._maskIdx,0,d.default.nodeType.CreateNode(0,0,0));for(let e=0;e<l.default.inst.mgrAssets.listTask.length;e++)l.default.inst.mgrAssets.listTask[e].priorityForUI=1e4;this._loadPriority=0,this.renderIterator=this.DisputeList(this.node,this.viewListCurrent,this.viewListWill),this.renderIteratorResult=this.renderIterator.next()}static GetTreeTxt(e){let t=r.default.Pop(r.default.typeArray,_);for(let a=0;a<e.length;a++)t.push(i.CreateTreeNode(e[a]));let o=JSON.stringify(t,null,4);for(let i=0;i<t.length;i++)this.DestoryTreeNode(t[i]);return r.default.Push(t),o}static CreateTreeNode(e){let t=r.default.Pop(r.default.typeArray,_);for(let o=0;o<e.listChildrenNode.length;o++){let a=e.listChildrenNode[o],s=r.default.Pop(r.default.typeArray,_);for(let e=0;e<a.length;e++){let t=a[e];s.push(i.CreateTreeNode(t))}t.push(s)}return m.default.Pop(_,`[${e._id}]${e.nodeType._prefabPath}`,t)}static DestoryTreeNode(e){for(let t=0;t<e.children.length;t++){let o=e.children[t];for(let e=0;e<o.length;e++){let t=o[e];this.DestoryTreeNode(t)}}r.default.Push(e)}*DisputeList(e,t,o){for(let a=0;a<o.length;){let e=o[a];null!=e?null!=c.default.mgrRes.GetPrefab(e.nodeType._prefabPath)?a++:(o.splice(a,1),c.default.mgrRes.mgrAssets.GetLoadRecord(e.nodeType._prefabPath).priorityForUI=++this._loadPriority):o.splice(a,1)}let i=r.default.Pop(r.default.typeMap,_);for(let a=0;a<t.length;a++){let o=t[a];o.match=null,null!=o.id&&(i.has(o.id)?console.error(`id \u51b2\u7a81 \u5bb9\u5668[${e.name}] \u8d44\u6e90[${o.nodeType._prefabPath}]`):i.set(o.id,o))}for(let a=0;a<o.length;a++){let e=o[a];if(e.match=null,null==e.id||!i.has(e.id))continue;let t=i.get(e.id);null==t.match&&t.nodeType._prefabPath==e.nodeType._prefabPath&&(e.match=t,t.match=e)}r.default.Push(i);for(let a=0;a<o.length;a++){let e=o[a];if(null==e.match)for(let o=0;o<t.length;o++){let i=t[o];if(null==i.match&&i.nodeType._prefabPath==e.nodeType._prefabPath){if(null!=e.id){for(let e=0;e<i.com._animOnEnable.length;e++)i.com._animOnEnable[e].Reset();for(let e=0;e<i.com._audioOnEnable.length;e++)i.com._audioOnEnable[e].Reset()}e.match=i,i.match=e;break}}}for(let a=0;a<t.length;)null==t[a].match?this.Delete(e,t,a):a++;for(let a=0;a<o.length;a++){let i=o[a];if(null!=i.match){if(i.match!=t[a]){let o=a;for(;o<t.length&&t[o]!=i.match;o++);this.Move(e,t,o,a)}yield*this.Modify(e.children[a],t[a],o[a])}else yield*this.Insert(e,t,i,a),this.count++,yield}}*Insert(e,t,o,i){let a=o.CopyShallow();t.splice(i,0,a);let r=this.Pop(a.nodeType);a.nodeType._hideRS.show(r),r.parent!=e&&r.setParent(e),r.scale=1,r.setSiblingIndex(i);let s=a.nodeType._componentGetter(r);null==s&&console.error(`[${r.name}] \u4e0a\u6302\u8f7d\u7684\u7ec4\u4ef6\u4e0d\u5bf9`,a),a.com=s;for(let n=0;n<a.nodeType._listModuleStyle.length;n++)0==n&&s.OffAll(),a.nodeType._listModuleStyle[n]._propsFilter(s,a.state,a.props);yield*this.DisputeChildren(r,a,o)}Delete(e,t,o){let i=e.children[o],a=t[o],s=a.nodeType._componentGetter(i);s._msDisplayedTemp=0;for(let r=0;r<a.nodeType._childrenCreator.length;r++){let e=a.nodeType._childrenCreator[r]._containerGetter(s),t=a.listChildrenNode[r];for(let o=t.length-1;0<=o;o--)this.Delete(e,t,o)}a.nodeType._hideRS.hide(i),this.Push(a.nodeType,i),t.splice(o,1),r.default.Push(a)}*Modify(e,t,o){let i=o.nodeType._componentGetter(e),a=o.nodeType!=t.nodeType||o.state!=t.state||!o.nodeType._propsType._equal(o.props,t.props);for(let r=0;r<o.nodeType._listModuleStyle.length;r++){let e=o.nodeType._listModuleStyle[r];(a||o.listStyleVersion[r]!=t.listStyleVersion[r])&&(0==r&&i.OffAll(),e._propsFilter(i,o.state,o.props))}o.MapPropsTo(t),yield*this.DisputeChildren(e,t,o)}Move(e,t,o,i){if(o==i)return;e.children[o].setSiblingIndex(i);let a=t[o];t.splice(o,1),t.splice(i,0,a)}*DisputeChildren(e,t,o){let i=t.listChildrenNode,a=o.listChildrenNode,s=o.nodeType._componentGetter(e),n=o.nodeType._childrenCreator;for(let l=0;l<n.length;l++){let e=n[l]._containerGetter(s);for(;i.length<=l;)i.push(r.default.Pop(r.default.typeArray,_));let t=i[l];for(;a.length<=l;)a.push(r.default.Pop(r.default.typeArray,_));let o=a[l];yield*this.DisputeList(e,t,o)}}Pop(e){this.Promise(e._prefabPath);let t,o=this._map.get(e._prefabPath);if(0==o.length){let o=l.default.inst.GetPrefab(e._prefabPath);null==o&&console.error(`\u8def\u5f84[${e._prefabPath}]\u5bf9\u5e94\u7684\u9884\u5236\u4f53\u4e3a\u7a7a`),t=cc.instantiate(o);let i=e._componentGetter(t);i._dateNowInstantiate=Date.now(),null==i&&console.error(`[${t.name}]\u4e0a\u6302\u8f7d\u7684\u7ec4\u4ef6\u4e0d\u5339\u914d`,e),i.Record();for(let t=0;t<e._childrenCreator.length;t++){let o=e._childrenCreator[t]._containerGetter(i);for(null==o&&console.error(`\u8d44\u6e90[${e._prefabPath}]\u4e0a\u6709\u5bb9\u5668\u4e3a\u7a7a`);0<o.children.length;){let e=o.children[o.children.length-1];console.error(`${u.default.GetPath(e)} \u53ef\u63d0\u524d\u5220\u9664`),e.setParent(null),e.destroy()}}}else t=o.pop();return t}Push(e,t){this.Promise(e._prefabPath),this._map.get(e._prefabPath).push(t)}Promise(e){this._map.has(e)||this._map.set(e,r.default.Pop(r.default.typeArray,_))}ClearCache(){p.default.ClearScale0(),this._map.forEach(e=>{for(let t=0;t<e.length;t++)e[t].destroy();e.length=0})}};S._frameIdGen=0,S=i=a([g],S),o.default=S,cc._RF.pop()},{"../basic/UtilArray":"UtilArray","../basic/UtilNode":"UtilNode","../basic/UtilObjPool":"UtilObjPool","../evter/MgrEvter":"MgrEvter","../global/Jiang":"Jiang","../res/MgrRes":"MgrRes","./MgrUI":"MgrUI","./UIMask":"UIMask","./UINodeInstHideRS":"UINodeInstHideRS","./UINodePrefabRecord":"UINodePrefabRecord","./UIRootTreeJson":"UIRootTreeJson","./UIViewComponent":"UIViewComponent"}],UIViewComponent:[function(e,t,o){"use strict";cc._RF.push(t,"e75deGz/o1Az4h7SqKu1jOr","UIViewComponent");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const a=e("../basic/UtilNode"),r=e("../basic/UtilObjPool"),s=e("../component/ComponentNodeEventer"),n=e("../component/PlayAnimationOnEnable"),l=e("../component/PlayAudioOnEnable"),{ccclass:c,property:d}=cc._decorator,u="UIViewComponent";let m=class extends cc.Component{constructor(){super(...arguments),this._msDisplayed=0,this._msDisplayedTemp=0,this._nodeToColorMap=r.default.Pop(r.default.typeMap,u),this._nodeToOpacityMap=r.default.Pop(r.default.typeMap,u),this._listState=r.default.Pop(r.default.typeArray,u),this._stateToSpeedMap=r.default.Pop(r.default.typeMap,u)}Record(){this._nodeEvterList=this.node.getComponentsInChildren(s.default),this._animOnEnable=this.node.getComponentsInChildren(n.default),this._audioOnEnable=this.node.getComponentsInChildren(l.default),a.default.WalkAllNode(this.node,e=>{let t=r.default.Pop(r.default.typeArray,u);t.push(e.color.r,e.color.g,e.color.b),this._nodeToColorMap.set(e,t),this._nodeToOpacityMap.set(e,e.opacity)}),this._listAnim=this.node.getComponentsInChildren(cc.Animation);for(let e=0;e<this._listAnim.length;e++){let t=this._listAnim[e].getClips();for(let e=0;e<t.length;e++){let o=t[e];this._stateToSpeedMap.set(o,o.speed)}}}SetGroup(e){this._nodeToColorMap.forEach((t,o)=>{o.isValid&&(o.groupIndex=e)})}BeGray(e=1){this._nodeToColorMap.forEach((t,o)=>{if(!o.isValid)return;let i=t[0]+t[1]+t[2];i/=3,i*=e;let a=r.default.PopCCColor(u,i,i,i,t[3]);r.default.Push(o.color),o.color=a})}BeColorFul(){this._nodeToColorMap.forEach((e,t)=>{if(!t.isValid)return;let o=r.default.PopCCColor(u,e[0],e[1],e[2],e[3]);r.default.Push(t.color),t.color=o})}AnimTimeScale(e){for(let t=0;t<this._listAnim.length;t++){let o=this._listAnim[t],i=o.getClips();for(let t=0;t<i.length;t++){let a=i[t];o.getAnimationState(a.name).speed=this._stateToSpeedMap.get(a)*e}}}OffAll(){this._nodeEvterList.forEach(e=>{e.isValid&&e.OffAll()})}};m=i([c],m),o.default=m,cc._RF.pop()},{"../basic/UtilNode":"UtilNode","../basic/UtilObjPool":"UtilObjPool","../component/ComponentNodeEventer":"ComponentNodeEventer","../component/PlayAnimationOnEnable":"PlayAnimationOnEnable","../component/PlayAudioOnEnable":"PlayAudioOnEnable"}],UtilArray:[function(e,t,o){"use strict";var i;cc._RF.push(t,"a3af9WEYx1MZq6Cv5zyM+vq","UtilArray"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){const t=new Set;e.RemRepeat=function(e){t.clear();for(let o=e.length-1;0<=o;o--){let i=e[o];t.has(i)?e.splice(o,1):t.add(i)}}}(i||(i={})),o.default=i,cc._RF.pop()},{}],UtilCollection:[function(e,t,o){"use strict";var i;cc._RF.push(t,"55caaCnz8ZP0YdaveWOXhne","UtilCollection"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.Random=function(e){return e[Math.floor(Math.random()*e.length)]},e.AllMatch=function(e,t){if(null==e&&null==t)return!0;if(null==e&&null!=t)return!1;if(null!=e&&null==t)return!1;if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!=t[o])return!1;return!0},e.CloneSet=function(e,t){return e.forEach(e=>{t.add(e)}),t},e.GetMapCollection=function(e,t){return e.forEach(e=>{t.push(e)}),t},e.GetSetCollection=function(e,t){return e.forEach(e=>{t.push(e)}),t},e.GetCollSet=function(e,t){return e.forEach(e=>{t.add(e)}),t}}(i||(i={})),o.default=i,cc._RF.pop()},{}],UtilMath:[function(e,t,o){"use strict";var i;cc._RF.push(t,"e24fedBqyNFs6jtqj3+dXfx","UtilMath"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){function t(){return 2*(Math.random()-.5)}function o(e){let t=0,o=1;for(;o<=e;)o*=10,t++;return t}e.RandomLowerToUpper=t,e.RandomLowerToUpperSqrt=function(){let e=t();return e/Math.abs(e)},e.Clamp=function(e,t,o){return o<t?e:e<t?t:o<e?o:e},e.Mod=function(e,t){return e%=t,(e+=t)%t},e.Step=function(e,t){return e<t?1:0},e.Lerp=function(e,t,o){return(1-o)*e+o*t},e.Close=function(e,t,o){return Math.abs(e-t)<=o?t:e<t?e+o:t<e?e-o:t},e.Normalize=function(e){return 0<e?1:e<0?-1:0},e.GetNumIdxCount=o,e.ParseNumToKMBTAABB=function(t,i){let a,r=o(t);for(let o=0;o<e.listParseNumToKMBTAABBStruct.length;o++){let t=e.listParseNumToKMBTAABBStruct[o];if(!(t.idxCountBorder<=r))break;a=t}if(null==a)return`${i(t)}`;let s=o(t/a.count);return e.COUNT_E_BORDER<s?`${i(t/Math.pow(10,r-e.COUNT_E_KEEP))}E${r-e.COUNT_E_KEEP}`:`${i(t/a.count)}${a.name}`},e.COUNT_E_BORDER=5,e.COUNT_E_KEEP=3,e.COUNT_NUM_KEEP=3,e.listParseNumToKMBTAABBStruct=[{name:"K",num:3,count:null,idxCountBorder:null},{name:"M",num:6,count:null,idxCountBorder:null},{name:"B",num:9,count:null,idxCountBorder:null},{name:"T",num:12,count:null,idxCountBorder:null}]}(i||(i={}));for(let a=0;a<i.listParseNumToKMBTAABBStruct.length;a++){let e=i.listParseNumToKMBTAABBStruct[a];e.count=Math.pow(10,e.num),e.idxCountBorder=i.COUNT_NUM_KEEP+e.num}o.default=i,cc._RF.pop()},{}],UtilNode:[function(e,t,o){"use strict";cc._RF.push(t,"199f6oYG2VKAbeBSTDiqMZA","UtilNode"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool");var a;(function(e){function t(e,o){o(e);for(let i=0;i<e.children.length;i++)t(e.children[i],o)}e.GetPath=function(e){let t=i.default.Pop(i.default.typeArray,"utilNode");for(;null!=e;)t.push(e.name),e=e.parent;return t.reverse(),t.join("/")},e.WalkAllNode=t,e.SetGroup=function(e,o){t(e,e=>{e.groupIndex=o})}})(a||(a={})),o.default=a,cc._RF.pop()},{"./UtilObjPool":"UtilObjPool"}],UtilObjPoolType:[function(e,t,o){"use strict";cc._RF.push(t,"59f23rfsP9PJbLchHma9dCB","UtilObjPoolType"),Object.defineProperty(o,"__esModule",{value:!0});class i{constructor(e){this._coll=new Array,this.instantiatedCount=0,this.instantiate=e.instantiate,this.onPop=e.onPop,this.onPush=e.onPush,this.tag=e.tag,i.mapTagToPoolType.has(e.tag)&&console.error(`tag \u51b2\u7a81 [${e.tag}]`),i.mapTagToPoolType.set(e.tag,this)}}(function(e){e.mapTagToPoolType=new Map})(i||(i={})),o.default=i,cc._RF.pop()},{}],UtilObjPool:[function(e,t,o){"use strict";cc._RF.push(t,"2cae0ikdShPzLFTYBIgzzyz","UtilObjPool"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../box2d_ts/Box2D"),a=e("./UtilObjPoolType"),r=Symbol("UtilObjPool.Pop.Type"),s=Symbol("UtilObjPool.Pop.App");var n;(function(e){function t(t,o){if(null==t||null==o)return null;let i;return e.mapAppRefCount.has(o)||e.mapAppRefCount.set(o,new Map),e.mapAppRefCount.get(o).has(t)||e.mapAppRefCount.get(o).set(t,0),e.mapAppRefCount.get(o).set(t,e.mapAppRefCount.get(o).get(t)+1),0==t._coll.length?(i=t.instantiate(),t.instantiatedCount++,i[r]=t):i=t._coll.pop(),i[s]=o,t.onPop(i),i}e.mapAppRefCount=new Map,e.Pop=t,e.Push=function(t){if(null==t)return;let o=t[r];if(null==o)return;let i=t[s];null!=i&&(t[s]=null,e.mapAppRefCount.has(i)||e.mapAppRefCount.set(i,new Map),e.mapAppRefCount.get(i).has(o)||e.mapAppRefCount.get(i).set(o,0),e.mapAppRefCount.get(i).set(o,e.mapAppRefCount.get(i).get(o)-1),o._coll.push(t),o.onPush(t))},e.typeccVec2=new a.default({instantiate:()=>new cc.Vec2,onPop:()=>{},onPush:e=>{e.x=0,e.y=0},tag:"cc.Vec2"}),e.typeB2Vec2=new a.default({instantiate:()=>new i.b2Vec2,onPop:()=>{},onPush:e=>{e.x=0,e.y=0},tag:"b2Vec2"}),e.typeB2Vec3=new a.default({instantiate:()=>new i.b2Vec3,onPop:()=>{},onPush:()=>{},tag:"b2Vec3"}),e.typeB2Mat33=new a.default({instantiate:()=>new i.b2Mat33,onPop:()=>{},onPush:()=>{},tag:"b2Mat33"}),e.typeArray=new a.default({instantiate:()=>new Array,onPop:()=>{},onPush:e=>{e.length=0},tag:"Array"}),e.typeMap=new a.default({instantiate:()=>new Map,onPop:()=>{},onPush:e=>{e.clear()},tag:"Map"}),e.typeSet=new a.default({instantiate:()=>new Set,onPop:()=>{},onPush:e=>{e.clear()},tag:"Set"}),e.typeB2WorldManifold=new a.default({instantiate:()=>new i.b2WorldManifold,onPop:()=>{},onPush:()=>{},tag:"b2WorldManifold"}),e.typeBodyDef=new a.default({instantiate:()=>new i.b2BodyDef,onPop:()=>{},onPush:e=>{e.type=i.b2BodyType.b2_staticBody,e.position.x=0,e.position.y=0},tag:"b2BodyDef"}),e.typeFixtureDef=new a.default({instantiate:()=>new i.b2FixtureDef,onPop:()=>{},onPush:e=>{e.shape=null},tag:"b2FixtureDef"}),e.typeCircleShape=new a.default({instantiate:()=>new i.b2CircleShape,onPop:()=>{},onPush:()=>{},tag:"b2CircleShape"}),e.typePolygonShape=new a.default({instantiate:()=>new i.b2PolygonShape,onPop:()=>{},onPush:()=>{},tag:"b2PolygonShape"}),e.typeB2MouseJointDef=new a.default({instantiate:()=>new i.b2MouseJointDef,onPop:()=>{},onPush:()=>{},tag:"b2MouseJointDef"}),e.typeB2EdgeShape=new a.default({instantiate:()=>new i.b2EdgeShape,onPop:()=>{},onPush:()=>{},tag:"b2EdgeShape"}),e.typeCCSpriteFrame=new a.default({instantiate:()=>new cc.SpriteFrame,onPop:()=>{},onPush:()=>{},tag:"cc.SpriteFrame"});const o=new a.default({instantiate:()=>new cc.Color,onPop:()=>{},onPush:()=>{},tag:"cc.Color"});e.PopCCColor=function(e,i,a,r,s){let n=t(o,e);return n.r=i,n.g=a,n.b=r,n.a=s,n},e.PopPromise=function(e,t){return new Promise(t)},e.PopB2World=function(e,t){return new i.b2World({x:e,y:t})}})(n||(n={})),o.default=n,cc._RF.pop()},{"../../../box2d_ts/Box2D":"Box2D","./UtilObjPoolType":"UtilObjPoolType"}],UtilString:[function(e,t,o){"use strict";cc._RF.push(t,"fb0433xQtlLd6wkvBt5l8lC","UtilString"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./UtilObjPool"),a="null",r="undefined",s="NaN",n="",l="utilString";var c;(function(e){function t(e){switch(e=e.toLowerCase()){case"a":return 10;case"b":return 11;case"c":return 12;case"d":return 13;case"e":return 14;case"f":return 15;default:return Number.parseFloat(e)}}function o(e){return null==e||e==n||e==a||e==r||e==s}e.KeepLen=function(e,t,o){let i=e.split("");for(;i.length<t;)i.unshift(o);return i.join("")},e.ParseSharpStrToCCColor=function(e){let o=(e=e.replace("#","")).split("");return new cc.Color(16*t(o[0])+t(o[1]),16*t(o[2])+t(o[3]),16*t(o[4])+t(o[5]),16*t(o[6])+t(o[7]))},e.CheckIsNullOrEmpty=o,e.ParseStrToCCColor=function(t){if(e.CheckIsNullOrEmpty(t))return i.default.PopCCColor(l,255,255,255,255);let o=t.split(",");return i.default.PopCCColor(l,Number.parseFloat(o[0]),Number.parseFloat(o[1]),Number.parseFloat(o[2]),Number.parseFloat(o[3]))},e.ParseStrToNum=function(e){return o(e)?0:Number.parseFloat(e)},e.ParseStrToListNum=function(t){return e.CheckIsNullOrEmpty(t)?i.default.Pop(i.default.typeArray,l):(t=(t=(t=t.replace(/\[/g,"")).replace(/\]/g,"")).replace(/\uff0c/g,"")).split(",").map(e=>Number.parseInt(e))}})(c||(c={})),o.default=c,cc._RF.pop()},{"./UtilObjPool":"UtilObjPool"}],VideoCertainViewState:[function(e,t,o){"use strict";cc._RF.push(t,"f66afiAcB5BKKmEsK5Kee77","VideoCertainViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/BCPromiseCtrl"),r=e("../../../frame/basic/UtilObjPool"),s=e("../../../frame/basic/UtilObjPoolType"),n=e("../../../frame/global/Jiang"),l=e("../../../frame/ui/ViewState"),c=e("../../GameCommon"),d=e("../voice_ogg/VoiceOggViewState"),u="VideoCertainViewState";class m extends l.default{constructor(){super(i.default.GAME,l.default.BG_TYPE.MASK,!0),this.ctrl=a.default.Pop(u)}static Pop(e,t){let o=r.default.Pop(m._t,e);return o.title=t,o}OnMaskTouch(){d.default.inst.VoiceSet(c.default.BTN_VOICE),this.OnNo()}OnYes(){n.default.mgrSdk.core.WXVideo().then(e=>{e.isRewardAble&&(n.default.mgrUI.Close(this._idView),this.ctrl.resolve(!0))})}OnNo(){n.default.mgrUI.Close(this._idView),this.ctrl.resolve(!1)}}o.default=m,m._t=new s.default({instantiate:()=>new m,onPop:()=>{},onPush:()=>{},tag:u}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],VideoCertainView:[function(e,t,o){"use strict";cc._RF.push(t,"0405bqIENNDfriqYYuE1pj5","VideoCertainView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/ui/UINodeInstEnterRS"),c=e("../../../frame/ui/UINodeInstHideRS"),d=e("../../../frame/ui/UINodeType"),u=e("../../../frame/ui/UIViewComponent"),m=e("../../GameCommon"),p=e("../voice_ogg/VoiceOggViewState"),{ccclass:h,property:f}=cc._decorator,y="VideoCertainView";let _=i=class extends u.default{constructor(){super(...arguments),this.btnYes=null,this.btnNo=null,this.txtTitle=null}};_.nodeType=d.default.Pop(y,{prefabPath:`${m.default.SUB_MAIN}/prefab_ui/video_certain_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[d.default.ModuleStyle.Pop(y,{listRefModule:[r.default.DEFAULT],propsFilter:(e,t)=>{e.btnYes.evterTouchStart.On(()=>{p.default.inst.VoiceSet(m.default.BTN_VOICE)}),e.btnYes.evterTouchEnd.On(()=>{t.OnYes()}),e.btnNo.evterTouchStart.On(()=>{p.default.inst.VoiceSet(m.default.BTN_VOICE)}),e.btnNo.evterTouchEnd.On(()=>{t.OnNo()}),e.txtTitle.string=t.title}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:c.default.setParentNull,enterRS:l.default.scaleInForTemp200}),a([f(n.default)],_.prototype,"btnYes",void 0),a([f(n.default)],_.prototype,"btnNo",void 0),a([f(cc.Label)],_.prototype,"txtTitle",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],VideoRelifeViewState:[function(e,t,o){"use strict";cc._RF.push(t,"d8b33x62NVD6qLKvWnsUUJo","VideoRelifeViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexLayer"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/global/Jiang"),n=e("../../../frame/ui/ViewState"),l=e("../../GameCommon"),c=e("../../game_element/body/DefineVoice"),d=e("../../game_element/body/GameElementBody"),u=e("../../game_element/body/GameElementBodyCtxDmg"),m=e("../../game_element/body/GameElementBodyCtxDmgType"),p=e("../../game_element/common/GameElementEff"),h=e("../../game_element/equipment/EquipmentInstRS"),f=e("../voice_ogg/VoiceOggViewState"),y="VideoRelifeViewState";class _ extends n.default{constructor(){super(i.default.GAME,n.default.BG_TYPE.MASK,!0)}static Pop(e,t){let o=a.default.Pop(_._t,e);return o.playOrdinary=t,o}OnMaskTouch(){f.default.inst.VoiceSet(l.default.BTN_VOICE),this.OnNo()}OnYes(){s.default.mgrSdk.core.WXVideo().then(e=>{if(e){this.playOrdinary.Enter(this.playOrdinary.statusPlaying);let e=this.playOrdinary.gameState.player.commonBehaviour;e.playerMgrHealth.machine.relMgrHealth.relNpc.relBody.commonHpCurrent+=1,e.playerMgrHealth.machine.Enter(e.playerMgrHealth.machine.statusHurted),s.default.mgrUI.Close(this._idView),p.default.PopForXYBind(y,e.relBody.commonCenterPos.x,e.relBody.commonCenterPos.y,0,1,10003,cc.Color.WHITE,this.playOrdinary.gameState.player),f.default.inst.VoiceSet(c.default.CLEAR_SCREEN);let t=this.playOrdinary.gameState.GetTypeAllEle(d.default),o=a.default.Pop(a.default.typeArray,y);o.push(...t);for(let i=0;i<o.length;i++){let t=o[i];t.isValid&&t.commonArgsCamp!=l.default.FRIENDLY_CAMP&&t.commonEvterDmg.Call(u.default.Pop(y,{dmg:h.default.GetSingleDmgByPower(l.default.STANDARD_EQUIP,e.playerMgrEquipment.equipInst.power),posX:t.commonCenterPos.x,posY:t.commonCenterPos.y,repel:2*h.default.GetSingleRepel(l.default.STANDARD_EQUIP),norX:1,norY:1,type:m.default.shield}))}}})}OnNo(){this.playOrdinary.Enter(this.playOrdinary.statusFailed),s.default.mgrUI.Close(this._idView)}OnDisplay(){f.default.inst.VoiceSet(c.default.FAIL_1)}}o.default=_,_._t=new r.default({instantiate:()=>new _,onPop:()=>{},onPush:()=>{},tag:y}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","../../GameCommon":"GameCommon","../../game_element/body/DefineVoice":"DefineVoice","../../game_element/body/GameElementBody":"GameElementBody","../../game_element/body/GameElementBodyCtxDmg":"GameElementBodyCtxDmg","../../game_element/body/GameElementBodyCtxDmgType":"GameElementBodyCtxDmgType","../../game_element/common/GameElementEff":"GameElementEff","../../game_element/equipment/EquipmentInstRS":"EquipmentInstRS","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],VideoRelifeView:[function(e,t,o){"use strict";cc._RF.push(t,"0f31aF5VE9Mk7oNw7W4o4dd","VideoRelifeView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../IndexDataModule"),s=e("../../../frame/basic/BCType"),n=e("../../../frame/component/ComponentNodeEventer"),l=e("../../../frame/config/src/CfgScene"),c=e("../../../frame/global/Jiang"),d=e("../../../frame/ui/UINodeInstEnterRS"),u=e("../../../frame/ui/UINodeInstHideRS"),m=e("../../../frame/ui/UINodeType"),p=e("../../../frame/ui/UIViewComponent"),h=e("../../GameCommon"),f=e("../../cfg_cache/CfgCacheScene"),y=e("../../play_ordinary/PlayOrdinaryRS"),_=e("../voice_ogg/VoiceOggViewState"),{ccclass:g,property:b}=cc._decorator,S="VideoRelifeView";let P=i=class extends p.default{constructor(){super(...arguments),this.btnYes=null,this.btnNo=null,this.listNodeDark=[]}};P.nodeType=m.default.Pop(S,{prefabPath:`${h.default.SUB_MAIN}/prefab_ui/video_relife_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[m.default.ModuleStyle.Pop(S,{listRefModule:[r.default.DEFAULT],propsFilter:(e,t)=>{e.btnYes.evterTouchStart.On(()=>{_.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.btnYes.evterTouchEnd.On(()=>{t.OnYes()}),e.btnNo.evterTouchStart.On(()=>{_.default.inst.VoiceSet(h.default.BTN_VOICE)}),e.btnNo.evterTouchEnd.On(()=>{t.OnNo()});let o=y.default.GetRS(t.playOrdinary.idCfgLev),i=c.default.mgrCfg.cfgScene.select(l.default.idGetter,o.getterSceneId(t.playOrdinary.idCfgLev))._list[0],a=f.default.GetCache(i);for(let r=0;r<e.listNodeDark.length;r++)e.listNodeDark[r].color=a.colorDark}})],childrenCreator:[],propsType:s.default.typeNumber,hideRS:u.default.setParentNull,enterRS:d.default.scaleInForTemp200}),a([b(n.default)],P.prototype,"btnYes",void 0),a([b(n.default)],P.prototype,"btnNo",void 0),a([b([cc.Node])],P.prototype,"listNodeDark",void 0),P=i=a([g],P),o.default=P,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/config/src/CfgScene":"CfgScene","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","../../cfg_cache/CfgCacheScene":"CfgCacheScene","../../play_ordinary/PlayOrdinaryRS":"PlayOrdinaryRS","../voice_ogg/VoiceOggViewState":"VoiceOggViewState"}],VideoStatusRS:[function(e,t,o){"use strict";cc._RF.push(t,"394f2uIIotCkLNzycJavnkP","VideoStatusRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../IndexBuildConfig"),a=e("../frame/basic/UtilObjPool");class r{constructor(e){this.enable=e.enable,r.mapStatusToRS.set(e.enable,this)}}(function(e){e.mapStatusToRS=a.default.Pop(a.default.typeMap,"VideoStatusRS"),e.enable=new e({enable:!0}),e.disable=new e({enable:!1}),e.Current=function(){return e.mapStatusToRS.get(i.default.VIDEO_ENABLE)}})(r||(r={})),o.default=r,cc._RF.pop()},{"../IndexBuildConfig":"IndexBuildConfig","../frame/basic/UtilObjPool":"UtilObjPool"}],ViewState:[function(e,t,o){"use strict";cc._RF.push(t,"14d98zJJ7lDupRRN6jAjE8n","ViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../basic/BCEventer"),a="ViewState";class r{constructor(e,t,o){this._evterInit=i.default.Pop(a),this._evterDestory=i.default.Pop(a),this._displayed=!1,this._layer=e,this._bgStatus=t,this._isCloseAble=o,this._evterInit.On(()=>{this.OnInit()}),this._evterDestory.On(()=>{this.OnDestory()})}Init(e){this._idView=e,this._evterInit.Call(null)}OnInit(){}OnChange(e){}OnMaskTouch(){}OnDestory(){}OnDisplay(){}}(function(e){let t;(function(e){e[e.NONE=0]="NONE",e[e.SELF=1]="SELF",e[e.MASK=2]="MASK"})(t=e.BG_TYPE||(e.BG_TYPE={}))})(r||(r={})),o.default=r,cc._RF.pop()},{"../basic/BCEventer":"BCEventer"}],VoiceOggInfoStatusDisplaying:[function(e,t,o){"use strict";cc._RF.push(t,"179dfUw0AtIl7zy7i2c5DEL","VoiceOggInfoStatusDisplaying"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/global/Jiang"),a=e("./VoiceOggInfoStatus");o.default=class extends a.default{OnPush(){i.default.mgrSdk.core.AudioStop(this.relMachine.idVoice)}OnVolumeChange(){i.default.mgrSdk.core.AudioVolume(this.relMachine.idVoice,this.relMachine.typeRS.getterVolume())}},cc._RF.pop()},{"../../../frame/global/Jiang":"Jiang","./VoiceOggInfoStatus":"VoiceOggInfoStatus"}],VoiceOggInfoStatusWaitDisplay:[function(e,t,o){"use strict";cc._RF.push(t,"a0b488f8ypNepvfrP/afVkD","VoiceOggInfoStatusWaitDisplay"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/global/Jiang"),a=e("./VoiceOggInfoStatus");o.default=class extends a.default{OnDisplay(){this.relMachine.idVoice=i.default.mgrSdk.core.AudioPlay(this.relMachine.com.as.clip,this.relMachine.typeRS.isLoop,this.relMachine.typeRS.getterVolume()),this.relMachine.Enter(this.relMachine.statusDisplaying)}},cc._RF.pop()},{"../../../frame/global/Jiang":"Jiang","./VoiceOggInfoStatus":"VoiceOggInfoStatus"}],VoiceOggInfoStatus:[function(e,t,o){"use strict";cc._RF.push(t,"7206bu1rbZAr4B5IEQfrQlx","VoiceOggInfoStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e,t){this.name=e,this.relMachine=t}OnEnter(){}OnExit(){}OnPop(){}OnPush(){}OnDisplay(){}OnVolumeChange(){}OnStep(e){}},cc._RF.pop()},{}],VoiceOggInfo:[function(e,t,o){"use strict";cc._RF.push(t,"69fd6mw5tJOkKZd1KRZ27ml","VoiceOggInfo"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("./VoiceOggInfoStatusDisplaying"),s=e("./VoiceOggInfoStatusWaitDisplay");class n{constructor(){this.statusWaitDisplay=new s.default("statusWaitDisplay",this),this.statusDisplaying=new r.default("statusDisplaying",this)}static Pop(e,t,o,a){let r=i.default.Pop(n._t,e);return r.genId=t,r.cfgId=o,r.typeRS=a,r.lifeCount=0,r.lifeMax=-1,r.Enter(r.statusWaitDisplay),r.currStatus.OnPop(),r}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:e=>{e.currStatus.OnPush()},tag:"VoiceInfo"}),cc._RF.pop()},{"../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","./VoiceOggInfoStatusDisplaying":"VoiceOggInfoStatusDisplaying","./VoiceOggInfoStatusWaitDisplay":"VoiceOggInfoStatusWaitDisplay"}],VoiceOggTypeRS:[function(e,t,o){"use strict";cc._RF.push(t,"3881f8R+w1FV6OZdG2cmeTb","VoiceOggTypeRS"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexStorageItem"),a=e("../../../frame/global/Jiang");class r{constructor(e){this.name=e.name,this.isLoop=e.isLoop,this.getterVolume=e.getterVolume}}(function(e){e.bgm=new e({name:"bgm",isLoop:!0,getterVolume:()=>a.default.mgrData.Get(i.default.volumeMusic)}),e.voice=new e({name:"voice",isLoop:!1,getterVolume:()=>a.default.mgrData.Get(i.default.volumeVoice)})})(r||(r={})),o.default=r,cc._RF.pop()},{"../../../IndexStorageItem":"IndexStorageItem","../../../frame/global/Jiang":"Jiang"}],VoiceOggViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"4f723QmIZhO+Z7Yf3oAHm3f","VoiceOggViewItem");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/basic/UtilObjPool"),n=e("../../../frame/config/src/CfgVoiceOgg"),l=e("../../../frame/global/Jiang"),c=e("../../../frame/ui/UINodeInstEnterRS"),d=e("../../../frame/ui/UINodeInstHideRS"),u=e("../../../frame/ui/UINodeType"),m=e("../../../frame/ui/UIViewComponent"),p=e("../../../IndexDataModule"),{ccclass:h,property:f}=cc._decorator,y="VoiceOggViewItem";let _=i=class extends m.default{constructor(){super(...arguments),this.as=null}static GetByCfgId(e){if(!this.cacheMap.has(e)){let t=l.default.mgrCfg.cfgVoiceOgg.select(n.default.idGetter,e)._list[0],o=u.default.Pop(y,{prefabPath:t.res,componentGetter:e=>e.getComponent(i),listModuleStyle:[u.default.ModuleStyle.Pop(y,{listRefModule:[p.default.DEFAULT,p.default.VOICE_OGG_VIEW],propsFilter:(e,t,o)=>{let i=t.GetRec(o);i.typeRS.isLoop?i.lifeMax=-1:i.lifeMax=1e3*e.as.getDuration(),i.com=e,i.currStatus.OnDisplay()}})],childrenCreator:[],propsType:r.default.typeNumber,hideRS:d.default.setParentNull,enterRS:c.default.none});this.cacheMap.set(e,o)}return this.cacheMap.get(e)}};_.cacheMap=s.default.Pop(s.default.typeMap,y),a([f(cc.AudioSource)],_.prototype,"as",void 0),_=i=a([h],_),o.default=_,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/config/src/CfgVoiceOgg":"CfgVoiceOgg","../../../frame/global/Jiang":"Jiang","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent"}],VoiceOggViewState:[function(e,t,o){"use strict";cc._RF.push(t,"8a892CmPZFDU6FtRhwf2YOc","VoiceOggViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/UtilObjPool"),a=e("../../../frame/basic/UtilObjPoolType"),r=e("../../../frame/global/Jiang"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexDataModule"),l=e("../../../IndexLayer"),c=e("../../../IndexStorageItem"),d=e("./VoiceOggInfo"),u=e("./VoiceOggTypeRS"),m=e("./VoiceOggVolumeStatusIdle"),p=e("./VoiceOggVolumeStatusCD"),h="VoiceOggViewState";class f extends s.default{constructor(){super(l.default.SYSTEM,s.default.BG_TYPE.NONE,!1),this._genId=0,this._mapIdToRec=i.default.Pop(i.default.typeMap,h),this.infoList=i.default.Pop(i.default.typeArray,h),this.voiceList=i.default.Pop(i.default.typeArray,h),this.statusIdle=new m.default(this),this.statusCD=new p.default(this),this.Enter(this.statusIdle),f.inst=this}static Pop(e){let t=i.default.Pop(f._t,e);return r.default.mgrEvter.evterUpdate.On(e=>{t.currStatus.OnStep(e);for(let o=t.infoList.length-1;0<=o;o--)t.infoList[o].currStatus.OnStep(e);for(let o=t.infoList.length-1;0<=o;o--){let i=t.infoList[o];i.lifeCount+=e,-1!=i.lifeMax&&(i.lifeCount<i.lifeMax||t.Recovery(o))}for(let o=t.voiceList.length-1;0<=o;o--){let e=t.voiceList[o];t._mapIdToRec.has(e)||t.voiceList.splice(o,1)}}),t}ApplyOgg(e,t){let o=++this._genId,i=d.default.Pop(h,o,e,t);return this.infoList.push(i),this._mapIdToRec.set(i.genId,i),r.default.mgrUI.ModuleRefresh(n.default.RELOAD),o}CancelOgg(e){let t=-1;for(let o=0;o<this.infoList.length;o++)this.infoList[o].genId==e&&(t=o);t<0||this.Recovery(t)}GetRec(e){return this._mapIdToRec.get(e)}Recovery(e){let t=this.infoList[e];this.infoList.splice(e,1),this._mapIdToRec.delete(t.genId),i.default.Push(t),r.default.mgrUI.ModuleRefresh(n.default.RELOAD)}VoiceSet(e){if(null==e||0==e)return;let t=this.ApplyOgg(e,u.default.voice);this.GetRec(t).volumeSetting=r.default.mgrData.Get(c.default.volumeVoice),this.voiceList.push(t)}BgmSet(e){let t=this.GetRec(this.bgmAppId);t&&t.cfgId==e||(this.CancelOgg(this.bgmAppId),this.bgmAppId=this.ApplyOgg(e,u.default.bgm),this.GetRec(this.bgmAppId).volumeSetting=r.default.mgrData.Get(c.default.volumeMusic))}ResetBgm(){let e=this.GetRec(this.bgmAppId).cfgId;this.CancelOgg(this.bgmAppId),this.BgmSet(e)}OnChange(e){e==n.default.VOLUME_CHANGE&&this.currStatus.OnVolumeChange()}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}f._t=new a.default({instantiate:()=>new f,onPop:()=>{},onPush:()=>{},tag:h}),o.default=f,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../IndexLayer":"IndexLayer","../../../IndexStorageItem":"IndexStorageItem","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/global/Jiang":"Jiang","../../../frame/ui/ViewState":"ViewState","./VoiceOggInfo":"VoiceOggInfo","./VoiceOggTypeRS":"VoiceOggTypeRS","./VoiceOggVolumeStatusCD":"VoiceOggVolumeStatusCD","./VoiceOggVolumeStatusIdle":"VoiceOggVolumeStatusIdle"}],VoiceOggView:[function(e,t,o){"use strict";cc._RF.push(t,"df187uUymNDJbakfvi+xPuJ","VoiceOggView");var i,a=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../frame/basic/BCType"),s=e("../../../frame/ui/UINodeInstEnterRS"),n=e("../../../frame/ui/UINodeInstHideRS"),l=e("../../../frame/ui/UINodeType"),c=e("../../../frame/ui/UIViewComponent"),d=e("../../../IndexDataModule"),u=e("../../GameCommon"),m=e("./VoiceOggViewItem"),{ccclass:p,property:h}=cc._decorator,f="VoiceOggView";let y=i=class extends c.default{};y.nodeType=l.default.Pop(f,{prefabPath:`${u.default.SUB_MAIN}/prefab_ui/voice_ogg_view`,componentGetter:e=>e.getComponent(i),listModuleStyle:[l.default.ModuleStyle.Pop(f,{listRefModule:[d.default.DEFAULT,d.default.VOICE_OGG_VIEW],propsFilter:()=>{}})],childrenCreator:[l.default.ChildrenGeneration.Pop(f,{containerGetter:e=>e.node,uiNodeCreator:(e,t,o)=>{for(let i=0;i<e.infoList.length;i++){let t=e.infoList[i];o.push(m.default.GetByCfgId(t.cfgId).CreateNode(e,t.genId,t.genId))}}})],propsType:r.default.typeNumber,hideRS:n.default.setParentNull,enterRS:s.default.none}),y=i=a([p],y),o.default=y,cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../frame/basic/BCType":"BCType","../../../frame/ui/UINodeInstEnterRS":"UINodeInstEnterRS","../../../frame/ui/UINodeInstHideRS":"UINodeInstHideRS","../../../frame/ui/UINodeType":"UINodeType","../../../frame/ui/UIViewComponent":"UIViewComponent","../../GameCommon":"GameCommon","./VoiceOggViewItem":"VoiceOggViewItem"}],VoiceOggVolumeStatusCD:[function(e,t,o){"use strict";cc._RF.push(t,"ba7a4wBA1hKqpizvL6oyh25","VoiceOggVolumeStatusCD"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./VoiceOggVolumeStatus");o.default=class extends i.default{OnEnter(){this.msWait=1e3,this.relMachine.Enter(this.relMachine.statusIdle)}OnStep(e){this.msWait-=e,this.msWait<=0&&this.relMachine.Enter(this.relMachine.statusIdle)}OnExit(){for(let t=0;t<this.relMachine.voiceList.length;t++){let e=this.relMachine.voiceList[t];this.relMachine.GetRec(e).currStatus.OnVolumeChange()}let e=this.relMachine.GetRec(this.relMachine.bgmAppId);e&&e.currStatus.OnVolumeChange()}},cc._RF.pop()},{"./VoiceOggVolumeStatus":"VoiceOggVolumeStatus"}],VoiceOggVolumeStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"0f761r6u79Pl5xpqmLUWw3b","VoiceOggVolumeStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./VoiceOggVolumeStatus");o.default=class extends i.default{OnVolumeChange(){this.relMachine.Enter(this.relMachine.statusCD)}},cc._RF.pop()},{"./VoiceOggVolumeStatus":"VoiceOggVolumeStatus"}],VoiceOggVolumeStatus:[function(e,t,o){"use strict";cc._RF.push(t,"55a5ezSDdpGwY+Iiu/F3Wm2","VoiceOggVolumeStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnStep(e){}OnVolumeChange(){}},cc._RF.pop()},{}],WXAudioStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"6e296jx98JIt4NxO71GHCPP","WXAudioStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXAudioStatus");o.default=class extends i.default{OnPlay(){this.relMachine.Enter(this.relMachine.statusPlaying)}},cc._RF.pop()},{"./WXAudioStatus":"WXAudioStatus"}],WXAudioStatusPlaying:[function(e,t,o){"use strict";cc._RF.push(t,"e50a2m4dwNBMaZLa09lj5hx","WXAudioStatusPlaying"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXAudioStatus");o.default=class extends i.default{OnEnter(){this.relMachine.ctx.loop=this.relMachine.loop,this.relMachine.ctx.volume=this.relMachine.volume,this.relMachine.ctx.play()}OnVolume(){this.relMachine.ctx.volume=this.relMachine.volume}OnStop(){this.relMachine.Enter(this.relMachine.statusIdle)}OnExit(){this.relMachine.ctx.stop()}},cc._RF.pop()},{"./WXAudioStatus":"WXAudioStatus"}],WXAudioStatus:[function(e,t,o){"use strict";cc._RF.push(t,"26072tqEsNPIK0utO15xEFZ","WXAudioStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnPlay(){}OnStop(){}OnVolume(){}},cc._RF.pop()},{}],WXAudio:[function(e,t,o){"use strict";cc._RF.push(t,"b3f62oEvCVHjZ1OiiTSHsHq","WXAudio"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrSdkCoreWX"),a=e("./WXAudioStatusIdle"),r=e("./WXAudioStatusPlaying");o.default=class{constructor(e){this.statusIdle=new a.default(this),this.statusPlaying=new r.default(this),this.Enter(this.statusIdle),this.src=e,this.ctx=i.default.wx.createInnerAudioContext({useWebAudioImplement:!0}),this.ctx.src=e}Enter(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}},cc._RF.pop()},{"./MgrSdkCoreWX":"MgrSdkCoreWX","./WXAudioStatusIdle":"WXAudioStatusIdle","./WXAudioStatusPlaying":"WXAudioStatusPlaying"}],WXImgLoaderStatusLoaded:[function(e,t,o){"use strict";cc._RF.push(t,"63b8fEYGBxBdrQb0dlVY0qr","WXImgLoaderStatusLoaded"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXImgLoaderStatus");o.default=class extends i.default{OnFill(e){e.spriteFrame=this.relMachine.sprf}},cc._RF.pop()},{"./WXImgLoaderStatus":"WXImgLoaderStatus"}],WXImgLoaderStatusLoading:[function(e,t,o){"use strict";cc._RF.push(t,"6ccefVUo+hLn6yBjjbHYHvb","WXImgLoaderStatusLoading"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("./MgrSdkCoreWX"),r=e("./WXImgLoaderStatus");o.default=class extends r.default{constructor(){super(...arguments),this.listSpr=i.default.Pop(i.default.typeArray,"WXImgLoaderStatusLoading")}OnEnter(){let e=a.default.wx.createImage();e.onload=()=>{let t=new cc.Texture2D;t.initWithElement(e),t.handleLoadedTexture(),this.relMachine.sprf=new cc.SpriteFrame(t),this.relMachine.EnterStatus(this.relMachine.statusLoaded);for(let e=0;e<this.listSpr.length;e++){let t=this.listSpr[e];this.relMachine.currStatus.OnFill(t)}this.listSpr.length=0},e.src=this.relMachine.url}OnFill(e){this.listSpr.push(e)}},cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","./MgrSdkCoreWX":"MgrSdkCoreWX","./WXImgLoaderStatus":"WXImgLoaderStatus"}],WXImgLoaderStatus:[function(e,t,o){"use strict";cc._RF.push(t,"41008oVWqhOaoKulA6EsarD","WXImgLoaderStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}OnFill(e){}},cc._RF.pop()},{}],WXImgLoader:[function(e,t,o){"use strict";cc._RF.push(t,"39a55auxyVEbqTjw13w5JDW","WXImgLoader"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../basic/UtilObjPool"),a=e("../../basic/UtilObjPoolType"),r=e("./WXImgLoaderStatusLoaded"),s=e("./WXImgLoaderStatusLoading");class n{constructor(){}static Pop(e,t){let o=i.default.Pop(n._t,e);return o.url=t,o.statusLoading=new s.default(o),o.statusLoaded=new r.default(o),o.EnterStatus(o.statusLoading),o}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}}o.default=n,n._t=new a.default({instantiate:()=>new n,onPop:()=>{},onPush:()=>{},tag:"WXImgLoader"}),cc._RF.pop()},{"../../basic/UtilObjPool":"UtilObjPool","../../basic/UtilObjPoolType":"UtilObjPoolType","./WXImgLoaderStatusLoaded":"WXImgLoaderStatusLoaded","./WXImgLoaderStatusLoading":"WXImgLoaderStatusLoading"}],WXLifeCycleStatusExitTips:[function(e,t,o){"use strict";cc._RF.push(t,"174fba44thN7I1e04evG4Wx","WXLifeCycleStatusExitTips"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../IndexDataModule"),a=e("../../../game/view/exit_view/ExitView"),r=e("../../../game/view/exit_view/ExitViewState"),s=e("../../global/Jiang"),n=e("./WXLifeCycleStatus");o.default=class extends n.default{constructor(){super(...arguments),this.msWait=5e3}OnEnter(){s.default.mgrUI.Open(a.default.nodeType,r.default.Pop("WXLifeCycleStatusExitTips")),this.idListenUpdate=s.default.mgrEvter.evterUpdate.On(e=>{this.msWait-=e,this.msWait=Math.max(this.msWait,0),s.default.mgrUI.ModuleRefresh(i.default.EXIT),0==this.msWait&&this.relMachine.EnterStatus(this.relMachine.statusExited)})}OnExit(){s.default.mgrEvter.evterUpdate.Off(this.idListenUpdate)}},cc._RF.pop()},{"../../../IndexDataModule":"IndexDataModule","../../../game/view/exit_view/ExitView":"ExitView","../../../game/view/exit_view/ExitViewState":"ExitViewState","../../global/Jiang":"Jiang","./WXLifeCycleStatus":"WXLifeCycleStatus"}],WXLifeCycleStatusExited:[function(e,t,o){"use strict";cc._RF.push(t,"a8493pRrdZImY3yVr0W3gUB","WXLifeCycleStatusExited"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrSdkCoreWX"),a=e("./WXLifeCycleStatus");o.default=class extends a.default{OnEnter(){i.default.wx.exitMiniProgram()}},cc._RF.pop()},{"./MgrSdkCoreWX":"MgrSdkCoreWX","./WXLifeCycleStatus":"WXLifeCycleStatus"}],WXLifeCycleStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"8e1ffZLOLJDWrARNIJQYlMK","WXLifeCycleStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXLifeCycleStatus");o.default=class extends i.default{OnAppQuit(){this.relMachine.EnterStatus(this.relMachine.statusExitTips)}},cc._RF.pop()},{"./WXLifeCycleStatus":"WXLifeCycleStatus"}],WXLifeCycleStatus:[function(e,t,o){"use strict";cc._RF.push(t,"bad0f+V3ClNdbjjsHdMPibv","WXLifeCycleStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e,t){this.name=e,this.relMachine=t}OnEnter(){}OnExit(){}OnAppQuit(){}},cc._RF.pop()},{}],WXLifeCycle:[function(e,t,o){"use strict";cc._RF.push(t,"188a5Oc6thJM770tvuon+yr","WXLifeCycle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXLifeCycleStatusExitTips"),a=e("./WXLifeCycleStatusExited"),r=e("./WXLifeCycleStatusIdle");o.default=class{constructor(e){this.relMgr=e.relMgr,this.statusIdle=new r.default("WXLifeCycleStatusIdle",this),this.statusExitTips=new i.default("WXLifeCycleStatusExitTips",this),this.statusExited=new a.default("WXLifeCycleStatusExited",this),this.EnterStatus(this.statusIdle)}EnterStatus(e){let t=this.currStatus;this.currStatus=e,t&&t.OnExit(),this.currStatus.OnEnter()}},cc._RF.pop()},{"./WXLifeCycleStatusExitTips":"WXLifeCycleStatusExitTips","./WXLifeCycleStatusExited":"WXLifeCycleStatusExited","./WXLifeCycleStatusIdle":"WXLifeCycleStatusIdle"}],WXVideoAdInstLoadStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"3c51fbdLaFIBYF7z/NCXG9u","WXVideoAdInstLoadStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXVideoAdInstLoadStatus");o.default=class extends i.default{},cc._RF.pop()},{"./WXVideoAdInstLoadStatus":"WXVideoAdInstLoadStatus"}],WXVideoAdInstLoadStatusLoading:[function(e,t,o){"use strict";cc._RF.push(t,"fcd43xWtkNGv5how8fuxP7Q","WXVideoAdInstLoadStatusLoading"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXVideoAdInstLoadStatus");o.default=class extends i.default{OnExit(){this.relMachine.relMgr.OnLoadExit()}LoadOnLoadSuccess(){this.relMachine.LoadEnterStatus(this.relMachine.loadStatusReady)}LoadOnLoadError(){this.relMachine.LoadEnterStatus(this.relMachine.loadStatusNone)}LoadOnPlayBreak(){this.relMachine.LoadEnterStatus(this.relMachine.loadStatusReady)}},cc._RF.pop()},{"./WXVideoAdInstLoadStatus":"WXVideoAdInstLoadStatus"}],WXVideoAdInstLoadStatusNone:[function(e,t,o){"use strict";cc._RF.push(t,"4b373Izz+9I7pHg79fEuX3B","WXVideoAdInstLoadStatusNone"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXVideoAdInstLoadStatus");o.default=class extends i.default{},cc._RF.pop()},{"./WXVideoAdInstLoadStatus":"WXVideoAdInstLoadStatus"}],WXVideoAdInstLoadStatusReady:[function(e,t,o){"use strict";cc._RF.push(t,"71d62jr4v1Pj5Y6VLWEwziq","WXVideoAdInstLoadStatusReady"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXVideoAdInstLoadStatus");o.default=class extends i.default{LoadOnPlay(){this.relMachine.LoadEnterStatus(this.relMachine.loadStatusLoading)}},cc._RF.pop()},{"./WXVideoAdInstLoadStatus":"WXVideoAdInstLoadStatus"}],WXVideoAdInstLoadStatus:[function(e,t,o){"use strict";cc._RF.push(t,"a12bcOeOdZPTI6WlHXPDq/U","WXVideoAdInstLoadStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}LoadOnLoadSuccess(){}LoadOnLoadError(e){}LoadOnPlay(){}LoadOnPlayBreak(){}},cc._RF.pop()},{}],WXVideoAdInstPlayStatusIdle:[function(e,t,o){"use strict";cc._RF.push(t,"e4472yVFfFJ7r6xa2qeJX6j","WXVideoAdInstPlayStatusIdle"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./WXVideoAdInstPlayStatus");o.default=class extends i.default{PlayOnPlay(){return this.relMachine.PlayEnterStatus(this.relMachine.playStatusPlaying),this.relMachine.loadCurrStatus.LoadOnPlay(),this.relMachine.playCurrStatus.PlayOnPlay()}},cc._RF.pop()},{"./WXVideoAdInstPlayStatus":"WXVideoAdInstPlayStatus"}],WXVideoAdInstPlayStatusPlaying:[function(e,t,o){"use strict";cc._RF.push(t,"09be1DMoqFIxrbAr3QdV1U4","WXVideoAdInstPlayStatusPlaying"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../game/view/voice_ogg/VoiceOggViewState"),a=e("../../basic/BCPromiseCtrl"),r=e("./WXVideoAdInstPlayStatus");o.default=class extends r.default{OnEnter(){this.ctrlPlay=a.default.Pop("WXVideoAdInstPlayStatusPlaying"),this.relMachine.video.show()}OnExit(){i.default.inst.ResetBgm()}PlayOnPlay(){return this.ctrlPlay._promise}PlayOnPlayAll(){this.relMachine.PlayEnterStatus(this.relMachine.playStatusIdle),this.ctrlPlay.resolve(!0)}PlayOnPlayBreak(){this.relMachine.PlayEnterStatus(this.relMachine.playStatusIdle),this.ctrlPlay.resolve(!1)}},cc._RF.pop()},{"../../../game/view/voice_ogg/VoiceOggViewState":"VoiceOggViewState","../../basic/BCPromiseCtrl":"BCPromiseCtrl","./WXVideoAdInstPlayStatus":"WXVideoAdInstPlayStatus"}],WXVideoAdInstPlayStatus:[function(e,t,o){"use strict";cc._RF.push(t,"ff4d5TyBxVKGoILpunP1hFx","WXVideoAdInstPlayStatus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(e){this.relMachine=e}OnEnter(){}OnExit(){}PlayOnPlay(){return Promise.resolve(!1)}PlayOnPlayAll(){}PlayOnPlayBreak(){}},cc._RF.pop()},{}],WXVideoAdInst:[function(e,t,o){"use strict";cc._RF.push(t,"b4c9f4B4sBMNKDqrrRYMB0L","WXVideoAdInst"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("./MgrSdkCoreWX"),a=e("./WXVideoAdInstLoadStatusIdle"),r=e("./WXVideoAdInstLoadStatusLoading"),s=e("./WXVideoAdInstLoadStatusNone"),n=e("./WXVideoAdInstLoadStatusReady"),l=e("./WXVideoAdInstPlayStatusIdle"),c=e("./WXVideoAdInstPlayStatusPlaying");o.default=class{constructor(e){this.isInited=!1,this.relMgr=e.relMgr,this.idAd=e.idAd,this.loadStatusIdle=new a.default(this),this.loadStatusLoading=new r.default(this),this.loadStatusNone=new s.default(this),this.loadStatusReady=new n.default(this),this.LoadEnterStatus(this.loadStatusIdle),this.playStatusIdle=new l.default(this),this.playStatusPlaying=new c.default(this),this.PlayEnterStatus(this.playStatusIdle)}LoadEnterStatus(e){let t=this.loadCurrStatus;this.loadCurrStatus=e,t&&t.OnExit(),this.loadCurrStatus.OnEnter()}PlayEnterStatus(e){let t=this.playCurrStatus;this.playCurrStatus=e,t&&t.OnExit(),this.playCurrStatus.OnEnter()}Init(){this.isInited||(this.isInited=!0,this.video=i.default.wx.createRewardedVideoAd({adUnitId:this.idAd,multiton:!0}),this.video.onLoad(()=>{this.loadCurrStatus.LoadOnLoadSuccess()}),this.video.onError(e=>{this.loadCurrStatus.LoadOnLoadError(e)}),this.video.onClose(e=>{e.isEnded?this.playCurrStatus.PlayOnPlayAll():(this.loadCurrStatus.LoadOnPlayBreak(),this.playCurrStatus.PlayOnPlayBreak())}),this.LoadEnterStatus(this.loadStatusLoading))}},cc._RF.pop()},{"./MgrSdkCoreWX":"MgrSdkCoreWX","./WXVideoAdInstLoadStatusIdle":"WXVideoAdInstLoadStatusIdle","./WXVideoAdInstLoadStatusLoading":"WXVideoAdInstLoadStatusLoading","./WXVideoAdInstLoadStatusNone":"WXVideoAdInstLoadStatusNone","./WXVideoAdInstLoadStatusReady":"WXVideoAdInstLoadStatusReady","./WXVideoAdInstPlayStatusIdle":"WXVideoAdInstPlayStatusIdle","./WXVideoAdInstPlayStatusPlaying":"WXVideoAdInstPlayStatusPlaying"}],WXVideoAd:[function(e,t,o){"use strict";cc._RF.push(t,"e20a7LkWx9ArIrAfJy4y7Zn","WXVideoAd"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../game/view/lock_view/LockViewState"),a=e("../../../game/view/tips_view/TipsViewState"),r=e("../../basic/BCPromiseCtrl"),s=e("../../basic/UtilObjPool"),n=e("../../evter/MgrEvter"),l=e("../../global/Jiang"),c=e("./WXVideoAdInst"),d="WXVideoAd";class u{constructor(e){this.listInst=s.default.Pop(s.default.typeArray,d),this.countAble=0,this.relMgr=e.relMgr;for(let t=0;t<u.listIdVideoAD.length;t++){let e=u.listIdVideoAD[t];this.listInst.push(new c.default({relMgr:this,idAd:e}))}}Play(){let e=i.default.inst.LockApp();return Promise.resolve().then(()=>{let e=r.default.Pop(d),t=()=>{for(let t=0;t<this.listInst.length;t++){let o=this.listInst[t];if(o.Init(),o.loadCurrStatus==o.loadStatusReady)return void e.resolve(o)}for(let t=0;t<this.listInst.length;t++){let o=this.listInst[t];if(o.loadCurrStatus==o.loadStatusLoading)return;e.resolve(null)}},o=n.default.inst.evterUpdate.On(t);return t(),e._promise.then(e=>(l.default.mgrEvter.evterUpdate.Off(o),e?e.playCurrStatus.PlayOnPlay().then(e=>(e||a.default.inst.Tip("\u672a\u5b8c\u6574\u5730\u89c2\u770b\u89c6\u9891"),{isRewardAble:e})):(a.default.inst.Tip("\u4eca\u65e5\u53ef\u89c2\u770b\u89c6\u9891\u6b21\u6570\u4e3a 0"),{isRewardAble:!1})))}).then(t=>(i.default.inst.LockCancel(e),t))}Init(){for(let e=0;e<this.listInst.length;e++)this.listInst[e]}OnLoadExit(){this.countAble=0;for(let t=0;t<this.listInst.length;t++){let e=this.listInst[t];e.loadCurrStatus==e.loadStatusReady&&this.countAble++}let e=!0;for(let t=0;t<this.listInst.length;t++){let o=this.listInst[t];if(o.loadCurrStatus==o.loadStatusLoading){e=!1;break}}e&&this.countAble!=this.listInst.length&&a.default.inst.Tip(`\u4eca\u65e5\u5269\u4f59\u7684\u89c6\u9891\u89c2\u770b\u91cf ${this.countAble}`)}}(function(e){e.ad6_60=["adunit-ca11389b6aa435d3","adunit-ea217dcf7143fd1a","adunit-4a17a75177984fb9"],e.ad6_30=["adunit-c9e476add0168ff7","adunit-84c65dc18eecb21d","adunit-38ed46e0d6839145"],e.ad6_15=["adunit-820eb549f23b7c8a","adunit-09190278ae2544f5","adunit-20997fc973b96124"],e.listIdVideoAD=[...e.ad6_60]})(u||(u={})),o.default=u,cc._RF.pop()},{"../../../game/view/lock_view/LockViewState":"LockViewState","../../../game/view/tips_view/TipsViewState":"TipsViewState","../../basic/BCPromiseCtrl":"BCPromiseCtrl","../../basic/UtilObjPool":"UtilObjPool","../../evter/MgrEvter":"MgrEvter","../../global/Jiang":"Jiang","./WXVideoAdInst":"WXVideoAdInst"}],YesViewState:[function(e,t,o){"use strict";cc._RF.push(t,"56d51ZYjPlAfpuv0Fm2E0R0","YesViewState"),Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../frame/basic/BCPromiseCtrl"),a=e("../../../frame/basic/UtilObjPool"),r=e("../../../frame/basic/UtilObjPoolType"),s=e("../../../frame/ui/ViewState"),n=e("../../../IndexLayer"),l="YesViewState";class c extends s.default{constructor(){super(n.default.GAME,s.default.BG_TYPE.MASK,!0),this.ctrl=i.default.Pop(l)}static Pop(e,t){let o=a.default.Pop(c._t,e);return o.txt=t,o}}o.default=c,c._t=new r.default({instantiate:()=>new c,onPop:()=>{},onPush:()=>{},tag:l}),cc._RF.pop()},{"../../../IndexLayer":"IndexLayer","../../../frame/basic/BCPromiseCtrl":"BCPromiseCtrl","../../../frame/basic/UtilObjPool":"UtilObjPool","../../../frame/basic/UtilObjPoolType":"UtilObjPoolType","../../../frame/ui/ViewState":"ViewState"}],YesView:[function(e,t,o){"use strict";cc._RF.push(t,"a7593Qk7jVOlqxAt/mOQf8T","YesView");var i=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const a=e("../../../frame/component/ComponentNodeEventer"),r=e("../../../frame/ui/UIViewComponent"),s=e("./YesViewState"),{ccclass:n,property:l}=cc._decorator;let c=class extends r.default{constructor(){super(...arguments),this.txt=null,this.btnYes=null}static Certain(e){return s.default.Pop("YesView",e).ctrl._promise}};i([l(cc.Label)],c.prototype,"txt",void 0),i([l(a.default)],c.prototype,"btnYes",void 0),c=i([n],c),o.default=c,cc._RF.pop()},{"../../../frame/component/ComponentNodeEventer":"ComponentNodeEventer","../../../frame/ui/UIViewComponent":"UIViewComponent","./YesViewState":"YesViewState"}],b2AreaJoint:[function(e,t,o){"use strict";cc._RF.push(t,"94848TzCctGcpocAsaEpbIo","b2AreaJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2AreaJoint=o.b2AreaJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint"),s=e("./b2DistanceJoint");o.b2AreaJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_areaJoint),this.bodies=[],this.frequencyHz=0,this.dampingRatio=0}AddBody(e){this.bodies.push(e),1===this.bodies.length?this.bodyA=e:2===this.bodies.length&&(this.bodyB=e)}},o.b2AreaJoint=class extends r.b2Joint{constructor(e){super(e),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_impulse=0,this.m_targetArea=0,this.m_delta=new a.b2Vec2,this.m_bodies=e.bodies,this.m_frequencyHz=i.b2Maybe(e.frequencyHz,0),this.m_dampingRatio=i.b2Maybe(e.dampingRatio,0),this.m_targetLengths=i.b2MakeNumberArray(e.bodies.length),this.m_normals=a.b2Vec2.MakeArray(e.bodies.length),this.m_joints=[],this.m_deltas=a.b2Vec2.MakeArray(e.bodies.length);const t=new s.b2DistanceJointDef;t.frequencyHz=this.m_frequencyHz,t.dampingRatio=this.m_dampingRatio,this.m_targetArea=0;for(let o=0;o<this.m_bodies.length;++o){const e=this.m_bodies[o],i=this.m_bodies[(o+1)%this.m_bodies.length],r=e.GetWorldCenter(),s=i.GetWorldCenter();this.m_targetLengths[o]=a.b2Vec2.DistanceVV(r,s),this.m_targetArea+=a.b2Vec2.CrossVV(r,s),t.Initialize(e,i,r,s),this.m_joints[o]=e.GetWorld().CreateJoint(t)}this.m_targetArea*=.5}GetAnchorA(e){return e}GetAnchorB(e){return e}GetReactionForce(e,t){return t}GetReactionTorque(e){return 0}SetFrequency(e){this.m_frequencyHz=e;for(let t=0;t<this.m_joints.length;++t)this.m_joints[t].SetFrequency(e)}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(e){this.m_dampingRatio=e;for(let t=0;t<this.m_joints.length;++t)this.m_joints[t].SetDampingRatio(e)}GetDampingRatio(){return this.m_dampingRatio}Dump(e){e("Area joint dumping is not supported.\n")}InitVelocityConstraints(e){for(let t=0;t<this.m_bodies.length;++t){const o=this.m_bodies[(t+this.m_bodies.length-1)%this.m_bodies.length],i=this.m_bodies[(t+1)%this.m_bodies.length],r=e.positions[o.m_islandIndex].c,s=e.positions[i.m_islandIndex].c,n=this.m_deltas[t];a.b2Vec2.SubVV(s,r,n)}if(e.step.warmStarting){this.m_impulse*=e.step.dtRatio;for(let t=0;t<this.m_bodies.length;++t){const o=this.m_bodies[t],i=e.velocities[o.m_islandIndex].v,a=this.m_deltas[t];i.x+=o.m_invMass*a.y*.5*this.m_impulse,i.y+=o.m_invMass*-a.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(e){let t=0,o=0;for(let r=0;r<this.m_bodies.length;++r){const i=this.m_bodies[r],s=e.velocities[i.m_islandIndex].v,n=this.m_deltas[r];t+=n.LengthSquared()/i.GetMass(),o+=a.b2Vec2.CrossVV(s,n)}const i=-2*o/t;this.m_impulse+=i;for(let a=0;a<this.m_bodies.length;++a){const t=this.m_bodies[a],o=e.velocities[t.m_islandIndex].v,r=this.m_deltas[a];o.x+=t.m_invMass*r.y*.5*i,o.y+=t.m_invMass*-r.x*.5*i}}SolvePositionConstraints(e){let t=0,o=0;for(let n=0;n<this.m_bodies.length;++n){const r=this.m_bodies[n],s=this.m_bodies[(n+1)%this.m_bodies.length],l=e.positions[r.m_islandIndex].c,c=e.positions[s.m_islandIndex].c,d=a.b2Vec2.SubVV(c,l,this.m_delta);let u=d.Length();u<i.b2_epsilon&&(u=1),this.m_normals[n].x=d.y/u,this.m_normals[n].y=-d.x/u,t+=u,o+=a.b2Vec2.CrossVV(l,c)}o*=.5;const r=.5*(this.m_targetArea-o)/t;let s=!0;for(let n=0;n<this.m_bodies.length;++n){const t=this.m_bodies[n],o=e.positions[t.m_islandIndex].c,l=(n+1)%this.m_bodies.length,c=a.b2Vec2.AddVV(this.m_normals[n],this.m_normals[l],this.m_delta);c.SelfMul(r);const d=c.LengthSquared();d>a.b2Sq(i.b2_maxLinearCorrection)&&c.SelfMul(i.b2_maxLinearCorrection/a.b2Sqrt(d)),d>a.b2Sq(i.b2_linearSlop)&&(s=!1),o.x+=c.x,o.y+=c.y}return s}},cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2DistanceJoint":"b2DistanceJoint","./b2Joint":"b2Joint"}],b2BlockAllocator:[function(e,t,o){"use strict";cc._RF.push(t,"a4af9mgoFFOYayVgkegfQq4","b2BlockAllocator"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2BlockAllocator=void 0,o.b2BlockAllocator=class{},cc._RF.pop()},{}],b2Body:[function(e,t,o){"use strict";cc._RF.push(t,"3bc97GxQslDYoou+mnUMNzR","b2Body"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Body=o.b2BodyDef=o.b2BodyType=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Collision/Shapes/b2Shape"),s=e("./b2Fixture");var n;(function(e){e[e.b2_unknown=-1]="b2_unknown",e[e.b2_staticBody=0]="b2_staticBody",e[e.b2_kinematicBody=1]="b2_kinematicBody",e[e.b2_dynamicBody=2]="b2_dynamicBody"})(n=o.b2BodyType||(o.b2BodyType={})),o.b2BodyDef=class{constructor(){this.type=n.b2_staticBody,this.position=new a.b2Vec2(0,0),this.angle=0,this.linearVelocity=new a.b2Vec2(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}};class l{constructor(e,t){this.m_type=n.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new a.b2Transform,this.m_xf0=new a.b2Transform,this.m_sweep=new a.b2Sweep,this.m_linearVelocity=new a.b2Vec2,this.m_angularVelocity=0,this.m_force=new a.b2Vec2,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=i.b2Maybe(e.bullet,!1),this.m_fixedRotationFlag=i.b2Maybe(e.fixedRotation,!1),this.m_autoSleepFlag=i.b2Maybe(e.allowSleep,!0),this.m_awakeFlag=i.b2Maybe(e.awake,!0),this.m_activeFlag=i.b2Maybe(e.active,!0),this.m_world=t,this.m_xf.p.Copy(i.b2Maybe(e.position,a.b2Vec2.ZERO)),this.m_xf.q.SetAngle(i.b2Maybe(e.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(i.b2Maybe(e.linearVelocity,a.b2Vec2.ZERO)),this.m_angularVelocity=i.b2Maybe(e.angularVelocity,0),this.m_linearDamping=i.b2Maybe(e.linearDamping,0),this.m_angularDamping=i.b2Maybe(e.angularDamping,0),this.m_gravityScale=i.b2Maybe(e.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=i.b2Maybe(e.type,n.b2_staticBody),e.type===n.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}CreateFixture(e,t=0){return e instanceof r.b2Shape?this.CreateFixtureShapeDensity(e,t):this.CreateFixtureDef(e)}CreateFixtureDef(e){if(this.m_world.IsLocked())throw new Error;const t=new s.b2Fixture(this,e);return this.m_activeFlag&&t.CreateProxies(),t.m_next=this.m_fixtureList,this.m_fixtureList=t,++this.m_fixtureCount,t.m_density>0&&this.ResetMassData(),this.m_world.m_newFixture=!0,t}CreateFixtureShapeDensity(e,t=0){const o=l.CreateFixtureShapeDensity_s_def;return o.shape=e,o.density=t,this.CreateFixtureDef(o)}DestroyFixture(e){if(this.m_world.IsLocked())throw new Error;let t=this.m_fixtureList,o=null;for(;null!==t;){if(t===e){o?o.m_next=e.m_next:this.m_fixtureList=e.m_next;break}o=t,t=t.m_next}let i=this.m_contactList;for(;i;){const t=i.contact;i=i.next;const o=t.GetFixtureA(),a=t.GetFixtureB();e!==o&&e!==a||this.m_world.m_contactManager.Destroy(t)}this.m_activeFlag&&e.DestroyProxies(),e.m_next=null,e.Reset(),--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(e,t){this.SetTransformXY(e.x,e.y,t)}SetTransformXY(e,t,o){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(o),this.m_xf.p.Set(e,t),this.m_xf0.Copy(this.m_xf),a.b2Transform.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=o,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=o;for(let i=this.m_fixtureList;i;i=i.m_next)i.SynchronizeProxies(this.m_xf,this.m_xf,a.b2Vec2.ZERO);this.m_world.m_contactManager.FindNewContacts()}SetTransform(e){this.SetTransformVec(e.p,e.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}SetPosition(e){this.SetTransformVec(e,this.GetAngle())}SetPositionXY(e,t){this.SetTransformXY(e,t,this.GetAngle())}GetAngle(){return this.m_sweep.a}SetAngle(e){this.SetTransformVec(this.GetPosition(),e)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(e){this.m_type!==n.b2_staticBody&&(a.b2Vec2.DotVV(e,e)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(e))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(e){this.m_type!==n.b2_staticBody&&(e*e>0&&this.SetAwake(!0),this.m_angularVelocity=e)}GetAngularVelocity(){return this.m_angularVelocity}GetDefinition(e){return e.type=this.GetType(),e.allowSleep=this.m_autoSleepFlag,e.angle=this.GetAngle(),e.angularDamping=this.m_angularDamping,e.gravityScale=this.m_gravityScale,e.angularVelocity=this.m_angularVelocity,e.fixedRotation=this.m_fixedRotationFlag,e.bullet=this.m_bulletFlag,e.awake=this.m_awakeFlag,e.linearDamping=this.m_linearDamping,e.linearVelocity.Copy(this.GetLinearVelocity()),e.position.Copy(this.GetPosition()),e.userData=this.GetUserData(),e}ApplyForce(e,t,o=!0){this.m_type===n.b2_dynamicBody&&(o&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x))}ApplyForceToCenter(e,t=!0){this.m_type===n.b2_dynamicBody&&(t&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y))}ApplyTorque(e,t=!0){this.m_type===n.b2_dynamicBody&&(t&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=e))}ApplyLinearImpulse(e,t,o=!0){this.m_type===n.b2_dynamicBody&&(o&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x)))}ApplyLinearImpulseToCenter(e,t=!0){this.m_type===n.b2_dynamicBody&&(t&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y))}ApplyAngularImpulse(e,t=!0){this.m_type===n.b2_dynamicBody&&(t&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*e))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*a.b2Vec2.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(e){return e.mass=this.m_mass,e.I=this.m_I+this.m_mass*a.b2Vec2.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),e.center.Copy(this.m_sweep.localCenter),e}SetMassData(e){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==n.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&!this.m_fixedRotationFlag&&(this.m_I=e.I-this.m_mass*a.b2Vec2.DotVV(e.center,e.center),this.m_invI=1/this.m_I);const t=l.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e.center),a.b2Transform.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),a.b2Vec2.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,a.b2Vec2.SubVV(this.m_sweep.c,t,a.b2Vec2.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===n.b2_staticBody||this.m_type===n.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const e=l.ResetMassData_s_localCenter.SetZero();for(let o=this.m_fixtureList;o;o=o.m_next){if(0===o.m_density)continue;const t=o.GetMassData(l.ResetMassData_s_massData);this.m_mass+=t.mass,e.x+=t.center.x*t.mass,e.y+=t.center.y*t.mass,this.m_I+=t.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*a.b2Vec2.DotVV(e,e),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const t=l.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e),a.b2Transform.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),a.b2Vec2.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,a.b2Vec2.SubVV(this.m_sweep.c,t,a.b2Vec2.s_t0),this.m_linearVelocity)}GetWorldPoint(e,t){return a.b2Transform.MulXV(this.m_xf,e,t)}GetWorldVector(e,t){return a.b2Rot.MulRV(this.m_xf.q,e,t)}GetLocalPoint(e,t){return a.b2Transform.MulTXV(this.m_xf,e,t)}GetLocalVector(e,t){return a.b2Rot.MulTRV(this.m_xf.q,e,t)}GetLinearVelocityFromWorldPoint(e,t){return a.b2Vec2.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,a.b2Vec2.SubVV(e,this.m_sweep.c,a.b2Vec2.s_t0),t)}GetLinearVelocityFromLocalPoint(e,t){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(e,t),t)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(e){this.m_linearDamping=e}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(e){this.m_angularDamping=e}GetGravityScale(){return this.m_gravityScale}SetGravityScale(e){this.m_gravityScale=e}SetType(e){if(this.m_world.IsLocked())throw new Error;if(this.m_type===e)return;this.m_type=e,this.ResetMassData(),this.m_type===n.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let t=this.m_contactList;for(;t;){const e=t;t=t.next,this.m_world.m_contactManager.Destroy(e.contact)}this.m_contactList=null;for(let o=this.m_fixtureList;o;o=o.m_next)o.TouchProxies()}GetType(){return this.m_type}SetBullet(e){this.m_bulletFlag=e}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(e){this.m_autoSleepFlag=e,e||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(e){e?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)}IsAwake(){return this.m_awakeFlag}SetActive(e){if(this.m_world.IsLocked())throw new Error;if(e!==this.IsActive())if(this.m_activeFlag=e,e)for(let t=this.m_fixtureList;t;t=t.m_next)t.CreateProxies();else{for(let t=this.m_fixtureList;t;t=t.m_next)t.DestroyProxies();let e=this.m_contactList;for(;e;){const t=e;e=e.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null}}IsActive(){return this.m_activeFlag}SetFixedRotation(e){this.m_fixedRotationFlag!==e&&(this.m_fixedRotationFlag=e,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(e){this.m_userData=e}GetWorld(){return this.m_world}Dump(e){const t=this.m_islandIndex;e("{\n"),e("  const bd: b2BodyDef = new b2BodyDef();\n");let o="";switch(this.m_type){case n.b2_staticBody:o="b2BodyType.b2_staticBody";break;case n.b2_kinematicBody:o="b2BodyType.b2_kinematicBody";break;case n.b2_dynamicBody:o="b2BodyType.b2_dynamicBody"}e("  bd.type = %s;\n",o),e("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),e("  bd.angle = %.15f;\n",this.m_sweep.a),e("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),e("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),e("  bd.linearDamping = %.15f;\n",this.m_linearDamping),e("  bd.angularDamping = %.15f;\n",this.m_angularDamping),e("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),e("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),e("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),e("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),e("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),e("  bd.gravityScale = %.15f;\n",this.m_gravityScale),e("\n"),e("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),e("\n");for(let i=this.m_fixtureList;i;i=i.m_next)e("  {\n"),i.Dump(e,t),e("  }\n");e("}\n")}SynchronizeFixtures(){const e=l.SynchronizeFixtures_s_xf1;e.q.SetAngle(this.m_sweep.a0),a.b2Rot.MulRV(e.q,this.m_sweep.localCenter,e.p),a.b2Vec2.SubVV(this.m_sweep.c0,e.p,e.p);const t=a.b2Vec2.SubVV(this.m_sweep.c,this.m_sweep.c0,l.SynchronizeFixtures_s_displacement);for(let o=this.m_fixtureList;o;o=o.m_next)o.SynchronizeProxies(e,this.m_xf,t)}SynchronizeTransform(){this.m_xf.q.SetAngle(this.m_sweep.a),a.b2Rot.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),a.b2Vec2.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(e){return(this.m_type!==n.b2_staticBody||e.m_type!==n.b2_staticBody)&&this.ShouldCollideConnected(e)}ShouldCollideConnected(e){for(let t=this.m_jointList;t;t=t.next)if(t.other===e&&!t.joint.m_collideConnected)return!1;return!0}Advance(e){this.m_sweep.Advance(e),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),a.b2Rot.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),a.b2Vec2.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}GetControllerList(){return this.m_controllerList}GetControllerCount(){return this.m_controllerCount}}o.b2Body=l,l.CreateFixtureShapeDensity_s_def=new s.b2FixtureDef,l.SetMassData_s_oldCenter=new a.b2Vec2,l.ResetMassData_s_localCenter=new a.b2Vec2,l.ResetMassData_s_oldCenter=new a.b2Vec2,l.ResetMassData_s_massData=new r.b2MassData,l.SynchronizeFixtures_s_xf1=new a.b2Transform,l.SynchronizeFixtures_s_displacement=new a.b2Vec2,cc._RF.pop()},{"../Collision/Shapes/b2Shape":"b2Shape","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Fixture":"b2Fixture"}],b2BroadPhase:[function(e,t,o){"use strict";cc._RF.push(t,"3229bYZULlEx7TUngfITx4y","b2BroadPhase"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PairLessThan=o.b2BroadPhase=o.b2Pair=void 0;const i=e("./b2DynamicTree");function a(e,t,o){const i=e[t];e[t]=e[o],e[o]=i}function r(e,t){return e<t}function s(e,t=0,o=e.length-t,i=r){let s=t;const n=[];let l=0;for(;;){for(;s+1<o;o++){const t=e[s+Math.floor(Math.random()*(o-s))];n[l++]=o;for(let r=s-1;;){for(;i(e[++r],t););for(;i(t,e[--o]););if(r>=o)break;a(e,r,o)}}if(0===l)break;s=o,o=n[--l]}return e}class n{constructor(e,t){this.proxyA=e,this.proxyB=t}}function l(e,t){return e.proxyA.m_id<t.proxyA.m_id||e.proxyA.m_id===t.proxyA.m_id&&e.proxyB.m_id<t.proxyB.m_id}o.b2Pair=n,o.b2BroadPhase=class{constructor(){this.m_tree=new i.b2DynamicTree,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}CreateProxy(e,t){const o=this.m_tree.CreateProxy(e,t);return++this.m_proxyCount,this.BufferMove(o),o}DestroyProxy(e){this.UnBufferMove(e),--this.m_proxyCount,this.m_tree.DestroyProxy(e)}MoveProxy(e,t,o){this.m_tree.MoveProxy(e,t,o)&&this.BufferMove(e)}TouchProxy(e){this.BufferMove(e)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(e){this.m_pairCount=0;for(let o=0;o<this.m_moveCount;++o){const e=this.m_moveBuffer[o];if(null===e)continue;const t=e.aabb;this.m_tree.Query(t,t=>{if(t.m_id===e.m_id)return!0;let o,i;if(t.m_id<e.m_id?(o=t,i=e):(o=e,i=t),this.m_pairCount===this.m_pairBuffer.length)this.m_pairBuffer[this.m_pairCount]=new n(o,i);else{const e=this.m_pairBuffer[this.m_pairCount];e.proxyA=o,e.proxyB=i}return++this.m_pairCount,!0})}this.m_moveCount=0,s(this.m_pairBuffer,0,this.m_pairCount,l);let t=0;for(;t<this.m_pairCount;){const o=this.m_pairBuffer[t];for(e(o.proxyA.userData,o.proxyB.userData),++t;t<this.m_pairCount;){const e=this.m_pairBuffer[t];if(e.proxyA.m_id!==o.proxyA.m_id||e.proxyB.m_id!==o.proxyB.m_id)break;++t}}}Query(e,t){this.m_tree.Query(e,t)}QueryPoint(e,t){this.m_tree.QueryPoint(e,t)}RayCast(e,t){this.m_tree.RayCast(e,t)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(e){this.m_tree.ShiftOrigin(e)}BufferMove(e){this.m_moveBuffer[this.m_moveCount]=e,++this.m_moveCount}UnBufferMove(e){const t=this.m_moveBuffer.indexOf(e);this.m_moveBuffer[t]=null}},o.b2PairLessThan=l,cc._RF.pop()},{"./b2DynamicTree":"b2DynamicTree"}],b2BuoyancyController:[function(e,t,o){"use strict";cc._RF.push(t,"d0753jURcVJ75ZwoslrI3wn","b2BuoyancyController"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2BuoyancyController=void 0;const i=e("./b2Controller"),a=e("../Common/b2Math"),r=e("../Common/b2Settings"),s=e("../Common/b2Draw");o.b2BuoyancyController=class extends i.b2Controller{constructor(){super(...arguments),this.normal=new a.b2Vec2(0,1),this.offset=0,this.density=0,this.velocity=new a.b2Vec2(0,0),this.linearDrag=0,this.angularDrag=0,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=new a.b2Vec2(0,0)}Step(e){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(let e=this.m_bodyList;e;e=e.nextBody){const t=e.body;if(!t.IsAwake())continue;const o=new a.b2Vec2,i=new a.b2Vec2;let s=0,n=0;for(let e=t.GetFixtureList();e;e=e.m_next){const r=new a.b2Vec2,l=e.GetShape().ComputeSubmergedArea(this.normal,this.offset,t.GetTransform(),r);s+=l,o.x+=l*r.x,o.y+=l*r.y;let c=0;n+=l*(c=this.useDensity?e.GetDensity():1),i.x+=l*r.x*c,i.y+=l*r.y*c}if(o.x/=s,o.y/=s,i.x/=n,i.y/=n,s<r.b2_epsilon)continue;const l=this.gravity.Clone().SelfNeg();l.SelfMul(this.density*s),t.ApplyForce(l,i);const c=t.GetLinearVelocityFromWorldPoint(o,new a.b2Vec2);c.SelfSub(this.velocity),c.SelfMul(-this.linearDrag*s),t.ApplyForce(c,o),t.ApplyTorque(-t.GetInertia()/t.GetMass()*s*t.GetAngularVelocity()*this.angularDrag)}}}Draw(e){const t=100,o=new a.b2Vec2,i=new a.b2Vec2;o.x=this.normal.x*this.offset+this.normal.y*t,o.y=this.normal.y*this.offset-this.normal.x*t,i.x=this.normal.x*this.offset-this.normal.y*t,i.y=this.normal.y*this.offset+this.normal.x*t;const r=new s.b2Color(0,0,.8);e.DrawSegment(o,i,r)}},cc._RF.pop()},{"../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Controller":"b2Controller"}],b2ChainAndCircleContact:[function(e,t,o){"use strict";cc._RF.push(t,"238b3tcGa1KPL4hrr6oakCH","b2ChainAndCircleContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ChainAndCircleContact=void 0;const i=e("../../Collision/b2CollideEdge"),a=e("../../Collision/Shapes/b2EdgeShape"),r=e("./b2Contact");class s extends r.b2Contact{static Create(){return new s}static Destroy(e){}Evaluate(e,t,o){const a=s.Evaluate_s_edge;this.GetShapeA().GetChildEdge(a,this.m_indexA),i.b2CollideEdgeAndCircle(e,a,t,this.GetShapeB(),o)}}o.b2ChainAndCircleContact=s,s.Evaluate_s_edge=new a.b2EdgeShape,cc._RF.pop()},{"../../Collision/Shapes/b2EdgeShape":"b2EdgeShape","../../Collision/b2CollideEdge":"b2CollideEdge","./b2Contact":"b2Contact"}],b2ChainAndPolygonContact:[function(e,t,o){"use strict";cc._RF.push(t,"68976cDHh5KoYKgp2KqDNKC","b2ChainAndPolygonContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ChainAndPolygonContact=void 0;const i=e("../../Collision/b2CollideEdge"),a=e("../../Collision/Shapes/b2EdgeShape"),r=e("./b2Contact");class s extends r.b2Contact{static Create(){return new s}static Destroy(e){}Evaluate(e,t,o){const a=s.Evaluate_s_edge;this.GetShapeA().GetChildEdge(a,this.m_indexA),i.b2CollideEdgeAndPolygon(e,a,t,this.GetShapeB(),o)}}o.b2ChainAndPolygonContact=s,s.Evaluate_s_edge=new a.b2EdgeShape,cc._RF.pop()},{"../../Collision/Shapes/b2EdgeShape":"b2EdgeShape","../../Collision/b2CollideEdge":"b2CollideEdge","./b2Contact":"b2Contact"}],b2ChainShape:[function(e,t,o){"use strict";cc._RF.push(t,"38093k1zn1PILvq7atwfLIc","b2ChainShape"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ChainShape=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Shape"),s=e("./b2EdgeShape");class n extends r.b2Shape{constructor(){super(r.b2ShapeType.e_chainShape,i.b2_polygonRadius),this.m_vertices=[],this.m_count=0,this.m_prevVertex=new a.b2Vec2,this.m_nextVertex=new a.b2Vec2,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1}CreateLoop(...e){if("number"==typeof e[0][0]){const t=e[0];if(t.length%2!=0)throw new Error;return this._CreateLoop(e=>({x:t[2*e],y:t[2*e+1]}),t.length/2)}{const t=e[0],o=e[1]||t.length;return this._CreateLoop(e=>t[e],o)}}_CreateLoop(e,t){if(t<3)return this;this.m_count=t+1,this.m_vertices=a.b2Vec2.MakeArray(this.m_count);for(let o=0;o<t;++o)this.m_vertices[o].Copy(e(o));return this.m_vertices[t].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}CreateChain(...e){if("number"==typeof e[0][0]){const t=e[0];if(t.length%2!=0)throw new Error;return this._CreateChain(e=>({x:t[2*e],y:t[2*e+1]}),t.length/2)}{const t=e[0],o=e[1]||t.length;return this._CreateChain(e=>t[e],o)}}_CreateChain(e,t){this.m_count=t,this.m_vertices=a.b2Vec2.MakeArray(t);for(let o=0;o<t;++o)this.m_vertices[o].Copy(e(o));return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this}SetPrevVertex(e){return this.m_prevVertex.Copy(e),this.m_hasPrevVertex=!0,this}SetNextVertex(e){return this.m_nextVertex.Copy(e),this.m_hasNextVertex=!0,this}Clone(){return(new n).Copy(this)}Copy(e){return super.Copy(e),this._CreateChain(t=>e.m_vertices[t],e.m_count),this.m_prevVertex.Copy(e.m_prevVertex),this.m_nextVertex.Copy(e.m_nextVertex),this.m_hasPrevVertex=e.m_hasPrevVertex,this.m_hasNextVertex=e.m_hasNextVertex,this}GetChildCount(){return this.m_count-1}GetChildEdge(e,t){e.m_radius=this.m_radius,e.m_vertex1.Copy(this.m_vertices[t]),e.m_vertex2.Copy(this.m_vertices[t+1]),t>0?(e.m_vertex0.Copy(this.m_vertices[t-1]),e.m_hasVertex0=!0):(e.m_vertex0.Copy(this.m_prevVertex),e.m_hasVertex0=this.m_hasPrevVertex),t<this.m_count-2?(e.m_vertex3.Copy(this.m_vertices[t+2]),e.m_hasVertex3=!0):(e.m_vertex3.Copy(this.m_nextVertex),e.m_hasVertex3=this.m_hasNextVertex)}TestPoint(e,t){return!1}ComputeDistance(e,t,o,i){const a=n.ComputeDistance_s_edgeShape;return this.GetChildEdge(a,i),a.ComputeDistance(e,t,o,0)}RayCast(e,t,o,i){const a=n.RayCast_s_edgeShape;return a.m_vertex1.Copy(this.m_vertices[i]),a.m_vertex2.Copy(this.m_vertices[(i+1)%this.m_count]),a.RayCast(e,t,o,0)}ComputeAABB(e,t,o){const i=this.m_vertices[o],r=this.m_vertices[(o+1)%this.m_count],s=a.b2Transform.MulXV(t,i,n.ComputeAABB_s_v1),l=a.b2Transform.MulXV(t,r,n.ComputeAABB_s_v2);a.b2Vec2.MinV(s,l,e.lowerBound),a.b2Vec2.MaxV(s,l,e.upperBound)}ComputeMass(e,t){e.mass=0,e.center.SetZero(),e.I=0}SetupDistanceProxy(e,t){e.m_vertices=e.m_buffer,e.m_vertices[0].Copy(this.m_vertices[t]),t+1<this.m_count?e.m_vertices[1].Copy(this.m_vertices[t+1]):e.m_vertices[1].Copy(this.m_vertices[0]),e.m_count=2,e.m_radius=this.m_radius}ComputeSubmergedArea(e,t,o,i){return i.SetZero(),0}Dump(e){e("    const shape: b2ChainShape = new b2ChainShape();\n"),e("    const vs: b2Vec2[] = [];\n");for(let t=0;t<this.m_count;++t)e("    vs[%d] = new bVec2(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);e("    shape.CreateChain(vs, %d);\n",this.m_count),e("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),e("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),e("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),e("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")}}o.b2ChainShape=n,n.ComputeDistance_s_edgeShape=new s.b2EdgeShape,n.RayCast_s_edgeShape=new s.b2EdgeShape,n.ComputeAABB_s_v1=new a.b2Vec2,n.ComputeAABB_s_v2=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2EdgeShape":"b2EdgeShape","./b2Shape":"b2Shape"}],b2CircleContact:[function(e,t,o){"use strict";cc._RF.push(t,"730465lbJhOKKuegufDH+K1","b2CircleContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2CircleContact=void 0;const i=e("../../Collision/b2CollideCircle"),a=e("./b2Contact");class r extends a.b2Contact{static Create(){return new r}static Destroy(e){}Evaluate(e,t,o){i.b2CollideCircles(e,this.GetShapeA(),t,this.GetShapeB(),o)}}o.b2CircleContact=r,cc._RF.pop()},{"../../Collision/b2CollideCircle":"b2CollideCircle","./b2Contact":"b2Contact"}],b2CircleShape:[function(e,t,o){"use strict";cc._RF.push(t,"60e00+1xxhHtq9Oug5eio2b","b2CircleShape"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2CircleShape=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Shape");class s extends r.b2Shape{constructor(e=0){super(r.b2ShapeType.e_circleShape,e),this.m_p=new a.b2Vec2}Set(e,t=this.m_radius){return this.m_p.Copy(e),this.m_radius=t,this}Clone(){return(new s).Copy(this)}Copy(e){return super.Copy(e),this.m_p.Copy(e.m_p),this}GetChildCount(){return 1}TestPoint(e,t){const o=a.b2Transform.MulXV(e,this.m_p,s.TestPoint_s_center),i=a.b2Vec2.SubVV(t,o,s.TestPoint_s_d);return a.b2Vec2.DotVV(i,i)<=a.b2Sq(this.m_radius)}ComputeDistance(e,t,o,i){const r=a.b2Transform.MulXV(e,this.m_p,s.ComputeDistance_s_center);return a.b2Vec2.SubVV(t,r,o),o.Normalize()-this.m_radius}RayCast(e,t,o,r){const n=a.b2Transform.MulXV(o,this.m_p,s.RayCast_s_position),l=a.b2Vec2.SubVV(t.p1,n,s.RayCast_s_s),c=a.b2Vec2.DotVV(l,l)-a.b2Sq(this.m_radius),d=a.b2Vec2.SubVV(t.p2,t.p1,s.RayCast_s_r),u=a.b2Vec2.DotVV(l,d),m=a.b2Vec2.DotVV(d,d),p=u*u-m*c;if(p<0||m<i.b2_epsilon)return!1;let h=-(u+a.b2Sqrt(p));return 0<=h&&h<=t.maxFraction*m&&(h/=m,e.fraction=h,a.b2Vec2.AddVMulSV(l,h,d,e.normal).SelfNormalize(),!0)}ComputeAABB(e,t,o){const i=a.b2Transform.MulXV(t,this.m_p,s.ComputeAABB_s_p);e.lowerBound.Set(i.x-this.m_radius,i.y-this.m_radius),e.upperBound.Set(i.x+this.m_radius,i.y+this.m_radius)}ComputeMass(e,t){const o=a.b2Sq(this.m_radius);e.mass=t*i.b2_pi*o,e.center.Copy(this.m_p),e.I=e.mass*(.5*o+a.b2Vec2.DotVV(this.m_p,this.m_p))}SetupDistanceProxy(e,t){e.m_vertices=e.m_buffer,e.m_vertices[0].Copy(this.m_p),e.m_count=1,e.m_radius=this.m_radius}ComputeSubmergedArea(e,t,o,r){const s=a.b2Transform.MulXV(o,this.m_p,new a.b2Vec2),n=-(a.b2Vec2.DotVV(e,s)-t);if(n<-this.m_radius+i.b2_epsilon)return 0;if(n>this.m_radius)return r.Copy(s),i.b2_pi*this.m_radius*this.m_radius;const l=this.m_radius*this.m_radius,c=n*n,d=l*(a.b2Asin(n/this.m_radius)+i.b2_pi/2)+n*a.b2Sqrt(l-c),u=-2/3*a.b2Pow(l-c,1.5)/d;return r.x=s.x+e.x*u,r.y=s.y+e.y*u,d}Dump(e){e("    const shape: b2CircleShape = new b2CircleShape();\n"),e("    shape.m_radius = %.15f;\n",this.m_radius),e("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)}}o.b2CircleShape=s,s.TestPoint_s_center=new a.b2Vec2,s.TestPoint_s_d=new a.b2Vec2,s.ComputeDistance_s_center=new a.b2Vec2,s.RayCast_s_position=new a.b2Vec2,s.RayCast_s_s=new a.b2Vec2,s.RayCast_s_r=new a.b2Vec2,s.ComputeAABB_s_p=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Shape":"b2Shape"}],b2CollideCircle:[function(e,t,o){"use strict";cc._RF.push(t,"7b909u3nv1Kk4ddPEGw4j0n","b2CollideCircle"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2CollidePolygonAndCircle=o.b2CollideCircles=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("./b2Collision"),s=new a.b2Vec2,n=new a.b2Vec2;o.b2CollideCircles=function(e,t,o,i,l){e.pointCount=0;const c=a.b2Transform.MulXV(o,t.m_p,s),d=a.b2Transform.MulXV(l,i.m_p,n),u=a.b2Vec2.DistanceSquaredVV(c,d),m=t.m_radius+i.m_radius;u>m*m||(e.type=r.b2ManifoldType.e_circles,e.localPoint.Copy(t.m_p),e.localNormal.SetZero(),e.pointCount=1,e.points[0].localPoint.Copy(i.m_p),e.points[0].id.key=0)};const l=new a.b2Vec2,c=new a.b2Vec2,d=new a.b2Vec2;o.b2CollidePolygonAndCircle=function(e,t,o,s,n){e.pointCount=0;const u=a.b2Transform.MulXV(n,s.m_p,l),m=a.b2Transform.MulTXV(o,u,c);let p=0,h=-i.b2_maxFloat;const f=t.m_radius+s.m_radius,y=t.m_count,_=t.m_vertices,g=t.m_normals;for(let i=0;i<y;++i){const e=a.b2Vec2.DotVV(g[i],a.b2Vec2.SubVV(m,_[i],a.b2Vec2.s_t0));if(e>f)return;e>h&&(h=e,p=i)}const b=p,S=(b+1)%y,P=_[b],B=_[S];if(h<i.b2_epsilon)return e.pointCount=1,e.type=r.b2ManifoldType.e_faceA,e.localNormal.Copy(g[p]),a.b2Vec2.MidVV(P,B,e.localPoint),e.points[0].localPoint.Copy(s.m_p),void(e.points[0].id.key=0);const C=a.b2Vec2.DotVV(a.b2Vec2.SubVV(m,P,a.b2Vec2.s_t0),a.b2Vec2.SubVV(B,P,a.b2Vec2.s_t1)),M=a.b2Vec2.DotVV(a.b2Vec2.SubVV(m,B,a.b2Vec2.s_t0),a.b2Vec2.SubVV(P,B,a.b2Vec2.s_t1));if(C<=0){if(a.b2Vec2.DistanceSquaredVV(m,P)>f*f)return;e.pointCount=1,e.type=r.b2ManifoldType.e_faceA,a.b2Vec2.SubVV(m,P,e.localNormal).SelfNormalize(),e.localPoint.Copy(P),e.points[0].localPoint.Copy(s.m_p),e.points[0].id.key=0}else if(M<=0){if(a.b2Vec2.DistanceSquaredVV(m,B)>f*f)return;e.pointCount=1,e.type=r.b2ManifoldType.e_faceA,a.b2Vec2.SubVV(m,B,e.localNormal).SelfNormalize(),e.localPoint.Copy(B),e.points[0].localPoint.Copy(s.m_p),e.points[0].id.key=0}else{const t=a.b2Vec2.MidVV(P,B,d);if(a.b2Vec2.DotVV(a.b2Vec2.SubVV(m,t,a.b2Vec2.s_t1),g[b])>f)return;e.pointCount=1,e.type=r.b2ManifoldType.e_faceA,e.localNormal.Copy(g[b]).SelfNormalize(),e.localPoint.Copy(t),e.points[0].localPoint.Copy(s.m_p),e.points[0].id.key=0}},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Collision":"b2Collision"}],b2CollideEdge:[function(e,t,o){"use strict";cc._RF.push(t,"bc422C7xANHcbrGkAcj61fd","b2CollideEdge"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2CollideEdgeAndPolygon=o.b2CollideEdgeAndCircle=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("./b2Collision"),s=e("./b2Collision"),n=new a.b2Vec2,l=new a.b2Vec2,c=new a.b2Vec2,d=new a.b2Vec2,u=new a.b2Vec2,m=new a.b2Vec2,p=new a.b2Vec2,h=new r.b2ContactID;var f,y;o.b2CollideEdgeAndCircle=function(e,t,o,i,f){e.pointCount=0;const y=a.b2Transform.MulTXV(o,a.b2Transform.MulXV(f,i.m_p,a.b2Vec2.s_t0),n),_=t.m_vertex1,g=t.m_vertex2,b=a.b2Vec2.SubVV(g,_,l),S=a.b2Vec2.DotVV(b,a.b2Vec2.SubVV(g,y,a.b2Vec2.s_t0)),P=a.b2Vec2.DotVV(b,a.b2Vec2.SubVV(y,_,a.b2Vec2.s_t0)),B=t.m_radius+i.m_radius,C=h;if(C.cf.indexB=0,C.cf.typeB=r.b2ContactFeatureType.e_vertex,P<=0){const o=_,n=a.b2Vec2.SubVV(y,o,c);if(a.b2Vec2.DotVV(n,n)>B*B)return;if(t.m_hasVertex0){const e=t.m_vertex0,o=_,i=a.b2Vec2.SubVV(o,e,d);if(a.b2Vec2.DotVV(i,a.b2Vec2.SubVV(o,y,a.b2Vec2.s_t0))>0)return}return C.cf.indexA=0,C.cf.typeA=r.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=s.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(o),e.points[0].id.Copy(C),void e.points[0].localPoint.Copy(i.m_p)}if(S<=0){const o=g,n=a.b2Vec2.SubVV(y,o,c);if(a.b2Vec2.DotVV(n,n)>B*B)return;if(t.m_hasVertex3){const e=t.m_vertex3,o=g,i=a.b2Vec2.SubVV(e,o,u);if(a.b2Vec2.DotVV(i,a.b2Vec2.SubVV(y,o,a.b2Vec2.s_t0))>0)return}return C.cf.indexA=1,C.cf.typeA=r.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=s.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(o),e.points[0].id.Copy(C),void e.points[0].localPoint.Copy(i.m_p)}const M=a.b2Vec2.DotVV(b,b),x=m;x.x=1/M*(S*_.x+P*g.x),x.y=1/M*(S*_.y+P*g.y);const V=a.b2Vec2.SubVV(y,x,c);if(a.b2Vec2.DotVV(V,V)>B*B)return;const I=p.Set(-b.y,b.x);a.b2Vec2.DotVV(I,a.b2Vec2.SubVV(y,_,a.b2Vec2.s_t0))<0&&I.Set(-I.x,-I.y),I.Normalize(),C.cf.indexA=0,C.cf.typeA=r.b2ContactFeatureType.e_face,e.pointCount=1,e.type=s.b2ManifoldType.e_faceA,e.localNormal.Copy(I),e.localPoint.Copy(_),e.points[0].id.Copy(C),e.points[0].localPoint.Copy(i.m_p)},function(e){e[e.e_unknown=0]="e_unknown",e[e.e_edgeA=1]="e_edgeA",e[e.e_edgeB=2]="e_edgeB"}(f||(f={}));class _{constructor(){this.type=f.e_unknown,this.index=0,this.separation=0}}class g{constructor(){this.vertices=[],this.normals=[],this.count=0}}(function(e){e[e.e_isolated=0]="e_isolated",e[e.e_concave=1]="e_concave",e[e.e_convex=2]="e_convex"})(y||(y={}));class b{constructor(){this.m_polygonB=new g,this.m_xf=new a.b2Transform,this.m_centroidB=new a.b2Vec2,this.m_v0=new a.b2Vec2,this.m_v1=new a.b2Vec2,this.m_v2=new a.b2Vec2,this.m_v3=new a.b2Vec2,this.m_normal0=new a.b2Vec2,this.m_normal1=new a.b2Vec2,this.m_normal2=new a.b2Vec2,this.m_normal=new a.b2Vec2,this.m_type1=y.e_isolated,this.m_type2=y.e_isolated,this.m_lowerLimit=new a.b2Vec2,this.m_upperLimit=new a.b2Vec2,this.m_radius=0,this.m_front=!1}Collide(e,t,o,n,l){a.b2Transform.MulTXX(o,l,this.m_xf),a.b2Transform.MulXV(this.m_xf,n.m_centroid,this.m_centroidB),this.m_v0.Copy(t.m_vertex0),this.m_v1.Copy(t.m_vertex1),this.m_v2.Copy(t.m_vertex2),this.m_v3.Copy(t.m_vertex3);const c=t.m_hasVertex0,d=t.m_hasVertex3,u=a.b2Vec2.SubVV(this.m_v2,this.m_v1,b.s_edge1);u.Normalize(),this.m_normal1.Set(u.y,-u.x);const m=a.b2Vec2.DotVV(this.m_normal1,a.b2Vec2.SubVV(this.m_centroidB,this.m_v1,a.b2Vec2.s_t0));let p=0,h=0,y=!1,_=!1;if(c){const e=a.b2Vec2.SubVV(this.m_v1,this.m_v0,b.s_edge0);e.Normalize(),this.m_normal0.Set(e.y,-e.x),y=a.b2Vec2.CrossVV(e,u)>=0,p=a.b2Vec2.DotVV(this.m_normal0,a.b2Vec2.SubVV(this.m_centroidB,this.m_v0,a.b2Vec2.s_t0))}if(d){const e=a.b2Vec2.SubVV(this.m_v3,this.m_v2,b.s_edge2);e.Normalize(),this.m_normal2.Set(e.y,-e.x),_=a.b2Vec2.CrossVV(u,e)>0,h=a.b2Vec2.DotVV(this.m_normal2,a.b2Vec2.SubVV(this.m_centroidB,this.m_v2,a.b2Vec2.s_t0))}c&&d?y&&_?(this.m_front=p>=0||m>=0||h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):y?(this.m_front=p>=0||m>=0&&h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):_?(this.m_front=h>=0||p>=0&&m>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=p>=0&&m>=0&&h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):c?y?(this.m_front=p>=0||m>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):(this.m_front=p>=0&&m>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):d?_?(this.m_front=m>=0||h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=m>=0&&h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=m>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=n.m_count;for(let i=0;i<n.m_count;++i)this.m_polygonB.vertices.length<=i&&this.m_polygonB.vertices.push(new a.b2Vec2),this.m_polygonB.normals.length<=i&&this.m_polygonB.normals.push(new a.b2Vec2),a.b2Transform.MulXV(this.m_xf,n.m_vertices[i],this.m_polygonB.vertices[i]),a.b2Rot.MulRV(this.m_xf.q,n.m_normals[i],this.m_polygonB.normals[i]);this.m_radius=n.m_radius+t.m_radius,e.pointCount=0;const g=this.ComputeEdgeSeparation(b.s_edgeAxis);if(g.type===f.e_unknown)return;if(g.separation>this.m_radius)return;const S=this.ComputePolygonSeparation(b.s_polygonAxis);if(S.type!==f.e_unknown&&S.separation>this.m_radius)return;let P;P=S.type===f.e_unknown?g:S.separation>.98*g.separation+.001?S:g;const B=b.s_ie,C=b.s_rf;if(P.type===f.e_edgeA){e.type=s.b2ManifoldType.e_faceA;let t=0,o=a.b2Vec2.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(let e=1;e<this.m_polygonB.count;++e){const i=a.b2Vec2.DotVV(this.m_normal,this.m_polygonB.normals[e]);i<o&&(o=i,t=e)}const i=t,n=(i+1)%this.m_polygonB.count,l=B[0];l.v.Copy(this.m_polygonB.vertices[i]),l.id.cf.indexA=0,l.id.cf.indexB=i,l.id.cf.typeA=r.b2ContactFeatureType.e_face,l.id.cf.typeB=r.b2ContactFeatureType.e_vertex;const c=B[1];c.v.Copy(this.m_polygonB.vertices[n]),c.id.cf.indexA=0,c.id.cf.indexB=n,c.id.cf.typeA=r.b2ContactFeatureType.e_face,c.id.cf.typeB=r.b2ContactFeatureType.e_vertex,this.m_front?(C.i1=0,C.i2=1,C.v1.Copy(this.m_v1),C.v2.Copy(this.m_v2),C.normal.Copy(this.m_normal1)):(C.i1=1,C.i2=0,C.v1.Copy(this.m_v2),C.v2.Copy(this.m_v1),C.normal.Copy(this.m_normal1).SelfNeg())}else{e.type=s.b2ManifoldType.e_faceB;const t=B[0];t.v.Copy(this.m_v1),t.id.cf.indexA=0,t.id.cf.indexB=P.index,t.id.cf.typeA=r.b2ContactFeatureType.e_vertex,t.id.cf.typeB=r.b2ContactFeatureType.e_face;const o=B[1];o.v.Copy(this.m_v2),o.id.cf.indexA=0,o.id.cf.indexB=P.index,o.id.cf.typeA=r.b2ContactFeatureType.e_vertex,o.id.cf.typeB=r.b2ContactFeatureType.e_face,C.i1=P.index,C.i2=(C.i1+1)%this.m_polygonB.count,C.v1.Copy(this.m_polygonB.vertices[C.i1]),C.v2.Copy(this.m_polygonB.vertices[C.i2]),C.normal.Copy(this.m_polygonB.normals[C.i1])}C.sideNormal1.Set(C.normal.y,-C.normal.x),C.sideNormal2.Copy(C.sideNormal1).SelfNeg(),C.sideOffset1=a.b2Vec2.DotVV(C.sideNormal1,C.v1),C.sideOffset2=a.b2Vec2.DotVV(C.sideNormal2,C.v2);const M=b.s_clipPoints1,x=b.s_clipPoints2;let V=0;if((V=s.b2ClipSegmentToLine(M,B,C.sideNormal1,C.sideOffset1,C.i1))<i.b2_maxManifoldPoints)return;if((V=s.b2ClipSegmentToLine(x,M,C.sideNormal2,C.sideOffset2,C.i2))<i.b2_maxManifoldPoints)return;P.type===f.e_edgeA?(e.localNormal.Copy(C.normal),e.localPoint.Copy(C.v1)):(e.localNormal.Copy(n.m_normals[C.i1]),e.localPoint.Copy(n.m_vertices[C.i1]));let I=0;for(let r=0;r<i.b2_maxManifoldPoints;++r){let t;if((t=a.b2Vec2.DotVV(C.normal,a.b2Vec2.SubVV(x[r].v,C.v1,a.b2Vec2.s_t0)))<=this.m_radius){const t=e.points[I];P.type===f.e_edgeA?(a.b2Transform.MulTXV(this.m_xf,x[r].v,t.localPoint),t.id.Copy(x[r].id)):(t.localPoint.Copy(x[r].v),t.id.cf.typeA=x[r].id.cf.typeB,t.id.cf.typeB=x[r].id.cf.typeA,t.id.cf.indexA=x[r].id.cf.indexB,t.id.cf.indexB=x[r].id.cf.indexA),++I}}e.pointCount=I}ComputeEdgeSeparation(e){const t=e;t.type=f.e_edgeA,t.index=this.m_front?0:1,t.separation=i.b2_maxFloat;for(let o=0;o<this.m_polygonB.count;++o){const e=a.b2Vec2.DotVV(this.m_normal,a.b2Vec2.SubVV(this.m_polygonB.vertices[o],this.m_v1,a.b2Vec2.s_t0));e<t.separation&&(t.separation=e)}return t}ComputePolygonSeparation(e){const t=e;t.type=f.e_unknown,t.index=-1,t.separation=-i.b2_maxFloat;const o=b.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(let r=0;r<this.m_polygonB.count;++r){const e=a.b2Vec2.NegV(this.m_polygonB.normals[r],b.s_n),s=a.b2Vec2.DotVV(e,a.b2Vec2.SubVV(this.m_polygonB.vertices[r],this.m_v1,a.b2Vec2.s_t0)),n=a.b2Vec2.DotVV(e,a.b2Vec2.SubVV(this.m_polygonB.vertices[r],this.m_v2,a.b2Vec2.s_t0)),l=a.b2Min(s,n);if(l>this.m_radius)return t.type=f.e_edgeB,t.index=r,t.separation=l,t;if(a.b2Vec2.DotVV(e,o)>=0){if(a.b2Vec2.DotVV(a.b2Vec2.SubVV(e,this.m_upperLimit,a.b2Vec2.s_t0),this.m_normal)<-i.b2_angularSlop)continue}else if(a.b2Vec2.DotVV(a.b2Vec2.SubVV(e,this.m_lowerLimit,a.b2Vec2.s_t0),this.m_normal)<-i.b2_angularSlop)continue;l>t.separation&&(t.type=f.e_edgeB,t.index=r,t.separation=l)}return t}}b.s_edge1=new a.b2Vec2,b.s_edge0=new a.b2Vec2,b.s_edge2=new a.b2Vec2,b.s_ie=s.b2ClipVertex.MakeArray(2),b.s_rf=new class{constructor(){this.i1=0,this.i2=0,this.v1=new a.b2Vec2,this.v2=new a.b2Vec2,this.normal=new a.b2Vec2,this.sideNormal1=new a.b2Vec2,this.sideOffset1=0,this.sideNormal2=new a.b2Vec2,this.sideOffset2=0}},b.s_clipPoints1=s.b2ClipVertex.MakeArray(2),b.s_clipPoints2=s.b2ClipVertex.MakeArray(2),b.s_edgeAxis=new _,b.s_polygonAxis=new _,b.s_n=new a.b2Vec2,b.s_perp=new a.b2Vec2;const S=new b;o.b2CollideEdgeAndPolygon=function(e,t,o,i,a){S.Collide(e,t,o,i,a)},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Collision":"b2Collision"}],b2CollidePolygon:[function(e,t,o){"use strict";cc._RF.push(t,"6787anfQf1ADZ8Z0EyuYw0q","b2CollidePolygon"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2CollidePolygons=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("./b2Collision"),s=e("./b2Collision"),n=new a.b2Vec2,l=new a.b2Vec2,c=new a.b2Vec2,d=new a.b2Vec2;function u(e,t,o,r,s){const u=e.m_vertices,m=e.m_normals,p=r.m_count,h=r.m_vertices,f=a.b2Rot.MulRV(t.q,m[o],n),y=a.b2Rot.MulTRV(s.q,f,l);let _=0,g=i.b2_maxFloat;for(let i=0;i<p;++i){const e=a.b2Vec2.DotVV(h[i],y);e<g&&(g=e,_=i)}const b=a.b2Transform.MulXV(t,u[o],c),S=a.b2Transform.MulXV(s,h[_],d);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(S,b,a.b2Vec2.s_t0),f)}const m=new a.b2Vec2,p=new a.b2Vec2;function h(e,t,o,r,s){const n=t.m_count,l=t.m_normals,c=a.b2Vec2.SubVV(a.b2Transform.MulXV(s,r.m_centroid,a.b2Vec2.s_t0),a.b2Transform.MulXV(o,t.m_centroid,a.b2Vec2.s_t1),m),d=a.b2Rot.MulTRV(o.q,c,p);let h=0,f=-i.b2_maxFloat;for(let i=0;i<n;++i){const e=a.b2Vec2.DotVV(l[i],d);e>f&&(f=e,h=i)}let y=u(t,o,h,r,s);const _=(h+n-1)%n,g=u(t,o,_,r,s),b=(h+1)%n,S=u(t,o,b,r,s);let P=0,B=0,C=0;if(g>y&&g>S)C=-1,P=_,B=g;else{if(!(S>y))return e[0]=h,y;C=1,P=b,B=S}for(;(y=u(t,o,h=-1===C?(P+n-1)%n:(P+1)%n,r,s))>B;)P=h,B=y;return e[0]=P,B}const f=new a.b2Vec2;function y(e,t,o,s,n,l){const c=t.m_normals,d=n.m_count,u=n.m_vertices,m=n.m_normals,p=a.b2Rot.MulTRV(l.q,a.b2Rot.MulRV(o.q,c[s],a.b2Vec2.s_t0),f);let h=0,y=i.b2_maxFloat;for(let i=0;i<d;++i){const e=a.b2Vec2.DotVV(p,m[i]);e<y&&(y=e,h=i)}const _=h,g=(_+1)%d,b=e[0];a.b2Transform.MulXV(l,u[_],b.v);const S=b.id.cf;S.indexA=s,S.indexB=_,S.typeA=r.b2ContactFeatureType.e_face,S.typeB=r.b2ContactFeatureType.e_vertex;const P=e[1];a.b2Transform.MulXV(l,u[g],P.v);const B=P.id.cf;B.indexA=s,B.indexB=g,B.typeA=r.b2ContactFeatureType.e_face,B.typeB=r.b2ContactFeatureType.e_vertex}const _=s.b2ClipVertex.MakeArray(2),g=s.b2ClipVertex.MakeArray(2),b=s.b2ClipVertex.MakeArray(2),S=[0],P=[0],B=new a.b2Vec2,C=new a.b2Vec2,M=new a.b2Vec2,x=new a.b2Vec2,V=new a.b2Vec2,I=new a.b2Vec2,O=new a.b2Vec2,w=new a.b2Vec2;o.b2CollidePolygons=function(e,t,o,r,n){e.pointCount=0;const l=t.m_radius+r.m_radius,c=S;c[0]=0;const d=h(c,t,o,r,n);if(d>l)return;const u=P;u[0]=0;const m=h(u,r,n,t,o);if(m>l)return;let p,f,E,A,R=0,v=0;m>.98*d+.001?(p=r,f=t,E=n,A=o,R=u[0],e.type=s.b2ManifoldType.e_faceB,v=1):(p=t,f=r,E=o,A=n,R=c[0],e.type=s.b2ManifoldType.e_faceA,v=0);const T=_;y(T,p,E,R,f,A);const G=p.m_count,D=p.m_vertices,U=R,F=(R+1)%G,L=D[U],N=D[F],j=a.b2Vec2.SubVV(N,L,B);j.Normalize();const k=a.b2Vec2.CrossVOne(j,C),q=a.b2Vec2.MidVV(L,N,M),H=a.b2Rot.MulRV(E.q,j,V),J=a.b2Vec2.CrossVOne(H,x),W=a.b2Transform.MulXV(E,L,O),z=a.b2Transform.MulXV(E,N,w),X=a.b2Vec2.DotVV(J,W),Y=-a.b2Vec2.DotVV(H,W)+l,K=a.b2Vec2.DotVV(H,z)+l,Z=g,Q=b;let $;const ee=a.b2Vec2.NegV(H,I);if(($=s.b2ClipSegmentToLine(Z,T,ee,Y,U))<2)return;if(($=s.b2ClipSegmentToLine(Q,Z,H,K,F))<2)return;e.localNormal.Copy(k),e.localPoint.Copy(q);let te=0;for(let s=0;s<i.b2_maxManifoldPoints;++s){const t=Q[s];if(a.b2Vec2.DotVV(J,t.v)-X<=l){const o=e.points[te];if(a.b2Transform.MulTXV(A,t.v,o.localPoint),o.id.Copy(t.id),v){const e=o.id.cf;o.id.cf.indexA=e.indexB,o.id.cf.indexB=e.indexA,o.id.cf.typeA=e.typeB,o.id.cf.typeB=e.typeA}++te}}e.pointCount=te},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Collision":"b2Collision"}],b2Collision:[function(e,t,o){"use strict";cc._RF.push(t,"ebdfcamJyFD9pGPtPVXrh+5","b2Collision"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2TestOverlapShape=o.b2ClipSegmentToLine=o.b2TestOverlapAABB=o.b2AABB=o.b2RayCastOutput=o.b2RayCastInput=o.b2ClipVertex=o.b2GetPointStates=o.b2PointState=o.b2WorldManifold=o.b2Manifold=o.b2ManifoldType=o.b2ManifoldPoint=o.b2ContactID=o.b2ContactFeature=o.b2ContactFeatureType=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("./b2Distance");var s,n,l;(function(e){e[e.e_vertex=0]="e_vertex",e[e.e_face=1]="e_face"})(s=o.b2ContactFeatureType||(o.b2ContactFeatureType={}));class c{constructor(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}get key(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key}set key(e){this._key=e,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255}get indexA(){return this._indexA}set indexA(e){this._indexA=e,this._key_invalid=!0}get indexB(){return this._indexB}set indexB(e){this._indexB=e,this._key_invalid=!0}get typeA(){return this._typeA}set typeA(e){this._typeA=e,this._key_invalid=!0}get typeB(){return this._typeB}set typeB(e){this._typeB=e,this._key_invalid=!0}}o.b2ContactFeature=c;class d{constructor(){this.cf=new c}Copy(e){return this.key=e.key,this}Clone(){return(new d).Copy(this)}get key(){return this.cf.key}set key(e){this.cf.key=e}}o.b2ContactID=d;class u{constructor(){this.localPoint=new a.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.id=new d}static MakeArray(e){return i.b2MakeArray(e,()=>new u)}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(e){return this.localPoint.Copy(e.localPoint),this.normalImpulse=e.normalImpulse,this.tangentImpulse=e.tangentImpulse,this.id.Copy(e.id),this}}o.b2ManifoldPoint=u,function(e){e[e.e_unknown=-1]="e_unknown",e[e.e_circles=0]="e_circles",e[e.e_faceA=1]="e_faceA",e[e.e_faceB=2]="e_faceB"}(n=o.b2ManifoldType||(o.b2ManifoldType={}));class m{constructor(){this.points=u.MakeArray(i.b2_maxManifoldPoints),this.localNormal=new a.b2Vec2,this.localPoint=new a.b2Vec2,this.type=n.e_unknown,this.pointCount=0}Reset(){for(let e=0;e<i.b2_maxManifoldPoints;++e)this.points[e].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=n.e_unknown,this.pointCount=0}Copy(e){this.pointCount=e.pointCount;for(let t=0;t<i.b2_maxManifoldPoints;++t)this.points[t].Copy(e.points[t]);return this.localNormal.Copy(e.localNormal),this.localPoint.Copy(e.localPoint),this.type=e.type,this}Clone(){return(new m).Copy(this)}}o.b2Manifold=m;class p{constructor(){this.normal=new a.b2Vec2,this.points=a.b2Vec2.MakeArray(i.b2_maxManifoldPoints),this.separations=i.b2MakeNumberArray(i.b2_maxManifoldPoints)}Initialize(e,t,o,r,s){if(0!==e.pointCount)switch(e.type){case n.e_circles:{this.normal.Set(1,0);const n=a.b2Transform.MulXV(t,e.localPoint,p.Initialize_s_pointA),l=a.b2Transform.MulXV(r,e.points[0].localPoint,p.Initialize_s_pointB);a.b2Vec2.DistanceSquaredVV(n,l)>i.b2_epsilon_sq&&a.b2Vec2.SubVV(l,n,this.normal).SelfNormalize();const c=a.b2Vec2.AddVMulSV(n,o,this.normal,p.Initialize_s_cA),d=a.b2Vec2.SubVMulSV(l,s,this.normal,p.Initialize_s_cB);a.b2Vec2.MidVV(c,d,this.points[0]),this.separations[0]=a.b2Vec2.DotVV(a.b2Vec2.SubVV(d,c,a.b2Vec2.s_t0),this.normal);break}case n.e_faceA:{a.b2Rot.MulRV(t.q,e.localNormal,this.normal);const i=a.b2Transform.MulXV(t,e.localPoint,p.Initialize_s_planePoint);for(let t=0;t<e.pointCount;++t){const n=a.b2Transform.MulXV(r,e.points[t].localPoint,p.Initialize_s_clipPoint),l=o-a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,i,a.b2Vec2.s_t0),this.normal),c=a.b2Vec2.AddVMulSV(n,l,this.normal,p.Initialize_s_cA),d=a.b2Vec2.SubVMulSV(n,s,this.normal,p.Initialize_s_cB);a.b2Vec2.MidVV(c,d,this.points[t]),this.separations[t]=a.b2Vec2.DotVV(a.b2Vec2.SubVV(d,c,a.b2Vec2.s_t0),this.normal)}break}case n.e_faceB:{a.b2Rot.MulRV(r.q,e.localNormal,this.normal);const i=a.b2Transform.MulXV(r,e.localPoint,p.Initialize_s_planePoint);for(let r=0;r<e.pointCount;++r){const n=a.b2Transform.MulXV(t,e.points[r].localPoint,p.Initialize_s_clipPoint),l=s-a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,i,a.b2Vec2.s_t0),this.normal),c=a.b2Vec2.AddVMulSV(n,l,this.normal,p.Initialize_s_cB),d=a.b2Vec2.SubVMulSV(n,o,this.normal,p.Initialize_s_cA);a.b2Vec2.MidVV(d,c,this.points[r]),this.separations[r]=a.b2Vec2.DotVV(a.b2Vec2.SubVV(d,c,a.b2Vec2.s_t0),this.normal)}this.normal.SelfNeg();break}}}}o.b2WorldManifold=p,p.Initialize_s_pointA=new a.b2Vec2,p.Initialize_s_pointB=new a.b2Vec2,p.Initialize_s_cA=new a.b2Vec2,p.Initialize_s_cB=new a.b2Vec2,p.Initialize_s_planePoint=new a.b2Vec2,p.Initialize_s_clipPoint=new a.b2Vec2,function(e){e[e.b2_nullState=0]="b2_nullState",e[e.b2_addState=1]="b2_addState",e[e.b2_persistState=2]="b2_persistState",e[e.b2_removeState=3]="b2_removeState"}(l=o.b2PointState||(o.b2PointState={})),o.b2GetPointStates=function(e,t,o,a){let r;for(r=0;r<o.pointCount;++r){const t=o.points[r].id.key;e[r]=l.b2_removeState;for(let o=0,i=a.pointCount;o<i;++o)if(a.points[o].id.key===t){e[r]=l.b2_persistState;break}}for(;r<i.b2_maxManifoldPoints;++r)e[r]=l.b2_nullState;for(r=0;r<a.pointCount;++r){const e=a.points[r].id.key;t[r]=l.b2_addState;for(let i=0,a=o.pointCount;i<a;++i)if(o.points[i].id.key===e){t[r]=l.b2_persistState;break}}for(;r<i.b2_maxManifoldPoints;++r)t[r]=l.b2_nullState};class h{constructor(){this.v=new a.b2Vec2,this.id=new d}static MakeArray(e){return i.b2MakeArray(e,()=>new h)}Copy(e){return this.v.Copy(e.v),this.id.Copy(e.id),this}}o.b2ClipVertex=h,o.b2RayCastInput=class{constructor(){this.p1=new a.b2Vec2,this.p2=new a.b2Vec2,this.maxFraction=1}Copy(e){return this.p1.Copy(e.p1),this.p2.Copy(e.p2),this.maxFraction=e.maxFraction,this}},o.b2RayCastOutput=class{constructor(){this.normal=new a.b2Vec2,this.fraction=0}Copy(e){return this.normal.Copy(e.normal),this.fraction=e.fraction,this}},o.b2AABB=class{constructor(){this.lowerBound=new a.b2Vec2,this.upperBound=new a.b2Vec2,this.m_cache_center=new a.b2Vec2,this.m_cache_extent=new a.b2Vec2}Copy(e){return this.lowerBound.Copy(e.lowerBound),this.upperBound.Copy(e.upperBound),this}IsValid(){return!(!this.lowerBound.IsValid()||!this.upperBound.IsValid()||this.upperBound.x<this.lowerBound.x||this.upperBound.y<this.lowerBound.y)}GetCenter(){return a.b2Vec2.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)}GetExtents(){return a.b2Vec2.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(e){return this.lowerBound.x=a.b2Min(this.lowerBound.x,e.lowerBound.x),this.lowerBound.y=a.b2Min(this.lowerBound.y,e.lowerBound.y),this.upperBound.x=a.b2Max(this.upperBound.x,e.upperBound.x),this.upperBound.y=a.b2Max(this.upperBound.y,e.upperBound.y),this}Combine2(e,t){return this.lowerBound.x=a.b2Min(e.lowerBound.x,t.lowerBound.x),this.lowerBound.y=a.b2Min(e.lowerBound.y,t.lowerBound.y),this.upperBound.x=a.b2Max(e.upperBound.x,t.upperBound.x),this.upperBound.y=a.b2Max(e.upperBound.y,t.upperBound.y),this}static Combine(e,t,o){return o.Combine2(e,t),o}Contains(e){return!(this.lowerBound.x<=e.lowerBound.x||this.lowerBound.y<=e.lowerBound.y||e.upperBound.x<=this.upperBound.x||e.upperBound.y<=this.upperBound.y)}RayCast(e,t){let o=-i.b2_maxFloat,r=i.b2_maxFloat;const s=t.p1.x,n=t.p1.y,l=t.p2.x-t.p1.x,c=t.p2.y-t.p1.y,d=a.b2Abs(l),u=a.b2Abs(c),m=e.normal;if(d<i.b2_epsilon){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{const e=1/l;let t=(this.lowerBound.x-s)*e,i=(this.upperBound.x-s)*e,n=-1;if(t>i){const e=t;t=i,i=e,n=1}if(t>o&&(m.x=n,m.y=0,o=t),o>(r=a.b2Min(r,i)))return!1}if(u<i.b2_epsilon){if(n<this.lowerBound.y||this.upperBound.y<n)return!1}else{const e=1/c;let t=(this.lowerBound.y-n)*e,i=(this.upperBound.y-n)*e,s=-1;if(t>i){const e=t;t=i,i=e,s=1}if(t>o&&(m.x=0,m.y=s,o=t),o>(r=a.b2Min(r,i)))return!1}return!(o<0||t.maxFraction<o||(e.fraction=o,0))}TestContain(e){return!(e.x<this.lowerBound.x||this.upperBound.x<e.x||e.y<this.lowerBound.y||this.upperBound.y<e.y)}TestOverlap(e){return!(this.upperBound.x<e.lowerBound.x||this.upperBound.y<e.lowerBound.y||e.upperBound.x<this.lowerBound.x||e.upperBound.y<this.lowerBound.y)}},o.b2TestOverlapAABB=function(e,t){return!(e.upperBound.x<t.lowerBound.x||e.upperBound.y<t.lowerBound.y||t.upperBound.x<e.lowerBound.x||t.upperBound.y<e.lowerBound.y)},o.b2ClipSegmentToLine=function(e,t,o,i,r){let n=0;const l=t[0],c=t[1],d=a.b2Vec2.DotVV(o,l.v)-i,u=a.b2Vec2.DotVV(o,c.v)-i;if(d<=0&&e[n++].Copy(l),u<=0&&e[n++].Copy(c),d*u<0){const t=d/(d-u),o=e[n].v;o.x=l.v.x+t*(c.v.x-l.v.x),o.y=l.v.y+t*(c.v.y-l.v.y);const i=e[n].id;i.cf.indexA=r,i.cf.indexB=l.id.cf.indexB,i.cf.typeA=s.e_vertex,i.cf.typeB=s.e_face,++n}return n};const f=new r.b2DistanceInput,y=new r.b2SimplexCache,_=new r.b2DistanceOutput;o.b2TestOverlapShape=function(e,t,o,a,s,n){const l=f.Reset();l.proxyA.SetShape(e,t),l.proxyB.SetShape(o,a),l.transformA.Copy(s),l.transformB.Copy(n),l.useRadii=!0;const c=y.Reset();c.count=0;const d=_.Reset();return r.b2Distance(d,c,l),d.distance<10*i.b2_epsilon},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Distance":"b2Distance"}],b2ConstantAccelController:[function(e,t,o){"use strict";cc._RF.push(t,"2d21bxSTbFDPYQ1z5AkNul8","b2ConstantAccelController"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ConstantAccelController=void 0;const i=e("./b2Controller"),a=e("../Common/b2Math");class r extends i.b2Controller{constructor(){super(...arguments),this.A=new a.b2Vec2(0,0)}Step(e){const t=a.b2Vec2.MulSV(e.dt,this.A,r.Step_s_dtA);for(let o=this.m_bodyList;o;o=o.nextBody){const e=o.body;e.IsAwake()&&e.SetLinearVelocity(a.b2Vec2.AddVV(e.GetLinearVelocity(),t,a.b2Vec2.s_t0))}}Draw(e){}}o.b2ConstantAccelController=r,r.Step_s_dtA=new a.b2Vec2,cc._RF.pop()},{"../Common/b2Math":"b2Math","./b2Controller":"b2Controller"}],b2ConstantForceController:[function(e,t,o){"use strict";cc._RF.push(t,"c9e22/97Z1C1agzPs8H+AKn","b2ConstantForceController"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ConstantForceController=void 0;const i=e("./b2Controller"),a=e("../Common/b2Math");o.b2ConstantForceController=class extends i.b2Controller{constructor(){super(...arguments),this.F=new a.b2Vec2(0,0)}Step(e){for(let t=this.m_bodyList;t;t=t.nextBody){const e=t.body;e.IsAwake()&&e.ApplyForce(this.F,e.GetWorldCenter())}}Draw(e){}},cc._RF.pop()},{"../Common/b2Math":"b2Math","./b2Controller":"b2Controller"}],b2ContactFactory:[function(e,t,o){"use strict";cc._RF.push(t,"e1bc6n6LPJBybUHGynpM85G","b2ContactFactory"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ContactFactory=o.b2ContactRegister=void 0;const i=e("../../Collision/Shapes/b2Shape"),a=e("./b2CircleContact"),r=e("./b2PolygonContact"),s=e("./b2PolygonAndCircleContact"),n=e("./b2EdgeAndCircleContact"),l=e("./b2EdgeAndPolygonContact"),c=e("./b2ChainAndCircleContact"),d=e("./b2ChainAndPolygonContact");class u{constructor(){this.pool=[],this.createFcn=null,this.destroyFcn=null,this.primary=!1}}o.b2ContactRegister=u,o.b2ContactFactory=class{constructor(){this.m_registers=[],this.InitializeRegisters()}AddType(e,t,o,i){const a=[];function r(){return a.pop()||e()}function s(e){a.push(e)}this.m_registers[o][i].pool=a,this.m_registers[o][i].createFcn=r,this.m_registers[o][i].destroyFcn=s,this.m_registers[o][i].primary=!0,o!==i&&(this.m_registers[i][o].pool=a,this.m_registers[i][o].createFcn=r,this.m_registers[i][o].destroyFcn=s,this.m_registers[i][o].primary=!1)}InitializeRegisters(){for(let e=0;e<i.b2ShapeType.e_shapeTypeCount;e++){this.m_registers[e]=[];for(let t=0;t<i.b2ShapeType.e_shapeTypeCount;t++)this.m_registers[e][t]=new u}this.AddType(a.b2CircleContact.Create,a.b2CircleContact.Destroy,i.b2ShapeType.e_circleShape,i.b2ShapeType.e_circleShape),this.AddType(s.b2PolygonAndCircleContact.Create,s.b2PolygonAndCircleContact.Destroy,i.b2ShapeType.e_polygonShape,i.b2ShapeType.e_circleShape),this.AddType(r.b2PolygonContact.Create,r.b2PolygonContact.Destroy,i.b2ShapeType.e_polygonShape,i.b2ShapeType.e_polygonShape),this.AddType(n.b2EdgeAndCircleContact.Create,n.b2EdgeAndCircleContact.Destroy,i.b2ShapeType.e_edgeShape,i.b2ShapeType.e_circleShape),this.AddType(l.b2EdgeAndPolygonContact.Create,l.b2EdgeAndPolygonContact.Destroy,i.b2ShapeType.e_edgeShape,i.b2ShapeType.e_polygonShape),this.AddType(c.b2ChainAndCircleContact.Create,c.b2ChainAndCircleContact.Destroy,i.b2ShapeType.e_chainShape,i.b2ShapeType.e_circleShape),this.AddType(d.b2ChainAndPolygonContact.Create,d.b2ChainAndPolygonContact.Destroy,i.b2ShapeType.e_chainShape,i.b2ShapeType.e_polygonShape)}Create(e,t,o,i){const a=e.GetType(),r=o.GetType(),s=this.m_registers[a][r];if(s.createFcn){const a=s.createFcn();return s.primary?a.Reset(e,t,o,i):a.Reset(o,i,e,t),a}return null}Destroy(e){const t=e.m_fixtureA.GetType(),o=e.m_fixtureB.GetType(),i=this.m_registers[t][o];i.destroyFcn&&i.destroyFcn(e)}},cc._RF.pop()},{"../../Collision/Shapes/b2Shape":"b2Shape","./b2ChainAndCircleContact":"b2ChainAndCircleContact","./b2ChainAndPolygonContact":"b2ChainAndPolygonContact","./b2CircleContact":"b2CircleContact","./b2EdgeAndCircleContact":"b2EdgeAndCircleContact","./b2EdgeAndPolygonContact":"b2EdgeAndPolygonContact","./b2PolygonAndCircleContact":"b2PolygonAndCircleContact","./b2PolygonContact":"b2PolygonContact"}],b2ContactManager:[function(e,t,o){"use strict";cc._RF.push(t,"fb036w03StLPJHX+hemZmrr","b2ContactManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ContactManager=void 0;const i=e("../Collision/b2BroadPhase"),a=e("../Collision/b2Collision"),r=e("./Contacts/b2ContactFactory"),s=e("./b2Body"),n=e("./b2WorldCallbacks");o.b2ContactManager=class{constructor(){this.m_broadPhase=new i.b2BroadPhase,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=n.b2ContactFilter.b2_defaultFilter,this.m_contactListener=n.b2ContactListener.b2_defaultListener,this.m_contactFactory=new r.b2ContactFactory}AddPair(e,t){let o=e.fixture,i=t.fixture,a=e.childIndex,r=t.childIndex,s=o.GetBody(),n=i.GetBody();if(s===n)return;let l=n.GetContactList();for(;l;){if(l.other===s){const e=l.contact.GetFixtureA(),t=l.contact.GetFixtureB(),s=l.contact.GetChildIndexA(),n=l.contact.GetChildIndexB();if(e===o&&t===i&&s===a&&n===r)return;if(e===i&&t===o&&s===r&&n===a)return}l=l.next}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(o,i))return;const c=this.m_contactFactory.Create(o,a,i,r);null!==c&&(o=c.GetFixtureA(),i=c.GetFixtureB(),a=c.GetChildIndexA(),r=c.GetChildIndexB(),s=o.m_body,n=i.m_body,c.m_prev=null,c.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=c),this.m_contactList=c,c.m_nodeA.other=n,c.m_nodeA.prev=null,c.m_nodeA.next=s.m_contactList,null!==s.m_contactList&&(s.m_contactList.prev=c.m_nodeA),s.m_contactList=c.m_nodeA,c.m_nodeB.other=s,c.m_nodeB.prev=null,c.m_nodeB.next=n.m_contactList,null!==n.m_contactList&&(n.m_contactList.prev=c.m_nodeB),n.m_contactList=c.m_nodeB,o.IsSensor()||i.IsSensor()||(s.SetAwake(!0),n.SetAwake(!0)),++this.m_contactCount)}FindNewContacts(){this.m_broadPhase.UpdatePairs((e,t)=>{this.AddPair(e,t)})}Destroy(e){const t=e.GetFixtureA(),o=e.GetFixtureB(),i=t.GetBody(),a=o.GetBody();this.m_contactListener&&e.IsTouching()&&this.m_contactListener.EndContact(e),e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_contactList&&(this.m_contactList=e.m_next),e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next),e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev),e.m_nodeA===i.m_contactList&&(i.m_contactList=e.m_nodeA.next),e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next),e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev),e.m_nodeB===a.m_contactList&&(a.m_contactList=e.m_nodeB.next),e.m_manifold.pointCount>0&&!t.IsSensor()&&!o.IsSensor()&&(t.GetBody().SetAwake(!0),o.GetBody().SetAwake(!0)),this.m_contactFactory.Destroy(e),--this.m_contactCount}Collide(){let e=this.m_contactList;for(;e;){const t=e.GetFixtureA(),o=e.GetFixtureB(),i=e.GetChildIndexA(),r=e.GetChildIndexB(),n=t.GetBody(),l=o.GetBody();if(e.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(t,o)){const t=e;e=t.m_next,this.Destroy(t);continue}e.m_filterFlag=!1}const c=n.IsAwake()&&n.m_type!==s.b2BodyType.b2_staticBody,d=l.IsAwake()&&l.m_type!==s.b2BodyType.b2_staticBody;if(!c&&!d){e=e.m_next;continue}const u=t.m_proxies[i].treeNode,m=o.m_proxies[r].treeNode;if(a.b2TestOverlapAABB(u.aabb,m.aabb))e.Update(this.m_contactListener),e=e.m_next;else{const t=e;e=t.m_next,this.Destroy(t)}}}},cc._RF.pop()},{"../Collision/b2BroadPhase":"b2BroadPhase","../Collision/b2Collision":"b2Collision","./Contacts/b2ContactFactory":"b2ContactFactory","./b2Body":"b2Body","./b2WorldCallbacks":"b2WorldCallbacks"}],b2ContactSolver:[function(e,t,o){"use strict";cc._RF.push(t,"518e9kIscZK56VN0Vi58GtR","b2ContactSolver"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ContactSolver=o.b2PositionSolverManifold=o.b2ContactSolverDef=o.b2ContactPositionConstraint=o.b2ContactVelocityConstraint=o.b2VelocityConstraintPoint=o.g_blockSolve=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("../../Collision/b2Collision"),s=e("../../Collision/b2Collision"),n=e("../b2TimeStep");o.g_blockSolve=!1;class l{constructor(){this.rA=new a.b2Vec2,this.rB=new a.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}static MakeArray(e){return i.b2MakeArray(e,()=>new l)}}o.b2VelocityConstraintPoint=l;class c{constructor(){this.points=l.MakeArray(i.b2_maxManifoldPoints),this.normal=new a.b2Vec2,this.tangent=new a.b2Vec2,this.normalMass=new a.b2Mat22,this.K=new a.b2Mat22,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}static MakeArray(e){return i.b2MakeArray(e,()=>new c)}}o.b2ContactVelocityConstraint=c;class d{constructor(){this.localPoints=a.b2Vec2.MakeArray(i.b2_maxManifoldPoints),this.localNormal=new a.b2Vec2,this.localPoint=new a.b2Vec2,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new a.b2Vec2,this.localCenterB=new a.b2Vec2,this.invIA=0,this.invIB=0,this.type=s.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}static MakeArray(e){return i.b2MakeArray(e,()=>new d)}}o.b2ContactPositionConstraint=d,o.b2ContactSolverDef=class{constructor(){this.step=new n.b2TimeStep,this.count=0}};class u{constructor(){this.normal=new a.b2Vec2,this.point=new a.b2Vec2,this.separation=0}Initialize(e,t,o,i){const r=u.Initialize_s_pointA,n=u.Initialize_s_pointB,l=u.Initialize_s_planePoint,c=u.Initialize_s_clipPoint;switch(e.type){case s.b2ManifoldType.e_circles:a.b2Transform.MulXV(t,e.localPoint,r),a.b2Transform.MulXV(o,e.localPoints[0],n),a.b2Vec2.SubVV(n,r,this.normal).SelfNormalize(),a.b2Vec2.MidVV(r,n,this.point),this.separation=a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,r,a.b2Vec2.s_t0),this.normal)-e.radiusA-e.radiusB;break;case s.b2ManifoldType.e_faceA:a.b2Rot.MulRV(t.q,e.localNormal,this.normal),a.b2Transform.MulXV(t,e.localPoint,l),a.b2Transform.MulXV(o,e.localPoints[i],c),this.separation=a.b2Vec2.DotVV(a.b2Vec2.SubVV(c,l,a.b2Vec2.s_t0),this.normal)-e.radiusA-e.radiusB,this.point.Copy(c);break;case s.b2ManifoldType.e_faceB:a.b2Rot.MulRV(o.q,e.localNormal,this.normal),a.b2Transform.MulXV(o,e.localPoint,l),a.b2Transform.MulXV(t,e.localPoints[i],c),this.separation=a.b2Vec2.DotVV(a.b2Vec2.SubVV(c,l,a.b2Vec2.s_t0),this.normal)-e.radiusA-e.radiusB,this.point.Copy(c),this.normal.SelfNeg()}}}o.b2PositionSolverManifold=u,u.Initialize_s_pointA=new a.b2Vec2,u.Initialize_s_pointB=new a.b2Vec2,u.Initialize_s_planePoint=new a.b2Vec2,u.Initialize_s_clipPoint=new a.b2Vec2;class m{constructor(){this.m_step=new n.b2TimeStep,this.m_positionConstraints=d.MakeArray(1024),this.m_velocityConstraints=c.MakeArray(1024),this.m_count=0}Initialize(e){if(this.m_step.Copy(e.step),this.m_count=e.count,this.m_positionConstraints.length<this.m_count){const e=a.b2Max(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<e;)this.m_positionConstraints[this.m_positionConstraints.length]=new d}if(this.m_velocityConstraints.length<this.m_count){const e=a.b2Max(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<e;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new c}this.m_positions=e.positions,this.m_velocities=e.velocities,this.m_contacts=e.contacts;for(let t=0;t<this.m_count;++t){const e=this.m_contacts[t],o=e.m_fixtureA,i=e.m_fixtureB,a=o.GetShape(),r=i.GetShape(),s=a.m_radius,n=r.m_radius,l=o.GetBody(),c=i.GetBody(),d=e.GetManifold(),u=d.pointCount,m=this.m_velocityConstraints[t];m.friction=e.m_friction,m.restitution=e.m_restitution,m.tangentSpeed=e.m_tangentSpeed,m.indexA=l.m_islandIndex,m.indexB=c.m_islandIndex,m.invMassA=l.m_invMass,m.invMassB=c.m_invMass,m.invIA=l.m_invI,m.invIB=c.m_invI,m.contactIndex=t,m.pointCount=u,m.K.SetZero(),m.normalMass.SetZero();const p=this.m_positionConstraints[t];p.indexA=l.m_islandIndex,p.indexB=c.m_islandIndex,p.invMassA=l.m_invMass,p.invMassB=c.m_invMass,p.localCenterA.Copy(l.m_sweep.localCenter),p.localCenterB.Copy(c.m_sweep.localCenter),p.invIA=l.m_invI,p.invIB=c.m_invI,p.localNormal.Copy(d.localNormal),p.localPoint.Copy(d.localPoint),p.pointCount=u,p.radiusA=s,p.radiusB=n,p.type=d.type;for(let t=0;t<u;++t){const e=d.points[t],o=m.points[t];this.m_step.warmStarting?(o.normalImpulse=this.m_step.dtRatio*e.normalImpulse,o.tangentImpulse=this.m_step.dtRatio*e.tangentImpulse):(o.normalImpulse=0,o.tangentImpulse=0),o.rA.SetZero(),o.rB.SetZero(),o.normalMass=0,o.tangentMass=0,o.velocityBias=0,p.localPoints[t].Copy(e.localPoint)}}return this}InitializeVelocityConstraints(){const e=m.InitializeVelocityConstraints_s_xfA,t=m.InitializeVelocityConstraints_s_xfB,r=m.InitializeVelocityConstraints_s_worldManifold;for(let s=0;s<this.m_count;++s){const n=this.m_velocityConstraints[s],l=this.m_positionConstraints[s],c=l.radiusA,d=l.radiusB,u=this.m_contacts[n.contactIndex].GetManifold(),m=n.indexA,p=n.indexB,h=n.invMassA,f=n.invMassB,y=n.invIA,_=n.invIB,g=l.localCenterA,b=l.localCenterB,S=this.m_positions[m].c,P=this.m_positions[m].a,B=this.m_velocities[m].v,C=this.m_velocities[m].w,M=this.m_positions[p].c,x=this.m_positions[p].a,V=this.m_velocities[p].v,I=this.m_velocities[p].w;e.q.SetAngle(P),t.q.SetAngle(x),a.b2Vec2.SubVV(S,a.b2Rot.MulRV(e.q,g,a.b2Vec2.s_t0),e.p),a.b2Vec2.SubVV(M,a.b2Rot.MulRV(t.q,b,a.b2Vec2.s_t0),t.p),r.Initialize(u,e,c,t,d),n.normal.Copy(r.normal),a.b2Vec2.CrossVOne(n.normal,n.tangent);const O=n.pointCount;for(let e=0;e<O;++e){const t=n.points[e];a.b2Vec2.SubVV(r.points[e],S,t.rA),a.b2Vec2.SubVV(r.points[e],M,t.rB);const o=a.b2Vec2.CrossVV(t.rA,n.normal),s=a.b2Vec2.CrossVV(t.rB,n.normal),l=h+f+y*o*o+_*s*s;t.normalMass=l>0?1/l:0;const c=n.tangent,d=a.b2Vec2.CrossVV(t.rA,c),u=a.b2Vec2.CrossVV(t.rB,c),m=h+f+y*d*d+_*u*u;t.tangentMass=m>0?1/m:0,t.velocityBias=0;const p=a.b2Vec2.DotVV(n.normal,a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(V,I,t.rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(B,C,t.rA,a.b2Vec2.s_t1),a.b2Vec2.s_t0));p<-i.b2_velocityThreshold&&(t.velocityBias+=-n.restitution*p)}if(2===n.pointCount&&o.g_blockSolve){const e=n.points[0],t=n.points[1],o=a.b2Vec2.CrossVV(e.rA,n.normal),i=a.b2Vec2.CrossVV(e.rB,n.normal),r=a.b2Vec2.CrossVV(t.rA,n.normal),s=a.b2Vec2.CrossVV(t.rB,n.normal),l=h+f+y*o*o+_*i*i,c=h+f+y*r*r+_*s*s,d=h+f+y*o*r+_*i*s;l*l<1e3*(l*c-d*d)?(n.K.ex.Set(l,d),n.K.ey.Set(d,c),n.K.GetInverse(n.normalMass)):n.pointCount=1}}}WarmStart(){const e=m.WarmStart_s_P;for(let t=0;t<this.m_count;++t){const o=this.m_velocityConstraints[t],i=o.indexA,r=o.indexB,s=o.invMassA,n=o.invIA,l=o.invMassB,c=o.invIB,d=o.pointCount,u=this.m_velocities[i].v;let m=this.m_velocities[i].w;const p=this.m_velocities[r].v;let h=this.m_velocities[r].w;const f=o.normal,y=o.tangent;for(let t=0;t<d;++t){const i=o.points[t];a.b2Vec2.AddVV(a.b2Vec2.MulSV(i.normalImpulse,f,a.b2Vec2.s_t0),a.b2Vec2.MulSV(i.tangentImpulse,y,a.b2Vec2.s_t1),e),m-=n*a.b2Vec2.CrossVV(i.rA,e),u.SelfMulSub(s,e),h+=c*a.b2Vec2.CrossVV(i.rB,e),p.SelfMulAdd(l,e)}this.m_velocities[i].w=m,this.m_velocities[r].w=h}}SolveVelocityConstraints(){const e=m.SolveVelocityConstraints_s_dv,t=m.SolveVelocityConstraints_s_dv1,i=m.SolveVelocityConstraints_s_dv2,r=m.SolveVelocityConstraints_s_P,s=m.SolveVelocityConstraints_s_a,n=m.SolveVelocityConstraints_s_b,l=m.SolveVelocityConstraints_s_x,c=m.SolveVelocityConstraints_s_d,d=m.SolveVelocityConstraints_s_P1,u=m.SolveVelocityConstraints_s_P2,p=m.SolveVelocityConstraints_s_P1P2;for(let m=0;m<this.m_count;++m){const h=this.m_velocityConstraints[m],f=h.indexA,y=h.indexB,_=h.invMassA,g=h.invIA,b=h.invMassB,S=h.invIB,P=h.pointCount,B=this.m_velocities[f].v;let C=this.m_velocities[f].w;const M=this.m_velocities[y].v;let x=this.m_velocities[y].w;const V=h.normal,I=h.tangent,O=h.friction;for(let t=0;t<P;++t){const o=h.points[t];a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(M,x,o.rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(B,C,o.rA,a.b2Vec2.s_t1),e);const i=a.b2Vec2.DotVV(e,I)-h.tangentSpeed;let s=o.tangentMass*-i;const n=O*o.normalImpulse,l=a.b2Clamp(o.tangentImpulse+s,-n,n);s=l-o.tangentImpulse,o.tangentImpulse=l,a.b2Vec2.MulSV(s,I,r),B.SelfMulSub(_,r),C-=g*a.b2Vec2.CrossVV(o.rA,r),M.SelfMulAdd(b,r),x+=S*a.b2Vec2.CrossVV(o.rB,r)}if(1===h.pointCount||!1===o.g_blockSolve)for(let t=0;t<P;++t){const o=h.points[t];a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(M,x,o.rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(B,C,o.rA,a.b2Vec2.s_t1),e);const i=a.b2Vec2.DotVV(e,V);let s=-o.normalMass*(i-o.velocityBias);const n=a.b2Max(o.normalImpulse+s,0);s=n-o.normalImpulse,o.normalImpulse=n,a.b2Vec2.MulSV(s,V,r),B.SelfMulSub(_,r),C-=g*a.b2Vec2.CrossVV(o.rA,r),M.SelfMulAdd(b,r),x+=S*a.b2Vec2.CrossVV(o.rB,r)}else{const e=h.points[0],o=h.points[1];s.Set(e.normalImpulse,o.normalImpulse),a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(M,x,e.rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(B,C,e.rA,a.b2Vec2.s_t1),t),a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(M,x,o.rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(B,C,o.rA,a.b2Vec2.s_t1),i);let r=a.b2Vec2.DotVV(t,V),m=a.b2Vec2.DotVV(i,V);for(n.x=r-e.velocityBias,n.y=m-o.velocityBias,n.SelfSub(a.b2Mat22.MulMV(h.K,s,a.b2Vec2.s_t0));;){if(a.b2Mat22.MulMV(h.normalMass,n,l).SelfNeg(),l.x>=0&&l.y>=0){a.b2Vec2.SubVV(l,s,c),a.b2Vec2.MulSV(c.x,V,d),a.b2Vec2.MulSV(c.y,V,u),a.b2Vec2.AddVV(d,u,p),B.SelfMulSub(_,p),C-=g*(a.b2Vec2.CrossVV(e.rA,d)+a.b2Vec2.CrossVV(o.rA,u)),M.SelfMulAdd(b,p),x+=S*(a.b2Vec2.CrossVV(e.rB,d)+a.b2Vec2.CrossVV(o.rB,u)),e.normalImpulse=l.x,o.normalImpulse=l.y;break}if(l.x=-e.normalMass*n.x,l.y=0,r=0,m=h.K.ex.y*l.x+n.y,l.x>=0&&m>=0){a.b2Vec2.SubVV(l,s,c),a.b2Vec2.MulSV(c.x,V,d),a.b2Vec2.MulSV(c.y,V,u),a.b2Vec2.AddVV(d,u,p),B.SelfMulSub(_,p),C-=g*(a.b2Vec2.CrossVV(e.rA,d)+a.b2Vec2.CrossVV(o.rA,u)),M.SelfMulAdd(b,p),x+=S*(a.b2Vec2.CrossVV(e.rB,d)+a.b2Vec2.CrossVV(o.rB,u)),e.normalImpulse=l.x,o.normalImpulse=l.y;break}if(l.x=0,l.y=-o.normalMass*n.y,r=h.K.ey.x*l.y+n.x,m=0,l.y>=0&&r>=0){a.b2Vec2.SubVV(l,s,c),a.b2Vec2.MulSV(c.x,V,d),a.b2Vec2.MulSV(c.y,V,u),a.b2Vec2.AddVV(d,u,p),B.SelfMulSub(_,p),C-=g*(a.b2Vec2.CrossVV(e.rA,d)+a.b2Vec2.CrossVV(o.rA,u)),M.SelfMulAdd(b,p),x+=S*(a.b2Vec2.CrossVV(e.rB,d)+a.b2Vec2.CrossVV(o.rB,u)),e.normalImpulse=l.x,o.normalImpulse=l.y;break}if(l.x=0,l.y=0,r=n.x,m=n.y,r>=0&&m>=0){a.b2Vec2.SubVV(l,s,c),a.b2Vec2.MulSV(c.x,V,d),a.b2Vec2.MulSV(c.y,V,u),a.b2Vec2.AddVV(d,u,p),B.SelfMulSub(_,p),C-=g*(a.b2Vec2.CrossVV(e.rA,d)+a.b2Vec2.CrossVV(o.rA,u)),M.SelfMulAdd(b,p),x+=S*(a.b2Vec2.CrossVV(e.rB,d)+a.b2Vec2.CrossVV(o.rB,u)),e.normalImpulse=l.x,o.normalImpulse=l.y;break}break}}this.m_velocities[f].w=C,this.m_velocities[y].w=x}}StoreImpulses(){for(let e=0;e<this.m_count;++e){const t=this.m_velocityConstraints[e],o=this.m_contacts[t.contactIndex].GetManifold();for(let e=0;e<t.pointCount;++e)o.points[e].normalImpulse=t.points[e].normalImpulse,o.points[e].tangentImpulse=t.points[e].tangentImpulse}}SolvePositionConstraints(){const e=m.SolvePositionConstraints_s_xfA,t=m.SolvePositionConstraints_s_xfB,o=m.SolvePositionConstraints_s_psm,r=m.SolvePositionConstraints_s_rA,s=m.SolvePositionConstraints_s_rB,n=m.SolvePositionConstraints_s_P;let l=0;for(let c=0;c<this.m_count;++c){const d=this.m_positionConstraints[c],u=d.indexA,m=d.indexB,p=d.localCenterA,h=d.invMassA,f=d.invIA,y=d.localCenterB,_=d.invMassB,g=d.invIB,b=d.pointCount,S=this.m_positions[u].c;let P=this.m_positions[u].a;const B=this.m_positions[m].c;let C=this.m_positions[m].a;for(let c=0;c<b;++c){e.q.SetAngle(P),t.q.SetAngle(C),a.b2Vec2.SubVV(S,a.b2Rot.MulRV(e.q,p,a.b2Vec2.s_t0),e.p),a.b2Vec2.SubVV(B,a.b2Rot.MulRV(t.q,y,a.b2Vec2.s_t0),t.p),o.Initialize(d,e,t,c);const u=o.normal,m=o.point,b=o.separation;a.b2Vec2.SubVV(m,S,r),a.b2Vec2.SubVV(m,B,s),l=a.b2Min(l,b);const M=a.b2Clamp(i.b2_baumgarte*(b+i.b2_linearSlop),-i.b2_maxLinearCorrection,0),x=a.b2Vec2.CrossVV(r,u),V=a.b2Vec2.CrossVV(s,u),I=h+_+f*x*x+g*V*V,O=I>0?-M/I:0;a.b2Vec2.MulSV(O,u,n),S.SelfMulSub(h,n),P-=f*a.b2Vec2.CrossVV(r,n),B.SelfMulAdd(_,n),C+=g*a.b2Vec2.CrossVV(s,n)}this.m_positions[u].a=P,this.m_positions[m].a=C}return l>-3*i.b2_linearSlop}SolveTOIPositionConstraints(e,t){const o=m.SolveTOIPositionConstraints_s_xfA,r=m.SolveTOIPositionConstraints_s_xfB,s=m.SolveTOIPositionConstraints_s_psm,n=m.SolveTOIPositionConstraints_s_rA,l=m.SolveTOIPositionConstraints_s_rB,c=m.SolveTOIPositionConstraints_s_P;let d=0;for(let u=0;u<this.m_count;++u){const m=this.m_positionConstraints[u],p=m.indexA,h=m.indexB,f=m.localCenterA,y=m.localCenterB,_=m.pointCount;let g=0,b=0;p!==e&&p!==t||(g=m.invMassA,b=m.invIA);let S=0,P=0;h!==e&&h!==t||(S=m.invMassB,P=m.invIB);const B=this.m_positions[p].c;let C=this.m_positions[p].a;const M=this.m_positions[h].c;let x=this.m_positions[h].a;for(let e=0;e<_;++e){o.q.SetAngle(C),r.q.SetAngle(x),a.b2Vec2.SubVV(B,a.b2Rot.MulRV(o.q,f,a.b2Vec2.s_t0),o.p),a.b2Vec2.SubVV(M,a.b2Rot.MulRV(r.q,y,a.b2Vec2.s_t0),r.p),s.Initialize(m,o,r,e);const t=s.normal,u=s.point,p=s.separation;a.b2Vec2.SubVV(u,B,n),a.b2Vec2.SubVV(u,M,l),d=a.b2Min(d,p);const h=a.b2Clamp(i.b2_toiBaumgarte*(p+i.b2_linearSlop),-i.b2_maxLinearCorrection,0),_=a.b2Vec2.CrossVV(n,t),V=a.b2Vec2.CrossVV(l,t),I=g+S+b*_*_+P*V*V,O=I>0?-h/I:0;a.b2Vec2.MulSV(O,t,c),B.SelfMulSub(g,c),C-=b*a.b2Vec2.CrossVV(n,c),M.SelfMulAdd(S,c),x+=P*a.b2Vec2.CrossVV(l,c)}this.m_positions[p].a=C,this.m_positions[h].a=x}return d>=-1.5*i.b2_linearSlop}}o.b2ContactSolver=m,m.InitializeVelocityConstraints_s_xfA=new a.b2Transform,m.InitializeVelocityConstraints_s_xfB=new a.b2Transform,m.InitializeVelocityConstraints_s_worldManifold=new r.b2WorldManifold,m.WarmStart_s_P=new a.b2Vec2,m.SolveVelocityConstraints_s_dv=new a.b2Vec2,m.SolveVelocityConstraints_s_dv1=new a.b2Vec2,m.SolveVelocityConstraints_s_dv2=new a.b2Vec2,m.SolveVelocityConstraints_s_P=new a.b2Vec2,m.SolveVelocityConstraints_s_a=new a.b2Vec2,m.SolveVelocityConstraints_s_b=new a.b2Vec2,m.SolveVelocityConstraints_s_x=new a.b2Vec2,m.SolveVelocityConstraints_s_d=new a.b2Vec2,m.SolveVelocityConstraints_s_P1=new a.b2Vec2,m.SolveVelocityConstraints_s_P2=new a.b2Vec2,m.SolveVelocityConstraints_s_P1P2=new a.b2Vec2,m.SolvePositionConstraints_s_xfA=new a.b2Transform,m.SolvePositionConstraints_s_xfB=new a.b2Transform,m.SolvePositionConstraints_s_psm=new u,m.SolvePositionConstraints_s_rA=new a.b2Vec2,m.SolvePositionConstraints_s_rB=new a.b2Vec2,m.SolvePositionConstraints_s_P=new a.b2Vec2,m.SolveTOIPositionConstraints_s_xfA=new a.b2Transform,m.SolveTOIPositionConstraints_s_xfB=new a.b2Transform,m.SolveTOIPositionConstraints_s_psm=new u,m.SolveTOIPositionConstraints_s_rA=new a.b2Vec2,m.SolveTOIPositionConstraints_s_rB=new a.b2Vec2,m.SolveTOIPositionConstraints_s_P=new a.b2Vec2,cc._RF.pop()},{"../../Collision/b2Collision":"b2Collision","../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","../b2TimeStep":"b2TimeStep"}],b2Contact:[function(e,t,o){"use strict";cc._RF.push(t,"12a0aoWyslEUZlCwxqiVQYe","b2Contact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Contact=o.b2ContactEdge=o.b2MixRestitution=o.b2MixFriction=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("../../Collision/b2Collision"),s=e("../../Collision/b2Collision"),n=e("../../Collision/b2TimeOfImpact");function l(e,t){return a.b2Sqrt(e*t)}function c(e,t){return e>t?e:t}o.b2MixFriction=l,o.b2MixRestitution=c;class d{constructor(e){this._other=null,this.prev=null,this.next=null,this.contact=e}get other(){if(null===this._other)throw new Error;return this._other}set other(e){if(null!==this._other)throw new Error;this._other=e}Reset(){this._other=null,this.prev=null,this.next=null}}o.b2ContactEdge=d;class u{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_nodeA=new d(this),this.m_nodeB=new d(this),this.m_indexA=0,this.m_indexB=0,this.m_manifold=new r.b2Manifold,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new r.b2Manifold}GetManifold(){return this.m_manifold}GetWorldManifold(e){const t=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody(),i=this.GetShapeA(),a=this.GetShapeB();e.Initialize(this.m_manifold,t.GetTransform(),i.m_radius,o.GetTransform(),a.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(e){this.m_enabledFlag=e}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetShapeA(){return this.m_fixtureA.GetShape()}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}GetShapeB(){return this.m_fixtureB.GetShape()}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(e){this.m_friction=e}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=l(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(e){this.m_restitution=e}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=c(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetTangentSpeed(e){this.m_tangentSpeed=e}GetTangentSpeed(){return this.m_tangentSpeed}Reset(e,t,o,i){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=e,this.m_fixtureB=o,this.m_indexA=t,this.m_indexB=i,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.Reset(),this.m_nodeB.Reset(),this.m_toiCount=0,this.m_friction=l(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=c(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}Update(e){const t=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=t,this.m_enabledFlag=!0;let o=!1;const i=this.m_touchingFlag,a=this.m_fixtureA.IsSensor(),r=this.m_fixtureB.IsSensor(),n=a||r,l=this.m_fixtureA.GetBody(),c=this.m_fixtureB.GetBody(),d=l.GetTransform(),u=c.GetTransform();if(n){const e=this.GetShapeA(),t=this.GetShapeB();o=s.b2TestOverlapShape(e,this.m_indexA,t,this.m_indexB,d,u),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,d,u),o=this.m_manifold.pointCount>0;for(let e=0;e<this.m_manifold.pointCount;++e){const t=this.m_manifold.points[e];t.normalImpulse=0,t.tangentImpulse=0;const o=t.id;for(let e=0;e<this.m_oldManifold.pointCount;++e){const i=this.m_oldManifold.points[e];if(i.id.key===o.key){t.normalImpulse=i.normalImpulse,t.tangentImpulse=i.tangentImpulse;break}}}o!==i&&(l.SetAwake(!0),c.SetAwake(!0))}this.m_touchingFlag=o,!i&&o&&e&&e.BeginContact(this),i&&!o&&e&&e.EndContact(this),!n&&o&&e&&e.PreSolve(this,this.m_oldManifold)}ComputeTOI(e,t){const o=u.ComputeTOI_s_input;o.proxyA.SetShape(this.GetShapeA(),this.m_indexA),o.proxyB.SetShape(this.GetShapeB(),this.m_indexB),o.sweepA.Copy(e),o.sweepB.Copy(t),o.tMax=i.b2_linearSlop;const a=u.ComputeTOI_s_output;return n.b2TimeOfImpact(a,o),a.t}}o.b2Contact=u,u.ComputeTOI_s_input=new n.b2TOIInput,u.ComputeTOI_s_output=new n.b2TOIOutput,cc._RF.pop()},{"../../Collision/b2Collision":"b2Collision","../../Collision/b2TimeOfImpact":"b2TimeOfImpact","../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings"}],b2Controller:[function(e,t,o){"use strict";cc._RF.push(t,"86e07gLsYJIpKUVqL94w9Ur","b2Controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Controller=o.b2ControllerEdge=void 0;class i{constructor(e,t){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=e,this.body=t}}o.b2ControllerEdge=i,o.b2Controller=class{constructor(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}GetNext(){return this.m_next}GetPrev(){return this.m_prev}GetBodyList(){return this.m_bodyList}AddBody(e){const t=new i(this,e);t.nextBody=this.m_bodyList,t.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=t),this.m_bodyList=t,++this.m_bodyCount,t.nextController=e.m_controllerList,t.prevController=null,e.m_controllerList&&(e.m_controllerList.prevController=t),e.m_controllerList=t,++e.m_controllerCount}RemoveBody(e){if(this.m_bodyCount<=0)throw new Error;let t=this.m_bodyList;for(;t&&t.body!==e;)t=t.nextBody;if(null===t)throw new Error;t.prevBody&&(t.prevBody.nextBody=t.nextBody),t.nextBody&&(t.nextBody.prevBody=t.prevBody),this.m_bodyList===t&&(this.m_bodyList=t.nextBody),--this.m_bodyCount,t.nextController&&(t.nextController.prevController=t.prevController),t.prevController&&(t.prevController.nextController=t.nextController),e.m_controllerList===t&&(e.m_controllerList=t.nextController),--e.m_controllerCount}Clear(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0}},cc._RF.pop()},{}],b2DistanceJoint:[function(e,t,o){"use strict";cc._RF.push(t,"22ea9Nve1FHAL6D7XbI2FcX","b2DistanceJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2DistanceJoint=o.b2DistanceJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2DistanceJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_distanceJoint),this.localAnchorA=new a.b2Vec2,this.localAnchorB=new a.b2Vec2,this.length=1,this.frequencyHz=0,this.dampingRatio=0}Initialize(e,t,o,i){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.length=a.b2Vec2.DistanceVV(o,i),this.frequencyHz=0,this.dampingRatio=0}};class s extends r.b2Joint{constructor(e){super(e),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_gamma=0,this.m_impulse=0,this.m_length=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new a.b2Vec2,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_frequencyHz=i.b2Maybe(e.frequencyHz,0),this.m_dampingRatio=i.b2Maybe(e.dampingRatio,0),this.m_localAnchorA.Copy(e.localAnchorA),this.m_localAnchorB.Copy(e.localAnchorB),this.m_length=e.length}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse*this.m_u.x,t.y=e*this.m_impulse*this.m_u.y,t}GetReactionTorque(e){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(e){this.m_length=e}Length(){return this.m_length}SetFrequency(e){this.m_frequencyHz=e}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(e){this.m_dampingRatio=e}GetDampingRatio(){return this.m_dampingRatio}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.length = %.15f;\n",this.m_length),e("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),e("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].c,o=e.positions[this.m_indexA].a,r=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const l=e.positions[this.m_indexB].c,c=e.positions[this.m_indexB].a,d=e.velocities[this.m_indexB].v;let u=e.velocities[this.m_indexB].w;const m=this.m_qA.SetAngle(o),p=this.m_qB.SetAngle(c);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),a.b2Rot.MulRV(m,this.m_lalcA,this.m_rA),a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(p,this.m_lalcB,this.m_rB),this.m_u.x=l.x+this.m_rB.x-t.x-this.m_rA.x,this.m_u.y=l.y+this.m_rB.y-t.y-this.m_rA.y;const h=this.m_u.Length();h>i.b2_linearSlop?this.m_u.SelfMul(1/h):this.m_u.SetZero();const f=a.b2Vec2.CrossVV(this.m_rA,this.m_u),y=a.b2Vec2.CrossVV(this.m_rB,this.m_u);let _=this.m_invMassA+this.m_invIA*f*f+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!==_?1/_:0,this.m_frequencyHz>0){const t=h-this.m_length,o=2*i.b2_pi*this.m_frequencyHz,a=2*this.m_mass*this.m_dampingRatio*o,r=this.m_mass*o*o,s=e.step.dt;this.m_gamma=s*(a+s*r),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=t*s*r*this.m_gamma,_+=this.m_gamma,this.m_mass=0!==_?1/_:0}else this.m_gamma=0,this.m_bias=0;if(e.step.warmStarting){this.m_impulse*=e.step.dtRatio;const t=a.b2Vec2.MulSV(this.m_impulse,this.m_u,s.InitVelocityConstraints_s_P);r.SelfMulSub(this.m_invMassA,t),n-=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,t),d.SelfMulAdd(this.m_invMassB,t),u+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,t)}else this.m_impulse=0;e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=u}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=a.b2Vec2.AddVCrossSV(t,o,this.m_rA,s.SolveVelocityConstraints_s_vpA),l=a.b2Vec2.AddVCrossSV(i,r,this.m_rB,s.SolveVelocityConstraints_s_vpB),c=a.b2Vec2.DotVV(this.m_u,a.b2Vec2.SubVV(l,n,a.b2Vec2.s_t0)),d=-this.m_mass*(c+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=d;const u=a.b2Vec2.MulSV(d,this.m_u,s.SolveVelocityConstraints_s_P);t.SelfMulSub(this.m_invMassA,u),o-=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,u),i.SelfMulAdd(this.m_invMassB,u),r+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,u),e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){if(this.m_frequencyHz>0)return!0;const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n),d=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA),u=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),m=this.m_u;m.x=r.x+u.x-t.x-d.x,m.y=r.y+u.y-t.y-d.y;let p=this.m_u.Normalize()-this.m_length;p=a.b2Clamp(p,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection);const h=-this.m_mass*p,f=a.b2Vec2.MulSV(h,m,s.SolvePositionConstraints_s_P);return t.SelfMulSub(this.m_invMassA,f),o-=this.m_invIA*a.b2Vec2.CrossVV(d,f),r.SelfMulAdd(this.m_invMassB,f),n+=this.m_invIB*a.b2Vec2.CrossVV(u,f),e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,a.b2Abs(p)<i.b2_linearSlop}}o.b2DistanceJoint=s,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_vpA=new a.b2Vec2,s.SolveVelocityConstraints_s_vpB=new a.b2Vec2,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolvePositionConstraints_s_P=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2Distance:[function(e,t,o){"use strict";cc._RF.push(t,"fcf85kg9ypNPZe5Vt7uTQrv","b2Distance"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ShapeCast=o.b2Distance=o.b2Simplex=o.b2SimplexVertex=o.b2_gjk_reset=o.b2_gjkMaxIters=o.b2_gjkIters=o.b2_gjkCalls=o.b2ShapeCastOutput=o.b2ShapeCastInput=o.b2DistanceOutput=o.b2DistanceInput=o.b2SimplexCache=o.b2DistanceProxy=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math");class r{constructor(){this.m_buffer=a.b2Vec2.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(e){return e.m_vertices===e.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(e.m_buffer[0]),this.m_buffer[1].Copy(e.m_buffer[1])):this.m_vertices=e.m_vertices,this.m_count=e.m_count,this.m_radius=e.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(e,t){e.SetupDistanceProxy(this,t)}SetVerticesRadius(e,t,o){this.m_vertices=e,this.m_count=t,this.m_radius=o}GetSupport(e){let t=0,o=a.b2Vec2.DotVV(this.m_vertices[0],e);for(let i=1;i<this.m_count;++i){const r=a.b2Vec2.DotVV(this.m_vertices[i],e);r>o&&(t=i,o=r)}return t}GetSupportVertex(e){let t=0,o=a.b2Vec2.DotVV(this.m_vertices[0],e);for(let i=1;i<this.m_count;++i){const r=a.b2Vec2.DotVV(this.m_vertices[i],e);r>o&&(t=i,o=r)}return this.m_vertices[t]}GetVertexCount(){return this.m_count}GetVertex(e){return this.m_vertices[e]}}o.b2DistanceProxy=r,o.b2SimplexCache=class{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}},o.b2DistanceInput=class{constructor(){this.proxyA=new r,this.proxyB=new r,this.transformA=new a.b2Transform,this.transformB=new a.b2Transform,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}},o.b2DistanceOutput=class{constructor(){this.pointA=new a.b2Vec2,this.pointB=new a.b2Vec2,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}},o.b2ShapeCastInput=class{constructor(){this.proxyA=new r,this.proxyB=new r,this.transformA=new a.b2Transform,this.transformB=new a.b2Transform,this.translationB=new a.b2Vec2}},o.b2ShapeCastOutput=class{constructor(){this.point=new a.b2Vec2,this.normal=new a.b2Vec2,this.lambda=0,this.iterations=0}},o.b2_gjkCalls=0,o.b2_gjkIters=0,o.b2_gjkMaxIters=0,o.b2_gjk_reset=function(){o.b2_gjkCalls=0,o.b2_gjkIters=0,o.b2_gjkMaxIters=0};class s{constructor(){this.wA=new a.b2Vec2,this.wB=new a.b2Vec2,this.w=new a.b2Vec2,this.a=0,this.indexA=0,this.indexB=0}Copy(e){return this.wA.Copy(e.wA),this.wB.Copy(e.wB),this.w.Copy(e.w),this.a=e.a,this.indexA=e.indexA,this.indexB=e.indexB,this}}o.b2SimplexVertex=s;class n{constructor(){this.m_v1=new s,this.m_v2=new s,this.m_v3=new s,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}ReadCache(e,t,o,r,s){this.m_count=e.count;const n=this.m_vertices;for(let i=0;i<this.m_count;++i){const l=n[i];l.indexA=e.indexA[i],l.indexB=e.indexB[i];const c=t.GetVertex(l.indexA),d=r.GetVertex(l.indexB);a.b2Transform.MulXV(o,c,l.wA),a.b2Transform.MulXV(s,d,l.wB),a.b2Vec2.SubVV(l.wB,l.wA,l.w),l.a=0}if(this.m_count>1){const t=e.metric,o=this.GetMetric();(o<.5*t||2*t<o||o<i.b2_epsilon)&&(this.m_count=0)}if(0===this.m_count){const e=n[0];e.indexA=0,e.indexB=0;const i=t.GetVertex(0),l=r.GetVertex(0);a.b2Transform.MulXV(o,i,e.wA),a.b2Transform.MulXV(s,l,e.wB),a.b2Vec2.SubVV(e.wB,e.wA,e.w),e.a=1,this.m_count=1}}WriteCache(e){e.metric=this.GetMetric(),e.count=this.m_count;const t=this.m_vertices;for(let o=0;o<this.m_count;++o)e.indexA[o]=t[o].indexA,e.indexB[o]=t[o].indexB}GetSearchDirection(e){switch(this.m_count){case 1:return a.b2Vec2.NegV(this.m_v1.w,e);case 2:{const t=a.b2Vec2.SubVV(this.m_v2.w,this.m_v1.w,e);return a.b2Vec2.CrossVV(t,a.b2Vec2.NegV(this.m_v1.w,a.b2Vec2.s_t0))>0?a.b2Vec2.CrossOneV(t,e):a.b2Vec2.CrossVOne(t,e)}default:return e.SetZero()}}GetClosestPoint(e){switch(this.m_count){case 0:return e.SetZero();case 1:return e.Copy(this.m_v1.w);case 2:return e.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return e.SetZero()}}GetWitnessPoints(e,t){switch(this.m_count){case 0:break;case 1:e.Copy(this.m_v1.wA),t.Copy(this.m_v1.wB);break;case 2:e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,t.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,t.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:t.x=e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,t.y=e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return a.b2Vec2.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return a.b2Vec2.CrossVV(a.b2Vec2.SubVV(this.m_v2.w,this.m_v1.w,a.b2Vec2.s_t0),a.b2Vec2.SubVV(this.m_v3.w,this.m_v1.w,a.b2Vec2.s_t1));default:return 0}}Solve2(){const e=this.m_v1.w,t=this.m_v2.w,o=a.b2Vec2.SubVV(t,e,n.s_e12),i=-a.b2Vec2.DotVV(e,o);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);const r=a.b2Vec2.DotVV(t,o);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const s=1/(r+i);this.m_v1.a=r*s,this.m_v2.a=i*s,this.m_count=2}Solve3(){const e=this.m_v1.w,t=this.m_v2.w,o=this.m_v3.w,i=a.b2Vec2.SubVV(t,e,n.s_e12),r=a.b2Vec2.DotVV(e,i),s=a.b2Vec2.DotVV(t,i),l=-r,c=a.b2Vec2.SubVV(o,e,n.s_e13),d=a.b2Vec2.DotVV(e,c),u=a.b2Vec2.DotVV(o,c),m=-d,p=a.b2Vec2.SubVV(o,t,n.s_e23),h=a.b2Vec2.DotVV(t,p),f=a.b2Vec2.DotVV(o,p),y=-h,_=a.b2Vec2.CrossVV(i,c),g=_*a.b2Vec2.CrossVV(t,o),b=_*a.b2Vec2.CrossVV(o,e),S=_*a.b2Vec2.CrossVV(e,t);if(l<=0&&m<=0)return this.m_v1.a=1,void(this.m_count=1);if(s>0&&l>0&&S<=0){const e=1/(s+l);return this.m_v1.a=s*e,this.m_v2.a=l*e,void(this.m_count=2)}if(u>0&&m>0&&b<=0){const e=1/(u+m);return this.m_v1.a=u*e,this.m_v3.a=m*e,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(s<=0&&y<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(u<=0&&f<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(f>0&&y>0&&g<=0){const e=1/(f+y);return this.m_v2.a=f*e,this.m_v3.a=y*e,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const P=1/(g+b+S);this.m_v1.a=g*P,this.m_v2.a=b*P,this.m_v3.a=S*P,this.m_count=3}}o.b2Simplex=n,n.s_e12=new a.b2Vec2,n.s_e13=new a.b2Vec2,n.s_e23=new a.b2Vec2;const l=new n,c=[0,0,0],d=[0,0,0],u=new a.b2Vec2,m=new a.b2Vec2,p=new a.b2Vec2,h=new a.b2Vec2,f=new a.b2Vec2;o.b2Distance=function(e,t,r){++o.b2_gjkCalls;const s=r.proxyA,n=r.proxyB,y=r.transformA,_=r.transformB,g=l;g.ReadCache(t,s,y,n,_);const b=g.m_vertices,S=c,P=d;let B=0,C=0;for(;C<20;){B=g.m_count;for(let o=0;o<B;++o)S[o]=b[o].indexA,P[o]=b[o].indexB;switch(g.m_count){case 1:break;case 2:g.Solve2();break;case 3:g.Solve3()}if(3===g.m_count)break;const e=g.GetSearchDirection(m);if(e.LengthSquared()<i.b2_epsilon_sq)break;const t=b[g.m_count];t.indexA=s.GetSupport(a.b2Rot.MulTRV(y.q,a.b2Vec2.NegV(e,a.b2Vec2.s_t0),h)),a.b2Transform.MulXV(y,s.GetVertex(t.indexA),t.wA),t.indexB=n.GetSupport(a.b2Rot.MulTRV(_.q,e,f)),a.b2Transform.MulXV(_,n.GetVertex(t.indexB),t.wB),a.b2Vec2.SubVV(t.wB,t.wA,t.w),++C,++o.b2_gjkIters;let r=!1;for(let o=0;o<B;++o)if(t.indexA===S[o]&&t.indexB===P[o]){r=!0;break}if(r)break;++g.m_count}if(o.b2_gjkMaxIters=a.b2Max(o.b2_gjkMaxIters,C),g.GetWitnessPoints(e.pointA,e.pointB),e.distance=a.b2Vec2.DistanceVV(e.pointA,e.pointB),e.iterations=C,g.WriteCache(t),r.useRadii){const t=s.m_radius,o=n.m_radius;if(e.distance>t+o&&e.distance>i.b2_epsilon){e.distance-=t+o;const i=a.b2Vec2.SubVV(e.pointB,e.pointA,p);i.Normalize(),e.pointA.SelfMulAdd(t,i),e.pointB.SelfMulSub(o,i)}else{const t=a.b2Vec2.MidVV(e.pointA,e.pointB,u);e.pointA.Copy(t),e.pointB.Copy(t),e.distance=0}}};const y=new a.b2Vec2,_=new n,g=new a.b2Vec2,b=new a.b2Vec2,S=new a.b2Vec2,P=new a.b2Vec2,B=new a.b2Vec2,C=new a.b2Vec2;o.b2ShapeCast=function(e,t){e.iterations=0,e.lambda=1,e.normal.SetZero(),e.point.SetZero();const o=t.proxyA,r=t.proxyB,s=a.b2Max(o.m_radius,i.b2_polygonRadius)+a.b2Max(r.m_radius,i.b2_polygonRadius),n=t.transformA,l=t.transformB,c=t.translationB,d=y.Set(0,0);let u=0;const m=_;m.m_count=0;const p=m.m_vertices;let h=o.GetSupport(a.b2Rot.MulTRV(n.q,a.b2Vec2.NegV(c,a.b2Vec2.s_t1),a.b2Vec2.s_t0)),f=a.b2Transform.MulXV(n,o.GetVertex(h),g),M=r.GetSupport(a.b2Rot.MulTRV(l.q,c,a.b2Vec2.s_t0)),x=a.b2Transform.MulXV(l,r.GetVertex(M),b);const V=a.b2Vec2.SubVV(f,x,S),I=a.b2Max(i.b2_polygonRadius,s-i.b2_polygonRadius),O=.5*i.b2_linearSlop;let w=0;for(;w<20&&a.b2Abs(V.Length()-I)>O;){e.iterations+=1,h=o.GetSupport(a.b2Rot.MulTRV(n.q,a.b2Vec2.NegV(V,a.b2Vec2.s_t1),a.b2Vec2.s_t0)),f=a.b2Transform.MulXV(n,o.GetVertex(h),g),M=r.GetSupport(a.b2Rot.MulTRV(l.q,V,a.b2Vec2.s_t0)),x=a.b2Transform.MulXV(l,r.GetVertex(M),b);const t=a.b2Vec2.SubVV(f,x,P);V.Normalize();const i=a.b2Vec2.DotVV(V,t),s=a.b2Vec2.DotVV(V,c);if(i-I>u*s){if(s<=0)return!1;if((u=(i-I)/s)>1)return!1;d.Copy(V).SelfNeg(),m.m_count=0}const y=p[m.m_count];switch(y.indexA=M,y.wA.Copy(x).SelfMulAdd(u,c),y.indexB=h,y.wB.Copy(f),y.w.Copy(y.wB).SelfSub(y.wA),y.a=1,m.m_count+=1,m.m_count){case 1:break;case 2:m.Solve2();break;case 3:m.Solve3()}if(3===m.m_count)return!1;m.GetClosestPoint(V),++w}const E=B,A=C;return m.GetWitnessPoints(E,A),V.LengthSquared()>0&&(d.Copy(V).SelfNeg(),d.Normalize()),e.normal.Copy(d),e.lambda=u,e.iterations=w,!0},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings"}],b2Draw:[function(e,t,o){"use strict";cc._RF.push(t,"4b649S24atMHIojI/iMMyVC","b2Draw"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Draw=o.b2DrawFlags=o.b2Color=void 0;class i{constructor(...e){if(e[0]instanceof Float32Array){if(4!==e[0].length)throw new Error;this.data=e[0]}else{const t="number"==typeof e[0]?e[0]:.5,o="number"==typeof e[1]?e[1]:.5,i="number"==typeof e[2]?e[2]:.5,a="number"==typeof e[3]?e[3]:1;this.data=new Float32Array([t,o,i,a])}}get r(){return this.data[0]}set r(e){this.data[0]=e}get g(){return this.data[1]}set g(e){this.data[1]=e}get b(){return this.data[2]}set b(e){this.data[2]=e}get a(){return this.data[3]}set a(e){this.data[3]=e}Clone(){return(new i).Copy(this)}Copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}IsEqual(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}Set(e,t,o,i=this.a){this.SetRGBA(e,t,o,i)}SetByteRGB(e,t,o){return this.r=e/255,this.g=t/255,this.b=o/255,this}SetByteRGBA(e,t,o,i){return this.r=e/255,this.g=t/255,this.b=o/255,this.a=i/255,this}SetRGB(e,t,o){return this.r=e,this.g=t,this.b=o,this}SetRGBA(e,t,o,i){return this.r=e,this.g=t,this.b=o,this.a=i,this}SelfAdd(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}Add(e,t){return t.r=this.r+e.r,t.g=this.g+e.g,t.b=this.b+e.b,t.a=this.a+e.a,t}SelfSub(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}Sub(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,t.a=this.a-e.a,t}SelfMul(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}Mul(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,t.a=this.a*e,t}Mix(e,t){i.MixColors(this,e,t)}static MixColors(e,t,o){const i=o*(t.r-e.r),a=o*(t.g-e.g),r=o*(t.b-e.b),s=o*(t.a-e.a);e.r+=i,e.g+=a,e.b+=r,e.a+=s,t.r-=i,t.g-=a,t.b-=r,t.a-=s}MakeStyleString(e=this.a){return i.MakeStyleString(this.r,this.g,this.b,e)}static MakeStyleString(e,t,o,i=1){return e*=255,t*=255,o*=255,i<1?`rgba(${e},${t},${o},${i})`:`rgb(${e},${t},${o})`}}o.b2Color=i,i.ZERO=new i(0,0,0,0),i.RED=new i(1,0,0),i.GREEN=new i(0,1,0),i.BLUE=new i(0,0,1),function(e){e[e.e_none=0]="e_none",e[e.e_shapeBit=1]="e_shapeBit",e[e.e_jointBit=2]="e_jointBit",e[e.e_aabbBit=4]="e_aabbBit",e[e.e_pairBit=8]="e_pairBit",e[e.e_centerOfMassBit=16]="e_centerOfMassBit",e[e.e_particleBit=32]="e_particleBit",e[e.e_controllerBit=64]="e_controllerBit",e[e.e_all=63]="e_all"}(o.b2DrawFlags||(o.b2DrawFlags={})),o.b2Draw=class{constructor(){this.m_drawFlags=0}SetFlags(e){this.m_drawFlags=e}GetFlags(){return this.m_drawFlags}AppendFlags(e){this.m_drawFlags|=e}ClearFlags(e){this.m_drawFlags&=~e}},cc._RF.pop()},{}],b2DynamicTree:[function(e,t,o){"use strict";cc._RF.push(t,"795adJT5D1PmpT7m4ce0q7Y","b2DynamicTree"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2DynamicTree=o.b2TreeNode=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Common/b2GrowableStack"),s=e("./b2Collision");function n(e){if(null===e)throw new Error;return e}class l{constructor(e=0){this.m_id=0,this.aabb=new s.b2AABB,this._userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=e}get userData(){if(null===this._userData)throw new Error;return this._userData}set userData(e){if(null!==this._userData)throw new Error;this._userData=e}Reset(){this._userData=null}IsLeaf(){return null===this.child1}}o.b2TreeNode=l;class c{constructor(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new r.b2GrowableStack(256)}Query(e,t){const o=this.m_stack.Reset();for(o.Push(this.m_root);o.GetCount()>0;){const i=o.Pop();if(null!==i&&i.aabb.TestOverlap(e))if(i.IsLeaf()){if(!t(i))return}else o.Push(i.child1),o.Push(i.child2)}}QueryPoint(e,t){const o=this.m_stack.Reset();for(o.Push(this.m_root);o.GetCount()>0;){const i=o.Pop();if(null!==i&&i.aabb.TestContain(e))if(i.IsLeaf()){if(!t(i))return}else o.Push(i.child1),o.Push(i.child2)}}RayCast(e,t){const o=e.p1,i=e.p2,r=a.b2Vec2.SubVV(i,o,c.s_r);r.Normalize();const n=a.b2Vec2.CrossOneV(r,c.s_v),l=a.b2Vec2.AbsV(n,c.s_abs_v);let d=e.maxFraction;const u=c.s_segmentAABB;let m=o.x+d*(i.x-o.x),p=o.y+d*(i.y-o.y);u.lowerBound.x=a.b2Min(o.x,m),u.lowerBound.y=a.b2Min(o.y,p),u.upperBound.x=a.b2Max(o.x,m),u.upperBound.y=a.b2Max(o.y,p);const h=this.m_stack.Reset();for(h.Push(this.m_root);h.GetCount()>0;){const r=h.Pop();if(null===r)continue;if(!s.b2TestOverlapAABB(r.aabb,u))continue;const f=r.aabb.GetCenter(),y=r.aabb.GetExtents();if(!(a.b2Abs(a.b2Vec2.DotVV(n,a.b2Vec2.SubVV(o,f,a.b2Vec2.s_t0)))-a.b2Vec2.DotVV(l,y)>0))if(r.IsLeaf()){const s=c.s_subInput;s.p1.Copy(e.p1),s.p2.Copy(e.p2),s.maxFraction=d;const n=t(s,r);if(0===n)return;n>0&&(d=n,m=o.x+d*(i.x-o.x),p=o.y+d*(i.y-o.y),u.lowerBound.x=a.b2Min(o.x,m),u.lowerBound.y=a.b2Min(o.y,p),u.upperBound.x=a.b2Max(o.x,m),u.upperBound.y=a.b2Max(o.y,p))}else h.Push(r.child1),h.Push(r.child2)}}AllocateNode(){if(null!==this.m_freeList){const e=this.m_freeList;return this.m_freeList=e.parent,e.parent=null,e.child1=null,e.child2=null,e.height=0,e}return new l(c.s_node_id++)}FreeNode(e){e.parent=this.m_freeList,e.child1=null,e.child2=null,e.height=-1,e.Reset(),this.m_freeList=e}CreateProxy(e,t){const o=this.AllocateNode(),a=i.b2_aabbExtension,r=i.b2_aabbExtension;return o.aabb.lowerBound.x=e.lowerBound.x-a,o.aabb.lowerBound.y=e.lowerBound.y-r,o.aabb.upperBound.x=e.upperBound.x+a,o.aabb.upperBound.y=e.upperBound.y+r,o.userData=t,o.height=0,this.InsertLeaf(o),o}DestroyProxy(e){this.RemoveLeaf(e),this.FreeNode(e)}MoveProxy(e,t,o){if(e.aabb.Contains(t))return!1;this.RemoveLeaf(e);const a=i.b2_aabbExtension,r=i.b2_aabbExtension;e.aabb.lowerBound.x=t.lowerBound.x-a,e.aabb.lowerBound.y=t.lowerBound.y-r,e.aabb.upperBound.x=t.upperBound.x+a,e.aabb.upperBound.y=t.upperBound.y+r;const s=i.b2_aabbMultiplier*o.x,n=i.b2_aabbMultiplier*o.y;return s<0?e.aabb.lowerBound.x+=s:e.aabb.upperBound.x+=s,n<0?e.aabb.lowerBound.y+=n:e.aabb.upperBound.y+=n,this.InsertLeaf(e),!0}InsertLeaf(e){if(++this.m_insertionCount,null===this.m_root)return this.m_root=e,void(this.m_root.parent=null);const t=e.aabb;let o=this.m_root;for(;!o.IsLeaf();){const e=n(o.child1),i=n(o.child2),a=o.aabb.GetPerimeter(),r=c.s_combinedAABB;r.Combine2(o.aabb,t);const s=r.GetPerimeter(),l=2*s,d=2*(s-a);let u;const m=c.s_aabb;let p,h,f;if(e.IsLeaf()?(m.Combine2(t,e.aabb),u=m.GetPerimeter()+d):(m.Combine2(t,e.aabb),p=e.aabb.GetPerimeter(),u=(h=m.GetPerimeter())-p+d),i.IsLeaf()?(m.Combine2(t,i.aabb),f=m.GetPerimeter()+d):(m.Combine2(t,i.aabb),p=i.aabb.GetPerimeter(),f=(h=m.GetPerimeter())-p+d),l<u&&l<f)break;o=u<f?e:i}const i=o.parent,r=this.AllocateNode();r.parent=i,r.aabb.Combine2(t,o.aabb),r.height=o.height+1,null!==i?(i.child1===o?i.child1=r:i.child2=r,r.child1=o,r.child2=e,o.parent=r,e.parent=r):(r.child1=o,r.child2=e,o.parent=r,e.parent=r,this.m_root=r);let s=e.parent;for(;null!==s;){const e=n((s=this.Balance(s)).child1),t=n(s.child2);s.height=1+a.b2Max(e.height,t.height),s.aabb.Combine2(e.aabb,t.aabb),s=s.parent}}RemoveLeaf(e){if(e===this.m_root)return void(this.m_root=null);const t=n(e.parent),o=t&&t.parent,i=n(t.child1===e?t.child2:t.child1);if(null!==o){o.child1===t?o.child1=i:o.child2=i,i.parent=o,this.FreeNode(t);let e=o;for(;null!==e;){const t=n((e=this.Balance(e)).child1),o=n(e.child2);e.aabb.Combine2(t.aabb,o.aabb),e.height=1+a.b2Max(t.height,o.height),e=e.parent}}else this.m_root=i,i.parent=null,this.FreeNode(t)}Balance(e){if(e.IsLeaf()||e.height<2)return e;const t=n(e.child1),o=n(e.child2),i=o.height-t.height;if(i>1){const i=n(o.child1),r=n(o.child2);return o.child1=e,o.parent=e.parent,e.parent=o,null!==o.parent?o.parent.child1===e?o.parent.child1=o:o.parent.child2=o:this.m_root=o,i.height>r.height?(o.child2=i,e.child2=r,r.parent=e,e.aabb.Combine2(t.aabb,r.aabb),o.aabb.Combine2(e.aabb,i.aabb),e.height=1+a.b2Max(t.height,r.height),o.height=1+a.b2Max(e.height,i.height)):(o.child2=r,e.child2=i,i.parent=e,e.aabb.Combine2(t.aabb,i.aabb),o.aabb.Combine2(e.aabb,r.aabb),e.height=1+a.b2Max(t.height,i.height),o.height=1+a.b2Max(e.height,r.height)),o}if(i<-1){const i=n(t.child1),r=n(t.child2);return t.child1=e,t.parent=e.parent,e.parent=t,null!==t.parent?t.parent.child1===e?t.parent.child1=t:t.parent.child2=t:this.m_root=t,i.height>r.height?(t.child2=i,e.child1=r,r.parent=e,e.aabb.Combine2(o.aabb,r.aabb),t.aabb.Combine2(e.aabb,i.aabb),e.height=1+a.b2Max(o.height,r.height),t.height=1+a.b2Max(e.height,i.height)):(t.child2=r,e.child1=i,i.parent=e,e.aabb.Combine2(o.aabb,i.aabb),t.aabb.Combine2(e.aabb,r.aabb),e.height=1+a.b2Max(o.height,i.height),t.height=1+a.b2Max(e.height,r.height)),t}return e}GetHeight(){return null===this.m_root?0:this.m_root.height}static GetAreaNode(e){if(null===e)return 0;if(e.IsLeaf())return 0;let t=e.aabb.GetPerimeter();return(t+=c.GetAreaNode(e.child1))+c.GetAreaNode(e.child2)}GetAreaRatio(){if(null===this.m_root)return 0;const e=this.m_root.aabb.GetPerimeter();return c.GetAreaNode(this.m_root)/e}static ComputeHeightNode(e){if(null===e)return 0;if(e.IsLeaf())return 0;const t=c.ComputeHeightNode(e.child1),o=c.ComputeHeightNode(e.child2);return 1+a.b2Max(t,o)}ComputeHeight(){return c.ComputeHeightNode(this.m_root)}ValidateStructure(e){if(null===e)return;if(this.m_root,e.IsLeaf())return;const t=n(e.child1),o=n(e.child2);this.ValidateStructure(t),this.ValidateStructure(o)}ValidateMetrics(e){if(null===e)return;if(e.IsLeaf())return;const t=n(e.child1),o=n(e.child2);c.s_aabb.Combine2(t.aabb,o.aabb),this.ValidateMetrics(t),this.ValidateMetrics(o)}Validate(){}static GetMaxBalanceNode(e,t){if(null===e)return t;if(e.height<=1)return t;const o=n(e.child1),i=n(e.child2),r=a.b2Abs(i.height-o.height);return a.b2Max(t,r)}GetMaxBalance(){return c.GetMaxBalanceNode(this.m_root,0)}RebuildBottomUp(){this.Validate()}static ShiftOriginNode(e,t){if(null===e)return;if(e.height<=1)return;const o=e.child1,i=e.child2;c.ShiftOriginNode(o,t),c.ShiftOriginNode(i,t),e.aabb.lowerBound.SelfSub(t),e.aabb.upperBound.SelfSub(t)}ShiftOrigin(e){c.ShiftOriginNode(this.m_root,e)}}o.b2DynamicTree=c,c.s_r=new a.b2Vec2,c.s_v=new a.b2Vec2,c.s_abs_v=new a.b2Vec2,c.s_segmentAABB=new s.b2AABB,c.s_subInput=new s.b2RayCastInput,c.s_combinedAABB=new s.b2AABB,c.s_aabb=new s.b2AABB,c.s_node_id=0,cc._RF.pop()},{"../Common/b2GrowableStack":"b2GrowableStack","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Collision":"b2Collision"}],b2EdgeAndCircleContact:[function(e,t,o){"use strict";cc._RF.push(t,"ad23fJqMxFLYZXGrs9Cl/2Q","b2EdgeAndCircleContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2EdgeAndCircleContact=void 0;const i=e("../../Collision/b2CollideEdge"),a=e("./b2Contact");class r extends a.b2Contact{static Create(){return new r}static Destroy(e){}Evaluate(e,t,o){i.b2CollideEdgeAndCircle(e,this.GetShapeA(),t,this.GetShapeB(),o)}}o.b2EdgeAndCircleContact=r,cc._RF.pop()},{"../../Collision/b2CollideEdge":"b2CollideEdge","./b2Contact":"b2Contact"}],b2EdgeAndPolygonContact:[function(e,t,o){"use strict";cc._RF.push(t,"908d2xvsCtC6qJ2FEmGX+wU","b2EdgeAndPolygonContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2EdgeAndPolygonContact=void 0;const i=e("../../Collision/b2CollideEdge"),a=e("./b2Contact");class r extends a.b2Contact{static Create(){return new r}static Destroy(e){}Evaluate(e,t,o){i.b2CollideEdgeAndPolygon(e,this.GetShapeA(),t,this.GetShapeB(),o)}}o.b2EdgeAndPolygonContact=r,cc._RF.pop()},{"../../Collision/b2CollideEdge":"b2CollideEdge","./b2Contact":"b2Contact"}],b2EdgeShape:[function(e,t,o){"use strict";cc._RF.push(t,"bab28JwkihL05eo4nvQn5vi","b2EdgeShape"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2EdgeShape=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Shape");class s extends r.b2Shape{constructor(){super(r.b2ShapeType.e_edgeShape,i.b2_polygonRadius),this.m_vertex1=new a.b2Vec2,this.m_vertex2=new a.b2Vec2,this.m_vertex0=new a.b2Vec2,this.m_vertex3=new a.b2Vec2,this.m_hasVertex0=!1,this.m_hasVertex3=!1}Set(e,t){return this.m_vertex1.Copy(e),this.m_vertex2.Copy(t),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this}Clone(){return(new s).Copy(this)}Copy(e){return super.Copy(e),this.m_vertex1.Copy(e.m_vertex1),this.m_vertex2.Copy(e.m_vertex2),this.m_vertex0.Copy(e.m_vertex0),this.m_vertex3.Copy(e.m_vertex3),this.m_hasVertex0=e.m_hasVertex0,this.m_hasVertex3=e.m_hasVertex3,this}GetChildCount(){return 1}TestPoint(e,t){return!1}ComputeDistance(e,t,o,i){const r=a.b2Transform.MulXV(e,this.m_vertex1,s.ComputeDistance_s_v1),n=a.b2Transform.MulXV(e,this.m_vertex2,s.ComputeDistance_s_v2),l=a.b2Vec2.SubVV(t,r,s.ComputeDistance_s_d),c=a.b2Vec2.SubVV(n,r,s.ComputeDistance_s_s),d=a.b2Vec2.DotVV(l,c);if(d>0){const e=a.b2Vec2.DotVV(c,c);d>e?a.b2Vec2.SubVV(t,n,l):l.SelfMulSub(d/e,c)}return o.Copy(l),o.Normalize()}RayCast(e,t,o,i){const r=a.b2Transform.MulTXV(o,t.p1,s.RayCast_s_p1),n=a.b2Transform.MulTXV(o,t.p2,s.RayCast_s_p2),l=a.b2Vec2.SubVV(n,r,s.RayCast_s_d),c=this.m_vertex1,d=this.m_vertex2,u=a.b2Vec2.SubVV(d,c,s.RayCast_s_e),m=e.normal.Set(u.y,-u.x).SelfNormalize(),p=a.b2Vec2.DotVV(m,a.b2Vec2.SubVV(c,r,a.b2Vec2.s_t0)),h=a.b2Vec2.DotVV(m,l);if(0===h)return!1;const f=p/h;if(f<0||t.maxFraction<f)return!1;const y=a.b2Vec2.AddVMulSV(r,f,l,s.RayCast_s_q),_=a.b2Vec2.SubVV(d,c,s.RayCast_s_r),g=a.b2Vec2.DotVV(_,_);if(0===g)return!1;const b=a.b2Vec2.DotVV(a.b2Vec2.SubVV(y,c,a.b2Vec2.s_t0),_)/g;return!(b<0||1<b||(e.fraction=f,a.b2Rot.MulRV(o.q,e.normal,e.normal),p>0&&e.normal.SelfNeg(),0))}ComputeAABB(e,t,o){const i=a.b2Transform.MulXV(t,this.m_vertex1,s.ComputeAABB_s_v1),r=a.b2Transform.MulXV(t,this.m_vertex2,s.ComputeAABB_s_v2);a.b2Vec2.MinV(i,r,e.lowerBound),a.b2Vec2.MaxV(i,r,e.upperBound);const n=this.m_radius;e.lowerBound.SelfSubXY(n,n),e.upperBound.SelfAddXY(n,n)}ComputeMass(e,t){e.mass=0,a.b2Vec2.MidVV(this.m_vertex1,this.m_vertex2,e.center),e.I=0}SetupDistanceProxy(e,t){e.m_vertices=e.m_buffer,e.m_vertices[0].Copy(this.m_vertex1),e.m_vertices[1].Copy(this.m_vertex2),e.m_count=2,e.m_radius=this.m_radius}ComputeSubmergedArea(e,t,o,i){return i.SetZero(),0}Dump(e){e("    const shape: b2EdgeShape = new b2EdgeShape();\n"),e("    shape.m_radius = %.15f;\n",this.m_radius),e("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),e("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),e("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),e("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),e("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),e("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)}}o.b2EdgeShape=s,s.ComputeDistance_s_v1=new a.b2Vec2,s.ComputeDistance_s_v2=new a.b2Vec2,s.ComputeDistance_s_d=new a.b2Vec2,s.ComputeDistance_s_s=new a.b2Vec2,s.RayCast_s_p1=new a.b2Vec2,s.RayCast_s_p2=new a.b2Vec2,s.RayCast_s_d=new a.b2Vec2,s.RayCast_s_e=new a.b2Vec2,s.RayCast_s_q=new a.b2Vec2,s.RayCast_s_r=new a.b2Vec2,s.ComputeAABB_s_v1=new a.b2Vec2,s.ComputeAABB_s_v2=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Shape":"b2Shape"}],b2Fixture:[function(e,t,o){"use strict";cc._RF.push(t,"a7f9awyqm5GjoDH9ZQcBqVM","b2Fixture"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Fixture=o.b2FixtureProxy=o.b2FixtureDef=o.b2Filter=void 0;const i=e("../Common/b2Settings"),a=e("../Collision/b2Collision"),r=e("../Collision/Shapes/b2Shape");class s{constructor(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}Clone(){return(new s).Copy(this)}Copy(e){return this.categoryBits=e.categoryBits,this.maskBits=e.maskBits,this.groupIndex=e.groupIndex||0,this}}o.b2Filter=s,s.DEFAULT=new s,o.b2FixtureDef=class{constructor(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new s}};class n{constructor(e,t){this.aabb=new a.b2AABB,this.childIndex=0,this.fixture=e,this.childIndex=t,this.fixture.m_shape.ComputeAABB(this.aabb,this.fixture.m_body.GetTransform(),t),this.treeNode=this.fixture.m_body.m_world.m_contactManager.m_broadPhase.CreateProxy(this.aabb,this)}Reset(){this.fixture.m_body.m_world.m_contactManager.m_broadPhase.DestroyProxy(this.treeNode)}Touch(){this.fixture.m_body.m_world.m_contactManager.m_broadPhase.TouchProxy(this.treeNode)}Synchronize(e,t,o){if(e===t)this.fixture.m_shape.ComputeAABB(this.aabb,e,this.childIndex),this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode,this.aabb,o);else{const i=n.Synchronize_s_aabb1,a=n.Synchronize_s_aabb2;this.fixture.m_shape.ComputeAABB(i,e,this.childIndex),this.fixture.m_shape.ComputeAABB(a,t,this.childIndex),this.aabb.Combine2(i,a),this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode,this.aabb,o)}}}o.b2FixtureProxy=n,n.Synchronize_s_aabb1=new a.b2AABB,n.Synchronize_s_aabb2=new a.b2AABB,o.b2Fixture=class{constructor(e,t){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_filter=new s,this.m_isSensor=!1,this.m_userData=null,this.m_body=e,this.m_shape=t.shape.Clone(),this.m_userData=i.b2Maybe(t.userData,null),this.m_friction=i.b2Maybe(t.friction,.2),this.m_restitution=i.b2Maybe(t.restitution,0),this.m_filter.Copy(i.b2Maybe(t.filter,s.DEFAULT)),this.m_isSensor=i.b2Maybe(t.isSensor,!1),this.m_density=i.b2Maybe(t.density,0)}get m_proxyCount(){return this.m_proxies.length}Reset(){}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(e){e!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=e)}IsSensor(){return this.m_isSensor}SetFilterData(e){this.m_filter.Copy(e),this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let e=this.m_body.GetContactList();for(;e;){const t=e.contact,o=t.GetFixtureA(),i=t.GetFixtureB();o!==this&&i!==this||t.FlagForFiltering(),e=e.next}this.TouchProxies()}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(e){this.m_userData=e}TestPoint(e){return this.m_shape.TestPoint(this.m_body.GetTransform(),e)}ComputeDistance(e,t,o){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),e,t,o)}RayCast(e,t,o){return this.m_shape.RayCast(e,t,this.m_body.GetTransform(),o)}GetMassData(e=new r.b2MassData){return this.m_shape.ComputeMass(e,this.m_density),e}SetDensity(e){this.m_density=e}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(e){this.m_friction=e}GetRestitution(){return this.m_restitution}SetRestitution(e){this.m_restitution=e}GetAABB(e){return this.m_proxies[e].aabb}Dump(e,t){e("    const fd: b2FixtureDef = new b2FixtureDef();\n"),e("    fd.friction = %.15f;\n",this.m_friction),e("    fd.restitution = %.15f;\n",this.m_restitution),e("    fd.density = %.15f;\n",this.m_density),e("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),e("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),e("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),e("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(e),e("\n"),e("    fd.shape = shape;\n"),e("\n"),e("    bodies[%d].CreateFixture(fd);\n",t)}CreateProxies(){if(0!==this.m_proxies.length)throw new Error;for(let e=0;e<this.m_shape.GetChildCount();++e)this.m_proxies[e]=new n(this,e)}DestroyProxies(){for(const e of this.m_proxies)e.Reset();this.m_proxies.length=0}TouchProxies(){for(const e of this.m_proxies)e.Touch()}SynchronizeProxies(e,t,o){for(const i of this.m_proxies)i.Synchronize(e,t,o)}},cc._RF.pop()},{"../Collision/Shapes/b2Shape":"b2Shape","../Collision/b2Collision":"b2Collision","../Common/b2Settings":"b2Settings"}],b2FrictionJoint:[function(e,t,o){"use strict";cc._RF.push(t,"5e20cdyhPtFQo+83sZvYdBu","b2FrictionJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2FrictionJoint=o.b2FrictionJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2FrictionJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_frictionJoint),this.localAnchorA=new a.b2Vec2,this.localAnchorB=new a.b2Vec2,this.maxForce=0,this.maxTorque=0}Initialize(e,t,o){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB)}};class s extends r.b2Joint{constructor(e){super(e),this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_linearImpulse=new a.b2Vec2,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new a.b2Mat22,this.m_angularMass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_K=new a.b2Mat22,this.m_localAnchorA.Copy(e.localAnchorA),this.m_localAnchorB.Copy(e.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=i.b2Maybe(e.maxForce,0),this.m_maxTorque=i.b2Maybe(e.maxTorque,0),this.m_linearMass.SetZero()}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let i=e.velocities[this.m_indexA].w;const r=e.positions[this.m_indexB].a,s=e.velocities[this.m_indexB].v;let n=e.velocities[this.m_indexB].w;const l=this.m_qA.SetAngle(t),c=this.m_qB.SetAngle(r);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const d=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),m=this.m_invMassA,p=this.m_invMassB,h=this.m_invIA,f=this.m_invIB,y=this.m_K;if(y.ex.x=m+p+h*d.y*d.y+f*u.y*u.y,y.ex.y=-h*d.x*d.y-f*u.x*u.y,y.ey.x=y.ex.y,y.ey.y=m+p+h*d.x*d.x+f*u.x*u.x,y.GetInverse(this.m_linearMass),this.m_angularMass=h+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),e.step.warmStarting){this.m_linearImpulse.SelfMul(e.step.dtRatio),this.m_angularImpulse*=e.step.dtRatio;const t=this.m_linearImpulse;o.SelfMulSub(m,t),i-=h*(a.b2Vec2.CrossVV(this.m_rA,t)+this.m_angularImpulse),s.SelfMulAdd(p,t),n+=f*(a.b2Vec2.CrossVV(this.m_rB,t)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;e.velocities[this.m_indexA].w=i,e.velocities[this.m_indexB].w=n}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,d=this.m_invIB,u=e.step.dt;{const e=r-o;let t=-this.m_angularMass*e;const i=this.m_angularImpulse,s=u*this.m_maxTorque;this.m_angularImpulse=a.b2Clamp(this.m_angularImpulse+t,-s,s),o-=c*(t=this.m_angularImpulse-i),r+=d*t}{const e=a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(i,r,this.m_rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(t,o,this.m_rA,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_Cdot_v2),m=a.b2Mat22.MulMV(this.m_linearMass,e,s.SolveVelocityConstraints_s_impulseV).SelfNeg(),p=s.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(m);const h=u*this.m_maxForce;this.m_linearImpulse.LengthSquared()>h*h&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(h)),a.b2Vec2.SubVV(this.m_linearImpulse,p,m),t.SelfMulSub(n,m),o-=c*a.b2Vec2.CrossVV(this.m_rA,m),i.SelfMulAdd(l,m),r+=d*a.b2Vec2.CrossVV(this.m_rB,m)}e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){return!0}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_linearImpulse.x,t.y=e*this.m_linearImpulse.y,t}GetReactionTorque(e){return e*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(e){this.m_maxForce=e}GetMaxForce(){return this.m_maxForce}SetMaxTorque(e){this.m_maxTorque=e}GetMaxTorque(){return this.m_maxTorque}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.maxForce = %.15f;\n",this.m_maxForce),e("  jd.maxTorque = %.15f;\n",this.m_maxTorque),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2FrictionJoint=s,s.SolveVelocityConstraints_s_Cdot_v2=new a.b2Vec2,s.SolveVelocityConstraints_s_impulseV=new a.b2Vec2,s.SolveVelocityConstraints_s_oldImpulseV=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2GearJoint:[function(e,t,o){"use strict";cc._RF.push(t,"5079537Nq1GubFXgS9ZdtB3","b2GearJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2GearJoint=o.b2GearJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2GearJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_gearJoint),this.ratio=1}};class s extends r.b2Joint{constructor(e){let t,o;super(e),this.m_typeA=r.b2JointType.e_unknownJoint,this.m_typeB=r.b2JointType.e_unknownJoint,this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_localAnchorC=new a.b2Vec2,this.m_localAnchorD=new a.b2Vec2,this.m_localAxisC=new a.b2Vec2,this.m_localAxisD=new a.b2Vec2,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new a.b2Vec2,this.m_lcB=new a.b2Vec2,this.m_lcC=new a.b2Vec2,this.m_lcD=new a.b2Vec2,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new a.b2Vec2,this.m_JvBD=new a.b2Vec2,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_qC=new a.b2Rot,this.m_qD=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_lalcC=new a.b2Vec2,this.m_lalcD=new a.b2Vec2,this.m_joint1=e.joint1,this.m_joint2=e.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const s=this.m_bodyA.m_xf,n=this.m_bodyA.m_sweep.a,l=this.m_bodyC.m_xf,c=this.m_bodyC.m_sweep.a;if(this.m_typeA===r.b2JointType.e_revoluteJoint){const o=e.joint1;this.m_localAnchorC.Copy(o.m_localAnchorA),this.m_localAnchorA.Copy(o.m_localAnchorB),this.m_referenceAngleA=o.m_referenceAngle,this.m_localAxisC.SetZero(),t=n-c-this.m_referenceAngleA}else{const o=e.joint1;this.m_localAnchorC.Copy(o.m_localAnchorA),this.m_localAnchorA.Copy(o.m_localAnchorB),this.m_referenceAngleA=o.m_referenceAngle,this.m_localAxisC.Copy(o.m_localXAxisA);const i=this.m_localAnchorC,r=a.b2Rot.MulTRV(l.q,a.b2Vec2.AddVV(a.b2Rot.MulRV(s.q,this.m_localAnchorA,a.b2Vec2.s_t0),a.b2Vec2.SubVV(s.p,l.p,a.b2Vec2.s_t1),a.b2Vec2.s_t0),a.b2Vec2.s_t0);t=a.b2Vec2.DotVV(a.b2Vec2.SubVV(r,i,a.b2Vec2.s_t0),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const d=this.m_bodyB.m_xf,u=this.m_bodyB.m_sweep.a,m=this.m_bodyD.m_xf,p=this.m_bodyD.m_sweep.a;if(this.m_typeB===r.b2JointType.e_revoluteJoint){const t=e.joint2;this.m_localAnchorD.Copy(t.m_localAnchorA),this.m_localAnchorB.Copy(t.m_localAnchorB),this.m_referenceAngleB=t.m_referenceAngle,this.m_localAxisD.SetZero(),o=u-p-this.m_referenceAngleB}else{const t=e.joint2;this.m_localAnchorD.Copy(t.m_localAnchorA),this.m_localAnchorB.Copy(t.m_localAnchorB),this.m_referenceAngleB=t.m_referenceAngle,this.m_localAxisD.Copy(t.m_localXAxisA);const i=this.m_localAnchorD,r=a.b2Rot.MulTRV(m.q,a.b2Vec2.AddVV(a.b2Rot.MulRV(d.q,this.m_localAnchorB,a.b2Vec2.s_t0),a.b2Vec2.SubVV(d.p,m.p,a.b2Vec2.s_t1),a.b2Vec2.s_t0),a.b2Vec2.s_t0);o=a.b2Vec2.DotVV(a.b2Vec2.SubVV(r,i,a.b2Vec2.s_t0),this.m_localAxisD)}this.m_ratio=i.b2Maybe(e.ratio,1),this.m_constant=t+this.m_ratio*o,this.m_impulse=0}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const t=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let i=e.velocities[this.m_indexA].w;const n=e.positions[this.m_indexB].a,l=e.velocities[this.m_indexB].v;let c=e.velocities[this.m_indexB].w;const d=e.positions[this.m_indexC].a,u=e.velocities[this.m_indexC].v;let m=e.velocities[this.m_indexC].w;const p=e.positions[this.m_indexD].a,h=e.velocities[this.m_indexD].v;let f=e.velocities[this.m_indexD].w;const y=this.m_qA.SetAngle(t),_=this.m_qB.SetAngle(n),g=this.m_qC.SetAngle(d),b=this.m_qD.SetAngle(p);if(this.m_mass=0,this.m_typeA===r.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const e=a.b2Rot.MulRV(g,this.m_localAxisC,s.InitVelocityConstraints_s_u);a.b2Vec2.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC);const t=a.b2Rot.MulRV(g,this.m_lalcC,s.InitVelocityConstraints_s_rC);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA);const o=a.b2Rot.MulRV(y,this.m_lalcA,s.InitVelocityConstraints_s_rA);this.m_JvAC.Copy(e),this.m_JwC=a.b2Vec2.CrossVV(t,e),this.m_JwA=a.b2Vec2.CrossVV(o,e),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===r.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const e=a.b2Rot.MulRV(b,this.m_localAxisD,s.InitVelocityConstraints_s_u);a.b2Vec2.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD);const t=a.b2Rot.MulRV(b,this.m_lalcD,s.InitVelocityConstraints_s_rD);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB);const o=a.b2Rot.MulRV(_,this.m_lalcB,s.InitVelocityConstraints_s_rB);a.b2Vec2.MulSV(this.m_ratio,e,this.m_JvBD),this.m_JwD=this.m_ratio*a.b2Vec2.CrossVV(t,e),this.m_JwB=this.m_ratio*a.b2Vec2.CrossVV(o,e),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,e.step.warmStarting?(o.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),i+=this.m_iA*this.m_impulse*this.m_JwA,l.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),c+=this.m_iB*this.m_impulse*this.m_JwB,u.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),m-=this.m_iC*this.m_impulse*this.m_JwC,h.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),f-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,e.velocities[this.m_indexA].w=i,e.velocities[this.m_indexB].w=c,e.velocities[this.m_indexC].w=m,e.velocities[this.m_indexD].w=f}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const s=e.velocities[this.m_indexC].v;let n=e.velocities[this.m_indexC].w;const l=e.velocities[this.m_indexD].v;let c=e.velocities[this.m_indexD].w,d=a.b2Vec2.DotVV(this.m_JvAC,a.b2Vec2.SubVV(t,s,a.b2Vec2.s_t0))+a.b2Vec2.DotVV(this.m_JvBD,a.b2Vec2.SubVV(i,l,a.b2Vec2.s_t0));d+=this.m_JwA*o-this.m_JwC*n+(this.m_JwB*r-this.m_JwD*c);const u=-this.m_mass*d;this.m_impulse+=u,t.SelfMulAdd(this.m_mA*u,this.m_JvAC),o+=this.m_iA*u*this.m_JwA,i.SelfMulAdd(this.m_mB*u,this.m_JvBD),r+=this.m_iB*u*this.m_JwB,s.SelfMulSub(this.m_mC*u,this.m_JvAC),n-=this.m_iC*u*this.m_JwC,l.SelfMulSub(this.m_mD*u,this.m_JvBD),c-=this.m_iD*u*this.m_JwD,e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r,e.velocities[this.m_indexC].w=n,e.velocities[this.m_indexD].w=c}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const n=e.positions[this.m_indexB].c;let l=e.positions[this.m_indexB].a;const c=e.positions[this.m_indexC].c;let d=e.positions[this.m_indexC].a;const u=e.positions[this.m_indexD].c;let m=e.positions[this.m_indexD].a;const p=this.m_qA.SetAngle(o),h=this.m_qB.SetAngle(l),f=this.m_qC.SetAngle(d),y=this.m_qD.SetAngle(m);let _,g;const b=this.m_JvAC,S=this.m_JvBD;let P,B,C,M,x=0;if(this.m_typeA===r.b2JointType.e_revoluteJoint)b.SetZero(),P=1,C=1,x+=this.m_iA+this.m_iC,_=o-d-this.m_referenceAngleA;else{const e=a.b2Rot.MulRV(f,this.m_localAxisC,s.SolvePositionConstraints_s_u),o=a.b2Rot.MulRV(f,this.m_lalcC,s.SolvePositionConstraints_s_rC),i=a.b2Rot.MulRV(p,this.m_lalcA,s.SolvePositionConstraints_s_rA);b.Copy(e),C=a.b2Vec2.CrossVV(o,e),P=a.b2Vec2.CrossVV(i,e),x+=this.m_mC+this.m_mA+this.m_iC*C*C+this.m_iA*P*P;const r=this.m_lalcC,n=a.b2Rot.MulTRV(f,a.b2Vec2.AddVV(i,a.b2Vec2.SubVV(t,c,a.b2Vec2.s_t0),a.b2Vec2.s_t0),a.b2Vec2.s_t0);_=a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,r,a.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB===r.b2JointType.e_revoluteJoint)S.SetZero(),B=this.m_ratio,M=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),g=l-m-this.m_referenceAngleB;else{const e=a.b2Rot.MulRV(y,this.m_localAxisD,s.SolvePositionConstraints_s_u),t=a.b2Rot.MulRV(y,this.m_lalcD,s.SolvePositionConstraints_s_rD),o=a.b2Rot.MulRV(h,this.m_lalcB,s.SolvePositionConstraints_s_rB);a.b2Vec2.MulSV(this.m_ratio,e,S),M=this.m_ratio*a.b2Vec2.CrossVV(t,e),B=this.m_ratio*a.b2Vec2.CrossVV(o,e),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*M*M+this.m_iB*B*B;const i=this.m_lalcD,r=a.b2Rot.MulTRV(y,a.b2Vec2.AddVV(o,a.b2Vec2.SubVV(n,u,a.b2Vec2.s_t0),a.b2Vec2.s_t0),a.b2Vec2.s_t0);g=a.b2Vec2.DotVV(a.b2Vec2.SubVV(r,i,a.b2Vec2.s_t0),this.m_localAxisD)}const V=_+this.m_ratio*g-this.m_constant;let I=0;return x>0&&(I=-V/x),t.SelfMulAdd(this.m_mA*I,b),o+=this.m_iA*I*P,n.SelfMulAdd(this.m_mB*I,S),l+=this.m_iB*I*B,c.SelfMulSub(this.m_mC*I,b),d-=this.m_iC*I*C,u.SelfMulSub(this.m_mD*I,S),m-=this.m_iD*I*M,e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=l,e.positions[this.m_indexC].a=d,e.positions[this.m_indexD].a=m,0<i.b2_linearSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return a.b2Vec2.MulSV(e*this.m_impulse,this.m_JvAC,t)}GetReactionTorque(e){return e*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(e){this.m_ratio=e}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex,i=this.m_joint1.m_index,a=this.m_joint2.m_index;e("  const jd: b2GearJointDef = new b2GearJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.joint1 = joints[%d];\n",i),e("  jd.joint2 = joints[%d];\n",a),e("  jd.ratio = %.15f;\n",this.m_ratio),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2GearJoint=s,s.InitVelocityConstraints_s_u=new a.b2Vec2,s.InitVelocityConstraints_s_rA=new a.b2Vec2,s.InitVelocityConstraints_s_rB=new a.b2Vec2,s.InitVelocityConstraints_s_rC=new a.b2Vec2,s.InitVelocityConstraints_s_rD=new a.b2Vec2,s.SolvePositionConstraints_s_u=new a.b2Vec2,s.SolvePositionConstraints_s_rA=new a.b2Vec2,s.SolvePositionConstraints_s_rB=new a.b2Vec2,s.SolvePositionConstraints_s_rC=new a.b2Vec2,s.SolvePositionConstraints_s_rD=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2GravityController:[function(e,t,o){"use strict";cc._RF.push(t,"4bbb8qAyINHA4V5m/M/nCar","b2GravityController"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2GravityController=void 0;const i=e("./b2Controller"),a=e("../Common/b2Settings"),r=e("../Common/b2Math");class s extends i.b2Controller{constructor(){super(...arguments),this.G=1,this.invSqr=!0}Step(e){if(this.invSqr)for(let t=this.m_bodyList;t;t=t.nextBody){const e=t.body,o=e.GetWorldCenter(),i=e.GetMass();for(let n=this.m_bodyList;n&&n!==t;n=n.nextBody){const t=n.body,l=t.GetWorldCenter(),c=t.GetMass(),d=l.x-o.x,u=l.y-o.y,m=d*d+u*u;if(m<a.b2_epsilon)continue;const p=s.Step_s_f.Set(d,u);p.SelfMul(this.G/m/r.b2Sqrt(m)*i*c),e.IsAwake()&&e.ApplyForce(p,o),t.IsAwake()&&t.ApplyForce(p.SelfMul(-1),l)}}else for(let t=this.m_bodyList;t;t=t.nextBody){const e=t.body,o=e.GetWorldCenter(),i=e.GetMass();for(let r=this.m_bodyList;r&&r!==t;r=r.nextBody){const t=r.body,n=t.GetWorldCenter(),l=t.GetMass(),c=n.x-o.x,d=n.y-o.y,u=c*c+d*d;if(u<a.b2_epsilon)continue;const m=s.Step_s_f.Set(c,d);m.SelfMul(this.G/u*i*l),e.IsAwake()&&e.ApplyForce(m,o),t.IsAwake()&&t.ApplyForce(m.SelfMul(-1),n)}}}Draw(e){}}o.b2GravityController=s,s.Step_s_f=new r.b2Vec2,cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Controller":"b2Controller"}],b2GrowableStack:[function(e,t,o){"use strict";cc._RF.push(t,"7106fnvJNRIta7QkXDxRwQd","b2GrowableStack"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2GrowableStack=void 0;const i=e("./b2Settings");o.b2GrowableStack=class{constructor(e){this.m_stack=[],this.m_count=0,this.m_stack=i.b2MakeArray(e,()=>null),this.m_count=0}Reset(){return this.m_count=0,this}Push(e){this.m_stack[this.m_count]=e,this.m_count++}Pop(){this.m_count--;const e=this.m_stack[this.m_count];if(this.m_stack[this.m_count]=null,null===e)throw new Error;return e}GetCount(){return this.m_count}},cc._RF.pop()},{"./b2Settings":"b2Settings"}],b2Island:[function(e,t,o){"use strict";cc._RF.push(t,"d50e8dZ2o1O0Y+sq2u6/Pz0","b2Island"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Island=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Settings"),r=e("../Common/b2Settings"),s=e("../Common/b2Settings"),n=e("../Common/b2Math"),l=e("../Common/b2Timer"),c=e("./Contacts/b2ContactSolver"),d=e("./b2Body"),u=e("./b2TimeStep"),m=e("./b2WorldCallbacks");class p{constructor(){this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=u.b2Position.MakeArray(1024),this.m_velocities=u.b2Velocity.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}Initialize(e,t,o,i){if(this.m_bodyCapacity=e,this.m_contactCapacity=t,this.m_jointCapacity=o,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_listener=i,this.m_positions.length<e){const t=n.b2Max(2*this.m_positions.length,e);for(;this.m_positions.length<t;)this.m_positions[this.m_positions.length]=new u.b2Position}if(this.m_velocities.length<e){const t=n.b2Max(2*this.m_velocities.length,e);for(;this.m_velocities.length<t;)this.m_velocities[this.m_velocities.length]=new u.b2Velocity}}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(e){e.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=e}AddContact(e){this.m_contacts[this.m_contactCount++]=e}AddJoint(e){this.m_joints[this.m_jointCount++]=e}Solve(e,t,o,l){const c=p.s_timer.Reset(),u=t.dt;for(let i=0;i<this.m_bodyCount;++i){const e=this.m_bodies[i];this.m_positions[i].c.Copy(e.m_sweep.c);const t=e.m_sweep.a,a=this.m_velocities[i].v.Copy(e.m_linearVelocity);let r=e.m_angularVelocity;e.m_sweep.c0.Copy(e.m_sweep.c),e.m_sweep.a0=e.m_sweep.a,e.m_type===d.b2BodyType.b2_dynamicBody&&(a.x+=u*(e.m_gravityScale*o.x+e.m_invMass*e.m_force.x),a.y+=u*(e.m_gravityScale*o.y+e.m_invMass*e.m_force.y),r+=u*e.m_invI*e.m_torque,a.SelfMul(1/(1+u*e.m_linearDamping)),r*=1/(1+u*e.m_angularDamping)),this.m_positions[i].a=t,this.m_velocities[i].w=r}c.Reset();const m=p.s_solverData;m.step.Copy(t),m.positions=this.m_positions,m.velocities=this.m_velocities;const h=p.s_contactSolverDef;h.step.Copy(t),h.contacts=this.m_contacts,h.count=this.m_contactCount,h.positions=this.m_positions,h.velocities=this.m_velocities;const f=p.s_contactSolver.Initialize(h);f.InitializeVelocityConstraints(),t.warmStarting&&f.WarmStart();for(let i=0;i<this.m_jointCount;++i)this.m_joints[i].InitVelocityConstraints(m);e.solveInit=c.GetMilliseconds(),c.Reset();for(let i=0;i<t.velocityIterations;++i){for(let e=0;e<this.m_jointCount;++e)this.m_joints[e].SolveVelocityConstraints(m);f.SolveVelocityConstraints()}f.StoreImpulses(),e.solveVelocity=c.GetMilliseconds();for(let i=0;i<this.m_bodyCount;++i){const e=this.m_positions[i].c;let t=this.m_positions[i].a;const o=this.m_velocities[i].v;let s=this.m_velocities[i].w;const l=n.b2Vec2.MulSV(u,o,p.s_translation);if(n.b2Vec2.DotVV(l,l)>a.b2_maxTranslationSquared){const e=a.b2_maxTranslation/l.Length();o.SelfMul(e)}const c=u*s;c*c>r.b2_maxRotationSquared&&(s*=r.b2_maxRotation/n.b2Abs(c)),e.x+=u*o.x,e.y+=u*o.y,t+=u*s,this.m_positions[i].a=t,this.m_velocities[i].w=s}c.Reset();let y=!1;for(let i=0;i<t.positionIterations;++i){const e=f.SolvePositionConstraints();let t=!0;for(let o=0;o<this.m_jointCount;++o){const e=this.m_joints[o].SolvePositionConstraints(m);t=t&&e}if(e&&t){y=!0;break}}for(let i=0;i<this.m_bodyCount;++i){const e=this.m_bodies[i];e.m_sweep.c.Copy(this.m_positions[i].c),e.m_sweep.a=this.m_positions[i].a,e.m_linearVelocity.Copy(this.m_velocities[i].v),e.m_angularVelocity=this.m_velocities[i].w,e.SynchronizeTransform()}if(e.solvePosition=c.GetMilliseconds(),this.Report(f.m_velocityConstraints),l){let e=i.b2_maxFloat;const t=s.b2_linearSleepTolerance*s.b2_linearSleepTolerance,o=s.b2_angularSleepTolerance*s.b2_angularSleepTolerance;for(let i=0;i<this.m_bodyCount;++i){const a=this.m_bodies[i];a.GetType()!==d.b2BodyType.b2_staticBody&&(!a.m_autoSleepFlag||a.m_angularVelocity*a.m_angularVelocity>o||n.b2Vec2.DotVV(a.m_linearVelocity,a.m_linearVelocity)>t?(a.m_sleepTime=0,e=0):(a.m_sleepTime+=u,e=n.b2Min(e,a.m_sleepTime)))}if(e>=i.b2_timeToSleep&&y)for(let i=0;i<this.m_bodyCount;++i)this.m_bodies[i].SetAwake(!1)}}SolveTOI(e,t,o){for(let a=0;a<this.m_bodyCount;++a){const e=this.m_bodies[a];this.m_positions[a].c.Copy(e.m_sweep.c),this.m_positions[a].a=e.m_sweep.a,this.m_velocities[a].v.Copy(e.m_linearVelocity),this.m_velocities[a].w=e.m_angularVelocity}const i=p.s_contactSolverDef;i.contacts=this.m_contacts,i.count=this.m_contactCount,i.step.Copy(e),i.positions=this.m_positions,i.velocities=this.m_velocities;const s=p.s_contactSolver.Initialize(i);for(let a=0;a<e.positionIterations&&!s.SolveTOIPositionConstraints(t,o);++a);this.m_bodies[t].m_sweep.c0.Copy(this.m_positions[t].c),this.m_bodies[t].m_sweep.a0=this.m_positions[t].a,this.m_bodies[o].m_sweep.c0.Copy(this.m_positions[o].c),this.m_bodies[o].m_sweep.a0=this.m_positions[o].a,s.InitializeVelocityConstraints();for(let a=0;a<e.velocityIterations;++a)s.SolveVelocityConstraints();const l=e.dt;for(let c=0;c<this.m_bodyCount;++c){const e=this.m_positions[c].c;let t=this.m_positions[c].a;const o=this.m_velocities[c].v;let i=this.m_velocities[c].w;const s=n.b2Vec2.MulSV(l,o,p.s_translation);if(n.b2Vec2.DotVV(s,s)>a.b2_maxTranslationSquared){const e=a.b2_maxTranslation/s.Length();o.SelfMul(e)}const d=l*i;d*d>r.b2_maxRotationSquared&&(i*=r.b2_maxRotation/n.b2Abs(d)),e.SelfMulAdd(l,o),t+=l*i,this.m_positions[c].a=t,this.m_velocities[c].w=i;const u=this.m_bodies[c];u.m_sweep.c.Copy(e),u.m_sweep.a=t,u.m_linearVelocity.Copy(o),u.m_angularVelocity=i,u.SynchronizeTransform()}this.Report(s.m_velocityConstraints)}Report(e){if(null!==this.m_listener)for(let t=0;t<this.m_contactCount;++t){const o=this.m_contacts[t];if(!o)continue;const i=e[t],a=p.s_impulse;a.count=i.pointCount;for(let e=0;e<i.pointCount;++e)a.normalImpulses[e]=i.points[e].normalImpulse,a.tangentImpulses[e]=i.points[e].tangentImpulse;this.m_listener.PostSolve(o,a)}}}o.b2Island=p,p.s_timer=new l.b2Timer,p.s_solverData=new u.b2SolverData,p.s_contactSolverDef=new c.b2ContactSolverDef,p.s_contactSolver=new c.b2ContactSolver,p.s_translation=new n.b2Vec2,p.s_impulse=new m.b2ContactImpulse,cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","../Common/b2Timer":"b2Timer","./Contacts/b2ContactSolver":"b2ContactSolver","./b2Body":"b2Body","./b2TimeStep":"b2TimeStep","./b2WorldCallbacks":"b2WorldCallbacks"}],b2Joint:[function(e,t,o){"use strict";cc._RF.push(t,"deb1aAGUa9IMI+jf7ph1dZ0","b2Joint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Joint=o.b2JointDef=o.b2JointEdge=o.b2Jacobian=o.b2LimitState=o.b2JointType=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math");var r;(function(e){e[e.e_unknownJoint=0]="e_unknownJoint",e[e.e_revoluteJoint=1]="e_revoluteJoint",e[e.e_prismaticJoint=2]="e_prismaticJoint",e[e.e_distanceJoint=3]="e_distanceJoint",e[e.e_pulleyJoint=4]="e_pulleyJoint",e[e.e_mouseJoint=5]="e_mouseJoint",e[e.e_gearJoint=6]="e_gearJoint",e[e.e_wheelJoint=7]="e_wheelJoint",e[e.e_weldJoint=8]="e_weldJoint",e[e.e_frictionJoint=9]="e_frictionJoint",e[e.e_ropeJoint=10]="e_ropeJoint",e[e.e_motorJoint=11]="e_motorJoint",e[e.e_areaJoint=12]="e_areaJoint"})(r=o.b2JointType||(o.b2JointType={})),function(e){e[e.e_inactiveLimit=0]="e_inactiveLimit",e[e.e_atLowerLimit=1]="e_atLowerLimit",e[e.e_atUpperLimit=2]="e_atUpperLimit",e[e.e_equalLimits=3]="e_equalLimits"}(o.b2LimitState||(o.b2LimitState={})),o.b2Jacobian=class{constructor(){this.linear=new a.b2Vec2,this.angularA=0,this.angularB=0}SetZero(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this}Set(e,t,o){return this.linear.Copy(e),this.angularA=t,this.angularB=o,this}};class s{constructor(e){this._other=null,this.prev=null,this.next=null,this.joint=e}get other(){if(null===this._other)throw new Error;return this._other}set other(e){if(null!==this._other)throw new Error;this._other=e}Reset(){this._other=null,this.prev=null,this.next=null}}o.b2JointEdge=s,o.b2JointDef=class{constructor(e){this.type=r.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=e}},o.b2Joint=class{constructor(e){this.m_type=r.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_edgeA=new s(this),this.m_edgeB=new s(this),this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=e.type,this.m_edgeA.other=e.bodyB,this.m_edgeB.other=e.bodyA,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=i.b2Maybe(e.collideConnected,!1),this.m_userData=i.b2Maybe(e.userData,null)}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(e){this.m_userData=e}IsActive(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()}GetCollideConnected(){return this.m_collideConnected}Dump(e){e("// Dump is not supported for this joint type.\n")}ShiftOrigin(e){}},cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings"}],b2Math:[function(e,t,o){"use strict";cc._RF.push(t,"4d9da442SdPFbT/AgeQYG48","b2Math"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Sweep=o.b2Transform=o.b2Rot=o.b2Mat33=o.b2Mat22=o.b2Vec3=o.b2Vec2_zero=o.b2Vec2=o.b2RandomRange=o.b2Random=o.b2IsPowerOfTwo=o.b2NextPowerOfTwo=o.b2Atan2=o.b2Asin=o.b2Acos=o.b2Sin=o.b2Cos=o.b2RadToDeg=o.b2DegToRad=o.b2Pow=o.b2Sqrt=o.b2InvSqrt=o.b2Sq=o.b2IsValid=o.b2Swap=o.b2Clamp=o.b2Max=o.b2Min=o.b2Abs=o.b2_two_pi=o.b2_180_over_pi=o.b2_pi_over_180=void 0;const i=e("./b2Settings");function a(e,t){return e<t?e:t}function r(e,t){return e>t?e:t}function s(e,t,o){return e<t?t:e>o?o:e}o.b2_pi_over_180=i.b2_pi/180,o.b2_180_over_pi=180/i.b2_pi,o.b2_two_pi=2*i.b2_pi,o.b2Abs=Math.abs,o.b2Min=a,o.b2Max=r,o.b2Clamp=s,o.b2Swap=function(e,t){const o=e[0];e[0]=t[0],t[0]=o},o.b2IsValid=isFinite,o.b2Sq=function(e){return e*e},o.b2InvSqrt=function(e){return 1/Math.sqrt(e)},o.b2Sqrt=Math.sqrt,o.b2Pow=Math.pow,o.b2DegToRad=function(e){return e*o.b2_pi_over_180},o.b2RadToDeg=function(e){return e*o.b2_180_over_pi},o.b2Cos=Math.cos,o.b2Sin=Math.sin,o.b2Acos=Math.acos,o.b2Asin=Math.asin,o.b2Atan2=Math.atan2,o.b2NextPowerOfTwo=function(e){return e|=e>>1&2147483647,e|=e>>2&1073741823,e|=e>>4&268435455,e|=e>>8&16777215,1+(e|=e>>16&65535)},o.b2IsPowerOfTwo=function(e){return e>0&&0==(e&e-1)},o.b2Random=function(){return 2*Math.random()-1},o.b2RandomRange=function(e,t){return(t-e)*Math.random()+e};class n{constructor(...e){if(e[0]instanceof Float32Array){if(2!==e[0].length)throw new Error;this.data=e[0]}else{const t="number"==typeof e[0]?e[0]:0,o="number"==typeof e[1]?e[1]:0;this.data=new Float32Array([t,o])}}get x(){return this.data[0]}set x(e){this.data[0]=e}get y(){return this.data[1]}set y(e){this.data[1]=e}Clone(){return new n(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(e,t){return this.x=e,this.y=t,this}Copy(e){return this.x=e.x,this.y=e.y,this}SelfAdd(e){return this.x+=e.x,this.y+=e.y,this}SelfAddXY(e,t){return this.x+=e,this.y+=t,this}SelfSub(e){return this.x-=e.x,this.y-=e.y,this}SelfSubXY(e,t){return this.x-=e,this.y-=t,this}SelfMul(e){return this.x*=e,this.y*=e,this}SelfMulAdd(e,t){return this.x+=e*t.x,this.y+=e*t.y,this}SelfMulSub(e,t){return this.x-=e*t.x,this.y-=e*t.y,this}Dot(e){return this.x*e.x+this.y*e.y}Cross(e){return this.x*e.y-this.y*e.x}Length(){const e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}LengthSquared(){const e=this.x,t=this.y;return e*e+t*t}Normalize(){const e=this.Length();if(e>=i.b2_epsilon){const t=1/e;this.x*=t,this.y*=t}return e}SelfNormalize(){const e=this.Length();if(e>=i.b2_epsilon){const t=1/e;this.x*=t,this.y*=t}return this}SelfRotate(e){const t=Math.cos(e),o=Math.sin(e),i=this.x;return this.x=t*i-o*this.y,this.y=o*i+t*this.y,this}SelfRotateCosSin(e,t){const o=this.x;return this.x=e*o-t*this.y,this.y=t*o+e*this.y,this}IsValid(){return isFinite(this.x)&&isFinite(this.y)}SelfCrossVS(e){const t=this.x;return this.x=e*this.y,this.y=-e*t,this}SelfCrossSV(e){const t=this.x;return this.x=-e*this.y,this.y=e*t,this}SelfMinV(e){return this.x=a(this.x,e.x),this.y=a(this.y,e.y),this}SelfMaxV(e){return this.x=r(this.x,e.x),this.y=r(this.y,e.y),this}SelfAbs(){return this.x=o.b2Abs(this.x),this.y=o.b2Abs(this.y),this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this}SelfSkew(){const e=this.x;return this.x=-this.y,this.y=e,this}static MakeArray(e){return i.b2MakeArray(e,()=>new n)}static AbsV(e,t){return t.x=o.b2Abs(e.x),t.y=o.b2Abs(e.y),t}static MinV(e,t,o){return o.x=a(e.x,t.x),o.y=a(e.y,t.y),o}static MaxV(e,t,o){return o.x=r(e.x,t.x),o.y=r(e.y,t.y),o}static ClampV(e,t,o,i){return i.x=s(e.x,t.x,o.x),i.y=s(e.y,t.y,o.y),i}static RotateV(e,t,o){const i=e.x,a=e.y,r=Math.cos(t),s=Math.sin(t);return o.x=r*i-s*a,o.y=s*i+r*a,o}static DotVV(e,t){return e.x*t.x+e.y*t.y}static CrossVV(e,t){return e.x*t.y-e.y*t.x}static CrossVS(e,t,o){const i=e.x;return o.x=t*e.y,o.y=-t*i,o}static CrossVOne(e,t){const o=e.x;return t.x=e.y,t.y=-o,t}static CrossSV(e,t,o){const i=t.x;return o.x=-e*t.y,o.y=e*i,o}static CrossOneV(e,t){const o=e.x;return t.x=-e.y,t.y=o,t}static AddVV(e,t,o){return o.x=e.x+t.x,o.y=e.y+t.y,o}static SubVV(e,t,o){return o.x=e.x-t.x,o.y=e.y-t.y,o}static MulSV(e,t,o){return o.x=t.x*e,o.y=t.y*e,o}static MulVS(e,t,o){return o.x=e.x*t,o.y=e.y*t,o}static AddVMulSV(e,t,o,i){return i.x=e.x+t*o.x,i.y=e.y+t*o.y,i}static SubVMulSV(e,t,o,i){return i.x=e.x-t*o.x,i.y=e.y-t*o.y,i}static AddVCrossSV(e,t,o,i){const a=o.x;return i.x=e.x-t*o.y,i.y=e.y+t*a,i}static MidVV(e,t,o){return o.x=.5*(e.x+t.x),o.y=.5*(e.y+t.y),o}static ExtVV(e,t,o){return o.x=.5*(t.x-e.x),o.y=.5*(t.y-e.y),o}static IsEqualToV(e,t){return e.x===t.x&&e.y===t.y}static DistanceVV(e,t){const o=e.x-t.x,i=e.y-t.y;return Math.sqrt(o*o+i*i)}static DistanceSquaredVV(e,t){const o=e.x-t.x,i=e.y-t.y;return o*o+i*i}static NegV(e,t){return t.x=-e.x,t.y=-e.y,t}}o.b2Vec2=n,n.ZERO=new n(0,0),n.UNITX=new n(1,0),n.UNITY=new n(0,1),n.s_t0=new n,n.s_t1=new n,n.s_t2=new n,n.s_t3=new n,o.b2Vec2_zero=new n(0,0);class l{constructor(...e){if(e[0]instanceof Float32Array){if(3!==e[0].length)throw new Error;this.data=e[0]}else{const t="number"==typeof e[0]?e[0]:0,o="number"==typeof e[1]?e[1]:0,i="number"==typeof e[2]?e[2]:0;this.data=new Float32Array([t,o,i])}}get x(){return this.data[0]}set x(e){this.data[0]=e}get y(){return this.data[1]}set y(e){this.data[1]=e}get z(){return this.data[2]}set z(e){this.data[2]=e}Clone(){return new l(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}SetXYZ(e,t,o){return this.x=e,this.y=t,this.z=o,this}Copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}SelfAdd(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}SelfAddXYZ(e,t,o){return this.x+=e,this.y+=t,this.z+=o,this}SelfSub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}SelfSubXYZ(e,t,o){return this.x-=e,this.y-=t,this.z-=o,this}SelfMul(e){return this.x*=e,this.y*=e,this.z*=e,this}static DotV3V3(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static CrossV3V3(e,t,o){const i=e.x,a=e.y,r=e.z,s=t.x,n=t.y,l=t.z;return o.x=a*l-r*n,o.y=r*s-i*l,o.z=i*n-a*s,o}}o.b2Vec3=l,l.ZERO=new l(0,0,0),l.s_t0=new l;class c{constructor(){this.data=new Float32Array([1,0,0,1]),this.ex=new n(this.data.subarray(0,2)),this.ey=new n(this.data.subarray(2,4))}Clone(){return(new c).Copy(this)}static FromVV(e,t){return(new c).SetVV(e,t)}static FromSSSS(e,t,o,i){return(new c).SetSSSS(e,t,o,i)}static FromAngle(e){return(new c).SetAngle(e)}SetSSSS(e,t,o,i){return this.ex.Set(e,o),this.ey.Set(t,i),this}SetVV(e,t){return this.ex.Copy(e),this.ey.Copy(t),this}SetAngle(e){const t=Math.cos(e),o=Math.sin(e);return this.ex.Set(t,o),this.ey.Set(-o,t),this}Copy(e){return this.ex.Copy(e.ex),this.ey.Copy(e.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}GetInverse(e){const t=this.ex.x,o=this.ey.x,i=this.ex.y,a=this.ey.y;let r=t*a-o*i;return 0!==r&&(r=1/r),e.ex.x=r*a,e.ey.x=-r*o,e.ex.y=-r*i,e.ey.y=r*t,e}Solve(e,t,o){const i=this.ex.x,a=this.ey.x,r=this.ex.y,s=this.ey.y;let n=i*s-a*r;return 0!==n&&(n=1/n),o.x=n*(s*e-a*t),o.y=n*(i*t-r*e),o}SelfAbs(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this}SelfInv(){return this.GetInverse(this),this}SelfAddM(e){return this.ex.SelfAdd(e.ex),this.ey.SelfAdd(e.ey),this}SelfSubM(e){return this.ex.SelfSub(e.ex),this.ey.SelfSub(e.ey),this}static AbsM(e,t){const i=e.ex,a=e.ey;return t.ex.x=o.b2Abs(i.x),t.ex.y=o.b2Abs(i.y),t.ey.x=o.b2Abs(a.x),t.ey.y=o.b2Abs(a.y),t}static MulMV(e,t,o){const i=e.ex,a=e.ey,r=t.x,s=t.y;return o.x=i.x*r+a.x*s,o.y=i.y*r+a.y*s,o}static MulTMV(e,t,o){const i=e.ex,a=e.ey,r=t.x,s=t.y;return o.x=i.x*r+i.y*s,o.y=a.x*r+a.y*s,o}static AddMM(e,t,o){const i=e.ex,a=e.ey,r=t.ex,s=t.ey;return o.ex.x=i.x+r.x,o.ex.y=i.y+r.y,o.ey.x=a.x+s.x,o.ey.y=a.y+s.y,o}static MulMM(e,t,o){const i=e.ex.x,a=e.ex.y,r=e.ey.x,s=e.ey.y,n=t.ex.x,l=t.ex.y,c=t.ey.x,d=t.ey.y;return o.ex.x=i*n+r*l,o.ex.y=a*n+s*l,o.ey.x=i*c+r*d,o.ey.y=a*c+s*d,o}static MulTMM(e,t,o){const i=e.ex.x,a=e.ex.y,r=e.ey.x,s=e.ey.y,n=t.ex.x,l=t.ex.y,c=t.ey.x,d=t.ey.y;return o.ex.x=i*n+a*l,o.ex.y=r*n+s*l,o.ey.x=i*c+a*d,o.ey.y=r*c+s*d,o}}o.b2Mat22=c,c.IDENTITY=new c;class d{constructor(){this.data=new Float32Array([1,0,0,0,1,0,0,0,1]),this.ex=new l(this.data.subarray(0,3)),this.ey=new l(this.data.subarray(3,6)),this.ez=new l(this.data.subarray(6,9))}Clone(){return(new d).Copy(this)}SetVVV(e,t,o){return this.ex.Copy(e),this.ey.Copy(t),this.ez.Copy(o),this}Copy(e){return this.ex.Copy(e.ex),this.ey.Copy(e.ey),this.ez.Copy(e.ez),this}SetIdentity(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}SelfAddM(e){return this.ex.SelfAdd(e.ex),this.ey.SelfAdd(e.ey),this.ez.SelfAdd(e.ez),this}Solve33(e,t,o,i){const a=this.ex.x,r=this.ex.y,s=this.ex.z,n=this.ey.x,l=this.ey.y,c=this.ey.z,d=this.ez.x,u=this.ez.y,m=this.ez.z;let p=a*(l*m-c*u)+r*(c*d-n*m)+s*(n*u-l*d);return 0!==p&&(p=1/p),i.x=p*(e*(l*m-c*u)+t*(c*d-n*m)+o*(n*u-l*d)),i.y=p*(a*(t*m-o*u)+r*(o*d-e*m)+s*(e*u-t*d)),i.z=p*(a*(l*o-c*t)+r*(c*e-n*o)+s*(n*t-l*e)),i}Solve22(e,t,o){const i=this.ex.x,a=this.ey.x,r=this.ex.y,s=this.ey.y;let n=i*s-a*r;return 0!==n&&(n=1/n),o.x=n*(s*e-a*t),o.y=n*(i*t-r*e),o}GetInverse22(e){const t=this.ex.x,o=this.ey.x,i=this.ex.y,a=this.ey.y;let r=t*a-o*i;0!==r&&(r=1/r),e.ex.x=r*a,e.ey.x=-r*o,e.ex.z=0,e.ex.y=-r*i,e.ey.y=r*t,e.ey.z=0,e.ez.x=0,e.ez.y=0,e.ez.z=0}GetSymInverse33(e){let t=l.DotV3V3(this.ex,l.CrossV3V3(this.ey,this.ez,l.s_t0));0!==t&&(t=1/t);const o=this.ex.x,i=this.ey.x,a=this.ez.x,r=this.ey.y,s=this.ez.y,n=this.ez.z;e.ex.x=t*(r*n-s*s),e.ex.y=t*(a*s-i*n),e.ex.z=t*(i*s-a*r),e.ey.x=e.ex.y,e.ey.y=t*(o*n-a*a),e.ey.z=t*(a*i-o*s),e.ez.x=e.ex.z,e.ez.y=e.ey.z,e.ez.z=t*(o*r-i*i)}static MulM33V3(e,t,o){const i=t.x,a=t.y,r=t.z;return o.x=e.ex.x*i+e.ey.x*a+e.ez.x*r,o.y=e.ex.y*i+e.ey.y*a+e.ez.y*r,o.z=e.ex.z*i+e.ey.z*a+e.ez.z*r,o}static MulM33XYZ(e,t,o,i,a){return a.x=e.ex.x*t+e.ey.x*o+e.ez.x*i,a.y=e.ex.y*t+e.ey.y*o+e.ez.y*i,a.z=e.ex.z*t+e.ey.z*o+e.ez.z*i,a}static MulM33V2(e,t,o){const i=t.x,a=t.y;return o.x=e.ex.x*i+e.ey.x*a,o.y=e.ex.y*i+e.ey.y*a,o}static MulM33XY(e,t,o,i){return i.x=e.ex.x*t+e.ey.x*o,i.y=e.ex.y*t+e.ey.y*o,i}}o.b2Mat33=d,d.IDENTITY=new d;class u{constructor(e=0){this.s=0,this.c=1,e&&(this.s=Math.sin(e),this.c=Math.cos(e))}Clone(){return(new u).Copy(this)}Copy(e){return this.s=e.s,this.c=e.c,this}SetAngle(e){return this.s=Math.sin(e),this.c=Math.cos(e),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(e){return e.x=this.c,e.y=this.s,e}GetYAxis(e){return e.x=-this.s,e.y=this.c,e}static MulRR(e,t,o){const i=e.c,a=e.s,r=t.c,s=t.s;return o.s=a*r+i*s,o.c=i*r-a*s,o}static MulTRR(e,t,o){const i=e.c,a=e.s,r=t.c,s=t.s;return o.s=i*s-a*r,o.c=i*r+a*s,o}static MulRV(e,t,o){const i=e.c,a=e.s,r=t.x,s=t.y;return o.x=i*r-a*s,o.y=a*r+i*s,o}static MulTRV(e,t,o){const i=e.c,a=e.s,r=t.x,s=t.y;return o.x=i*r+a*s,o.y=-a*r+i*s,o}}o.b2Rot=u,u.IDENTITY=new u;class m{constructor(){this.p=new n,this.q=new u}Clone(){return(new m).Copy(this)}Copy(e){return this.p.Copy(e.p),this.q.Copy(e.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(e,t){return this.p.Copy(e),this.q.Copy(t),this}SetPositionAngle(e,t){return this.p.Copy(e),this.q.SetAngle(t),this}SetPosition(e){return this.p.Copy(e),this}SetPositionXY(e,t){return this.p.Set(e,t),this}SetRotation(e){return this.q.Copy(e),this}SetRotationAngle(e){return this.q.SetAngle(e),this}GetPosition(){return this.p}GetRotation(){return this.q}GetRotationAngle(){return this.q.GetAngle()}GetAngle(){return this.q.GetAngle()}static MulXV(e,t,o){const i=e.q.c,a=e.q.s,r=t.x,s=t.y;return o.x=i*r-a*s+e.p.x,o.y=a*r+i*s+e.p.y,o}static MulTXV(e,t,o){const i=e.q.c,a=e.q.s,r=t.x-e.p.x,s=t.y-e.p.y;return o.x=i*r+a*s,o.y=-a*r+i*s,o}static MulXX(e,t,o){return u.MulRR(e.q,t.q,o.q),n.AddVV(u.MulRV(e.q,t.p,o.p),e.p,o.p),o}static MulTXX(e,t,o){return u.MulTRR(e.q,t.q,o.q),u.MulTRV(e.q,n.SubVV(t.p,e.p,o.p),o.p),o}}o.b2Transform=m,m.IDENTITY=new m;class p{constructor(){this.localCenter=new n,this.c0=new n,this.c=new n,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new p).Copy(this)}Copy(e){return this.localCenter.Copy(e.localCenter),this.c0.Copy(e.c0),this.c.Copy(e.c),this.a0=e.a0,this.a=e.a,this.alpha0=e.alpha0,this}GetTransform(e,t){const o=1-t;e.p.x=o*this.c0.x+t*this.c.x,e.p.y=o*this.c0.y+t*this.c.y;const i=o*this.a0+t*this.a;return e.q.SetAngle(i),e.p.SelfSub(u.MulRV(e.q,this.localCenter,n.s_t0)),e}Advance(e){const t=(e-this.alpha0)/(1-this.alpha0),o=1-t;this.c0.x=o*this.c0.x+t*this.c.x,this.c0.y=o*this.c0.y+t*this.c.y,this.a0=o*this.a0+t*this.a,this.alpha0=e}Normalize(){const e=o.b2_two_pi*Math.floor(this.a0/o.b2_two_pi);this.a0-=e,this.a-=e}}o.b2Sweep=p,cc._RF.pop()},{"./b2Settings":"b2Settings"}],b2MotorJoint:[function(e,t,o){"use strict";cc._RF.push(t,"71bcdC0tHxGP7UaTkKT8kJ1","b2MotorJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2MotorJoint=o.b2MotorJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2MotorJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_motorJoint),this.linearOffset=new a.b2Vec2(0,0),this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(e,t){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);const o=this.bodyA.GetAngle(),i=this.bodyB.GetAngle();this.angularOffset=i-o}};class s extends r.b2Joint{constructor(e){super(e),this.m_linearOffset=new a.b2Vec2,this.m_angularOffset=0,this.m_linearImpulse=new a.b2Vec2,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_correctionFactor=.3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_linearError=new a.b2Vec2,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new a.b2Mat22,this.m_angularMass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_K=new a.b2Mat22,this.m_linearOffset.Copy(i.b2Maybe(e.linearOffset,a.b2Vec2.ZERO)),this.m_linearImpulse.SetZero(),this.m_maxForce=i.b2Maybe(e.maxForce,0),this.m_maxTorque=i.b2Maybe(e.maxTorque,0),this.m_correctionFactor=i.b2Maybe(e.correctionFactor,.3)}GetAnchorA(e){const t=this.m_bodyA.GetPosition();return e.x=t.x,e.y=t.y,e}GetAnchorB(e){const t=this.m_bodyB.GetPosition();return e.x=t.x,e.y=t.y,e}GetReactionForce(e,t){return a.b2Vec2.MulSV(e,this.m_linearImpulse,t)}GetReactionTorque(e){return e*this.m_angularImpulse}SetLinearOffset(e){a.b2Vec2.IsEqualToV(e,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(e))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(e){e!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=e)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(e){this.m_maxForce=e}GetMaxForce(){return this.m_maxForce}SetMaxTorque(e){this.m_maxTorque=e}GetMaxTorque(){return this.m_maxTorque}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].c,o=e.positions[this.m_indexA].a,i=e.velocities[this.m_indexA].v;let r=e.velocities[this.m_indexA].w;const s=e.positions[this.m_indexB].c,n=e.positions[this.m_indexB].a,l=e.velocities[this.m_indexB].v;let c=e.velocities[this.m_indexB].w;const d=this.m_qA.SetAngle(o),u=this.m_qB.SetAngle(n),m=a.b2Rot.MulRV(d,a.b2Vec2.SubVV(this.m_linearOffset,this.m_localCenterA,a.b2Vec2.s_t0),this.m_rA),p=a.b2Rot.MulRV(u,a.b2Vec2.NegV(this.m_localCenterB,a.b2Vec2.s_t0),this.m_rB),h=this.m_invMassA,f=this.m_invMassB,y=this.m_invIA,_=this.m_invIB,g=this.m_K;if(g.ex.x=h+f+y*m.y*m.y+_*p.y*p.y,g.ex.y=-y*m.x*m.y-_*p.x*p.y,g.ey.x=g.ex.y,g.ey.y=h+f+y*m.x*m.x+_*p.x*p.x,g.GetInverse(this.m_linearMass),this.m_angularMass=y+_,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),a.b2Vec2.SubVV(a.b2Vec2.AddVV(s,p,a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,m,a.b2Vec2.s_t1),this.m_linearError),this.m_angularError=n-o-this.m_angularOffset,e.step.warmStarting){this.m_linearImpulse.SelfMul(e.step.dtRatio),this.m_angularImpulse*=e.step.dtRatio;const t=this.m_linearImpulse;i.SelfMulSub(h,t),r-=y*(a.b2Vec2.CrossVV(m,t)+this.m_angularImpulse),l.SelfMulAdd(f,t),c+=_*(a.b2Vec2.CrossVV(p,t)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;e.velocities[this.m_indexA].w=r,e.velocities[this.m_indexB].w=c}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,d=this.m_invIB,u=e.step.dt,m=e.step.inv_dt;{const e=r-o+m*this.m_correctionFactor*this.m_angularError;let t=-this.m_angularMass*e;const i=this.m_angularImpulse,s=u*this.m_maxTorque;this.m_angularImpulse=a.b2Clamp(this.m_angularImpulse+t,-s,s),o-=c*(t=this.m_angularImpulse-i),r+=d*t}{const e=this.m_rA,p=this.m_rB,h=a.b2Vec2.AddVV(a.b2Vec2.SubVV(a.b2Vec2.AddVV(i,a.b2Vec2.CrossSV(r,p,a.b2Vec2.s_t0),a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,a.b2Vec2.CrossSV(o,e,a.b2Vec2.s_t1),a.b2Vec2.s_t1),a.b2Vec2.s_t2),a.b2Vec2.MulSV(m*this.m_correctionFactor,this.m_linearError,a.b2Vec2.s_t3),s.SolveVelocityConstraints_s_Cdot_v2),f=a.b2Mat22.MulMV(this.m_linearMass,h,s.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),y=s.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(f);const _=u*this.m_maxForce;this.m_linearImpulse.LengthSquared()>_*_&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(_)),a.b2Vec2.SubVV(this.m_linearImpulse,y,f),t.SelfMulSub(n,f),o-=c*a.b2Vec2.CrossVV(e,f),i.SelfMulAdd(l,f),r+=d*a.b2Vec2.CrossVV(p,f)}e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){return!0}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),e("  jd.angularOffset = %.15f;\n",this.m_angularOffset),e("  jd.maxForce = %.15f;\n",this.m_maxForce),e("  jd.maxTorque = %.15f;\n",this.m_maxTorque),e("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2MotorJoint=s,s.SolveVelocityConstraints_s_Cdot_v2=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse_v2=new a.b2Vec2,s.SolveVelocityConstraints_s_oldImpulse_v2=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2MouseJoint:[function(e,t,o){"use strict";cc._RF.push(t,"8c58bkZoupKQLNfIrNOUMR9","b2MouseJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2MouseJoint=o.b2MouseJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2MouseJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_mouseJoint),this.target=new a.b2Vec2,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7}};class s extends r.b2Joint{constructor(e){super(e),this.m_localAnchorB=new a.b2Vec2,this.m_targetA=new a.b2Vec2,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_beta=0,this.m_impulse=new a.b2Vec2,this.m_maxForce=0,this.m_gamma=0,this.m_indexA=0,this.m_indexB=0,this.m_rB=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new a.b2Mat22,this.m_C=new a.b2Vec2,this.m_qB=new a.b2Rot,this.m_lalcB=new a.b2Vec2,this.m_K=new a.b2Mat22,this.m_targetA.Copy(i.b2Maybe(e.target,a.b2Vec2.ZERO)),a.b2Transform.MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=i.b2Maybe(e.maxForce,0),this.m_impulse.SetZero(),this.m_frequencyHz=i.b2Maybe(e.frequencyHz,0),this.m_dampingRatio=i.b2Maybe(e.dampingRatio,0),this.m_beta=0,this.m_gamma=0}SetTarget(e){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(e)}GetTarget(){return this.m_targetA}SetMaxForce(e){this.m_maxForce=e}GetMaxForce(){return this.m_maxForce}SetFrequency(e){this.m_frequencyHz=e}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(e){this.m_dampingRatio=e}GetDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(e){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexB].c,o=e.positions[this.m_indexB].a,r=e.velocities[this.m_indexB].v;let s=e.velocities[this.m_indexB].w;const n=this.m_qB.SetAngle(o),l=this.m_bodyB.GetMass(),c=2*i.b2_pi*this.m_frequencyHz,d=2*l*this.m_dampingRatio*c,u=l*c*c,m=e.step.dt;this.m_gamma=m*(d+m*u),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=m*u*this.m_gamma,a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(n,this.m_lalcB,this.m_rB);const p=this.m_K;p.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,p.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,p.GetInverse(this.m_mass),this.m_C.x=t.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=t.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),s*=.98,e.step.warmStarting?(this.m_impulse.SelfMul(e.step.dtRatio),r.x+=this.m_invMassB*this.m_impulse.x,r.y+=this.m_invMassB*this.m_impulse.y,s+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),e.velocities[this.m_indexB].w=s}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexB].v;let o=e.velocities[this.m_indexB].w;const i=a.b2Vec2.AddVCrossSV(t,o,this.m_rB,s.SolveVelocityConstraints_s_Cdot),r=a.b2Mat22.MulMV(this.m_mass,a.b2Vec2.AddVV(i,a.b2Vec2.AddVV(this.m_C,a.b2Vec2.MulSV(this.m_gamma,this.m_impulse,a.b2Vec2.s_t0),a.b2Vec2.s_t0),a.b2Vec2.s_t0).SelfNeg(),s.SolveVelocityConstraints_s_impulse),n=s.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(r);const l=e.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>l*l&&this.m_impulse.SelfMul(l/this.m_impulse.Length()),a.b2Vec2.SubVV(this.m_impulse,n,r),t.SelfMulAdd(this.m_invMassB,r),o+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,r),e.velocities[this.m_indexB].w=o}SolvePositionConstraints(e){return!0}GetAnchorA(e){return e.x=this.m_targetA.x,e.y=this.m_targetA.y,e}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return a.b2Vec2.MulSV(e,this.m_impulse,t)}GetReactionTorque(e){return 0}Dump(e){e("Mouse joint dumping is not supported.\n")}ShiftOrigin(e){this.m_targetA.SelfSub(e)}}o.b2MouseJoint=s,s.SolveVelocityConstraints_s_Cdot=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse=new a.b2Vec2,s.SolveVelocityConstraints_s_oldImpulse=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2ParticleGroup:[function(e,t,o){"use strict";cc._RF.push(t,"861f69yEl9JiaUKvA3wexLP","b2ParticleGroup"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ParticleGroup=o.b2ParticleGroupDef=o.b2ParticleGroupFlag=void 0;const i=e("../Common/b2Math"),a=e("../Common/b2Draw");var r;(function(e){e[e.b2_solidParticleGroup=1]="b2_solidParticleGroup",e[e.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",e[e.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",e[e.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",e[e.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",e[e.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask"})(r=o.b2ParticleGroupFlag||(o.b2ParticleGroupFlag={})),o.b2ParticleGroupDef=class{constructor(){this.flags=0,this.groupFlags=0,this.position=new i.b2Vec2,this.angle=0,this.linearVelocity=new i.b2Vec2,this.angularVelocity=0,this.color=new a.b2Color,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null}};class s{constructor(e){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new i.b2Vec2,this.m_linearVelocity=new i.b2Vec2,this.m_angularVelocity=0,this.m_transform=new i.b2Transform,this.m_userData=null,this.m_system=e}GetNext(){return this.m_next}GetParticleSystem(){return this.m_system}GetParticleCount(){return this.m_lastIndex-this.m_firstIndex}GetBufferIndex(){return this.m_firstIndex}ContainsParticle(e){return this.m_firstIndex<=e&&e<this.m_lastIndex}GetAllParticleFlags(){if(!this.m_system.m_flagsBuffer.data)throw new Error;let e=0;for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)e|=this.m_system.m_flagsBuffer.data[t];return e}GetGroupFlags(){return this.m_groupFlags}SetGroupFlags(e){e|=this.m_groupFlags&r.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,e)}GetMass(){return this.UpdateStatistics(),this.m_mass}GetInertia(){return this.UpdateStatistics(),this.m_inertia}GetCenter(){return this.UpdateStatistics(),this.m_center}GetLinearVelocity(){return this.UpdateStatistics(),this.m_linearVelocity}GetAngularVelocity(){return this.UpdateStatistics(),this.m_angularVelocity}GetTransform(){return this.m_transform}GetPosition(){return this.m_transform.p}GetAngle(){return this.m_transform.q.GetAngle()}GetLinearVelocityFromWorldPoint(e,t){const o=s.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),i.b2Vec2.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,i.b2Vec2.SubVV(e,this.m_center,o),t)}GetUserData(){return this.m_userData}SetUserData(e){this.m_userData=e}ApplyForce(e){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,e)}ApplyLinearImpulse(e){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,e)}DestroyParticles(e){if(this.m_system.m_world.IsLocked())throw new Error;for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)this.m_system.DestroyParticle(t,e)}UpdateStatistics(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const e=new i.b2Vec2,t=new i.b2Vec2;if(this.m_timestamp!==this.m_system.m_timestamp){const o=this.m_system.GetParticleMass();this.m_mass=o*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(let e=this.m_firstIndex;e<this.m_lastIndex;e++)this.m_center.SelfMulAdd(o,this.m_system.m_positionBuffer.data[e]),this.m_linearVelocity.SelfMulAdd(o,this.m_system.m_velocityBuffer.data[e]);if(this.m_mass>0){const e=1/this.m_mass;this.m_center.SelfMul(e),this.m_linearVelocity.SelfMul(e)}this.m_inertia=0,this.m_angularVelocity=0;for(let a=this.m_firstIndex;a<this.m_lastIndex;a++)i.b2Vec2.SubVV(this.m_system.m_positionBuffer.data[a],this.m_center,e),i.b2Vec2.SubVV(this.m_system.m_velocityBuffer.data[a],this.m_linearVelocity,t),this.m_inertia+=o*i.b2Vec2.DotVV(e,e),this.m_angularVelocity+=o*i.b2Vec2.CrossVV(e,t);this.m_inertia>0&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}}}o.b2ParticleGroup=s,s.GetLinearVelocityFromWorldPoint_s_t0=new i.b2Vec2,cc._RF.pop()},{"../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math"}],b2ParticleSystem:[function(e,t,o){"use strict";cc._RF.push(t,"26af0Pkr4VN5Z9gEkkbSBYN","b2ParticleSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ParticleSystem_SolveCollisionCallback=o.b2ParticleSystem_UpdateBodyContactsCallback=o.b2ParticleSystem_ReactiveFilter=o.b2ParticleSystem_CompositeShape=o.b2ParticleSystem_JoinParticleGroupsFilter=o.b2ParticleSystem_DestroyParticlesInShapeCallback=o.b2ParticleSystem_ConnectionFilter=o.b2ParticlePairSet=o.b2ParticleSystem_ParticlePair=o.b2ParticleSystem_FixtureParticleSet=o.b2ParticleSystem_FixtureParticle=o.b2ParticleSystem_FixedSetAllocator=o.b2ParticleSystem_ParticleListNode=o.b2ParticleSystem_InsideBoundsEnumerator=o.b2ParticleSystem_Proxy=o.b2ParticleSystem_UserOverridableBuffer=o.b2ParticleSystem=o.b2ParticleSystemDef=o.b2ParticleTriad=o.b2ParticlePair=o.b2ParticleBodyContact=o.b2ParticleContact=o.b2FixtureParticleQueryCallback=o.b2GrowableBuffer=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Settings"),r=e("../Common/b2Math"),s=e("../Common/b2Draw"),n=e("../Collision/b2Collision"),l=e("../Collision/Shapes/b2Shape"),c=e("../Collision/Shapes/b2EdgeShape"),d=e("../Dynamics/b2TimeStep"),u=e("../Dynamics/b2WorldCallbacks"),m=e("./b2Particle"),p=e("./b2ParticleGroup"),h=e("./b2VoronoiDiagram");function f(e,t,o){const i=e[t];e[t]=e[o],e[o]=i}function y(e,t){return e<t}function _(e,t=0,o=e.length-t,i=y){let a=t;const r=[];let s=0;for(;;){for(;a+1<o;o++){const t=e[a+Math.floor(Math.random()*(o-a))];r[s++]=o;for(let r=a-1;;){for(;i(e[++r],t););for(;i(t,e[--o]););if(r>=o)break;f(e,r,o)}}if(0===s)break;a=o,o=r[--s]}return e}function g(e,t=0,o=e.length-t,i=y){return _(e,t,o,i)}function b(e,t,o=e.length){let i=0;for(let a=0;a<o;++a)t(e[a])||(a!==i?f(e,i++,a):++i);return i}function S(e,t,o,i,a){let r=o-t;for(;r>0;){const o=Math.floor(r/2);let s=t+o;a(e[s],i)?(t=++s,r-=o+1):r=o}return t}function P(e,t,o,i,a){let r=o-t;for(;r>0;){const o=Math.floor(r/2);let s=t+o;a(i,e[s])?r=o:(t=++s,r-=o+1)}return t}function B(e,t,o,i){let a=o;for(;t!==a;)f(e,t++,a++),a===i?a=o:t===o&&(o=a)}function C(e,t,o,i){if(t===o)return o;let a=t;for(;++t!==o;)i(e[a],e[t])||f(e,++a,t);return++a}class M{constructor(e){this.data=[],this.count=0,this.capacity=0,this.allocator=e}Append(){return this.count>=this.capacity&&this.Grow(),this.count++}Reserve(e){if(!(this.capacity>=e)){for(let t=this.capacity;t<e;++t)this.data[t]=this.allocator();this.capacity=e}}Grow(){const e=this.capacity?2*this.capacity:i.b2_minParticleSystemBufferCapacity;this.Reserve(e)}Free(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)}Shorten(e){}Data(){return this.data}GetCount(){return this.count}SetCount(e){this.count=e}GetCapacity(){return this.capacity}RemoveIf(e){this.count=b(this.data,e,this.count)}Unique(e){this.count=C(this.data,0,this.count,e)}}o.b2GrowableBuffer=M;class x extends u.b2QueryCallback{constructor(e){super(),this.m_system=e}ShouldQueryParticleSystem(e){return!1}ReportFixture(e){if(e.IsSensor())return!0;const t=e.GetShape().GetChildCount();for(let o=0;o<t;o++){const t=e.GetAABB(o),i=this.m_system.GetInsideBoundsEnumerator(t);let a;for(;(a=i.GetNext())>=0;)this.ReportFixtureAndParticle(e,o,a)}return!0}ReportParticle(e,t){return!1}ReportFixtureAndParticle(e,t,o){}}o.b2FixtureParticleQueryCallback=x;class V{constructor(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new r.b2Vec2,this.flags=0}SetIndices(e,t){this.indexA=e,this.indexB=t}SetWeight(e){this.weight=e}SetNormal(e){this.normal.Copy(e)}SetFlags(e){this.flags=e}GetIndexA(){return this.indexA}GetIndexB(){return this.indexB}GetWeight(){return this.weight}GetNormal(){return this.normal}GetFlags(){return this.flags}IsEqual(e){return this.indexA===e.indexA&&this.indexB===e.indexB&&this.flags===e.flags&&this.weight===e.weight&&this.normal.x===e.normal.x&&this.normal.y===e.normal.y}IsNotEqual(e){return!this.IsEqual(e)}ApproximatelyEqual(e){return this.indexA===e.indexA&&this.indexB===e.indexB&&this.flags===e.flags&&r.b2Abs(this.weight-e.weight)<.01&&r.b2Vec2.DistanceSquaredVV(this.normal,e.normal)<1e-4}}o.b2ParticleContact=V;class I{constructor(){this.index=0,this.weight=0,this.normal=new r.b2Vec2,this.mass=0}}o.b2ParticleBodyContact=I;class O{constructor(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0}}o.b2ParticlePair=O;class w{constructor(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new r.b2Vec2(0,0),this.pb=new r.b2Vec2(0,0),this.pc=new r.b2Vec2(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0}}o.b2ParticleTriad=w;class E{constructor(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}Copy(e){return this.strictContactCheck=e.strictContactCheck,this.density=e.density,this.gravityScale=e.gravityScale,this.radius=e.radius,this.maxCount=e.maxCount,this.pressureStrength=e.pressureStrength,this.dampingStrength=e.dampingStrength,this.elasticStrength=e.elasticStrength,this.springStrength=e.springStrength,this.viscousStrength=e.viscousStrength,this.surfaceTensionPressureStrength=e.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=e.surfaceTensionNormalStrength,this.repulsiveStrength=e.repulsiveStrength,this.powderStrength=e.powderStrength,this.ejectionStrength=e.ejectionStrength,this.staticPressureStrength=e.staticPressureStrength,this.staticPressureRelaxation=e.staticPressureRelaxation,this.staticPressureIterations=e.staticPressureIterations,this.colorMixingStrength=e.colorMixingStrength,this.destroyByAge=e.destroyByAge,this.lifetimeGranularity=e.lifetimeGranularity,this}Clone(){return(new E).Copy(this)}}o.b2ParticleSystemDef=E;class A{constructor(e,t){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new R,this.m_flagsBuffer=new R,this.m_positionBuffer=new R,this.m_velocityBuffer=new R,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new R,this.m_groupBuffer=[],this.m_userDataBuffer=new R,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new R,this.m_bodyContactCountBuffer=new R,this.m_consecutiveContactStepsBuffer=new R,this.m_stuckParticleBuffer=new M(()=>0),this.m_proxyBuffer=new M(()=>new v),this.m_contactBuffer=new M(()=>new V),this.m_bodyContactBuffer=new M(()=>new I),this.m_pairBuffer=new M(()=>new O),this.m_triadBuffer=new M(()=>new w),this.m_expirationTimeBuffer=new R,this.m_indexByExpirationTimeBuffer=new R,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new E,this.m_prev=null,this.m_next=null,this.UpdateBodyContacts_callback=null,this.SolveCollision_callback=null,this.SetStrictContactCheck(e.strictContactCheck),this.SetDensity(e.density),this.SetGravityScale(e.gravityScale),this.SetRadius(e.radius),this.SetMaxParticleCount(e.maxCount),this.m_def=e.Clone(),this.m_world=t,this.SetDestructionByAge(this.m_def.destroyByAge)}static computeTag(e,t){return(t+A.yOffset>>>0<<A.yShift)+(A.xScale*e+A.xOffset>>>0)>>>0}static computeRelativeTag(e,t,o){return e+(o<<A.yShift)+(t<<A.xShift)>>>0}Drop(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)}CreateParticle(e){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity){const e=this.m_count?2*this.m_count:i.b2_minParticleSystemBufferCapacity;this.ReallocateInternalAllocatedBuffers(e)}if(this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return i.b2_invalidParticleIndex;this.DestroyOldestParticle(0,!1),this.SolveZombie()}const t=this.m_count++;this.m_flagsBuffer.data[t]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[t]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[t]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[t]=0),this.m_positionBuffer.data[t]=(this.m_positionBuffer.data[t]||new r.b2Vec2).Copy(i.b2Maybe(e.position,r.b2Vec2.ZERO)),this.m_velocityBuffer.data[t]=(this.m_velocityBuffer.data[t]||new r.b2Vec2).Copy(i.b2Maybe(e.velocity,r.b2Vec2.ZERO)),this.m_weightBuffer[t]=0,this.m_forceBuffer[t]=(this.m_forceBuffer[t]||new r.b2Vec2).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[t]=0),this.m_depthBuffer&&(this.m_depthBuffer[t]=0);const o=(new s.b2Color).Copy(i.b2Maybe(e.color,s.b2Color.ZERO));!this.m_colorBuffer.data&&o.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[t]=(this.m_colorBuffer.data[t]||new s.b2Color).Copy(o)),(this.m_userDataBuffer.data||e.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[t]=e.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[t]=null);const a=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],n=i.b2Maybe(e.lifetime,0),l=n>0;(this.m_expirationTimeBuffer.data||l)&&(this.SetParticleLifetime(t,l?n:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),this.m_indexByExpirationTimeBuffer.data[t]=t),a.index=t;const c=i.b2Maybe(e.group,null);return this.m_groupBuffer[t]=c,c&&(c.m_firstIndex<c.m_lastIndex?(this.RotateBuffer(c.m_firstIndex,c.m_lastIndex,t),c.m_lastIndex=t+1):(c.m_firstIndex=t,c.m_lastIndex=t+1)),this.SetParticleFlags(t,i.b2Maybe(e.flags,0)),t}GetParticleHandleFromIndex(e){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);let t=this.m_handleIndexBuffer.data[e];return t||((t=new m.b2ParticleHandle).SetIndex(e),this.m_handleIndexBuffer.data[e]=t,t)}DestroyParticle(e,t=!1){let o=m.b2ParticleFlag.b2_zombieParticle;t&&(o|=m.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(e,this.m_flagsBuffer.data[e]|o)}DestroyOldestParticle(e,t=!1){const o=this.GetParticleCount(),i=this.m_indexByExpirationTimeBuffer.data[o-(e+1)],a=this.m_indexByExpirationTimeBuffer.data[e];this.DestroyParticle(this.m_expirationTimeBuffer.data[i]>0?i:a,t)}DestroyParticlesInShape(e,t,o=!1){const i=A.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;const a=new N(this,e,t,o),r=i;return e.ComputeAABB(r,t,0),this.m_world.QueryAABB(a,r),a.Destroyed()}CreateParticleGroup(e){const t=A.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;const o=t;o.SetPositionAngle(i.b2Maybe(e.position,r.b2Vec2.ZERO),i.b2Maybe(e.angle,0));const a=this.m_count;if(e.shape&&this.CreateParticlesWithShapeForGroup(e.shape,e,o),e.shapes&&this.CreateParticlesWithShapesForGroup(e.shapes,i.b2Maybe(e.shapeCount,e.shapes.length),e,o),e.positionData){const t=i.b2Maybe(e.particleCount,e.positionData.length);for(let i=0;i<t;i++){const t=e.positionData[i];this.CreateParticleForGroup(e,o,t)}}const s=this.m_count;let n=new p.b2ParticleGroup(this);n.m_firstIndex=a,n.m_lastIndex=s,n.m_strength=i.b2Maybe(e.strength,1),n.m_userData=e.userData,n.m_transform.Copy(o),n.m_prev=null,n.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=n),this.m_groupList=n,++this.m_groupCount;for(let i=a;i<s;i++)this.m_groupBuffer[i]=n;this.SetGroupFlags(n,i.b2Maybe(e.groupFlags,0));const l=new L;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(a,s,l),e.group&&(this.JoinParticleGroups(e.group,n),n=e.group),n}JoinParticleGroups(e,t){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(t.m_firstIndex,t.m_lastIndex,this.m_count),this.RotateBuffer(e.m_firstIndex,e.m_lastIndex,t.m_firstIndex);const o=new j(t.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(e.m_firstIndex,t.m_lastIndex,o);for(let a=t.m_firstIndex;a<t.m_lastIndex;a++)this.m_groupBuffer[a]=e;const i=e.m_groupFlags|t.m_groupFlags;this.SetGroupFlags(e,i),e.m_lastIndex=t.m_lastIndex,t.m_firstIndex=t.m_lastIndex,this.DestroyParticleGroup(t)}SplitParticleGroup(e){this.UpdateContacts(!0);const t=e.GetParticleCount(),o=i.b2MakeArray(t,()=>new G);A.InitializeParticleLists(e,o),this.MergeParticleListsInContact(e,o);const a=A.FindLongestParticleList(e,o);this.MergeZombieParticleListNodes(e,o,a),this.CreateParticleGroupsFromParticleList(e,o,a),this.UpdatePairsAndTriadsWithParticleList(e,o)}GetParticleGroupList(){return this.m_groupList}GetParticleGroupCount(){return this.m_groupCount}GetParticleCount(){return this.m_count}GetMaxParticleCount(){return this.m_def.maxCount}SetMaxParticleCount(e){this.m_def.maxCount=e}GetAllParticleFlags(){return this.m_allParticleFlags}GetAllGroupFlags(){return this.m_allGroupFlags}SetPaused(e){this.m_paused=e}GetPaused(){return this.m_paused}SetDensity(e){this.m_def.density=e,this.m_inverseDensity=1/this.m_def.density}GetDensity(){return this.m_def.density}SetGravityScale(e){this.m_def.gravityScale=e}GetGravityScale(){return this.m_def.gravityScale}SetDamping(e){this.m_def.dampingStrength=e}GetDamping(){return this.m_def.dampingStrength}SetStaticPressureIterations(e){this.m_def.staticPressureIterations=e}GetStaticPressureIterations(){return this.m_def.staticPressureIterations}SetRadius(e){this.m_particleDiameter=2*e,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter}GetRadius(){return this.m_particleDiameter/2}GetPositionBuffer(){return this.m_positionBuffer.data}GetVelocityBuffer(){return this.m_velocityBuffer.data}GetColorBuffer(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data}GetGroupBuffer(){return this.m_groupBuffer}GetWeightBuffer(){return this.m_weightBuffer}GetUserDataBuffer(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data}GetFlagsBuffer(){return this.m_flagsBuffer.data}SetParticleFlags(e,t){this.m_flagsBuffer.data[e]&~t&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&t&&(t&m.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),t&m.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=t),this.m_flagsBuffer.data[e]=t}GetParticleFlags(e){return this.m_flagsBuffer.data[e]}SetFlagsBuffer(e){this.SetUserOverridableBuffer(this.m_flagsBuffer,e)}SetPositionBuffer(e){if(e instanceof Float32Array){if(e.length%2!=0)throw new Error;const t=e.length/2,o=new Array(t);for(let i=0;i<t;++i)o[i]=new r.b2Vec2(e.subarray(2*i,2*i+2));e=o}this.SetUserOverridableBuffer(this.m_positionBuffer,e)}SetVelocityBuffer(e){if(e instanceof Float32Array){if(e.length%2!=0)throw new Error;const t=e.length/2,o=new Array(t);for(let i=0;i<t;++i)o[i]=new r.b2Vec2(e.subarray(2*i,2*i+2));e=o}this.SetUserOverridableBuffer(this.m_velocityBuffer,e)}SetColorBuffer(e){if(e instanceof Float32Array){if(e.length%4!=0)throw new Error;const t=e.length/4,o=new Array(t);for(let i=0;i<t;++i)o[i]=new s.b2Color(e.subarray(4*i,4*i+4));e=o}this.SetUserOverridableBuffer(this.m_colorBuffer,e)}SetUserDataBuffer(e){this.SetUserOverridableBuffer(this.m_userDataBuffer,e)}GetContacts(){return this.m_contactBuffer.data}GetContactCount(){return this.m_contactBuffer.count}GetBodyContacts(){return this.m_bodyContactBuffer.data}GetBodyContactCount(){return this.m_bodyContactBuffer.count}GetPairs(){return this.m_pairBuffer.data}GetPairCount(){return this.m_pairBuffer.count}GetTriads(){return this.m_triadBuffer.data}GetTriadCount(){return this.m_triadBuffer.count}SetStuckThreshold(e){this.m_stuckThreshold=e,e>0&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))}GetStuckCandidates(){return this.m_stuckParticleBuffer.Data()}GetStuckCandidateCount(){return this.m_stuckParticleBuffer.GetCount()}ComputeCollisionEnergy(){const e=A.ComputeCollisionEnergy_s_v,t=this.m_velocityBuffer.data;let o=0;for(let i=0;i<this.m_contactBuffer.count;i++){const a=this.m_contactBuffer.data[i],s=a.indexA,n=a.indexB,l=a.normal,c=r.b2Vec2.SubVV(t[n],t[s],e),d=r.b2Vec2.DotVV(c,l);d<0&&(o+=d*d)}return.5*this.GetParticleMass()*o}SetStrictContactCheck(e){this.m_def.strictContactCheck=e}GetStrictContactCheck(){return this.m_def.strictContactCheck}SetParticleLifetime(e,t){const o=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),o){const e=this.GetParticleCount();for(let t=0;t<e;++t)this.m_indexByExpirationTimeBuffer.data[t]=t}const i=t/this.m_def.lifetimeGranularity,a=i>0?this.GetQuantizedTimeElapsed()+i:i;a!==this.m_expirationTimeBuffer.data[e]&&(this.m_expirationTimeBuffer.data[e]=a,this.m_expirationTimeBufferRequiresSorting=!0)}GetParticleLifetime(e){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[e])}SetDestructionByAge(e){e&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=e}GetDestructionByAge(){return this.m_def.destroyByAge}GetExpirationTimeBuffer(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data}ExpirationTimeToLifetime(e){return(e>0?e-this.GetQuantizedTimeElapsed():e)*this.m_def.lifetimeGranularity}GetIndexByExpirationTimeBuffer(){return this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data}ParticleApplyLinearImpulse(e,t){this.ApplyLinearImpulse(e,e+1,t)}ApplyLinearImpulse(e,t,o){const i=this.m_velocityBuffer.data,a=(t-e)*this.GetParticleMass(),s=(new r.b2Vec2).Copy(o).SelfMul(1/a);for(let r=e;r<t;r++)i[r].SelfAdd(s)}static IsSignificantForce(e){return 0!==e.x||0!==e.y}ParticleApplyForce(e,t){A.IsSignificantForce(t)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[e])&&(this.PrepareForceBuffer(),this.m_forceBuffer[e].SelfAdd(t))}ApplyForce(e,t,o){const i=(new r.b2Vec2).Copy(o).SelfMul(1/(t-e));if(A.IsSignificantForce(i)){this.PrepareForceBuffer();for(let o=e;o<t;o++)this.m_forceBuffer[o].SelfAdd(i)}}GetNext(){return this.m_next}QueryAABB(e,t){if(0===this.m_proxyBuffer.count)return;const o=this.m_proxyBuffer.count,i=S(this.m_proxyBuffer.data,0,o,A.computeTag(this.m_inverseDiameter*t.lowerBound.x,this.m_inverseDiameter*t.lowerBound.y),v.CompareProxyTag),a=P(this.m_proxyBuffer.data,i,o,A.computeTag(this.m_inverseDiameter*t.upperBound.x,this.m_inverseDiameter*t.upperBound.y),v.CompareTagProxy),r=this.m_positionBuffer.data;for(let s=i;s<a;++s){const o=this.m_proxyBuffer.data[s].index,i=r[o];if(t.lowerBound.x<i.x&&i.x<t.upperBound.x&&t.lowerBound.y<i.y&&i.y<t.upperBound.y&&!e.ReportParticle(this,o))break}}QueryShapeAABB(e,t,o,i=0){const a=A.QueryShapeAABB_s_aabb;t.ComputeAABB(a,o,i),this.QueryAABB(e,a)}QueryPointAABB(e,t,o=i.b2_linearSlop){const a=A.QueryPointAABB_s_aabb;a.lowerBound.Set(t.x-o,t.y-o),a.upperBound.Set(t.x+o,t.y+o),this.QueryAABB(e,a)}RayCast(e,t,o){const i=A.RayCast_s_aabb,a=A.RayCast_s_p,s=A.RayCast_s_v,n=A.RayCast_s_n,l=A.RayCast_s_point;if(0===this.m_proxyBuffer.count)return;const c=this.m_positionBuffer.data,d=i;r.b2Vec2.MinV(t,o,d.lowerBound),r.b2Vec2.MaxV(t,o,d.upperBound);let u=1;const m=r.b2Vec2.SubVV(o,t,s),p=r.b2Vec2.DotVV(m,m),h=this.GetInsideBoundsEnumerator(d);let f;for(;(f=h.GetNext())>=0;){const o=r.b2Vec2.SubVV(t,c[f],a),i=r.b2Vec2.DotVV(o,m),s=i*i-p*(r.b2Vec2.DotVV(o,o)-this.m_squaredDiameter);if(s>=0){const a=r.b2Sqrt(s);let c=(-i-a)/p;if(c>u)continue;if(c<0&&((c=(-i+a)/p)<0||c>u))continue;const d=r.b2Vec2.AddVMulSV(o,c,m,n);d.Normalize();const h=e.ReportParticle(this,f,r.b2Vec2.AddVMulSV(t,c,m,l),d,c);if((u=r.b2Min(u,h))<=0)break}}}ComputeAABB(e){const t=this.GetParticleCount();e.lowerBound.x=+i.b2_maxFloat,e.lowerBound.y=+i.b2_maxFloat,e.upperBound.x=-i.b2_maxFloat,e.upperBound.y=-i.b2_maxFloat;const o=this.m_positionBuffer.data;for(let i=0;i<t;i++){const t=o[i];r.b2Vec2.MinV(e.lowerBound,t,e.lowerBound),r.b2Vec2.MaxV(e.upperBound,t,e.upperBound)}e.lowerBound.x-=this.m_particleDiameter,e.lowerBound.y-=this.m_particleDiameter,e.upperBound.x+=this.m_particleDiameter,e.upperBound.y+=this.m_particleDiameter}FreeBuffer(e,t){null!==e&&(e.length=0)}FreeUserOverridableBuffer(e){0===e.userSuppliedCapacity&&this.FreeBuffer(e.data,this.m_internalAllocatedCapacity)}ReallocateBuffer3(e,t,o){if(o<=t)throw new Error;const i=e?e.slice():[];return i.length=o,i}ReallocateBuffer5(e,t,o,i,a){if(i<=o)throw new Error;if(t&&!(i<=t))throw new Error;return a&&!e||t||(e=this.ReallocateBuffer3(e,o,i)),e}ReallocateBuffer4(e,t,o,i){return this.ReallocateBuffer5(e.data,e.userSuppliedCapacity,t,o,i)}RequestBuffer(e){return e||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(i.b2_minParticleSystemBufferCapacity),(e=[]).length=this.m_internalAllocatedCapacity),e}ReallocateHandleBuffers(e){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,e,!0)}ReallocateInternalAllocatedBuffers(e){function t(e,t){return t&&e>t?t:e}if(e=t(e,this.m_def.maxCount),e=t(e,this.m_flagsBuffer.userSuppliedCapacity),e=t(e,this.m_positionBuffer.userSuppliedCapacity),e=t(e,this.m_velocityBuffer.userSuppliedCapacity),e=t(e,this.m_colorBuffer.userSuppliedCapacity),e=t(e,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<e){this.ReallocateHandleBuffers(e),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,e,!1);const t=this.m_stuckThreshold>0;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,e,t),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,e,t),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,e,t),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,e,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,e,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,e,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,e,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,e,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,e,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,e,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,e,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,e,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,e,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,e,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,e,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,e,!1),this.m_internalAllocatedCapacity=e}}CreateParticleForGroup(e,t,o){const a=new m.b2ParticleDef;a.flags=i.b2Maybe(e.flags,0),r.b2Transform.MulXV(t,o,a.position),r.b2Vec2.AddVV(i.b2Maybe(e.linearVelocity,r.b2Vec2.ZERO),r.b2Vec2.CrossSV(i.b2Maybe(e.angularVelocity,0),r.b2Vec2.SubVV(a.position,i.b2Maybe(e.position,r.b2Vec2.ZERO),r.b2Vec2.s_t0),r.b2Vec2.s_t0),a.velocity),a.color.Copy(i.b2Maybe(e.color,s.b2Color.ZERO)),a.lifetime=i.b2Maybe(e.lifetime,0),a.userData=e.userData,this.CreateParticle(a)}CreateParticlesStrokeShapeForGroup(e,t,o){const a=A.CreateParticlesStrokeShapeForGroup_s_edge,s=A.CreateParticlesStrokeShapeForGroup_s_d,n=A.CreateParticlesStrokeShapeForGroup_s_p;let c=i.b2Maybe(t.stride,0);0===c&&(c=this.GetParticleStride());let d=0;const u=e.GetChildCount();for(let i=0;i<u;i++){let u=null;e.GetType()===l.b2ShapeType.e_edgeShape?u=e:(u=a,e.GetChildEdge(u,i));const m=r.b2Vec2.SubVV(u.m_vertex2,u.m_vertex1,s),p=m.Length();for(;d<p;){const e=r.b2Vec2.AddVMulSV(u.m_vertex1,d/p,m,n);this.CreateParticleForGroup(t,o,e),d+=c}d-=p}}CreateParticlesFillShapeForGroup(e,t,o){const a=A.CreateParticlesFillShapeForGroup_s_aabb,s=A.CreateParticlesFillShapeForGroup_s_p;let n=i.b2Maybe(t.stride,0);0===n&&(n=this.GetParticleStride());const l=r.b2Transform.IDENTITY,c=a;e.ComputeAABB(c,l,0);for(let i=Math.floor(c.lowerBound.y/n)*n;i<c.upperBound.y;i+=n)for(let a=Math.floor(c.lowerBound.x/n)*n;a<c.upperBound.x;a+=n){const r=s.Set(a,i);e.TestPoint(l,r)&&this.CreateParticleForGroup(t,o,r)}}CreateParticlesWithShapeForGroup(e,t,o){switch(e.GetType()){case l.b2ShapeType.e_edgeShape:case l.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(e,t,o);break;case l.b2ShapeType.e_polygonShape:case l.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(e,t,o)}}CreateParticlesWithShapesForGroup(e,t,o,i){const a=new k(e,t);this.CreateParticlesFillShapeForGroup(a,o,i)}CloneParticle(e,t){const o=new m.b2ParticleDef;o.flags=this.m_flagsBuffer.data[e],o.position.Copy(this.m_positionBuffer.data[e]),o.velocity.Copy(this.m_velocityBuffer.data[e]),this.m_colorBuffer.data&&o.color.Copy(this.m_colorBuffer.data[e]),this.m_userDataBuffer.data&&(o.userData=this.m_userDataBuffer.data[e]),o.group=t;const i=this.CreateParticle(o);if(this.m_handleIndexBuffer.data){const t=this.m_handleIndexBuffer.data[e];t&&t.SetIndex(i),this.m_handleIndexBuffer.data[i]=t,this.m_handleIndexBuffer.data[e]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[i]=this.m_lastBodyContactStepBuffer.data[e]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[i]=this.m_bodyContactCountBuffer.data[e]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[i]=this.m_consecutiveContactStepsBuffer.data[e]),this.m_hasForce&&this.m_forceBuffer[i].Copy(this.m_forceBuffer[e]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[i]=this.m_staticPressureBuffer[e]),this.m_depthBuffer&&(this.m_depthBuffer[i]=this.m_depthBuffer[e]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[i]=this.m_expirationTimeBuffer.data[e]),i}DestroyParticlesInGroup(e,t=!1){for(let o=e.m_firstIndex;o<e.m_lastIndex;o++)this.DestroyParticle(o,t)}DestroyParticleGroup(e){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(e),this.SetGroupFlags(e,0);for(let t=e.m_firstIndex;t<e.m_lastIndex;t++)this.m_groupBuffer[t]=null;e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_groupList&&(this.m_groupList=e.m_next),--this.m_groupCount}static ParticleCanBeConnected(e,t){return 0!=(e&(m.b2ParticleFlag.b2_wallParticle|m.b2ParticleFlag.b2_springParticle|m.b2ParticleFlag.b2_elasticParticle))||null!==t&&0!=(t.GetGroupFlags()&p.b2ParticleGroupFlag.b2_rigidParticleGroup)}UpdatePairsAndTriads(e,t,o){const a=A.UpdatePairsAndTriads_s_dab,s=A.UpdatePairsAndTriads_s_dbc,n=A.UpdatePairsAndTriads_s_dca,l=this.m_positionBuffer.data;let c=0;for(let i=e;i<t;i++)c|=this.m_flagsBuffer.data[i];if(c&A.k_pairFlags)for(let i=0;i<this.m_contactBuffer.count;i++){const a=this.m_contactBuffer.data[i],s=a.indexA,n=a.indexB,c=this.m_flagsBuffer.data[s],d=this.m_flagsBuffer.data[n],u=this.m_groupBuffer[s],p=this.m_groupBuffer[n];if(s>=e&&s<t&&n>=e&&n<t&&!((c|d)&m.b2ParticleFlag.b2_zombieParticle)&&(c|d)&A.k_pairFlags&&(o.IsNecessary(s)||o.IsNecessary(n))&&A.ParticleCanBeConnected(c,u)&&A.ParticleCanBeConnected(d,p)&&o.ShouldCreatePair(s,n)){const e=this.m_pairBuffer.data[this.m_pairBuffer.Append()];e.indexA=s,e.indexB=n,e.flags=a.flags,e.strength=r.b2Min(u?u.m_strength:1,p?p.m_strength:1),e.distance=r.b2Vec2.DistanceVV(l[s],l[n])}g(this.m_pairBuffer.data,0,this.m_pairBuffer.count,A.ComparePairIndices),this.m_pairBuffer.Unique(A.MatchPairIndices)}if(c&A.k_triadFlags){const c=new h.b2VoronoiDiagram(t-e);for(let i=e;i<t;i++){const e=this.m_flagsBuffer.data[i],t=this.m_groupBuffer[i];e&m.b2ParticleFlag.b2_zombieParticle||!A.ParticleCanBeConnected(e,t)||c.AddGenerator(l[i],i,o.IsNecessary(i))}const d=this.GetParticleStride();c.Generate(d/2,2*d);const u=this,p=(e,t,c)=>{const d=u.m_flagsBuffer.data[e],m=u.m_flagsBuffer.data[t],p=u.m_flagsBuffer.data[c];if((d|m|p)&A.k_triadFlags&&o.ShouldCreateTriad(e,t,c)){const o=l[e],h=l[t],f=l[c],y=r.b2Vec2.SubVV(o,h,a),_=r.b2Vec2.SubVV(h,f,s),g=r.b2Vec2.SubVV(f,o,n),b=i.b2_maxTriadDistanceSquared*u.m_squaredDiameter;if(r.b2Vec2.DotVV(y,y)>b||r.b2Vec2.DotVV(_,_)>b||r.b2Vec2.DotVV(g,g)>b)return;const S=u.m_groupBuffer[e],P=u.m_groupBuffer[t],B=u.m_groupBuffer[c],C=u.m_triadBuffer.data[u.m_triadBuffer.Append()];C.indexA=e,C.indexB=t,C.indexC=c,C.flags=d|m|p,C.strength=r.b2Min(r.b2Min(S?S.m_strength:1,P?P.m_strength:1),B?B.m_strength:1);const M=(o.x+h.x+f.x)/3,x=(o.y+h.y+f.y)/3;C.pa.x=o.x-M,C.pa.y=o.y-x,C.pb.x=h.x-M,C.pb.y=h.y-x,C.pc.x=f.x-M,C.pc.y=f.y-x,C.ka=-r.b2Vec2.DotVV(g,y),C.kb=-r.b2Vec2.DotVV(y,_),C.kc=-r.b2Vec2.DotVV(_,g),C.s=r.b2Vec2.CrossVV(o,h)+r.b2Vec2.CrossVV(h,f)+r.b2Vec2.CrossVV(f,o)}};c.GetNodes(p),g(this.m_triadBuffer.data,0,this.m_triadBuffer.count,A.CompareTriadIndices),this.m_triadBuffer.Unique(A.MatchTriadIndices)}}UpdatePairsAndTriadsWithReactiveParticles(){const e=new q(this.m_flagsBuffer);this.UpdatePairsAndTriads(0,this.m_count,e);for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&=~m.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~m.b2ParticleFlag.b2_reactiveParticle}static ComparePairIndices(e,t){const o=e.indexA-t.indexA;return 0!==o?o<0:e.indexB<t.indexB}static MatchPairIndices(e,t){return e.indexA===t.indexA&&e.indexB===t.indexB}static CompareTriadIndices(e,t){const o=e.indexA-t.indexA;if(0!==o)return o<0;const i=e.indexB-t.indexB;return 0!==i?i<0:e.indexC<t.indexC}static MatchTriadIndices(e,t){return e.indexA===t.indexA&&e.indexB===t.indexB&&e.indexC===t.indexC}static InitializeParticleLists(e,t){const o=e.GetBufferIndex(),i=e.GetParticleCount();for(let a=0;a<i;a++){const e=t[a];e.list=e,e.next=null,e.count=1,e.index=a+o}}MergeParticleListsInContact(e,t){const o=e.GetBufferIndex();for(let i=0;i<this.m_contactBuffer.count;i++){const a=this.m_contactBuffer.data[i],r=a.indexA,s=a.indexB;if(!e.ContainsParticle(r)||!e.ContainsParticle(s))continue;let n=t[r-o].list,l=t[s-o].list;if(n!==l){if(n.count<l.count){const e=n;n=l,l=e}A.MergeParticleLists(n,l)}}}static MergeParticleLists(e,t){for(let o=t;;){o.list=e;const t=o.next;if(!t){o.next=e.next;break}o=t}e.next=t,e.count+=t.count,t.count=0}static FindLongestParticleList(e,t){const o=e.GetParticleCount();let i=t[0];for(let a=0;a<o;a++){const e=t[a];i.count<e.count&&(i=e)}return i}MergeZombieParticleListNodes(e,t,o){const i=e.GetParticleCount();for(let a=0;a<i;a++){const e=t[a];e!==o&&this.m_flagsBuffer.data[e.index]&m.b2ParticleFlag.b2_zombieParticle&&A.MergeParticleListAndNode(o,e)}}static MergeParticleListAndNode(e,t){t.list=e,t.next=e.next,e.next=t,e.count++,t.count=0}CreateParticleGroupsFromParticleList(e,t,o){const i=e.GetParticleCount(),a=new p.b2ParticleGroupDef;a.groupFlags=e.GetGroupFlags(),a.userData=e.GetUserData();for(let r=0;r<i;r++){const e=t[r];if(!e.count||e===o)continue;const i=this.CreateParticleGroup(a);for(let t=e;t;t=t.next){const e=t.index,o=this.CloneParticle(e,i);this.m_flagsBuffer.data[e]|=m.b2ParticleFlag.b2_zombieParticle,t.index=o}}}UpdatePairsAndTriadsWithParticleList(e,t){const o=e.GetBufferIndex();for(let i=0;i<this.m_pairBuffer.count;i++){const a=this.m_pairBuffer.data[i],r=a.indexA,s=a.indexB;e.ContainsParticle(r)&&(a.indexA=t[r-o].index),e.ContainsParticle(s)&&(a.indexB=t[s-o].index)}for(let i=0;i<this.m_triadBuffer.count;i++){const a=this.m_triadBuffer.data[i],r=a.indexA,s=a.indexB,n=a.indexC;e.ContainsParticle(r)&&(a.indexA=t[r-o].index),e.ContainsParticle(s)&&(a.indexB=t[s-o].index),e.ContainsParticle(n)&&(a.indexC=t[n-o].index)}}ComputeDepth(){const e=[];let t=0;for(let i=0;i<this.m_contactBuffer.count;i++){const o=this.m_contactBuffer.data[i],a=o.indexA,r=o.indexB,s=this.m_groupBuffer[a],n=this.m_groupBuffer[r];s&&s===n&&s.m_groupFlags&p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(e[t++]=o)}const o=[];let a=0;for(let i=this.m_groupList;i;i=i.GetNext())if(i.m_groupFlags&p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){o[a++]=i,this.SetGroupFlags(i,i.m_groupFlags&~p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(let e=i.m_firstIndex;e<i.m_lastIndex;e++)this.m_accumulationBuffer[e]=0}for(let i=0;i<t;i++){const t=e[i],o=t.indexA,a=t.indexB,r=t.weight;this.m_accumulationBuffer[o]+=r,this.m_accumulationBuffer[a]+=r}for(let r=0;r<a;r++){const e=o[r];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++){const e=this.m_accumulationBuffer[t];this.m_depthBuffer[t]=e<.8?0:i.b2_maxFloat}}const s=r.b2Sqrt(this.m_count)>>0;for(let i=0;i<s;i++){let o=!1;for(let i=0;i<t;i++){const t=e[i],a=t.indexA,r=t.indexB,s=1-t.weight,n=this.m_depthBuffer[a],l=this.m_depthBuffer[r],c=l+s,d=n+s;n>c&&(this.m_depthBuffer[a]=c,o=!0),l>d&&(this.m_depthBuffer[r]=d,o=!0)}if(!o)break}for(let r=0;r<a;r++){const e=o[r];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++)this.m_depthBuffer[t]<i.b2_maxFloat?this.m_depthBuffer[t]*=this.m_particleDiameter:this.m_depthBuffer[t]=0}}GetInsideBoundsEnumerator(e){const t=A.computeTag(this.m_inverseDiameter*e.lowerBound.x-1,this.m_inverseDiameter*e.lowerBound.y-1),o=A.computeTag(this.m_inverseDiameter*e.upperBound.x+1,this.m_inverseDiameter*e.upperBound.y+1),i=this.m_proxyBuffer.count,a=S(this.m_proxyBuffer.data,0,i,t,v.CompareProxyTag),r=P(this.m_proxyBuffer.data,0,i,o,v.CompareTagProxy);return new T(this,t,o,a,r)}UpdateAllParticleFlags(){this.m_allParticleFlags=0;for(let e=0;e<this.m_count;e++)this.m_allParticleFlags|=this.m_flagsBuffer.data[e];this.m_needsUpdateAllParticleFlags=!1}UpdateAllGroupFlags(){this.m_allGroupFlags=0;for(let e=this.m_groupList;e;e=e.GetNext())this.m_allGroupFlags|=e.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1}AddContact(e,t,o){const i=this.m_flagsBuffer.data,a=this.m_positionBuffer.data,s=r.b2Vec2.SubVV(a[t],a[e],A.AddContact_s_d),n=r.b2Vec2.DotVV(s,s);if(0<n&&n<this.m_squaredDiameter){let o=r.b2InvSqrt(n);const a=this.m_contactBuffer.data[this.m_contactBuffer.Append()];a.indexA=e,a.indexB=t,a.flags=i[e]|i[t],a.weight=1-n*o*this.m_inverseDiameter,a.normal.x=o*s.x,a.normal.y=o*s.y}}FindContacts_Reference(e){const t=this.m_proxyBuffer.count;this.m_contactBuffer.count=0;for(let o=0,i=0;o<t;o++){const e=A.computeRelativeTag(this.m_proxyBuffer.data[o].tag,1,0);for(let i=o+1;i<t&&!(e<this.m_proxyBuffer.data[i].tag);i++)this.AddContact(this.m_proxyBuffer.data[o].index,this.m_proxyBuffer.data[i].index,this.m_contactBuffer);const a=A.computeRelativeTag(this.m_proxyBuffer.data[o].tag,-1,1);for(;i<t&&!(a<=this.m_proxyBuffer.data[i].tag);i++);const r=A.computeRelativeTag(this.m_proxyBuffer.data[o].tag,1,1);for(let s=i;s<t&&!(r<this.m_proxyBuffer.data[s].tag);s++)this.AddContact(this.m_proxyBuffer.data[o].index,this.m_proxyBuffer.data[s].index,this.m_contactBuffer)}}FindContacts(e){this.FindContacts_Reference(e)}UpdateProxies_Reference(e){const t=this.m_positionBuffer.data,o=this.m_inverseDiameter;for(let i=0;i<this.m_proxyBuffer.count;++i){const e=this.m_proxyBuffer.data[i],a=t[e.index];e.tag=A.computeTag(o*a.x,o*a.y)}}UpdateProxies(e){this.UpdateProxies_Reference(e)}SortProxies(e){_(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,v.CompareProxyProxy)}FilterContacts(e){const t=this.GetParticleContactFilter();if(null===t)return;const o=this;this.m_contactBuffer.RemoveIf(e=>0!=(e.flags&m.b2ParticleFlag.b2_particleContactFilterParticle)&&!t.ShouldCollideParticleParticle(o,e.indexA,e.indexB))}NotifyContactListenerPreContact(e){if(null!==this.GetParticleContactListener())throw e.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error}NotifyContactListenerPostContact(e){const t=this.GetParticleContactListener();if(null!==t){for(let o=0;o<this.m_contactBuffer.count;++o){const i=this.m_contactBuffer.data[o],a=-1;a>=0?e.Invalidate(a):t.BeginContactParticleParticle(this,i)}throw new Error}}static b2ParticleContactIsZombie(e){return(e.flags&m.b2ParticleFlag.b2_zombieParticle)===m.b2ParticleFlag.b2_zombieParticle}UpdateContacts(e){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);const t=new F;this.NotifyContactListenerPreContact(t),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(t),e&&this.m_contactBuffer.RemoveIf(A.b2ParticleContactIsZombie)}NotifyBodyContactListenerPreContact(e){if(null!==this.GetFixtureContactListener())throw e.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error}NotifyBodyContactListenerPostContact(e){const t=this.GetFixtureContactListener();if(null!==t){for(let o=0;o<this.m_bodyContactBuffer.count;o++){const i=this.m_bodyContactBuffer.data[o],a=-1;a>=0?e.Invalidate(a):t.BeginContactFixtureParticle(this,i)}throw new Error}}UpdateBodyContacts(){const e=A.UpdateBodyContacts_s_aabb,t=new U;if(this.NotifyBodyContactListenerPreContact(t),this.m_stuckThreshold>0){const e=this.GetParticleCount();for(let t=0;t<e;t++)this.m_bodyContactCountBuffer.data[t]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[t]+1&&(this.m_consecutiveContactStepsBuffer.data[t]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);const o=e;this.ComputeAABB(o),null===this.UpdateBodyContacts_callback&&(this.UpdateBodyContacts_callback=new H(this));const i=this.UpdateBodyContacts_callback;i.m_contactFilter=this.GetFixtureContactFilter(),this.m_world.QueryAABB(i,o),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(t)}Solve(e){const t=A.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(e),this.m_allParticleFlags&m.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<e.particleIterations;this.m_iterationIndex++){++this.m_timestamp;const o=t.Copy(e);o.dt/=e.particleIterations,o.inv_dt*=e.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&m.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&m.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(o),this.m_allGroupFlags&p.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(o),this.SolvePressure(o),this.SolveDamping(o),this.m_allParticleFlags&A.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&m.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_springParticle&&this.SolveSpring(o),this.LimitVelocity(o),this.m_allGroupFlags&p.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&m.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(o),this.SolveCollision(o),this.m_allGroupFlags&p.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(o),this.m_allParticleFlags&m.b2ParticleFlag.b2_wallParticle&&this.SolveWall();for(let e=0;e<this.m_count;e++)this.m_positionBuffer.data[e].SelfMulAdd(o.dt,this.m_velocityBuffer.data[e])}}SolveCollision(e){const t=A.SolveCollision_s_aabb,o=this.m_positionBuffer.data,a=this.m_velocityBuffer.data,s=t;s.lowerBound.x=+i.b2_maxFloat,s.lowerBound.y=+i.b2_maxFloat,s.upperBound.x=-i.b2_maxFloat,s.upperBound.y=-i.b2_maxFloat;for(let i=0;i<this.m_count;i++){const t=a[i],n=o[i],l=n.x+e.dt*t.x,c=n.y+e.dt*t.y;s.lowerBound.x=r.b2Min(s.lowerBound.x,r.b2Min(n.x,l)),s.lowerBound.y=r.b2Min(s.lowerBound.y,r.b2Min(n.y,c)),s.upperBound.x=r.b2Max(s.upperBound.x,r.b2Max(n.x,l)),s.upperBound.y=r.b2Max(s.upperBound.y,r.b2Max(n.y,c))}null===this.SolveCollision_callback&&(this.SolveCollision_callback=new J(this,e));const n=this.SolveCollision_callback;n.m_step=e,this.m_world.QueryAABB(n,s)}LimitVelocity(e){const t=this.m_velocityBuffer.data,o=this.GetCriticalVelocitySquared(e);for(let i=0;i<this.m_count;i++){const e=t[i],a=r.b2Vec2.DotVV(e,e);a>o&&e.SelfMul(r.b2Sqrt(o/a))}}SolveGravity(e){const t=A.SolveGravity_s_gravity,o=this.m_velocityBuffer.data,i=r.b2Vec2.MulSV(e.dt*this.m_def.gravityScale,this.m_world.GetGravity(),t);for(let a=0;a<this.m_count;a++)o[a].SelfAdd(i)}SolveBarrier(e){const t=A.SolveBarrier_s_aabb,o=A.SolveBarrier_s_va,a=A.SolveBarrier_s_vb,s=A.SolveBarrier_s_pba,n=A.SolveBarrier_s_vba,l=A.SolveBarrier_s_vc,c=A.SolveBarrier_s_pca,d=A.SolveBarrier_s_vca,u=A.SolveBarrier_s_qba,p=A.SolveBarrier_s_qca,h=A.SolveBarrier_s_dv,f=A.SolveBarrier_s_f,y=this.m_positionBuffer.data,_=this.m_velocityBuffer.data;for(let i=0;i<this.m_count;i++)0!=(this.m_flagsBuffer.data[i]&A.k_barrierWallFlags)&&_[i].SetZero();const g=i.b2_barrierCollisionTime*e.dt,b=this.GetParticleMass();for(let i=0;i<this.m_pairBuffer.count;i++){const S=this.m_pairBuffer.data[i];if(S.flags&m.b2ParticleFlag.b2_barrierParticle){const i=S.indexA,m=S.indexB,P=y[i],B=y[m],C=t;r.b2Vec2.MinV(P,B,C.lowerBound),r.b2Vec2.MaxV(P,B,C.upperBound);const M=this.m_groupBuffer[i],x=this.m_groupBuffer[m],V=this.GetLinearVelocity(M,i,P,o),I=this.GetLinearVelocity(x,m,B,a),O=r.b2Vec2.SubVV(B,P,s),w=r.b2Vec2.SubVV(I,V,n),E=this.GetInsideBoundsEnumerator(C);let A;for(;(A=E.GetNext())>=0;){const t=y[A],o=this.m_groupBuffer[A];if(M!==o&&x!==o){const i=this.GetLinearVelocity(o,A,t,l),a=r.b2Vec2.SubVV(t,P,c),s=r.b2Vec2.SubVV(i,V,d),n=r.b2Vec2.CrossVV(w,s),m=r.b2Vec2.CrossVV(O,s)-r.b2Vec2.CrossVV(a,w),y=r.b2Vec2.CrossVV(O,a);let S,B;const C=u,M=p;if(0===n){if(0===m)continue;if(!((B=-y/m)>=0&&B<g))continue;if(r.b2Vec2.AddVMulSV(O,B,w,C),r.b2Vec2.AddVMulSV(a,B,s,M),!((S=r.b2Vec2.DotVV(C,M)/r.b2Vec2.DotVV(C,C))>=0&&S<=1))continue}else{const e=m*m-4*y*n;if(e<0)continue;const t=r.b2Sqrt(e);let o=(-m-t)/(2*n),i=(-m+t)/(2*n);if(o>i){const e=o;o=i,i=e}if(B=o,r.b2Vec2.AddVMulSV(O,B,w,C),r.b2Vec2.AddVMulSV(a,B,s,M),S=r.b2Vec2.DotVV(C,M)/r.b2Vec2.DotVV(C,C),!(B>=0&&B<g&&S>=0&&S<=1)){if(!((B=i)>=0&&B<g))continue;if(r.b2Vec2.AddVMulSV(O,B,w,C),r.b2Vec2.AddVMulSV(a,B,s,M),!((S=r.b2Vec2.DotVV(C,M)/r.b2Vec2.DotVV(C,C))>=0&&S<=1))continue}}const x=h;x.x=V.x+S*w.x-i.x,x.y=V.y+S*w.y-i.y;const I=r.b2Vec2.MulSV(b,x,f);if(o&&this.IsRigidGroup(o)){const e=o.GetMass(),i=o.GetInertia();e>0&&o.m_linearVelocity.SelfMulAdd(1/e,I),i>0&&(o.m_angularVelocity+=r.b2Vec2.CrossVV(r.b2Vec2.SubVV(t,o.GetCenter(),r.b2Vec2.s_t0),I)/i)}else _[A].SelfAdd(x);this.ParticleApplyForce(A,I.SelfMul(-e.inv_dt))}}}}}SolveStaticPressure(e){this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);const t=this.GetCriticalPressure(e),o=this.m_def.staticPressureStrength*t,i=a.b2_maxParticlePressure*t,s=this.m_def.staticPressureRelaxation;for(let n=0;n<this.m_def.staticPressureIterations;n++){for(let e=0;e<this.m_count;e++)this.m_accumulationBuffer[e]=0;for(let e=0;e<this.m_contactBuffer.count;e++){const t=this.m_contactBuffer.data[e];if(t.flags&m.b2ParticleFlag.b2_staticPressureParticle){const e=t.indexA,o=t.indexB,i=t.weight;this.m_accumulationBuffer[e]+=i*this.m_staticPressureBuffer[o],this.m_accumulationBuffer[o]+=i*this.m_staticPressureBuffer[e]}}for(let e=0;e<this.m_count;e++){const t=this.m_weightBuffer[e];if(this.m_flagsBuffer.data[e]&m.b2ParticleFlag.b2_staticPressureParticle){const n=(this.m_accumulationBuffer[e]+o*(t-a.b2_minParticleWeight))/(t+s);this.m_staticPressureBuffer[e]=r.b2Clamp(n,0,i)}else this.m_staticPressureBuffer[e]=0}}}ComputeWeight(){for(let e=0;e<this.m_count;e++)this.m_weightBuffer[e]=0;for(let e=0;e<this.m_bodyContactBuffer.count;e++){const t=this.m_bodyContactBuffer.data[e],o=t.index,i=t.weight;this.m_weightBuffer[o]+=i}for(let e=0;e<this.m_contactBuffer.count;e++){const t=this.m_contactBuffer.data[e],o=t.indexA,i=t.indexB,a=t.weight;this.m_weightBuffer[o]+=a,this.m_weightBuffer[i]+=a}}SolvePressure(e){const t=A.SolvePressure_s_f,o=this.m_positionBuffer.data,i=this.m_velocityBuffer.data,s=this.GetCriticalPressure(e),n=this.m_def.pressureStrength*s,l=a.b2_maxParticlePressure*s;for(let u=0;u<this.m_count;u++){const e=this.m_weightBuffer[u],t=n*r.b2Max(0,e-a.b2_minParticleWeight);this.m_accumulationBuffer[u]=r.b2Min(t,l)}if(this.m_allParticleFlags&A.k_noPressureFlags)for(let a=0;a<this.m_count;a++)this.m_flagsBuffer.data[a]&A.k_noPressureFlags&&(this.m_accumulationBuffer[a]=0);if(this.m_allParticleFlags&m.b2ParticleFlag.b2_staticPressureParticle)for(let a=0;a<this.m_count;a++)this.m_flagsBuffer.data[a]&m.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[a]+=this.m_staticPressureBuffer[a]);const c=e.dt/(this.m_def.density*this.m_particleDiameter),d=this.GetParticleInvMass();for(let a=0;a<this.m_bodyContactBuffer.count;a++){const e=this.m_bodyContactBuffer.data[a],s=e.index,l=e.body,u=e.weight,m=e.mass,p=e.normal,h=o[s],f=this.m_accumulationBuffer[s]+n*u,y=r.b2Vec2.MulSV(c*u*m*f,p,t);i[s].SelfMulSub(d,y),l.ApplyLinearImpulse(y,h,!0)}for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a],o=e.indexA,s=e.indexB,n=e.weight,l=e.normal,d=this.m_accumulationBuffer[o]+this.m_accumulationBuffer[s],u=r.b2Vec2.MulSV(c*n*d,l,t);i[o].SelfSub(u),i[s].SelfAdd(u)}}SolveDamping(e){const t=A.SolveDamping_s_v,o=A.SolveDamping_s_f,i=this.m_positionBuffer.data,a=this.m_velocityBuffer.data,s=this.m_def.dampingStrength,n=1/this.GetCriticalVelocity(e),l=this.GetParticleInvMass();for(let c=0;c<this.m_bodyContactBuffer.count;c++){const e=this.m_bodyContactBuffer.data[c],d=e.index,u=e.body,m=e.weight,p=e.mass,h=e.normal,f=i[d],y=r.b2Vec2.SubVV(u.GetLinearVelocityFromWorldPoint(f,r.b2Vec2.s_t0),a[d],t),_=r.b2Vec2.DotVV(y,h);if(_<0){const e=r.b2Max(s*m,r.b2Min(-n*_,.5)),t=r.b2Vec2.MulSV(e*p*_,h,o);a[d].SelfMulAdd(l,t),u.ApplyLinearImpulse(t.SelfNeg(),f,!0)}}for(let c=0;c<this.m_contactBuffer.count;c++){const e=this.m_contactBuffer.data[c],i=e.indexA,l=e.indexB,d=e.weight,u=e.normal,m=r.b2Vec2.SubVV(a[l],a[i],t),p=r.b2Vec2.DotVV(m,u);if(p<0){const e=r.b2Max(s*d,r.b2Min(-n*p,.5)),t=r.b2Vec2.MulSV(e*p,u,o);a[i].SelfAdd(t),a[l].SelfSub(t)}}}SolveRigidDamping(){const e=A.SolveRigidDamping_s_t0,t=A.SolveRigidDamping_s_t1,o=A.SolveRigidDamping_s_p,i=A.SolveRigidDamping_s_v,a=[0],s=[0],n=[0],l=[0],c=[0],d=[0],u=this.m_positionBuffer.data,m=this.m_def.dampingStrength;for(let p=0;p<this.m_bodyContactBuffer.count;p++){const o=this.m_bodyContactBuffer.data[p],h=o.index,f=this.m_groupBuffer[h];if(f&&this.IsRigidGroup(f)){const p=o.body,y=o.normal,_=o.weight,g=u[h],b=r.b2Vec2.SubVV(p.GetLinearVelocityFromWorldPoint(g,e),f.GetLinearVelocityFromWorldPoint(g,t),i),S=r.b2Vec2.DotVV(b,y);if(S<0){this.InitDampingParameterWithRigidGroupOrParticle(a,s,n,!0,f,h,g,y),this.InitDampingParameter(l,c,d,p.GetMass(),p.GetInertia()-p.GetMass()*p.GetLocalCenter().LengthSquared(),p.GetWorldCenter(),g,y);const e=m*r.b2Min(_,1)*this.ComputeDampingImpulse(a[0],s[0],n[0],l[0],c[0],d[0],S);this.ApplyDamping(a[0],s[0],n[0],!0,f,h,e,y),p.ApplyLinearImpulse(r.b2Vec2.MulSV(-e,y,r.b2Vec2.s_t0),g,!0)}}}for(let p=0;p<this.m_contactBuffer.count;p++){const h=this.m_contactBuffer.data[p],f=h.indexA,y=h.indexB,_=h.normal,g=h.weight,b=this.m_groupBuffer[f],S=this.m_groupBuffer[y],P=this.IsRigidGroup(b),B=this.IsRigidGroup(S);if(b!==S&&(P||B)){const p=r.b2Vec2.MidVV(u[f],u[y],o),h=r.b2Vec2.SubVV(this.GetLinearVelocity(S,y,p,e),this.GetLinearVelocity(b,f,p,t),i),C=r.b2Vec2.DotVV(h,_);if(C<0){this.InitDampingParameterWithRigidGroupOrParticle(a,s,n,P,b,f,p,_),this.InitDampingParameterWithRigidGroupOrParticle(l,c,d,B,S,y,p,_);const e=m*g*this.ComputeDampingImpulse(a[0],s[0],n[0],l[0],c[0],d[0],C);this.ApplyDamping(a[0],s[0],n[0],P,b,f,e,_),this.ApplyDamping(l[0],c[0],d[0],B,S,y,-e,_)}}}}SolveExtraDamping(){const e=A.SolveExtraDamping_s_v,t=A.SolveExtraDamping_s_f,o=this.m_velocityBuffer.data,i=this.m_positionBuffer.data,a=this.GetParticleInvMass();for(let s=0;s<this.m_bodyContactBuffer.count;s++){const n=this.m_bodyContactBuffer.data[s],l=n.index;if(this.m_flagsBuffer.data[l]&A.k_extraDampingFlags){const s=n.body,c=n.mass,d=n.normal,u=i[l],m=r.b2Vec2.SubVV(s.GetLinearVelocityFromWorldPoint(u,r.b2Vec2.s_t0),o[l],e),p=r.b2Vec2.DotVV(m,d);if(p<0){const e=r.b2Vec2.MulSV(.5*c*p,d,t);o[l].SelfMulAdd(a,e),s.ApplyLinearImpulse(e.SelfNeg(),u,!0)}}}}SolveWall(){const e=this.m_velocityBuffer.data;for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&m.b2ParticleFlag.b2_wallParticle&&e[t].SetZero()}SolveRigid(e){const t=A.SolveRigid_s_position,o=A.SolveRigid_s_rotation,i=A.SolveRigid_s_transform,a=A.SolveRigid_s_velocityTransform,s=this.m_positionBuffer.data,n=this.m_velocityBuffer.data;for(let l=this.m_groupList;l;l=l.GetNext())if(l.m_groupFlags&p.b2ParticleGroupFlag.b2_rigidParticleGroup){l.UpdateStatistics();const c=o;c.SetAngle(e.dt*l.m_angularVelocity);const d=r.b2Vec2.AddVV(l.m_center,r.b2Vec2.SubVV(r.b2Vec2.MulSV(e.dt,l.m_linearVelocity,r.b2Vec2.s_t0),r.b2Rot.MulRV(c,l.m_center,r.b2Vec2.s_t1),r.b2Vec2.s_t0),t),u=i;u.SetPositionRotation(d,c),r.b2Transform.MulXX(u,l.m_transform,l.m_transform);const m=a;m.p.x=e.inv_dt*u.p.x,m.p.y=e.inv_dt*u.p.y,m.q.s=e.inv_dt*u.q.s,m.q.c=e.inv_dt*(u.q.c-1);for(let e=l.m_firstIndex;e<l.m_lastIndex;e++)r.b2Transform.MulXV(m,s[e],n[e])}}SolveElastic(e){const t=A.SolveElastic_s_pa,o=A.SolveElastic_s_pb,i=A.SolveElastic_s_pc,a=A.SolveElastic_s_r,s=A.SolveElastic_s_t0,n=this.m_positionBuffer.data,l=this.m_velocityBuffer.data,c=e.inv_dt*this.m_def.elasticStrength;for(let d=0;d<this.m_triadBuffer.count;d++){const u=this.m_triadBuffer.data[d];if(u.flags&m.b2ParticleFlag.b2_elasticParticle){const d=u.indexA,m=u.indexB,p=u.indexC,h=u.pa,f=u.pb,y=u.pc,_=t.Copy(n[d]),g=o.Copy(n[m]),b=i.Copy(n[p]),S=l[d],P=l[m],B=l[p];_.SelfMulAdd(e.dt,S),g.SelfMulAdd(e.dt,P),b.SelfMulAdd(e.dt,B);const C=(_.x+g.x+b.x)/3,M=(_.y+g.y+b.y)/3;_.x-=C,_.y-=M,g.x-=C,g.y-=M,b.x-=C,b.y-=M;const x=a;x.s=r.b2Vec2.CrossVV(h,_)+r.b2Vec2.CrossVV(f,g)+r.b2Vec2.CrossVV(y,b),x.c=r.b2Vec2.DotVV(h,_)+r.b2Vec2.DotVV(f,g)+r.b2Vec2.DotVV(y,b);const V=x.s*x.s+x.c*x.c;let I=r.b2InvSqrt(V);isFinite(I)||(I=198177537e11),x.s*=I,x.c*=I;const O=c*u.strength;r.b2Rot.MulRV(x,h,s),r.b2Vec2.SubVV(s,_,s),r.b2Vec2.MulSV(O,s,s),S.SelfAdd(s),r.b2Rot.MulRV(x,f,s),r.b2Vec2.SubVV(s,g,s),r.b2Vec2.MulSV(O,s,s),P.SelfAdd(s),r.b2Rot.MulRV(x,y,s),r.b2Vec2.SubVV(s,b,s),r.b2Vec2.MulSV(O,s,s),B.SelfAdd(s)}}}SolveSpring(e){const t=A.SolveSpring_s_pa,o=A.SolveSpring_s_pb,i=A.SolveSpring_s_d,a=A.SolveSpring_s_f,s=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,l=e.inv_dt*this.m_def.springStrength;for(let c=0;c<this.m_pairBuffer.count;c++){const d=this.m_pairBuffer.data[c];if(d.flags&m.b2ParticleFlag.b2_springParticle){const c=d.indexA,u=d.indexB,m=t.Copy(s[c]),p=o.Copy(s[u]),h=n[c],f=n[u];m.SelfMulAdd(e.dt,h),p.SelfMulAdd(e.dt,f);const y=r.b2Vec2.SubVV(p,m,i),_=d.distance,g=y.Length(),b=l*d.strength,S=r.b2Vec2.MulSV(b*(_-g)/g,y,a);h.SelfSub(S),f.SelfAdd(S)}}}SolveTensile(e){const t=A.SolveTensile_s_weightedNormal,o=A.SolveTensile_s_s,i=A.SolveTensile_s_f,s=this.m_velocityBuffer.data;for(let a=0;a<this.m_count;a++)this.m_accumulation2Buffer[a]=new r.b2Vec2,this.m_accumulation2Buffer[a].SetZero();for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a];if(e.flags&m.b2ParticleFlag.b2_tensileParticle){const o=e.indexA,i=e.indexB,a=e.weight,s=e.normal,n=r.b2Vec2.MulSV((1-a)*a,s,t);this.m_accumulation2Buffer[o].SelfSub(n),this.m_accumulation2Buffer[i].SelfAdd(n)}}const n=this.GetCriticalVelocity(e),l=this.m_def.surfaceTensionPressureStrength*n,c=this.m_def.surfaceTensionNormalStrength*n,d=a.b2_maxParticleForce*n;for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a];if(e.flags&m.b2ParticleFlag.b2_tensileParticle){const t=e.indexA,a=e.indexB,n=e.weight,u=e.normal,m=this.m_weightBuffer[t]+this.m_weightBuffer[a],p=r.b2Vec2.SubVV(this.m_accumulation2Buffer[a],this.m_accumulation2Buffer[t],o),h=r.b2Min(l*(m-2)+c*r.b2Vec2.DotVV(p,u),d)*n,f=r.b2Vec2.MulSV(h,u,i);s[t].SelfSub(f),s[a].SelfAdd(f)}}}SolveViscous(){const e=A.SolveViscous_s_v,t=A.SolveViscous_s_f,o=this.m_positionBuffer.data,i=this.m_velocityBuffer.data,a=this.m_def.viscousStrength,s=this.GetParticleInvMass();for(let n=0;n<this.m_bodyContactBuffer.count;n++){const l=this.m_bodyContactBuffer.data[n],c=l.index;if(this.m_flagsBuffer.data[c]&m.b2ParticleFlag.b2_viscousParticle){const n=l.body,d=l.weight,u=l.mass,m=o[c],p=r.b2Vec2.SubVV(n.GetLinearVelocityFromWorldPoint(m,r.b2Vec2.s_t0),i[c],e),h=r.b2Vec2.MulSV(a*u*d,p,t);i[c].SelfMulAdd(s,h),n.ApplyLinearImpulse(h.SelfNeg(),m,!0)}}for(let n=0;n<this.m_contactBuffer.count;n++){const o=this.m_contactBuffer.data[n];if(o.flags&m.b2ParticleFlag.b2_viscousParticle){const s=o.indexA,n=o.indexB,l=o.weight,c=r.b2Vec2.SubVV(i[n],i[s],e),d=r.b2Vec2.MulSV(a*l,c,t);i[s].SelfAdd(d),i[n].SelfSub(d)}}}SolveRepulsive(e){const t=A.SolveRepulsive_s_f,o=this.m_velocityBuffer.data,i=this.m_def.repulsiveStrength*this.GetCriticalVelocity(e);for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a];if(e.flags&m.b2ParticleFlag.b2_repulsiveParticle){const a=e.indexA,s=e.indexB;if(this.m_groupBuffer[a]!==this.m_groupBuffer[s]){const n=e.weight,l=e.normal,c=r.b2Vec2.MulSV(i*n,l,t);o[a].SelfSub(c),o[s].SelfAdd(c)}}}}SolvePowder(e){const t=A.SolvePowder_s_f,o=this.m_positionBuffer.data,i=this.m_velocityBuffer.data,s=this.m_def.powderStrength*this.GetCriticalVelocity(e),n=1-a.b2_particleStride,l=this.GetParticleInvMass();for(let a=0;a<this.m_bodyContactBuffer.count;a++){const e=this.m_bodyContactBuffer.data[a],c=e.index;if(this.m_flagsBuffer.data[c]&m.b2ParticleFlag.b2_powderParticle){const a=e.weight;if(a>n){const d=e.body,u=e.mass,m=o[c],p=e.normal,h=r.b2Vec2.MulSV(s*u*(a-n),p,t);i[c].SelfMulSub(l,h),d.ApplyLinearImpulse(h,m,!0)}}}for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a];if(e.flags&m.b2ParticleFlag.b2_powderParticle){const o=e.weight;if(o>n){const a=e.indexA,l=e.indexB,c=e.normal,d=r.b2Vec2.MulSV(s*(o-n),c,t);i[a].SelfSub(d),i[l].SelfAdd(d)}}}}SolveSolid(e){const t=A.SolveSolid_s_f,o=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);const i=e.inv_dt*this.m_def.ejectionStrength;for(let a=0;a<this.m_contactBuffer.count;a++){const e=this.m_contactBuffer.data[a],s=e.indexA,n=e.indexB;if(this.m_groupBuffer[s]!==this.m_groupBuffer[n]){const a=e.weight,l=e.normal,c=this.m_depthBuffer[s]+this.m_depthBuffer[n],d=r.b2Vec2.MulSV(i*c*a,l,t);o[s].SelfSub(d),o[n].SelfAdd(d)}}}SolveForce(e){const t=this.m_velocityBuffer.data,o=e.dt*this.GetParticleInvMass();for(let i=0;i<this.m_count;i++)t[i].SelfMulAdd(o,this.m_forceBuffer[i]);this.m_hasForce=!1}SolveColorMixing(){const e=.5*this.m_def.colorMixingStrength;if(e)for(let t=0;t<this.m_contactBuffer.count;t++){const o=this.m_contactBuffer.data[t],i=o.indexA,a=o.indexB;if(this.m_flagsBuffer.data[i]&this.m_flagsBuffer.data[a]&m.b2ParticleFlag.b2_colorMixingParticle){const t=this.m_colorBuffer.data[i],o=this.m_colorBuffer.data[a];s.b2Color.MixColors(t,o,e)}}}SolveZombie(){let e=0;const t=[];for(let a=0;a<this.m_count;a++)t[a]=i.b2_invalidParticleIndex;let o=0;for(let a=0;a<this.m_count;a++){const r=this.m_flagsBuffer.data[a];if(r&m.b2ParticleFlag.b2_zombieParticle){const e=this.m_world.m_destructionListener;if(r&m.b2ParticleFlag.b2_destructionListenerParticle&&e&&e.SayGoodbyeParticle(this,a),this.m_handleIndexBuffer.data){const e=this.m_handleIndexBuffer.data[a];e&&(e.SetIndex(i.b2_invalidParticleIndex),this.m_handleIndexBuffer.data[a]=null)}t[a]=i.b2_invalidParticleIndex}else{if(t[a]=e,a!==e){if(this.m_handleIndexBuffer.data){const t=this.m_handleIndexBuffer.data[a];t&&t.SetIndex(e),this.m_handleIndexBuffer.data[e]=t}this.m_flagsBuffer.data[e]=this.m_flagsBuffer.data[a],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[e]=this.m_lastBodyContactStepBuffer.data[a]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[e]=this.m_bodyContactCountBuffer.data[a]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[e]=this.m_consecutiveContactStepsBuffer.data[a]),this.m_positionBuffer.data[e].Copy(this.m_positionBuffer.data[a]),this.m_velocityBuffer.data[e].Copy(this.m_velocityBuffer.data[a]),this.m_groupBuffer[e]=this.m_groupBuffer[a],this.m_hasForce&&this.m_forceBuffer[e].Copy(this.m_forceBuffer[a]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[e]=this.m_staticPressureBuffer[a]),this.m_depthBuffer&&(this.m_depthBuffer[e]=this.m_depthBuffer[a]),this.m_colorBuffer.data&&this.m_colorBuffer.data[e].Copy(this.m_colorBuffer.data[a]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[e]=this.m_userDataBuffer.data[a]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[e]=this.m_expirationTimeBuffer.data[a])}e++,o|=r}}for(let i=0;i<this.m_proxyBuffer.count;i++){const e=this.m_proxyBuffer.data[i];e.index=t[e.index]}this.m_proxyBuffer.RemoveIf(e=>e.index<0);for(let i=0;i<this.m_contactBuffer.count;i++){const e=this.m_contactBuffer.data[i];e.indexA=t[e.indexA],e.indexB=t[e.indexB]}this.m_contactBuffer.RemoveIf(e=>e.indexA<0||e.indexB<0);for(let i=0;i<this.m_bodyContactBuffer.count;i++){const e=this.m_bodyContactBuffer.data[i];e.index=t[e.index]}this.m_bodyContactBuffer.RemoveIf(e=>e.index<0);for(let i=0;i<this.m_pairBuffer.count;i++){const e=this.m_pairBuffer.data[i];e.indexA=t[e.indexA],e.indexB=t[e.indexB]}this.m_pairBuffer.RemoveIf(e=>e.indexA<0||e.indexB<0);for(let i=0;i<this.m_triadBuffer.count;i++){const e=this.m_triadBuffer.data[i];e.indexA=t[e.indexA],e.indexB=t[e.indexB],e.indexC=t[e.indexC]}if(this.m_triadBuffer.RemoveIf(e=>e.indexA<0||e.indexB<0||e.indexC<0),this.m_indexByExpirationTimeBuffer.data){let e=0;for(let o=0;o<this.m_count;o++){const a=t[this.m_indexByExpirationTimeBuffer.data[o]];a!==i.b2_invalidParticleIndex&&(this.m_indexByExpirationTimeBuffer.data[e++]=a)}}for(let i=this.m_groupList;i;i=i.GetNext()){let o=e,a=0,s=!1;for(let e=i.m_firstIndex;e<i.m_lastIndex;e++){const i=t[e];i>=0?(o=r.b2Min(o,i),a=r.b2Max(a,i+1)):s=!0}o<a?(i.m_firstIndex=o,i.m_lastIndex=a,s&&i.m_groupFlags&p.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(i,i.m_groupFlags|p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(i.m_firstIndex=0,i.m_lastIndex=0,i.m_groupFlags&p.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(i,i.m_groupFlags|p.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=e,this.m_allParticleFlags=o,this.m_needsUpdateAllParticleFlags=!1;for(let i=this.m_groupList;i;){const e=i.GetNext();i.m_groupFlags&p.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(i),i=e}}SolveLifetimes(e){this.m_timeElapsed=this.LifetimeToExpirationTime(e.dt);const t=this.GetQuantizedTimeElapsed(),o=this.m_expirationTimeBuffer.data,i=this.m_indexByExpirationTimeBuffer.data,a=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(_(i,0,a,(e,t)=>{const i=o[e],a=o[t],r=i<=0;return r===a<=0?i>a:r}),this.m_expirationTimeBufferRequiresSorting=!1);for(let r=a-1;r>=0;--r){const e=i[r],a=o[e];if(t<a||a<=0)break;this.DestroyParticle(e)}}RotateBuffer(e,t,o){if(e!==t&&t!==o){if(B(this.m_flagsBuffer.data,e,t,o),this.m_lastBodyContactStepBuffer.data&&B(this.m_lastBodyContactStepBuffer.data,e,t,o),this.m_bodyContactCountBuffer.data&&B(this.m_bodyContactCountBuffer.data,e,t,o),this.m_consecutiveContactStepsBuffer.data&&B(this.m_consecutiveContactStepsBuffer.data,e,t,o),B(this.m_positionBuffer.data,e,t,o),B(this.m_velocityBuffer.data,e,t,o),B(this.m_groupBuffer,e,t,o),this.m_hasForce&&B(this.m_forceBuffer,e,t,o),this.m_staticPressureBuffer&&B(this.m_staticPressureBuffer,e,t,o),this.m_depthBuffer&&B(this.m_depthBuffer,e,t,o),this.m_colorBuffer.data&&B(this.m_colorBuffer.data,e,t,o),this.m_userDataBuffer.data&&B(this.m_userDataBuffer.data,e,t,o),this.m_handleIndexBuffer.data){B(this.m_handleIndexBuffer.data,e,t,o);for(let t=e;t<o;++t){const e=this.m_handleIndexBuffer.data[t];e&&e.SetIndex(i(e.GetIndex()))}}if(this.m_expirationTimeBuffer.data){B(this.m_expirationTimeBuffer.data,e,t,o);const a=this.GetParticleCount(),r=this.m_indexByExpirationTimeBuffer.data;for(let e=0;e<a;++e)r[e]=i(r[e])}for(let e=0;e<this.m_proxyBuffer.count;e++){const t=this.m_proxyBuffer.data[e];t.index=i(t.index)}for(let e=0;e<this.m_contactBuffer.count;e++){const t=this.m_contactBuffer.data[e];t.indexA=i(t.indexA),t.indexB=i(t.indexB)}for(let e=0;e<this.m_bodyContactBuffer.count;e++){const t=this.m_bodyContactBuffer.data[e];t.index=i(t.index)}for(let e=0;e<this.m_pairBuffer.count;e++){const t=this.m_pairBuffer.data[e];t.indexA=i(t.indexA),t.indexB=i(t.indexB)}for(let e=0;e<this.m_triadBuffer.count;e++){const t=this.m_triadBuffer.data[e];t.indexA=i(t.indexA),t.indexB=i(t.indexB),t.indexC=i(t.indexC)}for(let e=this.m_groupList;e;e=e.GetNext())e.m_firstIndex=i(e.m_firstIndex),e.m_lastIndex=i(e.m_lastIndex-1)+1}function i(i){return i<e?i:i<t?i+o-t:i<o?i+e-t:i}}GetCriticalVelocity(e){return this.m_particleDiameter*e.inv_dt}GetCriticalVelocitySquared(e){const t=this.GetCriticalVelocity(e);return t*t}GetCriticalPressure(e){return this.m_def.density*this.GetCriticalVelocitySquared(e)}GetParticleStride(){return a.b2_particleStride*this.m_particleDiameter}GetParticleMass(){const e=this.GetParticleStride();return this.m_def.density*e*e}GetParticleInvMass(){const e=this.m_inverseDiameter*(1/a.b2_particleStride);return this.m_inverseDensity*e*e}GetFixtureContactFilter(){return this.m_allParticleFlags&m.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetParticleContactFilter(){return this.m_allParticleFlags&m.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetFixtureContactListener(){return this.m_allParticleFlags&m.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}GetParticleContactListener(){return this.m_allParticleFlags&m.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}SetUserOverridableBuffer(e,t){e.data=t,e.userSuppliedCapacity=t.length}SetGroupFlags(e,t){const o=e.m_groupFlags;(o^t)&p.b2ParticleGroupFlag.b2_solidParticleGroup&&(t|=p.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),o&~t&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&t&&(t&p.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=t),e.m_groupFlags=t}static BodyContactCompare(e,t){return e.index===t.index?e.weight>t.weight:e.index<t.index}RemoveSpuriousBodyContacts(){_(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,A.BodyContactCompare);const e=A.RemoveSpuriousBodyContacts_s_n,t=A.RemoveSpuriousBodyContacts_s_pos,o=A.RemoveSpuriousBodyContacts_s_normal,a=this;let s=-1,n=0;this.m_bodyContactBuffer.count=b(this.m_bodyContactBuffer.data,l=>{if(l.index!==s&&(n=0,s=l.index),n++>3)return!0;const c=e.Copy(l.normal);c.SelfMul(a.m_particleDiameter*(1-l.weight));const d=r.b2Vec2.AddVV(a.m_positionBuffer.data[l.index],c,t);if(!l.fixture.TestPoint(d)){const e=l.fixture.GetShape().GetChildCount();for(let t=0;t<e;t++){const e=o;if(l.fixture.ComputeDistance(d,e,t)<i.b2_linearSlop)return!1}return!0}return!1},this.m_bodyContactBuffer.count)}DetectStuckParticle(e){this.m_stuckThreshold<=0||(++this.m_bodyContactCountBuffer.data[e],2===this.m_bodyContactCountBuffer.data[e]&&(++this.m_consecutiveContactStepsBuffer.data[e],this.m_consecutiveContactStepsBuffer.data[e]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=e)),this.m_lastBodyContactStepBuffer.data[e]=this.m_timestamp)}ValidateParticleIndex(e){return e>=0&&e<this.GetParticleCount()&&e!==i.b2_invalidParticleIndex}GetQuantizedTimeElapsed(){return Math.floor(this.m_timeElapsed/4294967296)}LifetimeToExpirationTime(e){return this.m_timeElapsed+Math.floor(e/this.m_def.lifetimeGranularity*4294967296)}ForceCanBeApplied(e){return!(e&m.b2ParticleFlag.b2_wallParticle)}PrepareForceBuffer(){if(!this.m_hasForce){for(let e=0;e<this.m_count;e++)this.m_forceBuffer[e].SetZero();this.m_hasForce=!0}}IsRigidGroup(e){return null!==e&&0!=(e.m_groupFlags&p.b2ParticleGroupFlag.b2_rigidParticleGroup)}GetLinearVelocity(e,t,o,i){return e&&this.IsRigidGroup(e)?e.GetLinearVelocityFromWorldPoint(o,i):i.Copy(this.m_velocityBuffer.data[t])}InitDampingParameter(e,t,o,i,a,s,n,l){e[0]=i>0?1/i:0,t[0]=a>0?1/a:0,o[0]=r.b2Vec2.CrossVV(r.b2Vec2.SubVV(n,s,r.b2Vec2.s_t0),l)}InitDampingParameterWithRigidGroupOrParticle(e,t,o,i,a,r,s,n){if(a&&i)this.InitDampingParameter(e,t,o,a.GetMass(),a.GetInertia(),a.GetCenter(),s,n);else{const i=this.m_flagsBuffer.data[r];this.InitDampingParameter(e,t,o,i&m.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,s,s,n)}}ComputeDampingImpulse(e,t,o,i,a,r,s){const n=e+t*o*o+i+a*r*r;return n>0?s/n:0}ApplyDamping(e,t,o,i,a,r,s,n){a&&i?(a.m_linearVelocity.SelfMulAdd(s*e,n),a.m_angularVelocity+=s*o*t):this.m_velocityBuffer.data[r].SelfMulAdd(s*e,n)}}o.b2ParticleSystem=A,A.xTruncBits=12,A.yTruncBits=12,A.tagBits=32,A.yOffset=1<<A.yTruncBits-1,A.yShift=A.tagBits-A.yTruncBits,A.xShift=A.tagBits-A.yTruncBits-A.xTruncBits,A.xScale=1<<A.xShift,A.xOffset=A.xScale*(1<<A.xTruncBits-1),A.yMask=(1<<A.yTruncBits)-1<<A.yShift,A.xMask=~A.yMask,A.DestroyParticlesInShape_s_aabb=new n.b2AABB,A.CreateParticleGroup_s_transform=new r.b2Transform,A.ComputeCollisionEnergy_s_v=new r.b2Vec2,A.QueryShapeAABB_s_aabb=new n.b2AABB,A.QueryPointAABB_s_aabb=new n.b2AABB,A.RayCast_s_aabb=new n.b2AABB,A.RayCast_s_p=new r.b2Vec2,A.RayCast_s_v=new r.b2Vec2,A.RayCast_s_n=new r.b2Vec2,A.RayCast_s_point=new r.b2Vec2,A.k_pairFlags=m.b2ParticleFlag.b2_springParticle,A.k_triadFlags=m.b2ParticleFlag.b2_elasticParticle,A.k_noPressureFlags=m.b2ParticleFlag.b2_powderParticle|m.b2ParticleFlag.b2_tensileParticle,A.k_extraDampingFlags=m.b2ParticleFlag.b2_staticPressureParticle,A.k_barrierWallFlags=m.b2ParticleFlag.b2_barrierParticle|m.b2ParticleFlag.b2_wallParticle,A.CreateParticlesStrokeShapeForGroup_s_edge=new c.b2EdgeShape,A.CreateParticlesStrokeShapeForGroup_s_d=new r.b2Vec2,A.CreateParticlesStrokeShapeForGroup_s_p=new r.b2Vec2,A.CreateParticlesFillShapeForGroup_s_aabb=new n.b2AABB,A.CreateParticlesFillShapeForGroup_s_p=new r.b2Vec2,A.UpdatePairsAndTriads_s_dab=new r.b2Vec2,A.UpdatePairsAndTriads_s_dbc=new r.b2Vec2,A.UpdatePairsAndTriads_s_dca=new r.b2Vec2,A.AddContact_s_d=new r.b2Vec2,A.UpdateBodyContacts_s_aabb=new n.b2AABB,A.Solve_s_subStep=new d.b2TimeStep,A.SolveCollision_s_aabb=new n.b2AABB,A.SolveGravity_s_gravity=new r.b2Vec2,A.SolveBarrier_s_aabb=new n.b2AABB,A.SolveBarrier_s_va=new r.b2Vec2,A.SolveBarrier_s_vb=new r.b2Vec2,A.SolveBarrier_s_pba=new r.b2Vec2,A.SolveBarrier_s_vba=new r.b2Vec2,A.SolveBarrier_s_vc=new r.b2Vec2,A.SolveBarrier_s_pca=new r.b2Vec2,A.SolveBarrier_s_vca=new r.b2Vec2,A.SolveBarrier_s_qba=new r.b2Vec2,A.SolveBarrier_s_qca=new r.b2Vec2,A.SolveBarrier_s_dv=new r.b2Vec2,A.SolveBarrier_s_f=new r.b2Vec2,A.SolvePressure_s_f=new r.b2Vec2,A.SolveDamping_s_v=new r.b2Vec2,A.SolveDamping_s_f=new r.b2Vec2,A.SolveRigidDamping_s_t0=new r.b2Vec2,A.SolveRigidDamping_s_t1=new r.b2Vec2,A.SolveRigidDamping_s_p=new r.b2Vec2,A.SolveRigidDamping_s_v=new r.b2Vec2,A.SolveExtraDamping_s_v=new r.b2Vec2,A.SolveExtraDamping_s_f=new r.b2Vec2,A.SolveRigid_s_position=new r.b2Vec2,A.SolveRigid_s_rotation=new r.b2Rot,A.SolveRigid_s_transform=new r.b2Transform,A.SolveRigid_s_velocityTransform=new r.b2Transform,A.SolveElastic_s_pa=new r.b2Vec2,A.SolveElastic_s_pb=new r.b2Vec2,A.SolveElastic_s_pc=new r.b2Vec2,A.SolveElastic_s_r=new r.b2Rot,A.SolveElastic_s_t0=new r.b2Vec2,A.SolveSpring_s_pa=new r.b2Vec2,A.SolveSpring_s_pb=new r.b2Vec2,A.SolveSpring_s_d=new r.b2Vec2,A.SolveSpring_s_f=new r.b2Vec2,A.SolveTensile_s_weightedNormal=new r.b2Vec2,A.SolveTensile_s_s=new r.b2Vec2,A.SolveTensile_s_f=new r.b2Vec2,A.SolveViscous_s_v=new r.b2Vec2,A.SolveViscous_s_f=new r.b2Vec2,A.SolveRepulsive_s_f=new r.b2Vec2,A.SolvePowder_s_f=new r.b2Vec2,A.SolveSolid_s_f=new r.b2Vec2,A.RemoveSpuriousBodyContacts_s_n=new r.b2Vec2,A.RemoveSpuriousBodyContacts_s_pos=new r.b2Vec2,A.RemoveSpuriousBodyContacts_s_normal=new r.b2Vec2;class R{constructor(){this._data=null,this.userSuppliedCapacity=0}get data(){return this._data}set data(e){this._data=e}}o.b2ParticleSystem_UserOverridableBuffer=R;class v{constructor(){this.index=i.b2_invalidParticleIndex,this.tag=0}static CompareProxyProxy(e,t){return e.tag<t.tag}static CompareTagProxy(e,t){return e<t.tag}static CompareProxyTag(e,t){return e.tag<t}}o.b2ParticleSystem_Proxy=v;class T{constructor(e,t,o,i,a){this.m_system=e,this.m_xLower=(t&A.xMask)>>>0,this.m_xUpper=(o&A.xMask)>>>0,this.m_yLower=(t&A.yMask)>>>0,this.m_yUpper=(o&A.yMask)>>>0,this.m_first=i,this.m_last=a}GetNext(){for(;this.m_first<this.m_last;){const e=(this.m_system.m_proxyBuffer.data[this.m_first].tag&A.xMask)>>>0;if(e>=this.m_xLower&&e<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return i.b2_invalidParticleIndex}}o.b2ParticleSystem_InsideBoundsEnumerator=T;class G{constructor(){this.next=null,this.count=0,this.index=0}}o.b2ParticleSystem_ParticleListNode=G;class D{Allocate(e,t){return t}Clear(){}GetCount(){return 0}Invalidate(e){}GetValidBuffer(){return[]}GetBuffer(){return[]}SetCount(e){}}o.b2ParticleSystem_FixedSetAllocator=D,o.b2ParticleSystem_FixtureParticle=class{constructor(e,t){this.second=i.b2_invalidParticleIndex,this.first=e,this.second=t}};class U extends D{Initialize(e,t){}Find(e){return i.b2_invalidParticleIndex}}o.b2ParticleSystem_FixtureParticleSet=U,o.b2ParticleSystem_ParticlePair=class{constructor(e,t){this.first=i.b2_invalidParticleIndex,this.second=i.b2_invalidParticleIndex,this.first=e,this.second=t}};class F extends D{Initialize(e,t){}Find(e){return i.b2_invalidParticleIndex}}o.b2ParticlePairSet=F;class L{IsNecessary(e){return!0}ShouldCreatePair(e,t){return!0}ShouldCreateTriad(e,t,o){return!0}}o.b2ParticleSystem_ConnectionFilter=L;class N extends u.b2QueryCallback{constructor(e,t,o,i){super(),this.m_callDestructionListener=!1,this.m_destroyed=0,this.m_system=e,this.m_shape=t,this.m_xf=o,this.m_callDestructionListener=i,this.m_destroyed=0}ReportFixture(e){return!1}ReportParticle(e,t){return e===this.m_system&&(this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[t])&&(this.m_system.DestroyParticle(t,this.m_callDestructionListener),this.m_destroyed++),!0)}Destroyed(){return this.m_destroyed}}o.b2ParticleSystem_DestroyParticlesInShapeCallback=N;class j extends L{constructor(e){super(),this.m_threshold=0,this.m_threshold=e}ShouldCreatePair(e,t){return e<this.m_threshold&&this.m_threshold<=t||t<this.m_threshold&&this.m_threshold<=e}ShouldCreateTriad(e,t,o){return(e<this.m_threshold||t<this.m_threshold||o<this.m_threshold)&&(this.m_threshold<=e||this.m_threshold<=t||this.m_threshold<=o)}}o.b2ParticleSystem_JoinParticleGroupsFilter=j;class k extends l.b2Shape{constructor(e,t=e.length){super(l.b2ShapeType.e_unknown,0),this.m_shapeCount=0,this.m_shapes=e,this.m_shapeCount=t}Clone(){throw new Error}GetChildCount(){return 1}TestPoint(e,t){for(let o=0;o<this.m_shapeCount;o++)if(this.m_shapes[o].TestPoint(e,t))return!0;return!1}ComputeDistance(e,t,o,i){return 0}RayCast(e,t,o,i){return!1}ComputeAABB(e,t,o){const a=new n.b2AABB;e.lowerBound.x=+i.b2_maxFloat,e.lowerBound.y=+i.b2_maxFloat,e.upperBound.x=-i.b2_maxFloat,e.upperBound.y=-i.b2_maxFloat;for(let i=0;i<this.m_shapeCount;i++){const o=this.m_shapes[i].GetChildCount();for(let r=0;r<o;r++){const o=a;this.m_shapes[i].ComputeAABB(o,t,r),e.Combine1(o)}}}ComputeMass(e,t){}SetupDistanceProxy(e,t){}ComputeSubmergedArea(e,t,o,i){return 0}Dump(e){}}o.b2ParticleSystem_CompositeShape=k;class q extends L{constructor(e){super(),this.m_flagsBuffer=e}IsNecessary(e){return 0!=(this.m_flagsBuffer.data[e]&m.b2ParticleFlag.b2_reactiveParticle)}}o.b2ParticleSystem_ReactiveFilter=q;class H extends x{constructor(e,t=null){super(e),this.m_contactFilter=null,this.m_contactFilter=t}ShouldCollideFixtureParticle(e,t,o){return!(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[o]&m.b2ParticleFlag.b2_fixtureContactFilterParticle)||this.m_contactFilter.ShouldCollideFixtureParticle(e,this.m_system,o)}ReportFixtureAndParticle(e,t,o){const i=H.ReportFixtureAndParticle_s_n,a=H.ReportFixtureAndParticle_s_rp,s=this.m_system.m_positionBuffer.data[o],n=i,l=e.ComputeDistance(s,n,t);if(l<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(e,this.m_system,o)){const t=e.GetBody(),i=t.GetWorldCenter(),c=t.GetMass(),d=t.GetInertia()-c*t.GetLocalCenter().LengthSquared(),u=c>0?1/c:0,p=d>0?1/d:0,h=this.m_system.m_flagsBuffer.data[o]&m.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),f=r.b2Vec2.SubVV(s,i,a),y=r.b2Vec2.CrossVV(f,n),_=h+u+p*y*y,g=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];g.index=o,g.body=t,g.fixture=e,g.weight=1-l*this.m_system.m_inverseDiameter,g.normal.Copy(n.SelfNeg()),g.mass=_>0?1/_:0,this.m_system.DetectStuckParticle(o)}}}o.b2ParticleSystem_UpdateBodyContactsCallback=H,H.ReportFixtureAndParticle_s_n=new r.b2Vec2,H.ReportFixtureAndParticle_s_rp=new r.b2Vec2;class J extends x{constructor(e,t){super(e),this.m_step=t}ReportFixtureAndParticle(e,t,o){const a=J.ReportFixtureAndParticle_s_p1,s=J.ReportFixtureAndParticle_s_output,n=J.ReportFixtureAndParticle_s_input,c=J.ReportFixtureAndParticle_s_p,d=J.ReportFixtureAndParticle_s_v,u=J.ReportFixtureAndParticle_s_f,m=e.GetBody(),p=this.m_system.m_positionBuffer.data[o],h=this.m_system.m_velocityBuffer.data[o],f=s,y=n;if(0===this.m_system.m_iterationIndex){const t=r.b2Transform.MulTXV(m.m_xf0,p,a);e.GetShape().GetType()===l.b2ShapeType.e_circleShape&&(t.SelfSub(m.GetLocalCenter()),r.b2Rot.MulRV(m.m_xf0.q,t,t),r.b2Rot.MulTRV(m.m_xf.q,t,t),t.SelfAdd(m.GetLocalCenter())),r.b2Transform.MulXV(m.m_xf,t,y.p1)}else y.p1.Copy(p);if(r.b2Vec2.AddVMulSV(p,this.m_step.dt,h,y.p2),y.maxFraction=1,e.RayCast(f,y,t)){const e=f.normal,t=c;t.x=(1-f.fraction)*y.p1.x+f.fraction*y.p2.x+i.b2_linearSlop*e.x,t.y=(1-f.fraction)*y.p1.y+f.fraction*y.p2.y+i.b2_linearSlop*e.y;const a=d;a.x=this.m_step.inv_dt*(t.x-p.x),a.y=this.m_step.inv_dt*(t.y-p.y),this.m_system.m_velocityBuffer.data[o].Copy(a);const r=u;r.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(h.x-a.x),r.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(h.y-a.y),this.m_system.ParticleApplyForce(o,r)}}ReportParticle(e,t){return!1}}o.b2ParticleSystem_SolveCollisionCallback=J,J.ReportFixtureAndParticle_s_p1=new r.b2Vec2,J.ReportFixtureAndParticle_s_output=new n.b2RayCastOutput,J.ReportFixtureAndParticle_s_input=new n.b2RayCastInput,J.ReportFixtureAndParticle_s_p=new r.b2Vec2,J.ReportFixtureAndParticle_s_v=new r.b2Vec2,J.ReportFixtureAndParticle_s_f=new r.b2Vec2,cc._RF.pop()},{"../Collision/Shapes/b2EdgeShape":"b2EdgeShape","../Collision/Shapes/b2Shape":"b2Shape","../Collision/b2Collision":"b2Collision","../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","../Dynamics/b2TimeStep":"b2TimeStep","../Dynamics/b2WorldCallbacks":"b2WorldCallbacks","./b2Particle":"b2Particle","./b2ParticleGroup":"b2ParticleGroup","./b2VoronoiDiagram":"b2VoronoiDiagram"}],b2Particle:[function(e,t,o){"use strict";cc._RF.push(t,"796c671RDFMI5JFCTukpdrC","b2Particle"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2ParticleHandle=o.b2CalculateParticleIterations=o.b2ParticleDef=o.b2ParticleFlag=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Common/b2Draw");(function(e){e[e.b2_waterParticle=0]="b2_waterParticle",e[e.b2_zombieParticle=2]="b2_zombieParticle",e[e.b2_wallParticle=4]="b2_wallParticle",e[e.b2_springParticle=8]="b2_springParticle",e[e.b2_elasticParticle=16]="b2_elasticParticle",e[e.b2_viscousParticle=32]="b2_viscousParticle",e[e.b2_powderParticle=64]="b2_powderParticle",e[e.b2_tensileParticle=128]="b2_tensileParticle",e[e.b2_colorMixingParticle=256]="b2_colorMixingParticle",e[e.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",e[e.b2_barrierParticle=1024]="b2_barrierParticle",e[e.b2_staticPressureParticle=2048]="b2_staticPressureParticle",e[e.b2_reactiveParticle=4096]="b2_reactiveParticle",e[e.b2_repulsiveParticle=8192]="b2_repulsiveParticle",e[e.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",e[e.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",e[e.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",e[e.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle"})(o.b2ParticleFlag||(o.b2ParticleFlag={})),o.b2ParticleDef=class{constructor(){this.flags=0,this.position=new a.b2Vec2,this.velocity=new a.b2Vec2,this.color=new r.b2Color(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null}},o.b2CalculateParticleIterations=function(e,t,o){const i=Math.ceil(Math.sqrt(e/(.01*t))*o);return a.b2Clamp(i,1,8)},o.b2ParticleHandle=class{constructor(){this.m_index=i.b2_invalidParticleIndex}GetIndex(){return this.m_index}SetIndex(e){this.m_index=e}},cc._RF.pop()},{"../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings"}],b2PolygonAndCircleContact:[function(e,t,o){"use strict";cc._RF.push(t,"61a90LRgAdASI05vL3AqHrj","b2PolygonAndCircleContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PolygonAndCircleContact=void 0;const i=e("../../Collision/b2CollideCircle"),a=e("./b2Contact");class r extends a.b2Contact{static Create(){return new r}static Destroy(e){}Evaluate(e,t,o){i.b2CollidePolygonAndCircle(e,this.GetShapeA(),t,this.GetShapeB(),o)}}o.b2PolygonAndCircleContact=r,cc._RF.pop()},{"../../Collision/b2CollideCircle":"b2CollideCircle","./b2Contact":"b2Contact"}],b2PolygonContact:[function(e,t,o){"use strict";cc._RF.push(t,"096a2PNCv1EOL4uAP1Z0kIm","b2PolygonContact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PolygonContact=void 0;const i=e("../../Collision/b2CollidePolygon"),a=e("./b2Contact");class r extends a.b2Contact{static Create(){return new r}static Destroy(e){}Evaluate(e,t,o){i.b2CollidePolygons(e,this.GetShapeA(),t,this.GetShapeB(),o)}}o.b2PolygonContact=r,cc._RF.pop()},{"../../Collision/b2CollidePolygon":"b2CollidePolygon","./b2Contact":"b2Contact"}],b2PolygonShape:[function(e,t,o){"use strict";cc._RF.push(t,"8a377RvgzxBPbNek/NpPR2H","b2PolygonShape"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PolygonShape=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Shape"),s=e("./b2Shape");class n extends s.b2Shape{constructor(){super(s.b2ShapeType.e_polygonShape,i.b2_polygonRadius),this.m_centroid=new a.b2Vec2(0,0),this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return(new n).Copy(this)}Copy(e){super.Copy(e),this.m_centroid.Copy(e.m_centroid),this.m_count=e.m_count,this.m_vertices=a.b2Vec2.MakeArray(this.m_count),this.m_normals=a.b2Vec2.MakeArray(this.m_count);for(let t=0;t<this.m_count;++t)this.m_vertices[t].Copy(e.m_vertices[t]),this.m_normals[t].Copy(e.m_normals[t]);return this}GetChildCount(){return 1}Set(...e){if("number"==typeof e[0][0]){const t=e[0];if(t.length%2!=0)throw new Error;return this._Set(e=>({x:t[2*e],y:t[2*e+1]}),t.length/2)}{const t=e[0],o=e[1]||t.length;return this._Set(e=>t[e],o)}}_Set(e,t){if(t<3)return this.SetAsBox(1,1);let o=t;const r=[];for(let n=0;n<o;++n){const t=e(n);let o=!0;for(let e=0;e<r.length;++e)if(a.b2Vec2.DistanceSquaredVV(t,r[e])<.25*i.b2_linearSlop*i.b2_linearSlop){o=!1;break}o&&r.push(t)}if((o=r.length)<3)return this.SetAsBox(1,1);let s=0,l=r[0].x;for(let i=1;i<o;++i){const e=r[i].x;(e>l||e===l&&r[i].y<r[s].y)&&(s=i,l=e)}const c=[];let d=0,u=s;for(;;){c[d]=u;let e=0;for(let t=1;t<o;++t){if(e===u){e=t;continue}const o=a.b2Vec2.SubVV(r[e],r[c[d]],n.Set_s_r),i=a.b2Vec2.SubVV(r[t],r[c[d]],n.Set_s_v),s=a.b2Vec2.CrossVV(o,i);s<0&&(e=t),0===s&&i.LengthSquared()>o.LengthSquared()&&(e=t)}if(++d,u=e,e===s)break}this.m_count=d,this.m_vertices=a.b2Vec2.MakeArray(this.m_count),this.m_normals=a.b2Vec2.MakeArray(this.m_count);for(let i=0;i<d;++i)this.m_vertices[i].Copy(r[c[i]]);for(let i=0;i<d;++i){const e=this.m_vertices[i],t=this.m_vertices[(i+1)%d],o=a.b2Vec2.SubVV(t,e,a.b2Vec2.s_t0);a.b2Vec2.CrossVOne(o,this.m_normals[i]).SelfNormalize()}return n.ComputeCentroid(this.m_vertices,d,this.m_centroid),this}SetAsBox(e,t,o,i=0){if(this.m_count=4,this.m_vertices=a.b2Vec2.MakeArray(this.m_count),this.m_normals=a.b2Vec2.MakeArray(this.m_count),this.m_vertices[0].Set(-e,-t),this.m_vertices[1].Set(e,-t),this.m_vertices[2].Set(e,t),this.m_vertices[3].Set(-e,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),o){this.m_centroid.Copy(o);const e=new a.b2Transform;e.SetPosition(o),e.SetRotationAngle(i);for(let t=0;t<this.m_count;++t)a.b2Transform.MulXV(e,this.m_vertices[t],this.m_vertices[t]),a.b2Rot.MulRV(e.q,this.m_normals[t],this.m_normals[t])}return this}TestPoint(e,t){const o=a.b2Transform.MulTXV(e,t,n.TestPoint_s_pLocal);for(let i=0;i<this.m_count;++i)if(a.b2Vec2.DotVV(this.m_normals[i],a.b2Vec2.SubVV(o,this.m_vertices[i],a.b2Vec2.s_t0))>0)return!1;return!0}ComputeDistance(e,t,o,r){const s=a.b2Transform.MulTXV(e,t,n.ComputeDistance_s_pLocal);let l=-i.b2_maxFloat;const c=n.ComputeDistance_s_normalForMaxDistance.Copy(s);for(let i=0;i<this.m_count;++i){const e=a.b2Vec2.DotVV(this.m_normals[i],a.b2Vec2.SubVV(s,this.m_vertices[i],a.b2Vec2.s_t0));e>l&&(l=e,c.Copy(this.m_normals[i]))}if(l>0){const t=n.ComputeDistance_s_minDistance.Copy(c);let i=l*l;for(let e=0;e<this.m_count;++e){const o=a.b2Vec2.SubVV(s,this.m_vertices[e],n.ComputeDistance_s_distance),r=o.LengthSquared();i>r&&(t.Copy(o),i=r)}return a.b2Rot.MulRV(e.q,t,o),o.Normalize(),Math.sqrt(i)}return a.b2Rot.MulRV(e.q,c,o),l}RayCast(e,t,o,i){const r=a.b2Transform.MulTXV(o,t.p1,n.RayCast_s_p1),s=a.b2Transform.MulTXV(o,t.p2,n.RayCast_s_p2),l=a.b2Vec2.SubVV(s,r,n.RayCast_s_d);let c=0,d=t.maxFraction,u=-1;for(let n=0;n<this.m_count;++n){const e=a.b2Vec2.DotVV(this.m_normals[n],a.b2Vec2.SubVV(this.m_vertices[n],r,a.b2Vec2.s_t0)),t=a.b2Vec2.DotVV(this.m_normals[n],l);if(0===t){if(e<0)return!1}else t<0&&e<c*t?(c=e/t,u=n):t>0&&e<d*t&&(d=e/t);if(d<c)return!1}return u>=0&&(e.fraction=c,a.b2Rot.MulRV(o.q,this.m_normals[u],e.normal),!0)}ComputeAABB(e,t,o){const i=a.b2Transform.MulXV(t,this.m_vertices[0],e.lowerBound),r=e.upperBound.Copy(i);for(let l=0;l<this.m_count;++l){const e=a.b2Transform.MulXV(t,this.m_vertices[l],n.ComputeAABB_s_v);a.b2Vec2.MinV(e,i,i),a.b2Vec2.MaxV(e,r,r)}const s=this.m_radius;i.SelfSubXY(s,s),r.SelfAddXY(s,s)}ComputeMass(e,t){const o=n.ComputeMass_s_center.SetZero();let i=0,r=0;const s=n.ComputeMass_s_s.SetZero();for(let a=0;a<this.m_count;++a)s.SelfAdd(this.m_vertices[a]);s.SelfMul(1/this.m_count);for(let l=0;l<this.m_count;++l){const e=a.b2Vec2.SubVV(this.m_vertices[l],s,n.ComputeMass_s_e1),t=a.b2Vec2.SubVV(this.m_vertices[(l+1)%this.m_count],s,n.ComputeMass_s_e2),c=a.b2Vec2.CrossVV(e,t),d=.5*c;i+=d,o.SelfAdd(a.b2Vec2.MulSV(d*(1/3),a.b2Vec2.AddVV(e,t,a.b2Vec2.s_t0),a.b2Vec2.s_t1));const u=e.x,m=e.y,p=t.x,h=t.y;r+=1/3*.25*c*(u*u+p*u+p*p+m*m+h*m+h*h)}e.mass=t*i,o.SelfMul(1/i),a.b2Vec2.AddVV(o,s,e.center),e.I=t*r,e.I+=e.mass*(a.b2Vec2.DotVV(e.center,e.center)-a.b2Vec2.DotVV(o,o))}Validate(){for(let e=0;e<this.m_count;++e){const t=e,o=(e+1)%this.m_count,i=this.m_vertices[t],r=a.b2Vec2.SubVV(this.m_vertices[o],i,n.Validate_s_e);for(let e=0;e<this.m_count;++e){if(e===t||e===o)continue;const s=a.b2Vec2.SubVV(this.m_vertices[e],i,n.Validate_s_v);if(a.b2Vec2.CrossVV(r,s)<0)return!1}}return!0}SetupDistanceProxy(e,t){e.m_vertices=this.m_vertices,e.m_count=this.m_count,e.m_radius=this.m_radius}ComputeSubmergedArea(e,t,o,r){const s=a.b2Rot.MulTRV(o.q,e,n.ComputeSubmergedArea_s_normalL),l=t-a.b2Vec2.DotVV(e,o.p),c=[];let d=0,u=-1,m=-1,p=!1;for(let n=0;n<this.m_count;++n){c[n]=a.b2Vec2.DotVV(s,this.m_vertices[n])-l;const e=c[n]<-i.b2_epsilon;n>0&&(e?p||(u=n-1,d++):p&&(m=n-1,d++)),p=e}switch(d){case 0:if(p){const e=n.ComputeSubmergedArea_s_md;return this.ComputeMass(e,1),a.b2Transform.MulXV(o,e.center,r),e.mass}return 0;case 1:-1===u?u=this.m_count-1:m=this.m_count-1}const h=(u+1)%this.m_count,f=(m+1)%this.m_count,y=(0-c[u])/(c[h]-c[u]),_=(0-c[m])/(c[f]-c[m]),g=n.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[u].x*(1-y)+this.m_vertices[h].x*y,this.m_vertices[u].y*(1-y)+this.m_vertices[h].y*y),b=n.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[m].x*(1-_)+this.m_vertices[f].x*_,this.m_vertices[m].y*(1-_)+this.m_vertices[f].y*_);let S=0;const P=n.ComputeSubmergedArea_s_center.SetZero();let B,C=this.m_vertices[h],M=h;for(;M!==f;){B=(M=(M+1)%this.m_count)===f?b:this.m_vertices[M];const e=.5*((C.x-g.x)*(B.y-g.y)-(C.y-g.y)*(B.x-g.x));S+=e,P.x+=e*(g.x+C.x+B.x)/3,P.y+=e*(g.y+C.y+B.y)/3,C=B}return P.SelfMul(1/S),a.b2Transform.MulXV(o,P,r),S}Dump(e){e("    const shape: b2PolygonShape = new b2PolygonShape();\n"),e("    const vs: b2Vec2[] = [];\n");for(let t=0;t<this.m_count;++t)e("    vs[%d] = new b2Vec2(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);e("    shape.Set(vs, %d);\n",this.m_count)}static ComputeCentroid(e,t,o){const i=o;i.SetZero();let r=0;const s=n.ComputeCentroid_s_pRef.SetZero();for(let l=0;l<t;++l){const o=s,c=e[l],d=e[(l+1)%t],u=a.b2Vec2.SubVV(c,o,n.ComputeCentroid_s_e1),m=a.b2Vec2.SubVV(d,o,n.ComputeCentroid_s_e2),p=.5*a.b2Vec2.CrossVV(u,m);r+=p,i.x+=p*(1/3)*(o.x+c.x+d.x),i.y+=p*(1/3)*(o.y+c.y+d.y)}return i.SelfMul(1/r),i}}o.b2PolygonShape=n,n.Set_s_r=new a.b2Vec2,n.Set_s_v=new a.b2Vec2,n.TestPoint_s_pLocal=new a.b2Vec2,n.ComputeDistance_s_pLocal=new a.b2Vec2,n.ComputeDistance_s_normalForMaxDistance=new a.b2Vec2,n.ComputeDistance_s_minDistance=new a.b2Vec2,n.ComputeDistance_s_distance=new a.b2Vec2,n.RayCast_s_p1=new a.b2Vec2,n.RayCast_s_p2=new a.b2Vec2,n.RayCast_s_d=new a.b2Vec2,n.ComputeAABB_s_v=new a.b2Vec2,n.ComputeMass_s_center=new a.b2Vec2,n.ComputeMass_s_s=new a.b2Vec2,n.ComputeMass_s_e1=new a.b2Vec2,n.ComputeMass_s_e2=new a.b2Vec2,n.Validate_s_e=new a.b2Vec2,n.Validate_s_v=new a.b2Vec2,n.ComputeSubmergedArea_s_normalL=new a.b2Vec2,n.ComputeSubmergedArea_s_md=new r.b2MassData,n.ComputeSubmergedArea_s_intoVec=new a.b2Vec2,n.ComputeSubmergedArea_s_outoVec=new a.b2Vec2,n.ComputeSubmergedArea_s_center=new a.b2Vec2,n.ComputeCentroid_s_pRef=new a.b2Vec2,n.ComputeCentroid_s_e1=new a.b2Vec2,n.ComputeCentroid_s_e2=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Shape":"b2Shape"}],b2PrismaticJoint:[function(e,t,o){"use strict";cc._RF.push(t,"f184cy1oqhMy5e5xSfAq7ga","b2PrismaticJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PrismaticJoint=o.b2PrismaticJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2PrismaticJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_prismaticJoint),this.localAnchorA=new a.b2Vec2,this.localAnchorB=new a.b2Vec2,this.localAxisA=new a.b2Vec2(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(e,t,o,i){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.bodyA.GetLocalVector(i,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}};class s extends r.b2Joint{constructor(e){super(e),this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_localXAxisA=new a.b2Vec2,this.m_localYAxisA=new a.b2Vec2,this.m_referenceAngle=0,this.m_impulse=new a.b2Vec3(0,0,0),this.m_motorImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_limitState=r.b2LimitState.e_inactiveLimit,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new a.b2Vec2(0,0),this.m_perp=new a.b2Vec2(0,0),this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new a.b2Mat33,this.m_K3=new a.b2Mat33,this.m_K2=new a.b2Mat22,this.m_motorMass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,a.b2Vec2.ZERO)),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,a.b2Vec2.ZERO)),this.m_localXAxisA.Copy(i.b2Maybe(e.localAxisA,new a.b2Vec2(1,0))).SelfNormalize(),a.b2Vec2.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=i.b2Maybe(e.referenceAngle,0),this.m_lowerTranslation=i.b2Maybe(e.lowerTranslation,0),this.m_upperTranslation=i.b2Maybe(e.upperTranslation,0),this.m_maxMotorForce=i.b2Maybe(e.maxMotorForce,0),this.m_motorSpeed=i.b2Maybe(e.motorSpeed,0),this.m_enableLimit=i.b2Maybe(e.enableLimit,!1),this.m_enableMotor=i.b2Maybe(e.enableMotor,!1)}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].c,o=e.positions[this.m_indexA].a,n=e.velocities[this.m_indexA].v;let l=e.velocities[this.m_indexA].w;const c=e.positions[this.m_indexB].c,d=e.positions[this.m_indexB].a,u=e.velocities[this.m_indexB].v;let m=e.velocities[this.m_indexB].w;const p=this.m_qA.SetAngle(o),h=this.m_qB.SetAngle(d);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const f=a.b2Rot.MulRV(p,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const y=a.b2Rot.MulRV(h,this.m_lalcB,this.m_rB),_=a.b2Vec2.AddVV(a.b2Vec2.SubVV(c,t,a.b2Vec2.s_t0),a.b2Vec2.SubVV(y,f,a.b2Vec2.s_t1),s.InitVelocityConstraints_s_d),g=this.m_invMassA,b=this.m_invMassB,S=this.m_invIA,P=this.m_invIB;if(a.b2Rot.MulRV(p,this.m_localXAxisA,this.m_axis),this.m_a1=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(_,f,a.b2Vec2.s_t0),this.m_axis),this.m_a2=a.b2Vec2.CrossVV(y,this.m_axis),this.m_motorMass=g+b+S*this.m_a1*this.m_a1+P*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),a.b2Rot.MulRV(p,this.m_localYAxisA,this.m_perp),this.m_s1=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(_,f,a.b2Vec2.s_t0),this.m_perp),this.m_s2=a.b2Vec2.CrossVV(y,this.m_perp),this.m_K.ex.x=g+b+S*this.m_s1*this.m_s1+P*this.m_s2*this.m_s2,this.m_K.ex.y=S*this.m_s1+P*this.m_s2,this.m_K.ex.z=S*this.m_s1*this.m_a1+P*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=S+P,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=S*this.m_a1+P*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=g+b+S*this.m_a1*this.m_a1+P*this.m_a2*this.m_a2,this.m_enableLimit){const e=a.b2Vec2.DotVV(this.m_axis,_);a.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?this.m_limitState=r.b2LimitState.e_equalLimits:e<=this.m_lowerTranslation?this.m_limitState!==r.b2LimitState.e_atLowerLimit&&(this.m_limitState=r.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):e>=this.m_upperTranslation?this.m_limitState!==r.b2LimitState.e_atUpperLimit&&(this.m_limitState=r.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=r.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=r.b2LimitState.e_inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor||(this.m_motorImpulse=0),e.step.warmStarting){this.m_impulse.SelfMul(e.step.dtRatio),this.m_motorImpulse*=e.step.dtRatio;const t=a.b2Vec2.AddVV(a.b2Vec2.MulSV(this.m_impulse.x,this.m_perp,a.b2Vec2.s_t0),a.b2Vec2.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,a.b2Vec2.s_t1),s.InitVelocityConstraints_s_P),o=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,i=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.SelfMulSub(g,t),l-=S*o,u.SelfMulAdd(b,t),m+=P*i}else this.m_impulse.SetZero(),this.m_motorImpulse=0;e.velocities[this.m_indexA].w=l,e.velocities[this.m_indexB].w=m}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let n=e.velocities[this.m_indexB].w;const l=this.m_invMassA,c=this.m_invMassB,d=this.m_invIA,u=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==r.b2LimitState.e_equalLimits){const r=a.b2Vec2.DotVV(this.m_axis,a.b2Vec2.SubVV(i,t,a.b2Vec2.s_t0))+this.m_a2*n-this.m_a1*o;let m=this.m_motorMass*(this.m_motorSpeed-r);const p=this.m_motorImpulse,h=e.step.dt*this.m_maxMotorForce;this.m_motorImpulse=a.b2Clamp(this.m_motorImpulse+m,-h,h),m=this.m_motorImpulse-p;const f=a.b2Vec2.MulSV(m,this.m_axis,s.SolveVelocityConstraints_s_P),y=m*this.m_a1,_=m*this.m_a2;t.SelfMulSub(l,f),o-=d*y,i.SelfMulAdd(c,f),n+=u*_}const m=a.b2Vec2.DotVV(this.m_perp,a.b2Vec2.SubVV(i,t,a.b2Vec2.s_t0))+this.m_s2*n-this.m_s1*o,p=n-o;if(this.m_enableLimit&&this.m_limitState!==r.b2LimitState.e_inactiveLimit){const e=a.b2Vec2.DotVV(this.m_axis,a.b2Vec2.SubVV(i,t,a.b2Vec2.s_t0))+this.m_a2*n-this.m_a1*o,h=s.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),f=this.m_K.Solve33(-m,-p,-e,s.SolveVelocityConstraints_s_df3);this.m_impulse.SelfAdd(f),this.m_limitState===r.b2LimitState.e_atLowerLimit?this.m_impulse.z=a.b2Max(this.m_impulse.z,0):this.m_limitState===r.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=a.b2Min(this.m_impulse.z,0));const y=-m-(this.m_impulse.z-h.z)*this.m_K.ez.x,_=-p-(this.m_impulse.z-h.z)*this.m_K.ez.y,g=this.m_K.Solve22(y,_,s.SolveVelocityConstraints_s_f2r);g.x+=h.x,g.y+=h.y,this.m_impulse.x=g.x,this.m_impulse.y=g.y,f.x=this.m_impulse.x-h.x,f.y=this.m_impulse.y-h.y,f.z=this.m_impulse.z-h.z;const b=a.b2Vec2.AddVV(a.b2Vec2.MulSV(f.x,this.m_perp,a.b2Vec2.s_t0),a.b2Vec2.MulSV(f.z,this.m_axis,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_P),S=f.x*this.m_s1+f.y+f.z*this.m_a1,P=f.x*this.m_s2+f.y+f.z*this.m_a2;t.SelfMulSub(l,b),o-=d*S,i.SelfMulAdd(c,b),n+=u*P}else{const e=this.m_K.Solve22(-m,-p,s.SolveVelocityConstraints_s_df2);this.m_impulse.x+=e.x,this.m_impulse.y+=e.y;const r=a.b2Vec2.MulSV(e.x,this.m_perp,s.SolveVelocityConstraints_s_P),h=e.x*this.m_s1+e.y,f=e.x*this.m_s2+e.y;t.SelfMulSub(l,r),o-=d*h,i.SelfMulAdd(c,r),n+=u*f}e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=n}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n),d=this.m_invMassA,u=this.m_invMassB,m=this.m_invIA,p=this.m_invIB,h=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA),f=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),y=a.b2Vec2.SubVV(a.b2Vec2.AddVV(r,f,a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,h,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_d),_=a.b2Rot.MulRV(l,this.m_localXAxisA,this.m_axis),g=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(y,h,a.b2Vec2.s_t0),_),b=a.b2Vec2.CrossVV(f,_),S=a.b2Rot.MulRV(l,this.m_localYAxisA,this.m_perp),P=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(y,h,a.b2Vec2.s_t0),S),B=a.b2Vec2.CrossVV(f,S);let C=s.SolvePositionConstraints_s_impulse;const M=a.b2Vec2.DotVV(S,y),x=n-o-this.m_referenceAngle;let V=a.b2Abs(M);const I=a.b2Abs(x);let O=!1,w=0;if(this.m_enableLimit){const e=a.b2Vec2.DotVV(_,y);a.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(w=a.b2Clamp(e,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection),V=a.b2Max(V,a.b2Abs(e)),O=!0):e<=this.m_lowerTranslation?(w=a.b2Clamp(e-this.m_lowerTranslation+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),V=a.b2Max(V,this.m_lowerTranslation-e),O=!0):e>=this.m_upperTranslation&&(w=a.b2Clamp(e-this.m_upperTranslation-i.b2_linearSlop,0,i.b2_maxLinearCorrection),V=a.b2Max(V,e-this.m_upperTranslation),O=!0)}if(O){const e=d+u+m*P*P+p*B*B,t=m*P+p*B,o=m*P*g+p*B*b;let i=m+p;0===i&&(i=1);const a=m*g+p*b,r=d+u+m*g*g+p*b*b,s=this.m_K3;s.ex.SetXYZ(e,t,o),s.ey.SetXYZ(t,i,a),s.ez.SetXYZ(o,a,r),C=s.Solve33(-M,-x,-w,C)}else{const e=d+u+m*P*P+p*B*B,t=m*P+p*B;let o=m+p;0===o&&(o=1);const i=this.m_K2;i.ex.Set(e,t),i.ey.Set(t,o);const a=i.Solve(-M,-x,s.SolvePositionConstraints_s_impulse1);C.x=a.x,C.y=a.y,C.z=0}const E=a.b2Vec2.AddVV(a.b2Vec2.MulSV(C.x,S,a.b2Vec2.s_t0),a.b2Vec2.MulSV(C.z,_,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_P),A=C.x*P+C.y+C.z*g,R=C.x*B+C.y+C.z*b;return t.SelfMulSub(d,E),o-=m*A,r.SelfMulAdd(u,E),n+=p*R,e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,V<=i.b2_linearSlop&&I<=i.b2_angularSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t.y=e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),t}GetReactionTorque(e){return e*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const e=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,s.GetJointTranslation_s_pA),t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,s.GetJointTranslation_s_pB),o=a.b2Vec2.SubVV(t,e,s.GetJointTranslation_s_d),i=this.m_bodyA.GetWorldVector(this.m_localXAxisA,s.GetJointTranslation_s_axis);return a.b2Vec2.DotVV(o,i)}GetJointSpeed(){const e=this.m_bodyA,t=this.m_bodyB;a.b2Vec2.SubVV(this.m_localAnchorA,e.m_sweep.localCenter,this.m_lalcA);const o=a.b2Rot.MulRV(e.m_xf.q,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,t.m_sweep.localCenter,this.m_lalcB);const i=a.b2Rot.MulRV(t.m_xf.q,this.m_lalcB,this.m_rB),r=a.b2Vec2.AddVV(e.m_sweep.c,o,a.b2Vec2.s_t0),s=a.b2Vec2.AddVV(t.m_sweep.c,i,a.b2Vec2.s_t1),n=a.b2Vec2.SubVV(s,r,a.b2Vec2.s_t2),l=e.GetWorldVector(this.m_localXAxisA,this.m_axis),c=e.m_linearVelocity,d=t.m_linearVelocity,u=e.m_angularVelocity,m=t.m_angularVelocity;return a.b2Vec2.DotVV(n,a.b2Vec2.CrossSV(u,l,a.b2Vec2.s_t0))+a.b2Vec2.DotVV(l,a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(d,m,i,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(c,u,o,a.b2Vec2.s_t1),a.b2Vec2.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(e){e!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(e,t){e===this.m_lowerTranslation&&t===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=t,this.m_impulse.z=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(e){e!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e)}SetMotorSpeed(e){e!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e)}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(e){e!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=e)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(e){return e*this.m_motorImpulse}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),e("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),e("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),e("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),e("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),e("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),e("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),e("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2PrismaticJoint=s,s.InitVelocityConstraints_s_d=new a.b2Vec2,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_f2r=new a.b2Vec2,s.SolveVelocityConstraints_s_f1=new a.b2Vec3,s.SolveVelocityConstraints_s_df3=new a.b2Vec3,s.SolveVelocityConstraints_s_df2=new a.b2Vec2,s.SolvePositionConstraints_s_d=new a.b2Vec2,s.SolvePositionConstraints_s_impulse=new a.b2Vec3,s.SolvePositionConstraints_s_impulse1=new a.b2Vec2,s.SolvePositionConstraints_s_P=new a.b2Vec2,s.GetJointTranslation_s_pA=new a.b2Vec2,s.GetJointTranslation_s_pB=new a.b2Vec2,s.GetJointTranslation_s_d=new a.b2Vec2,s.GetJointTranslation_s_axis=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2PulleyJoint:[function(e,t,o){"use strict";cc._RF.push(t,"ac2e32W10pLbIf36sTvXvI3","b2PulleyJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2PulleyJoint=o.b2PulleyJointDef=o.b2_minPulleyLength=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2_minPulleyLength=2,o.b2PulleyJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_pulleyJoint),this.groundAnchorA=new a.b2Vec2(-1,1),this.groundAnchorB=new a.b2Vec2(1,1),this.localAnchorA=new a.b2Vec2(-1,0),this.localAnchorB=new a.b2Vec2(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(e,t,o,i,r,s,n){this.bodyA=e,this.bodyB=t,this.groundAnchorA.Copy(o),this.groundAnchorB.Copy(i),this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(s,this.localAnchorB),this.lengthA=a.b2Vec2.DistanceVV(r,o),this.lengthB=a.b2Vec2.DistanceVV(s,i),this.ratio=n}};class s extends r.b2Joint{constructor(e){super(e),this.m_groundAnchorA=new a.b2Vec2,this.m_groundAnchorB=new a.b2Vec2,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new a.b2Vec2,this.m_uB=new a.b2Vec2,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_groundAnchorA.Copy(i.b2Maybe(e.groundAnchorA,new a.b2Vec2(-1,1))),this.m_groundAnchorB.Copy(i.b2Maybe(e.groundAnchorB,new a.b2Vec2(1,0))),this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,new a.b2Vec2(-1,0))),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,new a.b2Vec2(1,0))),this.m_lengthA=i.b2Maybe(e.lengthA,0),this.m_lengthB=i.b2Maybe(e.lengthB,0),this.m_ratio=i.b2Maybe(e.ratio,1),this.m_constant=i.b2Maybe(e.lengthA,0)+this.m_ratio*i.b2Maybe(e.lengthB,0),this.m_impulse=0}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].c,o=e.positions[this.m_indexA].a,r=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const l=e.positions[this.m_indexB].c,c=e.positions[this.m_indexB].a,d=e.velocities[this.m_indexB].v;let u=e.velocities[this.m_indexB].w;const m=this.m_qA.SetAngle(o),p=this.m_qB.SetAngle(c);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),a.b2Rot.MulRV(m,this.m_lalcA,this.m_rA),a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(p,this.m_lalcB,this.m_rB),this.m_uA.Copy(t).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(l).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);const h=this.m_uA.Length(),f=this.m_uB.Length();h>10*i.b2_linearSlop?this.m_uA.SelfMul(1/h):this.m_uA.SetZero(),f>10*i.b2_linearSlop?this.m_uB.SelfMul(1/f):this.m_uB.SetZero();const y=a.b2Vec2.CrossVV(this.m_rA,this.m_uA),_=a.b2Vec2.CrossVV(this.m_rB,this.m_uB),g=this.m_invMassA+this.m_invIA*y*y,b=this.m_invMassB+this.m_invIB*_*_;if(this.m_mass=g+this.m_ratio*this.m_ratio*b,this.m_mass>0&&(this.m_mass=1/this.m_mass),e.step.warmStarting){this.m_impulse*=e.step.dtRatio;const t=a.b2Vec2.MulSV(-this.m_impulse,this.m_uA,s.InitVelocityConstraints_s_PA),o=a.b2Vec2.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,s.InitVelocityConstraints_s_PB);r.SelfMulAdd(this.m_invMassA,t),n+=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,t),d.SelfMulAdd(this.m_invMassB,o),u+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,o)}else this.m_impulse=0;e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=u}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=a.b2Vec2.AddVCrossSV(t,o,this.m_rA,s.SolveVelocityConstraints_s_vpA),l=a.b2Vec2.AddVCrossSV(i,r,this.m_rB,s.SolveVelocityConstraints_s_vpB),c=-a.b2Vec2.DotVV(this.m_uA,n)-this.m_ratio*a.b2Vec2.DotVV(this.m_uB,l),d=-this.m_mass*c;this.m_impulse+=d;const u=a.b2Vec2.MulSV(-d,this.m_uA,s.SolveVelocityConstraints_s_PA),m=a.b2Vec2.MulSV(-this.m_ratio*d,this.m_uB,s.SolveVelocityConstraints_s_PB);t.SelfMulAdd(this.m_invMassA,u),o+=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,u),i.SelfMulAdd(this.m_invMassB,m),r+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,m),e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const d=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),m=this.m_uA.Copy(t).SelfAdd(d).SelfSub(this.m_groundAnchorA),p=this.m_uB.Copy(r).SelfAdd(u).SelfSub(this.m_groundAnchorB),h=m.Length(),f=p.Length();h>10*i.b2_linearSlop?m.SelfMul(1/h):m.SetZero(),f>10*i.b2_linearSlop?p.SelfMul(1/f):p.SetZero();const y=a.b2Vec2.CrossVV(d,m),_=a.b2Vec2.CrossVV(u,p),g=this.m_invMassA+this.m_invIA*y*y,b=this.m_invMassB+this.m_invIB*_*_;let S=g+this.m_ratio*this.m_ratio*b;S>0&&(S=1/S);const P=this.m_constant-h-this.m_ratio*f,B=a.b2Abs(P),C=-S*P,M=a.b2Vec2.MulSV(-C,m,s.SolvePositionConstraints_s_PA),x=a.b2Vec2.MulSV(-this.m_ratio*C,p,s.SolvePositionConstraints_s_PB);return t.SelfMulAdd(this.m_invMassA,M),o+=this.m_invIA*a.b2Vec2.CrossVV(d,M),r.SelfMulAdd(this.m_invMassB,x),n+=this.m_invIB*a.b2Vec2.CrossVV(u,x),e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,B<i.b2_linearSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse*this.m_uB.x,t.y=e*this.m_impulse*this.m_uB.y,t}GetReactionTorque(e){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const e=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,s.GetCurrentLengthA_s_p),t=this.m_groundAnchorA;return a.b2Vec2.DistanceVV(e,t)}GetCurrentLengthB(){const e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,s.GetCurrentLengthB_s_p),t=this.m_groundAnchorB;return a.b2Vec2.DistanceVV(e,t)}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),e("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.lengthA = %.15f;\n",this.m_lengthA),e("  jd.lengthB = %.15f;\n",this.m_lengthB),e("  jd.ratio = %.15f;\n",this.m_ratio),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}ShiftOrigin(e){this.m_groundAnchorA.SelfSub(e),this.m_groundAnchorB.SelfSub(e)}}o.b2PulleyJoint=s,s.InitVelocityConstraints_s_PA=new a.b2Vec2,s.InitVelocityConstraints_s_PB=new a.b2Vec2,s.SolveVelocityConstraints_s_vpA=new a.b2Vec2,s.SolveVelocityConstraints_s_vpB=new a.b2Vec2,s.SolveVelocityConstraints_s_PA=new a.b2Vec2,s.SolveVelocityConstraints_s_PB=new a.b2Vec2,s.SolvePositionConstraints_s_PA=new a.b2Vec2,s.SolvePositionConstraints_s_PB=new a.b2Vec2,s.GetCurrentLengthA_s_p=new a.b2Vec2,s.GetCurrentLengthB_s_p=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2RevoluteJoint:[function(e,t,o){"use strict";cc._RF.push(t,"007f55pKWJDLZOcW8HpIsra","b2RevoluteJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2RevoluteJoint=o.b2RevoluteJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2RevoluteJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_revoluteJoint),this.localAnchorA=new a.b2Vec2(0,0),this.localAnchorB=new a.b2Vec2(0,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(e,t,o){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}};class s extends r.b2Joint{constructor(e){super(e),this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_impulse=new a.b2Vec3,this.m_motorImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new a.b2Mat33,this.m_motorMass=0,this.m_limitState=r.b2LimitState.e_inactiveLimit,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_K=new a.b2Mat22,this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,a.b2Vec2.ZERO)),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,a.b2Vec2.ZERO)),this.m_referenceAngle=i.b2Maybe(e.referenceAngle,0),this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=i.b2Maybe(e.lowerAngle,0),this.m_upperAngle=i.b2Maybe(e.upperAngle,0),this.m_maxMotorTorque=i.b2Maybe(e.maxMotorTorque,0),this.m_motorSpeed=i.b2Maybe(e.motorSpeed,0),this.m_enableLimit=i.b2Maybe(e.enableLimit,!1),this.m_enableMotor=i.b2Maybe(e.enableMotor,!1),this.m_limitState=r.b2LimitState.e_inactiveLimit}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const l=e.positions[this.m_indexB].a,c=e.velocities[this.m_indexB].v;let d=e.velocities[this.m_indexB].w;const u=this.m_qA.SetAngle(t),m=this.m_qB.SetAngle(l);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),a.b2Rot.MulRV(u,this.m_lalcA,this.m_rA),a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(m,this.m_lalcB,this.m_rB);const p=this.m_invMassA,h=this.m_invMassB,f=this.m_invIA,y=this.m_invIB,_=f+y===0;if(this.m_mass.ex.x=p+h+this.m_rA.y*this.m_rA.y*f+this.m_rB.y*this.m_rB.y*y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*f-this.m_rB.y*this.m_rB.x*y,this.m_mass.ez.x=-this.m_rA.y*f-this.m_rB.y*y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=p+h+this.m_rA.x*this.m_rA.x*f+this.m_rB.x*this.m_rB.x*y,this.m_mass.ez.y=this.m_rA.x*f+this.m_rB.x*y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=f+y,this.m_motorMass=f+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!_||(this.m_motorImpulse=0),this.m_enableLimit&&!_){const e=l-t-this.m_referenceAngle;a.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*i.b2_angularSlop?this.m_limitState=r.b2LimitState.e_equalLimits:e<=this.m_lowerAngle?(this.m_limitState!==r.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=r.b2LimitState.e_atLowerLimit):e>=this.m_upperAngle?(this.m_limitState!==r.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=r.b2LimitState.e_atUpperLimit):(this.m_limitState=r.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=r.b2LimitState.e_inactiveLimit;if(e.step.warmStarting){this.m_impulse.SelfMul(e.step.dtRatio),this.m_motorImpulse*=e.step.dtRatio;const t=s.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);o.SelfMulSub(p,t),n-=f*(a.b2Vec2.CrossVV(this.m_rA,t)+this.m_motorImpulse+this.m_impulse.z),c.SelfMulAdd(h,t),d+=y*(a.b2Vec2.CrossVV(this.m_rB,t)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0;e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=d}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let n=e.velocities[this.m_indexB].w;const l=this.m_invMassA,c=this.m_invMassB,d=this.m_invIA,u=this.m_invIB,m=d+u===0;if(this.m_enableMotor&&this.m_limitState!==r.b2LimitState.e_equalLimits&&!m){const t=n-o-this.m_motorSpeed;let i=-this.m_motorMass*t;const r=this.m_motorImpulse,s=e.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=a.b2Clamp(this.m_motorImpulse+i,-s,s),o-=d*(i=this.m_motorImpulse-r),n+=u*i}if(this.m_enableLimit&&this.m_limitState!==r.b2LimitState.e_inactiveLimit&&!m){const e=a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(i,n,this.m_rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(t,o,this.m_rA,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_Cdot1),m=n-o,p=this.m_mass.Solve33(e.x,e.y,m,s.SolveVelocityConstraints_s_impulse_v3).SelfNeg();if(this.m_limitState===r.b2LimitState.e_equalLimits)this.m_impulse.SelfAdd(p);else if(this.m_limitState===r.b2LimitState.e_atLowerLimit)if(this.m_impulse.z+p.z<0){const t=-e.x+this.m_impulse.z*this.m_mass.ez.x,o=-e.y+this.m_impulse.z*this.m_mass.ez.y,i=this.m_mass.Solve22(t,o,s.SolveVelocityConstraints_s_reduced_v2);p.x=i.x,p.y=i.y,p.z=-this.m_impulse.z,this.m_impulse.x+=i.x,this.m_impulse.y+=i.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(p);else if(this.m_limitState===r.b2LimitState.e_atUpperLimit)if(this.m_impulse.z+p.z>0){const t=-e.x+this.m_impulse.z*this.m_mass.ez.x,o=-e.y+this.m_impulse.z*this.m_mass.ez.y,i=this.m_mass.Solve22(t,o,s.SolveVelocityConstraints_s_reduced_v2);p.x=i.x,p.y=i.y,p.z=-this.m_impulse.z,this.m_impulse.x+=i.x,this.m_impulse.y+=i.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(p);const h=s.SolveVelocityConstraints_s_P.Set(p.x,p.y);t.SelfMulSub(l,h),o-=d*(a.b2Vec2.CrossVV(this.m_rA,h)+p.z),i.SelfMulAdd(c,h),n+=u*(a.b2Vec2.CrossVV(this.m_rB,h)+p.z)}else{const e=a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(i,n,this.m_rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(t,o,this.m_rA,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_Cdot_v2),r=this.m_mass.Solve22(-e.x,-e.y,s.SolveVelocityConstraints_s_impulse_v2);this.m_impulse.x+=r.x,this.m_impulse.y+=r.y,t.SelfMulSub(l,r),o-=d*a.b2Vec2.CrossVV(this.m_rA,r),i.SelfMulAdd(c,r),n+=u*a.b2Vec2.CrossVV(this.m_rB,r)}e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=n}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const n=e.positions[this.m_indexB].c;let l=e.positions[this.m_indexB].a;const c=this.m_qA.SetAngle(o),d=this.m_qB.SetAngle(l);let u=0,m=0;const p=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&this.m_limitState!==r.b2LimitState.e_inactiveLimit&&!p){const e=l-o-this.m_referenceAngle;let t=0;if(this.m_limitState===r.b2LimitState.e_equalLimits){const o=a.b2Clamp(e-this.m_lowerAngle,-i.b2_maxAngularCorrection,i.b2_maxAngularCorrection);t=-this.m_motorMass*o,u=a.b2Abs(o)}else if(this.m_limitState===r.b2LimitState.e_atLowerLimit){let o=e-this.m_lowerAngle;u=-o,o=a.b2Clamp(o+i.b2_angularSlop,-i.b2_maxAngularCorrection,0),t=-this.m_motorMass*o}else if(this.m_limitState===r.b2LimitState.e_atUpperLimit){let o=e-this.m_upperAngle;u=o,o=a.b2Clamp(o-i.b2_angularSlop,0,i.b2_maxAngularCorrection),t=-this.m_motorMass*o}o-=this.m_invIA*t,l+=this.m_invIB*t}{c.SetAngle(o),d.SetAngle(l),a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const e=a.b2Rot.MulRV(c,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const i=a.b2Rot.MulRV(d,this.m_lalcB,this.m_rB),r=a.b2Vec2.SubVV(a.b2Vec2.AddVV(n,i,a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,e,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_C_v2);m=r.Length();const u=this.m_invMassA,p=this.m_invMassB,h=this.m_invIA,f=this.m_invIB,y=this.m_K;y.ex.x=u+p+h*e.y*e.y+f*i.y*i.y,y.ex.y=-h*e.x*e.y-f*i.x*i.y,y.ey.x=y.ex.y,y.ey.y=u+p+h*e.x*e.x+f*i.x*i.x;const _=y.Solve(r.x,r.y,s.SolvePositionConstraints_s_impulse).SelfNeg();t.SelfMulSub(u,_),o-=h*a.b2Vec2.CrossVV(e,_),n.SelfMulAdd(p,_),l+=f*a.b2Vec2.CrossVV(i,_)}return e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=l,m<=i.b2_linearSlop&&u<=i.b2_angularSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse.x,t.y=e*this.m_impulse.y,t}GetReactionTorque(e){return e*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(e){e!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e)}GetMotorTorque(e){return e*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(e){e!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=e)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(e){e!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(e,t){e===this.m_lowerAngle&&t===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=e,this.m_upperAngle=t)}SetMotorSpeed(e){e!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e)}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),e("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),e("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),e("  jd.upperAngle = %.15f;\n",this.m_upperAngle),e("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),e("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),e("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2RevoluteJoint=s,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_Cdot_v2=new a.b2Vec2,s.SolveVelocityConstraints_s_Cdot1=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse_v3=new a.b2Vec3,s.SolveVelocityConstraints_s_reduced_v2=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse_v2=new a.b2Vec2,s.SolvePositionConstraints_s_C_v2=new a.b2Vec2,s.SolvePositionConstraints_s_impulse=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2RopeJoint:[function(e,t,o){"use strict";cc._RF.push(t,"509ae5atWlKDLUOo+W034g/","b2RopeJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2RopeJoint=o.b2RopeJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2RopeJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_ropeJoint),this.localAnchorA=new a.b2Vec2(-1,0),this.localAnchorB=new a.b2Vec2(1,0),this.maxLength=0}};class s extends r.b2Joint{constructor(e){super(e),this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_maxLength=0,this.m_length=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new a.b2Vec2,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_state=r.b2LimitState.e_inactiveLimit,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,new a.b2Vec2(-1,0))),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,new a.b2Vec2(1,0))),this.m_maxLength=i.b2Maybe(e.maxLength,0)}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].c,o=e.positions[this.m_indexA].a,n=e.velocities[this.m_indexA].v;let l=e.velocities[this.m_indexA].w;const c=e.positions[this.m_indexB].c,d=e.positions[this.m_indexB].a,u=e.velocities[this.m_indexB].v;let m=e.velocities[this.m_indexB].w;const p=this.m_qA.SetAngle(o),h=this.m_qB.SetAngle(d);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),a.b2Rot.MulRV(p,this.m_lalcA,this.m_rA),a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(h,this.m_lalcB,this.m_rB),this.m_u.Copy(c).SelfAdd(this.m_rB).SelfSub(t).SelfSub(this.m_rA),this.m_length=this.m_u.Length();const f=this.m_length-this.m_maxLength;if(this.m_state=f>0?r.b2LimitState.e_atUpperLimit:r.b2LimitState.e_inactiveLimit,!(this.m_length>i.b2_linearSlop))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);const y=a.b2Vec2.CrossVV(this.m_rA,this.m_u),_=a.b2Vec2.CrossVV(this.m_rB,this.m_u),g=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*_*_;if(this.m_mass=0!==g?1/g:0,e.step.warmStarting){this.m_impulse*=e.step.dtRatio;const t=a.b2Vec2.MulSV(this.m_impulse,this.m_u,s.InitVelocityConstraints_s_P);n.SelfMulSub(this.m_invMassA,t),l-=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,t),u.SelfMulAdd(this.m_invMassB,t),m+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,t)}else this.m_impulse=0;e.velocities[this.m_indexA].w=l,e.velocities[this.m_indexB].w=m}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=a.b2Vec2.AddVCrossSV(t,o,this.m_rA,s.SolveVelocityConstraints_s_vpA),l=a.b2Vec2.AddVCrossSV(i,r,this.m_rB,s.SolveVelocityConstraints_s_vpB),c=this.m_length-this.m_maxLength;let d=a.b2Vec2.DotVV(this.m_u,a.b2Vec2.SubVV(l,n,a.b2Vec2.s_t0));c<0&&(d+=e.step.inv_dt*c);let u=-this.m_mass*d;const m=this.m_impulse;this.m_impulse=a.b2Min(0,this.m_impulse+u),u=this.m_impulse-m;const p=a.b2Vec2.MulSV(u,this.m_u,s.SolveVelocityConstraints_s_P);t.SelfMulSub(this.m_invMassA,p),o-=this.m_invIA*a.b2Vec2.CrossVV(this.m_rA,p),i.SelfMulAdd(this.m_invMassB,p),r+=this.m_invIB*a.b2Vec2.CrossVV(this.m_rB,p),e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const d=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),m=this.m_u.Copy(r).SelfAdd(u).SelfSub(t).SelfSub(d),p=m.Normalize();let h=p-this.m_maxLength;h=a.b2Clamp(h,0,i.b2_maxLinearCorrection);const f=-this.m_mass*h,y=a.b2Vec2.MulSV(f,m,s.SolvePositionConstraints_s_P);return t.SelfMulSub(this.m_invMassA,y),o-=this.m_invIA*a.b2Vec2.CrossVV(d,y),r.SelfMulAdd(this.m_invMassB,y),n+=this.m_invIB*a.b2Vec2.CrossVV(u,y),e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,p-this.m_maxLength<i.b2_linearSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return a.b2Vec2.MulSV(e*this.m_impulse,this.m_u,t)}GetReactionTorque(e){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxLength(e){this.m_maxLength=e}GetMaxLength(){return this.m_maxLength}GetLimitState(){return this.m_state}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.maxLength = %.15f;\n",this.m_maxLength),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2RopeJoint=s,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_vpA=new a.b2Vec2,s.SolveVelocityConstraints_s_vpB=new a.b2Vec2,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolvePositionConstraints_s_P=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2Rope:[function(e,t,o){"use strict";cc._RF.push(t,"221faZRpohGtILSZYVMy3DK","b2Rope"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Rope=o.b2RopeDef=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Common/b2Draw");o.b2RopeDef=class{constructor(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new a.b2Vec2(0,0),this.damping=.1,this.k2=.9,this.k3=.1}};class s{constructor(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new a.b2Vec2,this.m_damping=0,this.m_k2=1,this.m_k3=.1}GetVertexCount(){return this.m_count}GetVertices(){return this.m_ps}Initialize(e){this.m_count=e.count,this.m_ps=a.b2Vec2.MakeArray(this.m_count),this.m_p0s=a.b2Vec2.MakeArray(this.m_count),this.m_vs=a.b2Vec2.MakeArray(this.m_count),this.m_ims=i.b2MakeNumberArray(this.m_count);for(let i=0;i<this.m_count;++i){this.m_ps[i].Copy(e.vertices[i]),this.m_p0s[i].Copy(e.vertices[i]),this.m_vs[i].SetZero();const t=e.masses[i];this.m_ims[i]=t>0?1/t:0}const t=this.m_count-1,o=this.m_count-2;this.m_Ls=i.b2MakeNumberArray(t),this.m_as=i.b2MakeNumberArray(o);for(let i=0;i<t;++i){const e=this.m_ps[i],t=this.m_ps[i+1];this.m_Ls[i]=a.b2Vec2.DistanceVV(e,t)}for(let i=0;i<o;++i){const e=this.m_ps[i],t=this.m_ps[i+1],o=this.m_ps[i+2],r=a.b2Vec2.SubVV(t,e,a.b2Vec2.s_t0),s=a.b2Vec2.SubVV(o,t,a.b2Vec2.s_t1),n=a.b2Vec2.CrossVV(r,s),l=a.b2Vec2.DotVV(r,s);this.m_as[i]=a.b2Atan2(n,l)}this.m_gravity.Copy(e.gravity),this.m_damping=e.damping,this.m_k2=e.k2,this.m_k3=e.k3}Step(e,t){if(0===e)return;const o=Math.exp(-e*this.m_damping);for(let a=0;a<this.m_count;++a)this.m_p0s[a].Copy(this.m_ps[a]),this.m_ims[a]>0&&this.m_vs[a].SelfMulAdd(e,this.m_gravity),this.m_vs[a].SelfMul(o),this.m_ps[a].SelfMulAdd(e,this.m_vs[a]);for(let a=0;a<t;++a)this.SolveC2(),this.SolveC3(),this.SolveC2();const i=1/e;for(let r=0;r<this.m_count;++r)a.b2Vec2.MulSV(i,a.b2Vec2.SubVV(this.m_ps[r],this.m_p0s[r],a.b2Vec2.s_t0),this.m_vs[r])}SolveC2(){const e=this.m_count-1;for(let t=0;t<e;++t){const e=this.m_ps[t],o=this.m_ps[t+1],i=a.b2Vec2.SubVV(o,e,s.s_d),r=i.Normalize(),n=this.m_ims[t],l=this.m_ims[t+1];if(n+l===0)continue;const c=n/(n+l),d=l/(n+l);e.SelfMulSub(this.m_k2*c*(this.m_Ls[t]-r),i),o.SelfMulAdd(this.m_k2*d*(this.m_Ls[t]-r),i)}}SetAngle(e){const t=this.m_count-2;for(let o=0;o<t;++o)this.m_as[o]=e}SolveC3(){const e=this.m_count-2;for(let t=0;t<e;++t){const e=this.m_ps[t],o=this.m_ps[t+1],r=this.m_ps[t+2],n=this.m_ims[t],l=this.m_ims[t+1],c=this.m_ims[t+2],d=a.b2Vec2.SubVV(o,e,s.s_d1),u=a.b2Vec2.SubVV(r,o,s.s_d2),m=d.LengthSquared(),p=u.LengthSquared();if(m*p==0)continue;const h=a.b2Vec2.CrossVV(d,u),f=a.b2Vec2.DotVV(d,u);let y=a.b2Atan2(h,f);const _=a.b2Vec2.MulSV(-1/m,d.SelfSkew(),s.s_Jd1),g=a.b2Vec2.MulSV(1/p,u.SelfSkew(),s.s_Jd2),b=a.b2Vec2.NegV(_,s.s_J1),S=a.b2Vec2.SubVV(_,g,s.s_J2),P=g;let B=n*a.b2Vec2.DotVV(b,b)+l*a.b2Vec2.DotVV(S,S)+c*a.b2Vec2.DotVV(P,P);if(0===B)continue;B=1/B;let C=y-this.m_as[t];for(;C>i.b2_pi;)C=(y-=2*i.b2_pi)-this.m_as[t];for(;C<-i.b2_pi;)C=(y+=2*i.b2_pi)-this.m_as[t];const M=-this.m_k3*B*C;e.SelfMulAdd(n*M,b),o.SelfMulAdd(l*M,S),r.SelfMulAdd(c*M,P)}}Draw(e){const t=new r.b2Color(.4,.5,.7);for(let o=0;o<this.m_count-1;++o)e.DrawSegment(this.m_ps[o],this.m_ps[o+1],t)}}o.b2Rope=s,s.s_d=new a.b2Vec2,s.s_d1=new a.b2Vec2,s.s_d2=new a.b2Vec2,s.s_Jd1=new a.b2Vec2,s.s_Jd2=new a.b2Vec2,s.s_J1=new a.b2Vec2,s.s_J2=new a.b2Vec2,cc._RF.pop()},{"../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings"}],b2Settings:[function(e,t,o){"use strict";cc._RF.push(t,"a6046LpclxEYYVFDgRkLWjE","b2Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2MakeNumberArray=o.b2MakeNullArray=o.b2MakeArray=o.b2ParseUInt=o.b2ParseInt=o.b2_commit=o.b2_branch=o.b2_version=o.b2Version=o.b2Log=o.b2Free=o.b2Alloc=o.b2_angularSleepTolerance=o.b2_linearSleepTolerance=o.b2_timeToSleep=o.b2_barrierCollisionTime=o.b2_minParticleSystemBufferCapacity=o.b2_maxTriadDistanceSquared=o.b2_maxTriadDistance=o.b2_maxParticleForce=o.b2_maxParticlePressure=o.b2_minParticleWeight=o.b2_particleStride=o.b2_maxParticleIndex=o.b2_invalidParticleIndex=o.b2_toiBaumgarte=o.b2_baumgarte=o.b2_maxRotationSquared=o.b2_maxRotation=o.b2_maxTranslationSquared=o.b2_maxTranslation=o.b2_maxAngularCorrection=o.b2_maxLinearCorrection=o.b2_velocityThreshold=o.b2_maxTOIContacts=o.b2_maxSubSteps=o.b2_polygonRadius=o.b2_angularSlop=o.b2_linearSlop=o.b2_aabbMultiplier=o.b2_aabbExtension=o.b2_maxPolygonVertices=o.b2_maxManifoldPoints=o.b2_pi=o.b2_epsilon_sq=o.b2_epsilon=o.b2_maxFloat=o.b2Maybe=o.b2Assert=void 0,o.b2Assert=function(e,...t){if(!e)throw new Error(...t)},o.b2Maybe=function(e,t){return void 0!==e?e:t},o.b2_maxFloat=1e37,o.b2_epsilon=1e-5,o.b2_epsilon_sq=o.b2_epsilon*o.b2_epsilon,o.b2_pi=3.14159265359,o.b2_maxManifoldPoints=2,o.b2_maxPolygonVertices=8,o.b2_aabbExtension=.1,o.b2_aabbMultiplier=2,o.b2_linearSlop=.008,o.b2_angularSlop=2/180*o.b2_pi,o.b2_polygonRadius=2*o.b2_linearSlop,o.b2_maxSubSteps=8,o.b2_maxTOIContacts=32,o.b2_velocityThreshold=1,o.b2_maxLinearCorrection=.2,o.b2_maxAngularCorrection=8/180*o.b2_pi,o.b2_maxTranslation=2,o.b2_maxTranslationSquared=o.b2_maxTranslation*o.b2_maxTranslation,o.b2_maxRotation=.5*o.b2_pi,o.b2_maxRotationSquared=o.b2_maxRotation*o.b2_maxRotation,o.b2_baumgarte=.2,o.b2_toiBaumgarte=.75,o.b2_invalidParticleIndex=-1,o.b2_maxParticleIndex=2147483647,o.b2_particleStride=.75,o.b2_minParticleWeight=1,o.b2_maxParticlePressure=.25,o.b2_maxParticleForce=.5,o.b2_maxTriadDistance=2,o.b2_maxTriadDistanceSquared=o.b2_maxTriadDistance*o.b2_maxTriadDistance,o.b2_minParticleSystemBufferCapacity=256,o.b2_barrierCollisionTime=2.5,o.b2_timeToSleep=.5,o.b2_linearSleepTolerance=.01,o.b2_angularSleepTolerance=2/180*o.b2_pi,o.b2Alloc=function(){return null},o.b2Free=function(){},o.b2Log=function(){};class i{constructor(e=0,t=0,o=0){this.major=0,this.minor=0,this.revision=0,this.major=e,this.minor=t,this.revision=o}toString(){return this.major+"."+this.minor+"."+this.revision}}o.b2Version=i,o.b2_version=new i(2,3,2),o.b2_branch="master",o.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",o.b2ParseInt=function(e){return parseInt(e,10)},o.b2ParseUInt=function(e){return Math.abs(parseInt(e,10))},o.b2MakeArray=function(e,t){const o=new Array(e);for(let i=0;i<e;++i)o[i]=t(i);return o},o.b2MakeNullArray=function(e){const t=new Array(e);for(let o=0;o<e;++o)t[o]=null;return t},o.b2MakeNumberArray=function(e,t=0){const o=new Array(e);for(let i=0;i<e;++i)o[i]=t;return o},cc._RF.pop()},{}],b2Shape:[function(e,t,o){"use strict";cc._RF.push(t,"45c486w5jVD7rTne2XfN0ME","b2Shape"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Shape=o.b2ShapeType=o.b2MassData=void 0;const i=e("../../Common/b2Math");var a;o.b2MassData=class{constructor(){this.mass=0,this.center=new i.b2Vec2(0,0),this.I=0}},function(e){e[e.e_unknown=-1]="e_unknown",e[e.e_circleShape=0]="e_circleShape",e[e.e_edgeShape=1]="e_edgeShape",e[e.e_polygonShape=2]="e_polygonShape",e[e.e_chainShape=3]="e_chainShape",e[e.e_shapeTypeCount=4]="e_shapeTypeCount"}(a=o.b2ShapeType||(o.b2ShapeType={})),o.b2Shape=class{constructor(e,t){this.m_type=a.e_unknown,this.m_radius=0,this.m_type=e,this.m_radius=t}Copy(e){return this.m_radius=e.m_radius,this}GetType(){return this.m_type}},cc._RF.pop()},{"../../Common/b2Math":"b2Math"}],b2StackAllocator:[function(e,t,o){"use strict";cc._RF.push(t,"7a6f2tdW8NNSoxAaHxKt/sO","b2StackAllocator"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2StackAllocator=void 0,o.b2StackAllocator=class{},cc._RF.pop()},{}],b2StackQueue:[function(e,t,o){"use strict";cc._RF.push(t,"0e72a0muGBPr59GHRt7oCru","b2StackQueue"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2StackQueue=void 0;const i=e("../Common/b2Settings");o.b2StackQueue=class{constructor(e){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=i.b2MakeArray(e,()=>null),this.m_capacity=e}Push(e){if(this.m_back>=this.m_capacity){for(let e=this.m_front;e<this.m_back;e++)this.m_buffer[e-this.m_front]=this.m_buffer[e];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(this.m_capacity>0?(this.m_buffer.concat(i.b2MakeArray(this.m_capacity,()=>null)),this.m_capacity*=2):(this.m_buffer.concat(i.b2MakeArray(1,()=>null)),this.m_capacity=1))}this.m_buffer[this.m_back]=e,this.m_back++}Pop(){this.m_buffer[this.m_front]=null,this.m_front++}Empty(){return this.m_front===this.m_back}Front(){const e=this.m_buffer[this.m_front];if(!e)throw new Error;return e}},cc._RF.pop()},{"../Common/b2Settings":"b2Settings"}],b2TensorDampingController:[function(e,t,o){"use strict";cc._RF.push(t,"ce1fa62mdtBLL0RznMR3FPg","b2TensorDampingController"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2TensorDampingController=void 0;const i=e("./b2Controller"),a=e("../Common/b2Math"),r=e("../Common/b2Settings");class s extends i.b2Controller{constructor(){super(...arguments),this.T=new a.b2Mat22,this.maxTimestep=0}Step(e){let t=e.dt;if(!(t<=r.b2_epsilon)){t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(let e=this.m_bodyList;e;e=e.nextBody){const o=e.body;if(!o.IsAwake())continue;const i=o.GetWorldVector(a.b2Mat22.MulMV(this.T,o.GetLocalVector(o.GetLinearVelocity(),a.b2Vec2.s_t0),a.b2Vec2.s_t1),s.Step_s_damping);o.SetLinearVelocity(a.b2Vec2.AddVV(o.GetLinearVelocity(),a.b2Vec2.MulSV(t,i,a.b2Vec2.s_t0),a.b2Vec2.s_t1))}}}Draw(e){}SetAxisAligned(e,t){this.T.ex.x=-e,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-t,this.maxTimestep=e>0||t>0?1/a.b2Max(e,t):0}}o.b2TensorDampingController=s,s.Step_s_damping=new a.b2Vec2,cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2Controller":"b2Controller"}],b2TimeOfImpact:[function(e,t,o){"use strict";cc._RF.push(t,"5805dJYp6tJIovi4GSwjsQ7","b2TimeOfImpact"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2TimeOfImpact=o.b2SeparationFunction=o.b2SeparationFunctionType=o.b2TOIOutput=o.b2TOIOutputState=o.b2TOIInput=o.b2_toi_reset=o.b2_toiMaxRootIters=o.b2_toiRootIters=o.b2_toiMaxIters=o.b2_toiIters=o.b2_toiCalls=o.b2_toiMaxTime=o.b2_toiTime=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Common/b2Timer"),s=e("./b2Distance");o.b2_toiTime=0,o.b2_toiMaxTime=0,o.b2_toiCalls=0,o.b2_toiIters=0,o.b2_toiMaxIters=0,o.b2_toiRootIters=0,o.b2_toiMaxRootIters=0,o.b2_toi_reset=function(){o.b2_toiTime=0,o.b2_toiMaxTime=0,o.b2_toiCalls=0,o.b2_toiIters=0,o.b2_toiMaxIters=0,o.b2_toiRootIters=0,o.b2_toiMaxRootIters=0};const n=new a.b2Transform,l=new a.b2Transform,c=new a.b2Vec2,d=new a.b2Vec2,u=new a.b2Vec2,m=new a.b2Vec2,p=new a.b2Vec2;var h,f;o.b2TOIInput=class{constructor(){this.proxyA=new s.b2DistanceProxy,this.proxyB=new s.b2DistanceProxy,this.sweepA=new a.b2Sweep,this.sweepB=new a.b2Sweep,this.tMax=0}},function(e){e[e.e_unknown=0]="e_unknown",e[e.e_failed=1]="e_failed",e[e.e_overlapped=2]="e_overlapped",e[e.e_touching=3]="e_touching",e[e.e_separated=4]="e_separated"}(h=o.b2TOIOutputState||(o.b2TOIOutputState={})),o.b2TOIOutput=class{constructor(){this.state=h.e_unknown,this.t=0}},function(e){e[e.e_unknown=-1]="e_unknown",e[e.e_points=0]="e_points",e[e.e_faceA=1]="e_faceA",e[e.e_faceB=2]="e_faceB"}(f=o.b2SeparationFunctionType||(o.b2SeparationFunctionType={}));class y{constructor(){this.m_sweepA=new a.b2Sweep,this.m_sweepB=new a.b2Sweep,this.m_type=f.e_unknown,this.m_localPoint=new a.b2Vec2,this.m_axis=new a.b2Vec2}Initialize(e,t,o,i,r,s){this.m_proxyA=t,this.m_proxyB=i;const m=e.count;this.m_sweepA.Copy(o),this.m_sweepB.Copy(r);const p=n,h=l;if(this.m_sweepA.GetTransform(p,s),this.m_sweepB.GetTransform(h,s),1===m){this.m_type=f.e_points;const t=this.m_proxyA.GetVertex(e.indexA[0]),o=this.m_proxyB.GetVertex(e.indexB[0]),i=a.b2Transform.MulXV(p,t,c),r=a.b2Transform.MulXV(h,o,d);a.b2Vec2.SubVV(r,i,this.m_axis);const s=this.m_axis.Normalize();return this.m_localPoint.SetZero(),s}if(e.indexA[0]===e.indexA[1]){this.m_type=f.e_faceB;const t=this.m_proxyB.GetVertex(e.indexB[0]),o=this.m_proxyB.GetVertex(e.indexB[1]);a.b2Vec2.CrossVOne(a.b2Vec2.SubVV(o,t,a.b2Vec2.s_t0),this.m_axis).SelfNormalize();const i=a.b2Rot.MulRV(h.q,this.m_axis,u);a.b2Vec2.MidVV(t,o,this.m_localPoint);const r=a.b2Transform.MulXV(h,this.m_localPoint,d),s=this.m_proxyA.GetVertex(e.indexA[0]),n=a.b2Transform.MulXV(p,s,c);let l=a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,r,a.b2Vec2.s_t0),i);return l<0&&(this.m_axis.SelfNeg(),l=-l),l}{this.m_type=f.e_faceA;const t=this.m_proxyA.GetVertex(e.indexA[0]),o=this.m_proxyA.GetVertex(e.indexA[1]);a.b2Vec2.CrossVOne(a.b2Vec2.SubVV(o,t,a.b2Vec2.s_t0),this.m_axis).SelfNormalize();const i=a.b2Rot.MulRV(p.q,this.m_axis,u);a.b2Vec2.MidVV(t,o,this.m_localPoint);const r=a.b2Transform.MulXV(p,this.m_localPoint,c),s=this.m_proxyB.GetVertex(e.indexB[0]),n=a.b2Transform.MulXV(h,s,d);let l=a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,r,a.b2Vec2.s_t0),i);return l<0&&(this.m_axis.SelfNeg(),l=-l),l}}FindMinSeparation(e,t,o){const i=n,r=l;switch(this.m_sweepA.GetTransform(i,o),this.m_sweepB.GetTransform(r,o),this.m_type){case f.e_points:{const o=a.b2Rot.MulTRV(i.q,this.m_axis,m),s=a.b2Rot.MulTRV(r.q,a.b2Vec2.NegV(this.m_axis,a.b2Vec2.s_t0),p);e[0]=this.m_proxyA.GetSupport(o),t[0]=this.m_proxyB.GetSupport(s);const n=this.m_proxyA.GetVertex(e[0]),l=this.m_proxyB.GetVertex(t[0]),u=a.b2Transform.MulXV(i,n,c),h=a.b2Transform.MulXV(r,l,d);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(h,u,a.b2Vec2.s_t0),this.m_axis)}case f.e_faceA:{const o=a.b2Rot.MulRV(i.q,this.m_axis,u),s=a.b2Transform.MulXV(i,this.m_localPoint,c),n=a.b2Rot.MulTRV(r.q,a.b2Vec2.NegV(o,a.b2Vec2.s_t0),p);e[0]=-1,t[0]=this.m_proxyB.GetSupport(n);const l=this.m_proxyB.GetVertex(t[0]),m=a.b2Transform.MulXV(r,l,d);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(m,s,a.b2Vec2.s_t0),o)}case f.e_faceB:{const o=a.b2Rot.MulRV(r.q,this.m_axis,u),s=a.b2Transform.MulXV(r,this.m_localPoint,d),n=a.b2Rot.MulTRV(i.q,a.b2Vec2.NegV(o,a.b2Vec2.s_t0),m);t[0]=-1,e[0]=this.m_proxyA.GetSupport(n);const l=this.m_proxyA.GetVertex(e[0]),p=a.b2Transform.MulXV(i,l,c);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(p,s,a.b2Vec2.s_t0),o)}default:return e[0]=-1,t[0]=-1,0}}Evaluate(e,t,o){const i=n,r=l;switch(this.m_sweepA.GetTransform(i,o),this.m_sweepB.GetTransform(r,o),this.m_type){case f.e_points:{const o=this.m_proxyA.GetVertex(e),s=this.m_proxyB.GetVertex(t),n=a.b2Transform.MulXV(i,o,c),l=a.b2Transform.MulXV(r,s,d);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(l,n,a.b2Vec2.s_t0),this.m_axis)}case f.e_faceA:{const e=a.b2Rot.MulRV(i.q,this.m_axis,u),o=a.b2Transform.MulXV(i,this.m_localPoint,c),s=this.m_proxyB.GetVertex(t),n=a.b2Transform.MulXV(r,s,d);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,o,a.b2Vec2.s_t0),e)}case f.e_faceB:{const t=a.b2Rot.MulRV(r.q,this.m_axis,u),o=a.b2Transform.MulXV(r,this.m_localPoint,d),s=this.m_proxyA.GetVertex(e),n=a.b2Transform.MulXV(i,s,c);return a.b2Vec2.DotVV(a.b2Vec2.SubVV(n,o,a.b2Vec2.s_t0),t)}default:return 0}}}o.b2SeparationFunction=y;const _=new r.b2Timer,g=new s.b2SimplexCache,b=new s.b2DistanceInput,S=new s.b2DistanceOutput,P=new y,B=[0],C=[0],M=new a.b2Sweep,x=new a.b2Sweep;o.b2TimeOfImpact=function(e,t){const r=_.Reset();++o.b2_toiCalls,e.state=h.e_unknown,e.t=t.tMax;const c=t.proxyA,d=t.proxyB,u=a.b2Max(i.b2_maxPolygonVertices,a.b2Max(c.m_count,d.m_count)),m=M.Copy(t.sweepA),p=x.Copy(t.sweepB);m.Normalize(),p.Normalize();const f=t.tMax,y=c.m_radius+d.m_radius,V=a.b2Max(i.b2_linearSlop,y-3*i.b2_linearSlop),I=.25*i.b2_linearSlop;let O=0,w=0;const E=g;E.count=0;const A=b;for(A.proxyA.Copy(t.proxyA),A.proxyB.Copy(t.proxyB),A.useRadii=!1;;){const t=n,i=l;m.GetTransform(t,O),p.GetTransform(i,O),A.transformA.Copy(t),A.transformB.Copy(i);const r=S;if(s.b2Distance(r,E,A),r.distance<=0){e.state=h.e_overlapped,e.t=0;break}if(r.distance<V+I){e.state=h.e_touching,e.t=O;break}const y=P;y.Initialize(E,c,m,d,p,O);let _=!1,g=f,b=0;for(;;){const t=B,i=C;let r=y.FindMinSeparation(t,i,g);if(r>V+I){e.state=h.e_separated,e.t=f,_=!0;break}if(r>V-I){O=g;break}let s=y.Evaluate(t[0],i[0],O);if(s<V-I){e.state=h.e_failed,e.t=O,_=!0;break}if(s<=V+I){e.state=h.e_touching,e.t=O,_=!0;break}let n=0,l=O,c=g;for(;;){let e=0;e=1&n?l+(V-s)*(c-l)/(r-s):.5*(l+c),++n,++o.b2_toiRootIters;const d=y.Evaluate(t[0],i[0],e);if(a.b2Abs(d-V)<I){g=e;break}if(d>V?(l=e,s=d):(c=e,r=d),50===n)break}if(o.b2_toiMaxRootIters=a.b2Max(o.b2_toiMaxRootIters,n),++b===u)break}if(++w,++o.b2_toiIters,_)break;if(20===w){e.state=h.e_failed,e.t=O;break}}o.b2_toiMaxIters=a.b2Max(o.b2_toiMaxIters,w);const R=r.GetMilliseconds();o.b2_toiMaxTime=a.b2Max(o.b2_toiMaxTime,R),o.b2_toiTime+=R},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","../Common/b2Timer":"b2Timer","./b2Distance":"b2Distance"}],b2TimeStep:[function(e,t,o){"use strict";cc._RF.push(t,"88ec4X+kbZPf5AoUJ0JfhyP","b2TimeStep"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2SolverData=o.b2Velocity=o.b2Position=o.b2TimeStep=o.b2Profile=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math");o.b2Profile=class{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}};class r{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}Copy(e){return this.dt=e.dt,this.inv_dt=e.inv_dt,this.dtRatio=e.dtRatio,this.positionIterations=e.positionIterations,this.velocityIterations=e.velocityIterations,this.particleIterations=e.particleIterations,this.warmStarting=e.warmStarting,this}}o.b2TimeStep=r;class s{constructor(){this.c=new a.b2Vec2,this.a=0}static MakeArray(e){return i.b2MakeArray(e,()=>new s)}}o.b2Position=s;class n{constructor(){this.v=new a.b2Vec2,this.w=0}static MakeArray(e){return i.b2MakeArray(e,()=>new n)}}o.b2Velocity=n,o.b2SolverData=class{constructor(){this.step=new r}},cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings"}],b2Timer:[function(e,t,o){"use strict";cc._RF.push(t,"24aebCrlbpLWKoZm6OiH/yG","b2Timer"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2Counter=o.b2Timer=void 0,o.b2Timer=class{constructor(){this.m_start=Date.now()}Reset(){return this.m_start=Date.now(),this}GetMilliseconds(){return Date.now()-this.m_start}},o.b2Counter=class{constructor(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}GetCount(){return this.m_count}GetMinCount(){return this.m_min_count}GetMaxCount(){return this.m_max_count}ResetCount(){const e=this.m_count;return this.m_count=0,e}ResetMinCount(){this.m_min_count=0}ResetMaxCount(){this.m_max_count=0}Increment(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)}Decrement(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)}},cc._RF.pop()},{}],b2VoronoiDiagram:[function(e,t,o){"use strict";cc._RF.push(t,"4d38ae67B5LCYZ1UOf7mM/I","b2VoronoiDiagram"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2VoronoiDiagram_Task=o.b2VoronoiDiagram_Generator=o.b2VoronoiDiagram=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("./b2StackQueue");o.b2VoronoiDiagram=class{constructor(e){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=i.b2MakeArray(e,()=>new s),this.m_generatorCapacity=e}AddGenerator(e,t,o){const i=this.m_generatorBuffer[this.m_generatorCount++];i.center.Copy(e),i.tag=t,i.necessary=o}Generate(e,t){const o=1/e,s=new a.b2Vec2(+i.b2_maxFloat,+i.b2_maxFloat),l=new a.b2Vec2(-i.b2_maxFloat,-i.b2_maxFloat);let c=0;for(let i=0;i<this.m_generatorCount;i++){const e=this.m_generatorBuffer[i];e.necessary&&(a.b2Vec2.MinV(s,e.center,s),a.b2Vec2.MaxV(l,e.center,l),++c)}if(0===c)return this.m_countX=0,void(this.m_countY=0);s.x-=t,s.y-=t,l.x+=t,l.y+=t,this.m_countX=1+Math.floor(o*(l.x-s.x)),this.m_countY=1+Math.floor(o*(l.y-s.y)),this.m_diagram=[];const d=new r.b2StackQueue(4*this.m_countX*this.m_countY);for(let i=0;i<this.m_generatorCount;i++){const e=this.m_generatorBuffer[i];e.center.SelfSub(s).SelfMul(o);const t=Math.floor(e.center.x),a=Math.floor(e.center.y);t>=0&&a>=0&&t<this.m_countX&&a<this.m_countY&&d.Push(new n(t,a,t+a*this.m_countX,e))}for(;!d.Empty();){const e=d.Front(),t=e.m_x,o=e.m_y,i=e.m_i,a=e.m_generator;d.Pop(),this.m_diagram[i]||(this.m_diagram[i]=a,t>0&&d.Push(new n(t-1,o,i-1,a)),o>0&&d.Push(new n(t,o-1,i-this.m_countX,a)),t<this.m_countX-1&&d.Push(new n(t+1,o,i+1,a)),o<this.m_countY-1&&d.Push(new n(t,o+1,i+this.m_countX,a)))}for(let i=0;i<this.m_countY;i++)for(let e=0;e<this.m_countX-1;e++){const t=e+i*this.m_countX,o=this.m_diagram[t],a=this.m_diagram[t+1];o!==a&&(d.Push(new n(e,i,t,a)),d.Push(new n(e+1,i,t+1,o)))}for(let i=0;i<this.m_countY-1;i++)for(let e=0;e<this.m_countX;e++){const t=e+i*this.m_countX,o=this.m_diagram[t],a=this.m_diagram[t+this.m_countX];o!==a&&(d.Push(new n(e,i,t,a)),d.Push(new n(e,i+1,t+this.m_countX,o)))}for(;!d.Empty();){const e=d.Front(),t=e.m_x,o=e.m_y,i=e.m_i,a=e.m_generator;d.Pop();const r=this.m_diagram[i],s=a;if(r!==s){const e=r.center.x-t,a=r.center.y-o,l=s.center.x-t,c=s.center.y-o;e*e+a*a>l*l+c*c&&(this.m_diagram[i]=s,t>0&&d.Push(new n(t-1,o,i-1,s)),o>0&&d.Push(new n(t,o-1,i-this.m_countX,s)),t<this.m_countX-1&&d.Push(new n(t+1,o,i+1,s)),o<this.m_countY-1&&d.Push(new n(t,o+1,i+this.m_countX,s)))}}}GetNodes(e){for(let t=0;t<this.m_countY-1;t++)for(let o=0;o<this.m_countX-1;o++){const i=o+t*this.m_countX,a=this.m_diagram[i],r=this.m_diagram[i+1],s=this.m_diagram[i+this.m_countX],n=this.m_diagram[i+1+this.m_countX];r!==s&&(a!==r&&a!==s&&(a.necessary||r.necessary||s.necessary)&&e(a.tag,r.tag,s.tag),n!==r&&n!==s&&(a.necessary||r.necessary||s.necessary)&&e(r.tag,n.tag,s.tag))}}};class s{constructor(){this.center=new a.b2Vec2,this.tag=0,this.necessary=!1}}o.b2VoronoiDiagram_Generator=s;class n{constructor(e,t,o,i){this.m_x=e,this.m_y=t,this.m_i=o,this.m_generator=i}}o.b2VoronoiDiagram_Task=n,cc._RF.pop()},{"../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","./b2StackQueue":"b2StackQueue"}],b2WeldJoint:[function(e,t,o){"use strict";cc._RF.push(t,"8c81de78v9EZoV3T5CKv2ca","b2WeldJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2WeldJoint=o.b2WeldJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2WeldJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_weldJoint),this.localAnchorA=new a.b2Vec2,this.localAnchorB=new a.b2Vec2,this.referenceAngle=0,this.frequencyHz=0,this.dampingRatio=0}Initialize(e,t,o){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}};class s extends r.b2Joint{constructor(e){super(e),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new a.b2Vec3(0,0,0),this.m_indexA=0,this.m_indexB=0,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new a.b2Mat33,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_K=new a.b2Mat33,this.m_frequencyHz=i.b2Maybe(e.frequencyHz,0),this.m_dampingRatio=i.b2Maybe(e.dampingRatio,0),this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,a.b2Vec2.ZERO)),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,a.b2Vec2.ZERO)),this.m_referenceAngle=i.b2Maybe(e.referenceAngle,0),this.m_impulse.SetZero()}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let r=e.velocities[this.m_indexA].w;const n=e.positions[this.m_indexB].a,l=e.velocities[this.m_indexB].v;let c=e.velocities[this.m_indexB].w;const d=this.m_qA.SetAngle(t),u=this.m_qB.SetAngle(n);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),a.b2Rot.MulRV(d,this.m_lalcA,this.m_rA),a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),a.b2Rot.MulRV(u,this.m_lalcB,this.m_rB);const m=this.m_invMassA,p=this.m_invMassB,h=this.m_invIA,f=this.m_invIB,y=this.m_K;if(y.ex.x=m+p+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*f,y.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*f,y.ez.x=-this.m_rA.y*h-this.m_rB.y*f,y.ex.y=y.ey.x,y.ey.y=m+p+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*f,y.ez.y=this.m_rA.x*h+this.m_rB.x*f,y.ex.z=y.ez.x,y.ey.z=y.ez.y,y.ez.z=h+f,this.m_frequencyHz>0){y.GetInverse22(this.m_mass);let o=h+f;const a=o>0?1/o:0,r=n-t-this.m_referenceAngle,s=2*i.b2_pi*this.m_frequencyHz,l=2*a*this.m_dampingRatio*s,c=a*s*s,d=e.step.dt;this.m_gamma=d*(l+d*c),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=r*d*c*this.m_gamma,o+=this.m_gamma,this.m_mass.ez.z=0!==o?1/o:0}else y.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0;if(e.step.warmStarting){this.m_impulse.SelfMul(e.step.dtRatio);const t=s.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);o.SelfMulSub(m,t),r-=h*(a.b2Vec2.CrossVV(this.m_rA,t)+this.m_impulse.z),l.SelfMulAdd(p,t),c+=f*(a.b2Vec2.CrossVV(this.m_rB,t)+this.m_impulse.z)}else this.m_impulse.SetZero();e.velocities[this.m_indexA].w=r,e.velocities[this.m_indexB].w=c}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const i=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const n=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,d=this.m_invIB;if(this.m_frequencyHz>0){const e=r-o,u=-this.m_mass.ez.z*(e+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,o-=c*u,r+=d*u;const m=a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(i,r,this.m_rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(t,o,this.m_rA,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_Cdot1),p=a.b2Mat33.MulM33XY(this.m_mass,m.x,m.y,s.SolveVelocityConstraints_s_impulse1).SelfNeg();this.m_impulse.x+=p.x,this.m_impulse.y+=p.y;const h=p;t.SelfMulSub(n,h),o-=c*a.b2Vec2.CrossVV(this.m_rA,h),i.SelfMulAdd(l,h),r+=d*a.b2Vec2.CrossVV(this.m_rB,h)}else{const e=a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(i,r,this.m_rB,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(t,o,this.m_rA,a.b2Vec2.s_t1),s.SolveVelocityConstraints_s_Cdot1),u=r-o,m=a.b2Mat33.MulM33XYZ(this.m_mass,e.x,e.y,u,s.SolveVelocityConstraints_s_impulse).SelfNeg();this.m_impulse.SelfAdd(m);const p=s.SolveVelocityConstraints_s_P.Set(m.x,m.y);t.SelfMulSub(n,p),o-=c*(a.b2Vec2.CrossVV(this.m_rA,p)+m.z),i.SelfMulAdd(l,p),r+=d*(a.b2Vec2.CrossVV(this.m_rB,p)+m.z)}e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=r}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n),d=this.m_invMassA,u=this.m_invMassB,m=this.m_invIA,p=this.m_invIB;a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const h=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const f=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB);let y,_;const g=this.m_K;if(g.ex.x=d+u+h.y*h.y*m+f.y*f.y*p,g.ey.x=-h.y*h.x*m-f.y*f.x*p,g.ez.x=-h.y*m-f.y*p,g.ex.y=g.ey.x,g.ey.y=d+u+h.x*h.x*m+f.x*f.x*p,g.ez.y=h.x*m+f.x*p,g.ex.z=g.ez.x,g.ey.z=g.ez.y,g.ez.z=m+p,this.m_frequencyHz>0){const e=a.b2Vec2.SubVV(a.b2Vec2.AddVV(r,f,a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,h,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_C1);y=e.Length(),_=0;const i=g.Solve22(e.x,e.y,s.SolvePositionConstraints_s_P).SelfNeg();t.SelfMulSub(d,i),o-=m*a.b2Vec2.CrossVV(h,i),r.SelfMulAdd(u,i),n+=p*a.b2Vec2.CrossVV(f,i)}else{const e=a.b2Vec2.SubVV(a.b2Vec2.AddVV(r,f,a.b2Vec2.s_t0),a.b2Vec2.AddVV(t,h,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_C1),i=n-o-this.m_referenceAngle;y=e.Length(),_=a.b2Abs(i);const l=g.Solve33(e.x,e.y,i,s.SolvePositionConstraints_s_impulse).SelfNeg(),c=s.SolvePositionConstraints_s_P.Set(l.x,l.y);t.SelfMulSub(d,c),o-=m*(a.b2Vec2.CrossVV(this.m_rA,c)+l.z),r.SelfMulAdd(u,c),n+=p*(a.b2Vec2.CrossVV(this.m_rB,c)+l.z)}return e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,y<=i.b2_linearSlop&&_<=i.b2_angularSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse.x,t.y=e*this.m_impulse.y,t}GetReactionTorque(e){return e*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetFrequency(e){this.m_frequencyHz=e}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(e){this.m_dampingRatio=e}GetDampingRatio(){return this.m_dampingRatio}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),e("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),e("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2WeldJoint=s,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_Cdot1=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse1=new a.b2Vec2,s.SolveVelocityConstraints_s_impulse=new a.b2Vec3,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolvePositionConstraints_s_C1=new a.b2Vec2,s.SolvePositionConstraints_s_P=new a.b2Vec2,s.SolvePositionConstraints_s_impulse=new a.b2Vec3,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2WheelJoint:[function(e,t,o){"use strict";cc._RF.push(t,"6ea12jDYA1DDqv5pucK5Nz9","b2WheelJoint"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2WheelJoint=o.b2WheelJointDef=void 0;const i=e("../../Common/b2Settings"),a=e("../../Common/b2Math"),r=e("./b2Joint");o.b2WheelJointDef=class extends r.b2JointDef{constructor(){super(r.b2JointType.e_wheelJoint),this.localAnchorA=new a.b2Vec2(0,0),this.localAnchorB=new a.b2Vec2(0,0),this.localAxisA=new a.b2Vec2(1,0),this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.frequencyHz=2,this.dampingRatio=.7}Initialize(e,t,o,i){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.bodyA.GetLocalVector(i,this.localAxisA)}};class s extends r.b2Joint{constructor(e){super(e),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_localAnchorA=new a.b2Vec2,this.m_localAnchorB=new a.b2Vec2,this.m_localXAxisA=new a.b2Vec2,this.m_localYAxisA=new a.b2Vec2,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new a.b2Vec2,this.m_localCenterB=new a.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new a.b2Vec2,this.m_ay=new a.b2Vec2,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_qA=new a.b2Rot,this.m_qB=new a.b2Rot,this.m_lalcA=new a.b2Vec2,this.m_lalcB=new a.b2Vec2,this.m_rA=new a.b2Vec2,this.m_rB=new a.b2Vec2,this.m_frequencyHz=i.b2Maybe(e.frequencyHz,2),this.m_dampingRatio=i.b2Maybe(e.dampingRatio,.7),this.m_localAnchorA.Copy(i.b2Maybe(e.localAnchorA,a.b2Vec2.ZERO)),this.m_localAnchorB.Copy(i.b2Maybe(e.localAnchorB,a.b2Vec2.ZERO)),this.m_localXAxisA.Copy(i.b2Maybe(e.localAxisA,a.b2Vec2.UNITX)),a.b2Vec2.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_maxMotorTorque=i.b2Maybe(e.maxMotorTorque,0),this.m_motorSpeed=i.b2Maybe(e.motorSpeed,0),this.m_enableMotor=i.b2Maybe(e.enableMotor,!1),this.m_ax.SetZero(),this.m_ay.SetZero()}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetSpringFrequencyHz(e){this.m_frequencyHz=e}GetSpringFrequencyHz(){return this.m_frequencyHz}SetSpringDampingRatio(e){this.m_dampingRatio=e}GetSpringDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=this.m_invMassA,o=this.m_invMassB,r=this.m_invIA,n=this.m_invIB,l=e.positions[this.m_indexA].c,c=e.positions[this.m_indexA].a,d=e.velocities[this.m_indexA].v;let u=e.velocities[this.m_indexA].w;const m=e.positions[this.m_indexB].c,p=e.positions[this.m_indexB].a,h=e.velocities[this.m_indexB].v;let f=e.velocities[this.m_indexB].w;const y=this.m_qA.SetAngle(c),_=this.m_qB.SetAngle(p);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const g=a.b2Rot.MulRV(y,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const b=a.b2Rot.MulRV(_,this.m_lalcB,this.m_rB),S=a.b2Vec2.SubVV(a.b2Vec2.AddVV(m,b,a.b2Vec2.s_t0),a.b2Vec2.AddVV(l,g,a.b2Vec2.s_t1),s.InitVelocityConstraints_s_d);if(a.b2Rot.MulRV(y,this.m_localYAxisA,this.m_ay),this.m_sAy=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(S,g,a.b2Vec2.s_t0),this.m_ay),this.m_sBy=a.b2Vec2.CrossVV(b,this.m_ay),this.m_mass=t+o+r*this.m_sAy*this.m_sAy+n*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){a.b2Rot.MulRV(y,this.m_localXAxisA,this.m_ax),this.m_sAx=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(S,g,a.b2Vec2.s_t0),this.m_ax),this.m_sBx=a.b2Vec2.CrossVV(b,this.m_ax);const s=t+o+r*this.m_sAx*this.m_sAx+n*this.m_sBx*this.m_sBx;if(s>0){this.m_springMass=1/s;const t=a.b2Vec2.DotVV(S,this.m_ax),o=2*i.b2_pi*this.m_frequencyHz,r=2*this.m_springMass*this.m_dampingRatio*o,n=this.m_springMass*o*o,l=e.step.dt;this.m_gamma=l*(r+l*n),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=t*l*n*this.m_gamma,this.m_springMass=s+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=r+n,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),e.step.warmStarting){this.m_impulse*=e.step.dtRatio,this.m_springImpulse*=e.step.dtRatio,this.m_motorImpulse*=e.step.dtRatio;const t=a.b2Vec2.AddVV(a.b2Vec2.MulSV(this.m_impulse,this.m_ay,a.b2Vec2.s_t0),a.b2Vec2.MulSV(this.m_springImpulse,this.m_ax,a.b2Vec2.s_t1),s.InitVelocityConstraints_s_P),o=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,i=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;d.SelfMulSub(this.m_invMassA,t),u-=this.m_invIA*o,h.SelfMulAdd(this.m_invMassB,t),f+=this.m_invIB*i}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;e.velocities[this.m_indexA].w=u,e.velocities[this.m_indexB].w=f}SolveVelocityConstraints(e){const t=this.m_invMassA,o=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,n=e.velocities[this.m_indexA].v;let l=e.velocities[this.m_indexA].w;const c=e.velocities[this.m_indexB].v;let d=e.velocities[this.m_indexB].w;{const e=a.b2Vec2.DotVV(this.m_ax,a.b2Vec2.SubVV(c,n,a.b2Vec2.s_t0))+this.m_sBx*d-this.m_sAx*l,u=-this.m_springMass*(e+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;const m=a.b2Vec2.MulSV(u,this.m_ax,s.SolveVelocityConstraints_s_P),p=u*this.m_sAx,h=u*this.m_sBx;n.SelfMulSub(t,m),l-=i*p,c.SelfMulAdd(o,m),d+=r*h}{const t=d-l-this.m_motorSpeed;let o=-this.m_motorMass*t;const s=this.m_motorImpulse,n=e.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=a.b2Clamp(this.m_motorImpulse+o,-n,n),l-=i*(o=this.m_motorImpulse-s),d+=r*o}{const e=a.b2Vec2.DotVV(this.m_ay,a.b2Vec2.SubVV(c,n,a.b2Vec2.s_t0))+this.m_sBy*d-this.m_sAy*l,u=-this.m_mass*e;this.m_impulse+=u;const m=a.b2Vec2.MulSV(u,this.m_ay,s.SolveVelocityConstraints_s_P),p=u*this.m_sAy,h=u*this.m_sBy;n.SelfMulSub(t,m),l-=i*p,c.SelfMulAdd(o,m),d+=r*h}e.velocities[this.m_indexA].w=l,e.velocities[this.m_indexB].w=d}SolvePositionConstraints(e){const t=e.positions[this.m_indexA].c;let o=e.positions[this.m_indexA].a;const r=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const l=this.m_qA.SetAngle(o),c=this.m_qB.SetAngle(n);a.b2Vec2.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const d=a.b2Rot.MulRV(l,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=a.b2Rot.MulRV(c,this.m_lalcB,this.m_rB),m=a.b2Vec2.AddVV(a.b2Vec2.SubVV(r,t,a.b2Vec2.s_t0),a.b2Vec2.SubVV(u,d,a.b2Vec2.s_t1),s.SolvePositionConstraints_s_d),p=a.b2Rot.MulRV(l,this.m_localYAxisA,this.m_ay),h=a.b2Vec2.CrossVV(a.b2Vec2.AddVV(m,d,a.b2Vec2.s_t0),p),f=a.b2Vec2.CrossVV(u,p),y=a.b2Vec2.DotVV(m,this.m_ay),_=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let g;g=0!==_?-y/_:0;const b=a.b2Vec2.MulSV(g,p,s.SolvePositionConstraints_s_P),S=g*h,P=g*f;return t.SelfMulSub(this.m_invMassA,b),o-=this.m_invIA*S,r.SelfMulAdd(this.m_invMassB,b),n+=this.m_invIB*P,e.positions[this.m_indexA].a=o,e.positions[this.m_indexB].a=n,a.b2Abs(y)<=i.b2_linearSlop}GetDefinition(e){return e}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),t.y=e*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),t}GetReactionTorque(e){return e*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){return this.GetPrismaticJointTranslation()}GetJointLinearSpeed(){return this.GetPrismaticJointSpeed()}GetJointAngle(){return this.GetRevoluteJointAngle()}GetJointAngularSpeed(){return this.GetRevoluteJointSpeed()}GetPrismaticJointTranslation(){const e=this.m_bodyA,t=this.m_bodyB,o=e.GetWorldPoint(this.m_localAnchorA,new a.b2Vec2),i=t.GetWorldPoint(this.m_localAnchorB,new a.b2Vec2),r=a.b2Vec2.SubVV(i,o,new a.b2Vec2),s=e.GetWorldVector(this.m_localXAxisA,new a.b2Vec2);return a.b2Vec2.DotVV(r,s)}GetPrismaticJointSpeed(){const e=this.m_bodyA,t=this.m_bodyB;a.b2Vec2.SubVV(this.m_localAnchorA,e.m_sweep.localCenter,this.m_lalcA);const o=a.b2Rot.MulRV(e.m_xf.q,this.m_lalcA,this.m_rA);a.b2Vec2.SubVV(this.m_localAnchorB,t.m_sweep.localCenter,this.m_lalcB);const i=a.b2Rot.MulRV(t.m_xf.q,this.m_lalcB,this.m_rB),r=a.b2Vec2.AddVV(e.m_sweep.c,o,a.b2Vec2.s_t0),s=a.b2Vec2.AddVV(t.m_sweep.c,i,a.b2Vec2.s_t1),n=a.b2Vec2.SubVV(s,r,a.b2Vec2.s_t2),l=e.GetWorldVector(this.m_localXAxisA,new a.b2Vec2),c=e.m_linearVelocity,d=t.m_linearVelocity,u=e.m_angularVelocity,m=t.m_angularVelocity;return a.b2Vec2.DotVV(n,a.b2Vec2.CrossSV(u,l,a.b2Vec2.s_t0))+a.b2Vec2.DotVV(l,a.b2Vec2.SubVV(a.b2Vec2.AddVCrossSV(d,m,i,a.b2Vec2.s_t0),a.b2Vec2.AddVCrossSV(c,u,o,a.b2Vec2.s_t1),a.b2Vec2.s_t0))}GetRevoluteJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetRevoluteJointSpeed(){const e=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-e}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(e){e!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e)}SetMotorSpeed(e){e!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e)}SetMaxMotorTorque(e){e!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=e)}GetMotorTorque(e){return e*this.m_motorImpulse}Dump(e){const t=this.m_bodyA.m_islandIndex,o=this.m_bodyB.m_islandIndex;e("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),e("  jd.bodyA = bodies[%d];\n",t),e("  jd.bodyB = bodies[%d];\n",o),e("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),e("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),e("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),e("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),e("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),e("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),e("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),e("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),e("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),e("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}o.b2WheelJoint=s,s.InitVelocityConstraints_s_d=new a.b2Vec2,s.InitVelocityConstraints_s_P=new a.b2Vec2,s.SolveVelocityConstraints_s_P=new a.b2Vec2,s.SolvePositionConstraints_s_d=new a.b2Vec2,s.SolvePositionConstraints_s_P=new a.b2Vec2,cc._RF.pop()},{"../../Common/b2Math":"b2Math","../../Common/b2Settings":"b2Settings","./b2Joint":"b2Joint"}],b2WorldCallbacks:[function(e,t,o){"use strict";cc._RF.push(t,"21126HdY0hA2IaoSnOO6Xxv","b2WorldCallbacks"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2RayCastCallback=o.b2QueryCallback=o.b2ContactListener=o.b2ContactImpulse=o.b2ContactFilter=o.b2DestructionListener=void 0;const i=e("../Common/b2Settings"),a=e("./b2Body");o.b2DestructionListener=class{SayGoodbyeJoint(e){}SayGoodbyeFixture(e){}SayGoodbyeParticleGroup(e){}SayGoodbyeParticle(e,t){}};class r{ShouldCollide(e,t){const o=e.GetBody(),i=t.GetBody();if(i.GetType()===a.b2BodyType.b2_staticBody&&o.GetType()===a.b2BodyType.b2_staticBody)return!1;if(!i.ShouldCollideConnected(o))return!1;const r=e.GetFilterData(),s=t.GetFilterData();return r.groupIndex===s.groupIndex&&0!==r.groupIndex?r.groupIndex>0:0!=(r.maskBits&s.categoryBits)&&0!=(r.categoryBits&s.maskBits)}ShouldCollideFixtureParticle(e,t,o){return!0}ShouldCollideParticleParticle(e,t,o){return!0}}o.b2ContactFilter=r,r.b2_defaultFilter=new r,o.b2ContactImpulse=class{constructor(){this.normalImpulses=i.b2MakeNumberArray(i.b2_maxManifoldPoints),this.tangentImpulses=i.b2MakeNumberArray(i.b2_maxManifoldPoints),this.count=0}};class s{BeginContact(e){}EndContact(e){}BeginContactFixtureParticle(e,t){}EndContactFixtureParticle(e,t){}BeginContactParticleParticle(e,t){}EndContactParticleParticle(e,t){}PreSolve(e,t){}PostSolve(e,t){}}o.b2ContactListener=s,s.b2_defaultListener=new s,o.b2QueryCallback=class{ReportFixture(e){return!0}ReportParticle(e,t){return!1}ShouldQueryParticleSystem(e){return!0}},o.b2RayCastCallback=class{ReportFixture(e,t,o,i){return i}ReportParticle(e,t,o,i,a){return 0}ShouldQueryParticleSystem(e){return!0}},cc._RF.pop()},{"../Common/b2Settings":"b2Settings","./b2Body":"b2Body"}],b2World:[function(e,t,o){"use strict";cc._RF.push(t,"bf24ayjAvxLab4vn9ywIv1Q","b2World"),Object.defineProperty(o,"__esModule",{value:!0}),o.b2World=void 0;const i=e("../Common/b2Settings"),a=e("../Common/b2Math"),r=e("../Common/b2Timer"),s=e("../Common/b2Draw"),n=e("../Collision/b2Collision"),l=e("../Collision/b2TimeOfImpact"),c=e("../Collision/Shapes/b2Shape"),d=e("./Joints/b2Joint"),u=e("./Joints/b2AreaJoint"),m=e("./Joints/b2DistanceJoint"),p=e("./Joints/b2FrictionJoint"),h=e("./Joints/b2GearJoint"),f=e("./Joints/b2MotorJoint"),y=e("./Joints/b2MouseJoint"),_=e("./Joints/b2PrismaticJoint"),g=e("./Joints/b2PulleyJoint"),b=e("./Joints/b2RevoluteJoint"),S=e("./Joints/b2RopeJoint"),P=e("./Joints/b2WeldJoint"),B=e("./Joints/b2WheelJoint"),C=e("./b2Body"),M=e("./b2ContactManager"),x=e("./b2Island"),V=e("./b2TimeStep"),I=e("./b2WorldCallbacks"),O=e("./b2WorldCallbacks"),w=e("../Common/b2Settings"),E=e("../Particle/b2Particle"),A=e("../Particle/b2ParticleSystem");class R{constructor(e){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new M.b2ContactManager,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new a.b2Vec2,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new V.b2Profile,this.m_island=new x.b2Island,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(e)}SetDestructionListener(e){this.m_destructionListener=e}SetContactFilter(e){this.m_contactManager.m_contactFilter=e}SetContactListener(e){this.m_contactManager.m_contactListener=e}SetDebugDraw(e){this.m_debugDraw=e}CreateBody(e={}){if(this.IsLocked())throw new Error;const t=new C.b2Body(e,this);return t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t}DestroyBody(e){if(this.IsLocked())throw new Error;let t=e.m_jointList;for(;t;){const o=t;t=t.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(o.joint),this.DestroyJoint(o.joint),e.m_jointList=t}e.m_jointList=null;let o=e.m_controllerList;for(;o;){const t=o;o=o.nextController,t.controller.RemoveBody(e)}let i=e.m_contactList;for(;i;){const e=i;i=i.next,this.m_contactManager.Destroy(e.contact)}e.m_contactList=null;let a=e.m_fixtureList;for(;a;){const t=a;a=a.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(t),t.DestroyProxies(),t.Reset(),e.m_fixtureList=a,e.m_fixtureCount-=1}e.m_fixtureList=null,e.m_fixtureCount=0,e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_bodyList&&(this.m_bodyList=e.m_next),--this.m_bodyCount}static _Joint_Create(e){switch(e.type){case d.b2JointType.e_distanceJoint:return new m.b2DistanceJoint(e);case d.b2JointType.e_mouseJoint:return new y.b2MouseJoint(e);case d.b2JointType.e_prismaticJoint:return new _.b2PrismaticJoint(e);case d.b2JointType.e_revoluteJoint:return new b.b2RevoluteJoint(e);case d.b2JointType.e_pulleyJoint:return new g.b2PulleyJoint(e);case d.b2JointType.e_gearJoint:return new h.b2GearJoint(e);case d.b2JointType.e_wheelJoint:return new B.b2WheelJoint(e);case d.b2JointType.e_weldJoint:return new P.b2WeldJoint(e);case d.b2JointType.e_frictionJoint:return new p.b2FrictionJoint(e);case d.b2JointType.e_ropeJoint:return new S.b2RopeJoint(e);case d.b2JointType.e_motorJoint:return new f.b2MotorJoint(e);case d.b2JointType.e_areaJoint:return new u.b2AreaJoint(e)}throw new Error}static _Joint_Destroy(e){}CreateJoint(e){if(this.IsLocked())throw new Error;const t=R._Joint_Create(e);t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB;const o=t.m_bodyA,i=t.m_bodyB;if(!t.m_collideConnected){let e=i.GetContactList();for(;e;)e.other===o&&e.contact.FlagForFiltering(),e=e.next}return t}DestroyJoint(e){if(this.IsLocked())throw new Error;e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_jointList&&(this.m_jointList=e.m_next);const t=e.m_bodyA,o=e.m_bodyB,i=e.m_collideConnected;if(t.SetAwake(!0),o.SetAwake(!0),e.m_edgeA.prev&&(e.m_edgeA.prev.next=e.m_edgeA.next),e.m_edgeA.next&&(e.m_edgeA.next.prev=e.m_edgeA.prev),e.m_edgeA===t.m_jointList&&(t.m_jointList=e.m_edgeA.next),e.m_edgeA.Reset(),e.m_edgeB.prev&&(e.m_edgeB.prev.next=e.m_edgeB.next),e.m_edgeB.next&&(e.m_edgeB.next.prev=e.m_edgeB.prev),e.m_edgeB===o.m_jointList&&(o.m_jointList=e.m_edgeB.next),e.m_edgeB.Reset(),R._Joint_Destroy(e),--this.m_jointCount,!i){let e=o.GetContactList();for(;e;)e.other===t&&e.contact.FlagForFiltering(),e=e.next}}CreateParticleSystem(e){if(this.IsLocked())throw new Error;const t=new A.b2ParticleSystem(e,this);return t.m_prev=null,t.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=t),this.m_particleSystemList=t,t}DestroyParticleSystem(e){if(this.IsLocked())throw new Error;e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_particleSystemList&&(this.m_particleSystemList=e.m_next)}CalculateReasonableParticleIterations(e){return null===this.m_particleSystemList?1:E.b2CalculateParticleIterations(this.m_gravity.Length(),function(e){let t=w.b2_maxFloat;for(let o=e.GetParticleSystemList();null!==o;o=o.m_next)t=a.b2Min(t,o.GetRadius());return t}(this),e)}Step(e,t,o,i=this.CalculateReasonableParticleIterations(e)){const a=R.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;const r=R.Step_s_step;r.dt=e,r.velocityIterations=t,r.positionIterations=o,r.particleIterations=i,r.inv_dt=e>0?1/e:0,r.dtRatio=this.m_inv_dt0*e,r.warmStarting=this.m_warmStarting;const s=R.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=s.GetMilliseconds(),this.m_stepComplete&&r.dt>0){const e=R.Step_s_timer.Reset();for(let t=this.m_particleSystemList;t;t=t.m_next)t.Solve(r);this.Solve(r),this.m_profile.solve=e.GetMilliseconds()}if(this.m_continuousPhysics&&r.dt>0){const e=R.Step_s_timer.Reset();this.SolveTOI(r),this.m_profile.solveTOI=e.GetMilliseconds()}r.dt>0&&(this.m_inv_dt0=r.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=a.GetMilliseconds()}ClearForces(){for(let e=this.m_bodyList;e;e=e.m_next)e.m_force.SetZero(),e.m_torque=0}DrawParticleSystem(e){if(null===this.m_debugDraw)return;const t=e.GetParticleCount();if(t){const o=e.GetRadius(),i=e.GetPositionBuffer();if(e.m_colorBuffer.data){const a=e.GetColorBuffer();this.m_debugDraw.DrawParticles(i,o,a,t)}else this.m_debugDraw.DrawParticles(i,o,null,t)}}DrawDebugData(){if(null===this.m_debugDraw)return;const e=this.m_debugDraw.GetFlags(),t=R.DrawDebugData_s_color.SetRGB(0,0,0);if(e&s.b2DrawFlags.e_shapeBit)for(let o=this.m_bodyList;o;o=o.m_next){const e=o.m_xf;this.m_debugDraw.PushTransform(e);for(let i=o.GetFixtureList();i;i=i.m_next)o.IsActive()?o.GetType()===C.b2BodyType.b2_staticBody?(t.SetRGB(.5,.9,.5),this.DrawShape(i,t)):o.GetType()===C.b2BodyType.b2_kinematicBody?(t.SetRGB(.5,.5,.9),this.DrawShape(i,t)):o.IsAwake()?(t.SetRGB(.9,.7,.7),this.DrawShape(i,t)):(t.SetRGB(.6,.6,.6),this.DrawShape(i,t)):(t.SetRGB(.5,.5,.3),this.DrawShape(i,t));this.m_debugDraw.PopTransform(e)}if(e&s.b2DrawFlags.e_particleBit)for(let o=this.m_particleSystemList;o;o=o.m_next)this.DrawParticleSystem(o);if(e&s.b2DrawFlags.e_jointBit)for(let o=this.m_jointList;o;o=o.m_next)this.DrawJoint(o);if(e&s.b2DrawFlags.e_aabbBit){t.SetRGB(.9,.3,.9);const e=R.DrawDebugData_s_vs;for(let o=this.m_bodyList;o;o=o.m_next)if(o.IsActive())for(let i=o.GetFixtureList();i;i=i.m_next)for(let o=0;o<i.m_proxyCount;++o){const a=i.m_proxies[o].treeNode.aabb;e[0].Set(a.lowerBound.x,a.lowerBound.y),e[1].Set(a.upperBound.x,a.lowerBound.y),e[2].Set(a.upperBound.x,a.upperBound.y),e[3].Set(a.lowerBound.x,a.upperBound.y),this.m_debugDraw.DrawPolygon(e,4,t)}}if(e&s.b2DrawFlags.e_centerOfMassBit)for(let o=this.m_bodyList;o;o=o.m_next){const e=R.DrawDebugData_s_xf;e.q.Copy(o.m_xf.q),e.p.Copy(o.GetWorldCenter()),this.m_debugDraw.DrawTransform(e)}if(e&s.b2DrawFlags.e_controllerBit)for(let o=this.m_controllerList;o;o=o.m_next)o.Draw(this.m_debugDraw)}QueryAABB(...e){e[0]instanceof I.b2QueryCallback?this._QueryAABB(e[0],e[1]):this._QueryAABB(null,e[0],e[1])}_QueryAABB(e,t,o){if(this.m_contactManager.m_broadPhase.Query(t,t=>{const i=t.userData.fixture;return e?e.ReportFixture(i):!o||o(i)}),e instanceof I.b2QueryCallback)for(let i=this.m_particleSystemList;i;i=i.m_next)e.ShouldQueryParticleSystem(i)&&i.QueryAABB(e,t)}QueryAllAABB(e,t=[]){return this.QueryAABB(e,e=>(t.push(e),!0)),t}QueryPointAABB(...e){e[0]instanceof I.b2QueryCallback?this._QueryPointAABB(e[0],e[1]):this._QueryPointAABB(null,e[0],e[1])}_QueryPointAABB(e,t,o){if(this.m_contactManager.m_broadPhase.QueryPoint(t,t=>{const i=t.userData.fixture;return e?e.ReportFixture(i):!o||o(i)}),e instanceof I.b2QueryCallback)for(let i=this.m_particleSystemList;i;i=i.m_next)e.ShouldQueryParticleSystem(i)&&i.QueryPointAABB(e,t)}QueryAllPointAABB(e,t=[]){return this.QueryPointAABB(e,e=>(t.push(e),!0)),t}QueryFixtureShape(...e){e[0]instanceof I.b2QueryCallback?this._QueryFixtureShape(e[0],e[1],e[2],e[3]):this._QueryFixtureShape(null,e[0],e[1],e[2],e[3])}_QueryFixtureShape(e,t,o,i,a){const r=R.QueryFixtureShape_s_aabb;if(t.ComputeAABB(r,i,o),this.m_contactManager.m_broadPhase.Query(r,r=>{const s=r.userData,l=s.fixture;if(n.b2TestOverlapShape(t,o,l.GetShape(),s.childIndex,i,l.GetBody().GetTransform())){if(e)return e.ReportFixture(l);if(a)return a(l)}return!0}),e instanceof I.b2QueryCallback)for(let s=this.m_particleSystemList;s;s=s.m_next)e.ShouldQueryParticleSystem(s)&&s.QueryAABB(e,r)}QueryAllFixtureShape(e,t,o,i=[]){return this.QueryFixtureShape(e,t,o,e=>(i.push(e),!0)),i}QueryFixturePoint(...e){e[0]instanceof I.b2QueryCallback?this._QueryFixturePoint(e[0],e[1]):this._QueryFixturePoint(null,e[0],e[1])}_QueryFixturePoint(e,t,o){if(this.m_contactManager.m_broadPhase.QueryPoint(t,i=>{const a=i.userData.fixture;if(a.TestPoint(t)){if(e)return e.ReportFixture(a);if(o)return o(a)}return!0}),e)for(let i=this.m_particleSystemList;i;i=i.m_next)e.ShouldQueryParticleSystem(i)&&i.QueryPointAABB(e,t)}QueryAllFixturePoint(e,t=[]){return this.QueryFixturePoint(e,e=>(t.push(e),!0)),t}RayCast(...e){e[0]instanceof O.b2RayCastCallback?this._RayCast(e[0],e[1],e[2]):this._RayCast(null,e[0],e[1],e[2])}_RayCast(e,t,o,i){const a=R.RayCast_s_input;if(a.maxFraction=1,a.p1.Copy(t),a.p2.Copy(o),this.m_contactManager.m_broadPhase.RayCast(a,(a,r)=>{const s=r.userData,n=s.fixture,l=s.childIndex,c=R.RayCast_s_output;if(n.RayCast(c,a,l)){const a=c.fraction,r=R.RayCast_s_point;if(r.Set((1-a)*t.x+a*o.x,(1-a)*t.y+a*o.y),e)return e.ReportFixture(n,r,c.normal,a);if(i)return i(n,r,c.normal,a)}return a.maxFraction}),e)for(let r=this.m_particleSystemList;r;r=r.m_next)e.ShouldQueryParticleSystem(r)&&r.RayCast(e,t,o)}RayCastOne(e,t){let o=null,i=1;return this.RayCast(e,t,(e,t,a,r)=>(r<i&&(i=r,o=e),i)),o}RayCastAll(e,t,o=[]){return this.RayCast(e,t,e=>(o.push(e),1)),o}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetParticleSystemList(){return this.m_particleSystemList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(e){if(e!==this.m_allowSleep&&(this.m_allowSleep=e,!this.m_allowSleep))for(let t=this.m_bodyList;t;t=t.m_next)t.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(e){this.m_warmStarting=e}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(e){this.m_continuousPhysics=e}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(e){this.m_subStepping=e}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(e,t=!0){if(!a.b2Vec2.IsEqualToV(this.m_gravity,e)&&(this.m_gravity.Copy(e),t))for(let o=this.m_bodyList;o;o=o.m_next)o.SetAwake(!0)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(e){this.m_clearForces=e}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(e){if(this.IsLocked())throw new Error;for(let t=this.m_bodyList;t;t=t.m_next)t.m_xf.p.SelfSub(e),t.m_sweep.c0.SelfSub(e),t.m_sweep.c.SelfSub(e);for(let t=this.m_jointList;t;t=t.m_next)t.ShiftOrigin(e);this.m_contactManager.m_broadPhase.ShiftOrigin(e)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Dump(e){if(this.m_locked)return;e("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),e("this.m_world.SetGravity(g);\n"),e("const bodies: b2Body[] = [];\n"),e("const joints: b2Joint[] = [];\n");let t=0;for(let o=this.m_bodyList;o;o=o.m_next)o.m_islandIndex=t,o.Dump(e),++t;t=0;for(let o=this.m_jointList;o;o=o.m_next)o.m_index=t,++t;for(let o=this.m_jointList;o;o=o.m_next)o.m_type!==d.b2JointType.e_gearJoint&&(e("{\n"),o.Dump(e),e("}\n"));for(let o=this.m_jointList;o;o=o.m_next)o.m_type===d.b2JointType.e_gearJoint&&(e("{\n"),o.Dump(e),e("}\n"))}DrawJoint(e){if(null===this.m_debugDraw)return;const t=e.GetBodyA(),o=e.GetBodyB(),i=t.m_xf,a=o.m_xf,r=i.p,s=a.p,n=e.GetAnchorA(R.DrawJoint_s_p1),l=e.GetAnchorB(R.DrawJoint_s_p2),c=R.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(e.m_type){case d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(n,l,c);break;case d.b2JointType.e_pulleyJoint:{const t=e,o=t.GetGroundAnchorA(),i=t.GetGroundAnchorB();this.m_debugDraw.DrawSegment(o,n,c),this.m_debugDraw.DrawSegment(i,l,c),this.m_debugDraw.DrawSegment(o,i,c);break}case d.b2JointType.e_mouseJoint:{const e=R.DrawJoint_s_c;e.Set(0,1,0),this.m_debugDraw.DrawPoint(n,4,e),this.m_debugDraw.DrawPoint(l,4,e),e.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(n,l,e);break}default:this.m_debugDraw.DrawSegment(r,n,c),this.m_debugDraw.DrawSegment(n,l,c),this.m_debugDraw.DrawSegment(s,l,c)}}DrawShape(e,t){if(null===this.m_debugDraw)return;const o=e.GetShape();switch(o.m_type){case c.b2ShapeType.e_circleShape:{const e=o,i=e.m_p,r=e.m_radius,s=a.b2Vec2.UNITX;this.m_debugDraw.DrawSolidCircle(i,r,s,t);break}case c.b2ShapeType.e_edgeShape:{const e=o,i=e.m_vertex1,a=e.m_vertex2;this.m_debugDraw.DrawSegment(i,a,t);break}case c.b2ShapeType.e_chainShape:{const e=o,i=e.m_count,a=e.m_vertices,r=R.DrawShape_s_ghostColor.SetRGBA(.75*t.r,.75*t.g,.75*t.b,t.a);let s=a[0];if(this.m_debugDraw.DrawPoint(s,4,t),e.m_hasPrevVertex){const t=e.m_prevVertex;this.m_debugDraw.DrawSegment(t,s,r),this.m_debugDraw.DrawCircle(t,.1,r)}for(let o=1;o<i;++o){const e=a[o];this.m_debugDraw.DrawSegment(s,e,t),this.m_debugDraw.DrawPoint(e,4,t),s=e}if(e.m_hasNextVertex){const t=e.m_nextVertex;this.m_debugDraw.DrawSegment(t,s,r),this.m_debugDraw.DrawCircle(t,.1,r)}break}case c.b2ShapeType.e_polygonShape:{const e=o,i=e.m_count,a=e.m_vertices;this.m_debugDraw.DrawSolidPolygon(a,i,t);break}}}Solve(e){for(let a=this.m_bodyList;a;a=a.m_next)a.m_xf0.Copy(a.m_xf);for(let a=this.m_controllerList;a;a=a.m_next)a.Step(e);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const t=this.m_island;t.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,this.m_contactManager.m_contactListener);for(let a=this.m_bodyList;a;a=a.m_next)a.m_islandFlag=!1;for(let a=this.m_contactManager.m_contactList;a;a=a.m_next)a.m_islandFlag=!1;for(let a=this.m_jointList;a;a=a.m_next)a.m_islandFlag=!1;const o=this.s_stack;for(let a=this.m_bodyList;a;a=a.m_next){if(a.m_islandFlag)continue;if(!a.IsAwake()||!a.IsActive())continue;if(a.GetType()===C.b2BodyType.b2_staticBody)continue;t.Clear();let i=0;for(o[i++]=a,a.m_islandFlag=!0;i>0;){const e=o[--i];if(!e)throw new Error;if(t.AddBody(e),e.m_awakeFlag=!0,e.GetType()!==C.b2BodyType.b2_staticBody){for(let a=e.m_contactList;a;a=a.next){const e=a.contact;if(e.m_islandFlag)continue;if(!e.IsEnabled()||!e.IsTouching())continue;const r=e.m_fixtureA.m_isSensor,s=e.m_fixtureB.m_isSensor;if(r||s)continue;t.AddContact(e),e.m_islandFlag=!0;const n=a.other;n.m_islandFlag||(o[i++]=n,n.m_islandFlag=!0)}for(let a=e.m_jointList;a;a=a.next){if(a.joint.m_islandFlag)continue;const e=a.other;e.IsActive()&&(t.AddJoint(a.joint),a.joint.m_islandFlag=!0,e.m_islandFlag||(o[i++]=e,e.m_islandFlag=!0))}}}const r=new V.b2Profile;t.Solve(r,e,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=r.solveInit,this.m_profile.solveVelocity+=r.solveVelocity,this.m_profile.solvePosition+=r.solvePosition;for(let e=0;e<t.m_bodyCount;++e){const o=t.m_bodies[e];o.GetType()===C.b2BodyType.b2_staticBody&&(o.m_islandFlag=!1)}}for(let a=0;a<o.length&&o[a];++a)o[a]=null;const i=new r.b2Timer;for(let a=this.m_bodyList;a;a=a.m_next)a.m_islandFlag&&a.GetType()!==C.b2BodyType.b2_staticBody&&a.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=i.GetMilliseconds()}SolveTOI(e){const t=this.m_island;if(t.Initialize(2*i.b2_maxTOIContacts,i.b2_maxTOIContacts,0,this.m_contactManager.m_contactListener),this.m_stepComplete){for(let e=this.m_bodyList;e;e=e.m_next)e.m_islandFlag=!1,e.m_sweep.alpha0=0;for(let e=this.m_contactManager.m_contactList;e;e=e.m_next)e.m_toiFlag=!1,e.m_islandFlag=!1,e.m_toiCount=0,e.m_toi=1}for(;;){let o=null,r=1;for(let e=this.m_contactManager.m_contactList;e;e=e.m_next){if(!e.IsEnabled())continue;if(e.m_toiCount>i.b2_maxSubSteps)continue;let t=1;if(e.m_toiFlag)t=e.m_toi;else{const o=e.GetFixtureA(),i=e.GetFixtureB();if(o.IsSensor()||i.IsSensor())continue;const r=o.GetBody(),s=i.GetBody(),n=r.m_type,c=s.m_type,d=r.IsAwake()&&n!==C.b2BodyType.b2_staticBody,u=s.IsAwake()&&c!==C.b2BodyType.b2_staticBody;if(!d&&!u)continue;const m=r.IsBullet()||n!==C.b2BodyType.b2_dynamicBody,p=s.IsBullet()||c!==C.b2BodyType.b2_dynamicBody;if(!m&&!p)continue;let h=r.m_sweep.alpha0;r.m_sweep.alpha0<s.m_sweep.alpha0?(h=s.m_sweep.alpha0,r.m_sweep.Advance(h)):s.m_sweep.alpha0<r.m_sweep.alpha0&&(h=r.m_sweep.alpha0,s.m_sweep.Advance(h));const f=e.GetChildIndexA(),y=e.GetChildIndexB(),_=R.SolveTOI_s_toi_input;_.proxyA.SetShape(o.GetShape(),f),_.proxyB.SetShape(i.GetShape(),y),_.sweepA.Copy(r.m_sweep),_.sweepB.Copy(s.m_sweep),_.tMax=1;const g=R.SolveTOI_s_toi_output;l.b2TimeOfImpact(g,_);const b=g.t;t=g.state===l.b2TOIOutputState.e_touching?a.b2Min(h+(1-h)*b,1):1,e.m_toi=t,e.m_toiFlag=!0}t<r&&(o=e,r=t)}if(null===o||1-10*i.b2_epsilon<r){this.m_stepComplete=!0;break}const s=o.GetFixtureA(),n=o.GetFixtureB(),c=s.GetBody(),d=n.GetBody(),u=R.SolveTOI_s_backup1.Copy(c.m_sweep),m=R.SolveTOI_s_backup2.Copy(d.m_sweep);if(c.Advance(r),d.Advance(r),o.Update(this.m_contactManager.m_contactListener),o.m_toiFlag=!1,++o.m_toiCount,!o.IsEnabled()||!o.IsTouching()){o.SetEnabled(!1),c.m_sweep.Copy(u),d.m_sweep.Copy(m),c.SynchronizeTransform(),d.SynchronizeTransform();continue}c.SetAwake(!0),d.SetAwake(!0),t.Clear(),t.AddBody(c),t.AddBody(d),t.AddContact(o),c.m_islandFlag=!0,d.m_islandFlag=!0,o.m_islandFlag=!0;for(let e=0;e<2;++e){const o=0===e?c:d;if(o.m_type===C.b2BodyType.b2_dynamicBody)for(let e=o.m_contactList;e&&t.m_bodyCount!==t.m_bodyCapacity&&t.m_contactCount!==t.m_contactCapacity;e=e.next){const i=e.contact;if(i.m_islandFlag)continue;const a=e.other;if(a.m_type===C.b2BodyType.b2_dynamicBody&&!o.IsBullet()&&!a.IsBullet())continue;const s=i.m_fixtureA.m_isSensor,n=i.m_fixtureB.m_isSensor;if(s||n)continue;const l=R.SolveTOI_s_backup.Copy(a.m_sweep);a.m_islandFlag||a.Advance(r),i.Update(this.m_contactManager.m_contactListener),i.IsEnabled()&&i.IsTouching()?(i.m_islandFlag=!0,t.AddContact(i),a.m_islandFlag||(a.m_islandFlag=!0,a.m_type!==C.b2BodyType.b2_staticBody&&a.SetAwake(!0),t.AddBody(a))):(a.m_sweep.Copy(l),a.SynchronizeTransform())}}const p=R.SolveTOI_s_subStep;p.dt=(1-r)*e.dt,p.inv_dt=1/p.dt,p.dtRatio=1,p.positionIterations=20,p.velocityIterations=e.velocityIterations,p.particleIterations=e.particleIterations,p.warmStarting=!1,t.SolveTOI(p,c.m_islandIndex,d.m_islandIndex);for(let e=0;e<t.m_bodyCount;++e){const o=t.m_bodies[e];if(o.m_islandFlag=!1,o.m_type===C.b2BodyType.b2_dynamicBody){o.SynchronizeFixtures();for(let e=o.m_contactList;e;e=e.next)e.contact.m_toiFlag=!1,e.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}AddController(e){return e.m_next=this.m_controllerList,e.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=e),this.m_controllerList=e,++this.m_controllerCount,e}RemoveController(e){return e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),this.m_controllerList===e&&(this.m_controllerList=e.m_next),--this.m_controllerCount,e.m_prev=null,e.m_next=null,e}}o.b2World=R,R.Step_s_step=new V.b2TimeStep,R.Step_s_stepTimer=new r.b2Timer,R.Step_s_timer=new r.b2Timer,R.DrawDebugData_s_color=new s.b2Color(0,0,0),R.DrawDebugData_s_vs=a.b2Vec2.MakeArray(4),R.DrawDebugData_s_xf=new a.b2Transform,R.QueryFixtureShape_s_aabb=new n.b2AABB,R.RayCast_s_input=new n.b2RayCastInput,R.RayCast_s_output=new n.b2RayCastOutput,R.RayCast_s_point=new a.b2Vec2,R.DrawJoint_s_p1=new a.b2Vec2,R.DrawJoint_s_p2=new a.b2Vec2,R.DrawJoint_s_color=new s.b2Color(.5,.8,.8),R.DrawJoint_s_c=new s.b2Color,R.DrawShape_s_ghostColor=new s.b2Color,R.SolveTOI_s_subStep=new V.b2TimeStep,R.SolveTOI_s_backup=new a.b2Sweep,R.SolveTOI_s_backup1=new a.b2Sweep,R.SolveTOI_s_backup2=new a.b2Sweep,R.SolveTOI_s_toi_input=new l.b2TOIInput,R.SolveTOI_s_toi_output=new l.b2TOIOutput,cc._RF.pop()},{"../Collision/Shapes/b2Shape":"b2Shape","../Collision/b2Collision":"b2Collision","../Collision/b2TimeOfImpact":"b2TimeOfImpact","../Common/b2Draw":"b2Draw","../Common/b2Math":"b2Math","../Common/b2Settings":"b2Settings","../Common/b2Timer":"b2Timer","../Particle/b2Particle":"b2Particle","../Particle/b2ParticleSystem":"b2ParticleSystem","./Joints/b2AreaJoint":"b2AreaJoint","./Joints/b2DistanceJoint":"b2DistanceJoint","./Joints/b2FrictionJoint":"b2FrictionJoint","./Joints/b2GearJoint":"b2GearJoint","./Joints/b2Joint":"b2Joint","./Joints/b2MotorJoint":"b2MotorJoint","./Joints/b2MouseJoint":"b2MouseJoint","./Joints/b2PrismaticJoint":"b2PrismaticJoint","./Joints/b2PulleyJoint":"b2PulleyJoint","./Joints/b2RevoluteJoint":"b2RevoluteJoint","./Joints/b2RopeJoint":"b2RopeJoint","./Joints/b2WeldJoint":"b2WeldJoint","./Joints/b2WheelJoint":"b2WheelJoint","./b2Body":"b2Body","./b2ContactManager":"b2ContactManager","./b2Island":"b2Island","./b2TimeStep":"b2TimeStep","./b2WorldCallbacks":"b2WorldCallbacks"}]},{},["Box2D","b2ChainShape","b2CircleShape","b2EdgeShape","b2PolygonShape","b2Shape","b2BroadPhase","b2CollideCircle","b2CollideEdge","b2CollidePolygon","b2Collision","b2Distance","b2DynamicTree","b2TimeOfImpact","b2BlockAllocator","b2Draw","b2GrowableStack","b2Math","b2Settings","b2StackAllocator","b2Timer","b2BuoyancyController","b2ConstantAccelController","b2ConstantForceController","b2Controller","b2GravityController","b2TensorDampingController","b2ChainAndCircleContact","b2ChainAndPolygonContact","b2CircleContact","b2Contact","b2ContactFactory","b2ContactSolver","b2EdgeAndCircleContact","b2EdgeAndPolygonContact","b2PolygonAndCircleContact","b2PolygonContact","b2AreaJoint","b2DistanceJoint","b2FrictionJoint","b2GearJoint","b2Joint","b2MotorJoint","b2MouseJoint","b2PrismaticJoint","b2PulleyJoint","b2RevoluteJoint","b2RopeJoint","b2WeldJoint","b2WheelJoint","b2Body","b2ContactManager","b2Fixture","b2Island","b2TimeStep","b2World","b2WorldCallbacks","b2Particle","b2ParticleGroup","b2ParticleSystem","b2StackQueue","b2VoronoiDiagram","b2Rope","IndexBuildConfig","IndexDataModule","IndexDebugModuleConsole","IndexDebugModuleCtrl","IndexDebugModuleFast","IndexLayer","IndexLoading","IndexStorageItem","IndexView","BCBigInt","BCCollection","BCCounter","BCEventer","BCIdGeneration","BCProgressNum","BCPromiseCtrl","BCType","UtilArray","UtilCollection","UtilMath","UtilNode","UtilObjPool","UtilObjPoolType","UtilString","Layout","LayoutAlignmentHor","LayoutAlignmentHorCenter","LayoutAlignmentHorLeft","LayoutAlignmentHorRight","LayoutAlignmentVer","LayoutAlignmentVerLower","LayoutAlignmentVerMiddle","LayoutAlignmentVerUpper","LayoutCollectionColumn","LayoutConstraint","LayoutConstraintColumn","LayoutConstraintRow","LayoutEle","LayoutStartAxis","LayoutStartAxisHor","LayoutStartAxisVer","LayoutStartCornerHor","LayoutStartCornerHorLeft","LayoutStartCornerHorRight","LayoutStartCornerVer","LayoutStartCornerVerLower","LayoutStartCornerVerUpper","ComponentNodeEventer","GlobalLockRotation0","PlayAnimationOnEnable","PlayAudioOnEnable","MgrCfg","CfgBackpackProp","CfgBuffProps","CfgChapter","CfgCommon","CfgEff","CfgEquipmentProps","CfgGameElement","CfgLevel","CfgLottery","CfgNumStringify","CfgScene","CfgStore","CfgVoiceOgg","MgrData","MgrDataItem","MgrDataType","MgrDateItemMediaRS","MgrDateNow","MgrDateNowStatus","MgrDateNowStatusGetting","MgrDateNowStatusIdle","DebugView","DebugViewBtn","DebugViewDefine","DebugViewGraphics","DebugViewGroupFast","DebugViewGroupFastBtn","DebugViewGroupMessage","DebugViewGroupMessageBtn","DebugViewGroupMessageTxt","DebugViewGroupModule","DebugViewGroupModuleBtn","DebugViewState","MgrEvter","B2ControllerRS","B2DrableWorld","B2EleSetting","B2ElementRS","B2Extend","B2JointRS","B2ShapeRS","GraphicsDrawer","Index","Jiang","MgrRes","MgrResAssets","MgrResAssetsLoadRecord","MgrResAssetsStatus","MgrResAssetsStatusIdle","MgrResAssetsStatusLoading","MgrResAssetsSum","MgrResBundle","MgrResBundleLoadRecord","MgrResBundleStatus","MgrResBundleStatusIdle","MgrResBundleStatusLoading","MgrResBundleSum","MgrResConfig","MgrSdk","MgrSdkCore","MgrSdkCoreH5","MgrSdkEnterRS","MgrSdkCoreWX","MgrSdkCoreWXCloudCallRecord","MgrSdkCoreWXCloudFunctionRS","MgrSdkCoreWXCloudStatus","MgrSdkCoreWXCloudStatusIdle","MgrSdkCoreWXCloudStatusInited","MgrSdkCoreWXCloudStatusIniting","MgrSdkCoreWXUserInfo","WXAudio","WXAudioStatus","WXAudioStatusIdle","WXAudioStatusPlaying","WXImgLoader","WXImgLoaderStatus","WXImgLoaderStatusLoaded","WXImgLoaderStatusLoading","WXLifeCycle","WXLifeCycleStatus","WXLifeCycleStatusExitTips","WXLifeCycleStatusExited","WXLifeCycleStatusIdle","WXVideoAd","WXVideoAdInst","WXVideoAdInstLoadStatus","WXVideoAdInstLoadStatusIdle","WXVideoAdInstLoadStatusLoading","WXVideoAdInstLoadStatusNone","WXVideoAdInstLoadStatusReady","WXVideoAdInstPlayStatus","WXVideoAdInstPlayStatusIdle","WXVideoAdInstPlayStatusPlaying","MgrUI","UIMask","UINode","UINodeInstEnterRS","UINodeInstHideRS","UINodePrefabRecord","UINodeType","UIRoot","UIRootTreeJson","UIViewComponent","ViewState","GameCommon","GameMath","VideoStatusRS","CfgCacheChapter","CfgCacheChapterLevel","CfgCacheEquipment","CfgCacheGameElement","CfgCacheLottery","CfgCacheLotteryUnlockRS","CfgCacheScene","CfgCacheStore","CfgCacheStoreUnlockRS","GameDisplayBG","GameDisplayBody000","GameDisplayBody001","GameDisplayBody002","GameDisplayBody003","GameDisplayBody004","GameDisplayBody005","GameDisplayBody006","GameDisplayBody007","GameDisplayBody008","GameDisplayBody009","GameDisplayBody010","GameDisplayBody011","GameDisplayBody013","GameDisplayBody014","GameDisplayBody015","GameDisplayBody016","GameDisplayBody017","GameDisplayBody018","GameDisplayBuff","GameDisplayBuffItem","GameDisplayEff","GameDisplayEquipment002","GameDisplayEquipment004","GameDisplayEquipment005","GameDisplayEquipment006","GameDisplayEquipment007","GameDisplayHp","GameDisplayHp01","GameDisplayLightPoint","GameDisplayPart","GameDisplayParticleRain","GameDisplayParticleSnow","GameDisplayPlayer000","GameDisplayPlayerHand000","GameDisplayReward","GameDisplayTxt","GameCtxB2Body","GameCtxB2BodyFixture","GameCtxB2BodyFixtureConcat","GameCtxB2BodyFixtureTypeRS","GameElement","GameState","GameStatePhyAbleRS","GameStatePhyAbleRSRec","GameStateReward","DefineAltar","DefineEff","DefineVoice","GameCfgBodyCacheDrop","GameCfgBodyCacheDropRS","GameElementBody","GameElementBodyBehaviour","GameElementBodyBehaviourRS","GameElementBodyCtxDmg","GameElementBodyCtxDmgType","GameSizeMarkRS","Logic3001","Logic3001Args","Logic3001Status","Logic3001StatusCD","Logic3001StatusJumped","Logic3001StatusOrdinary","Logic3001StatusPower","Logic3002","Logic3002Args","Logic3003","Logic3003Args","Logic3003Status","Logic3003StatusCD","Logic3003StatusJumped","Logic3003StatusMoveJump","Logic3003StatusMovePower","Logic3003StatusOrdinary","Logic3003StatusPower","Logic3004","Logic3004Args","Logic3004Status","Logic3004StatusCD","Logic3004StatusOrdinary","Logic3004StatusPower","Logic3005","Logic3005Args","Logic3005DefendStatus","Logic3005DefendStatusCD","Logic3005DefendStatusOrdinary","Logic3005Status","Logic3005StatusCD","Logic3005StatusJumped","Logic3005StatusOrdinary","Logic3005StatusPower","Logic3006","Logic3006Args","Logic3006Status","Logic3006StatusCD","Logic3006StatusJumped","Logic3006StatusOrdinary","Logic3006StatusPower","Logic3007","Logic3007Args","Logic3007DefendStatus","Logic3007DefendStatusCD","Logic3007DefendStatusOrdinary","Logic3007Status","Logic3007StatusCD","Logic3007StatusJumped","Logic3007StatusOrdinary","Logic3007StatusPower","Logic3008","Logic3008Args","Logic3008Status","Logic3008StatusCD","Logic3008StatusJumped","Logic3008StatusOrdinary","Logic3008StatusPower","Logic3009","Logic3009Args","Logic3009Status","Logic3009StatusCD","Logic3009StatusJumped","Logic3009StatusOrdinary","Logic3009StatusPower","Logic3010","Logic3010Args","Logic3011","Logic3011Args","Logic3011Status","Logic3011StatusCD","Logic3011StatusJumped","Logic3011StatusOrdinary","Logic3011StatusPower","Logic3012","Logic3012Args","Logic3012Status","Logic3012StatusCD","Logic3012StatusOrdinary","Logic3012StatusPower","Logic3013","Logic3013Args","Logic3014","Logic3014Args","Logic3015","Logic3015Args","Logic3015Status","Logic3015StatusCD","Logic3015StatusJumped","Logic3015StatusOrdinary","Logic3015StatusPower","Logic3016","Logic3016Args","Logic3017","Logic3017Args","Logic3017DefendStatus","Logic3017DefendStatusCD","Logic3017DefendStatusOrdinary","Logic3017Status","Logic3017StatusCD","Logic3017StatusJumped","Logic3017StatusOrdinary","Logic3017StatusPower","Logic3018","Logic3018Args","Logic3018Status","Logic3018StatusCD","Logic3018StatusJumped","Logic3018StatusOrdinary","Logic3018StatusPower","Logic3019","Logic3019Args","Logic3020","Logic3020Args","Logic3020Status","Logic3020StatusCD","Logic3020StatusOrdinary","Logic3020StatusPower","Logic3021","Logic3021Args","Logic3021Status","Logic3021StatusCD","Logic3021StatusOrdinary","Logic3021StatusPower","Logic3022","Logic3022Args","Logic3022DefendStatus","Logic3022DefendStatusCD","Logic3022DefendStatusOrdinary","Logic3022Status","Logic3022StatusCD","Logic3022StatusJumped","Logic3022StatusOrdinary","Logic3022StatusPower","Logic3023","Logic3023Args","Logic3023Status","Logic3023StatusCD","Logic3023StatusOrdinary","Logic3023StatusPower","Logic3024","Logic3024Args","Logic3024Status","Logic3024StatusCD","Logic3024StatusJumped","Logic3024StatusOrdinary","Logic3024StatusPower","Logic3026","Logic3026Args","Logic3026Status","Logic3026StatusCD","Logic3026StatusJumped","Logic3026StatusOrdinary","Logic3026StatusPower","Logic3027","Logic3027Args","Logic3028","Logic3028Args","Logic3030","Logic3030Args","Logic3030Status","Logic3030StatusDown","Logic3030StatusUp","Logic3031","Logic3031Args","MBPlayer","MgrActionMachine","MgrActionMachineStatus","MgrActionMachineStatusBackFloat","MgrActionMachineStatusBackUp","MgrActionMachineStatusForwardFloat","MgrActionMachineStatusForwardUp","MgrActionMachineStatusJump","MgrActionMachineStatusJumpFloat","MgrActionMachineStatusJumpUp","MgrActionMachineStatusWalk","MgrBodyDIrStatusLeft","MgrBodyDir","MgrBodyDirStatus","MgrBodyDirStatusRight","MgrDefendAct","MgrDefendActStatus","MgrDefendActStatusIng","MgrDefendActStatusOrdinary","MgrDefendActStatusSuccessed","MgrDefendCD","MgrDefendCDStatus","MgrDefendCDStatusReady","MgrDefendCDStatusTimeCount","MgrEquipment","MgrEquipmentMachine","MgrEquipmentMachineStatus","MgrEquipmentMachineStatusArmo","MgrEquipmentMachineStatusFired","MgrHealth","MgrHealthMachine","MgrHealthMachineStatus","MgrHealthMachineStatusDeath","MgrHealthMachineStatusHurted","MgrHealthMachineStatusOrdinary","MgrHorseFrame","MgrHorseFrameStatus","Logic3032","Logic3032Args","Logic3033","Logic3033Args","Logic3034","Logic3034Args","Logic3034Status","Logic3034StatusCD","Logic3034StatusOrdinary","Logic3034StatusPower","Logic3035","Logic3035Args","Logic3036","Logic3036Args","Logic3037","Logic3037Args","Logic3037Status","Logic3037StatusFly","Logic3037StatusHook","Logic3038","Logic3038Args","Logic3039","Logic3039Args","Logic3040","Logic3040Args","Logic3041","Logic3041Args","Logic3042","Logic3042Args","Logic3043","Logic3043Args","Logic3043Status","Logic3043StatusFly","Logic3043StatusKeep","Logic3044","Logic3044Args","Logic3045","Logic3045Args","GameElementBuff","GameElementBuffBehaviour","GameElementBuffRS","GameElementBuffStatus","GameElementBuffStatusDestory","GameElementBuffStatusEffect","GameElementBuffStatusUnload","GameElementMgrBuff","GameElementBuffLogic3001001","AnimFlash","AnimFlashStatus","AnimFlashStatusIn","AnimFlashStatusOut","AnimKeep","AnimKeepStatus","AnimKeepStatusIn","AnimKeepStatusOut","GameCD","GameCDStatus","GameCDStatusIng","GameCDStatusReady","GameElementEff","GameElementLightPoint","GameElementPart","GameElementReward","GameElementScene","GameElementTxt","ParticleData","ParticleDataGroup","ScrollStop","ScrollStopStatus","ScrollStopStatusGo","ScrollStopStatusIdle","EquipmentInst","EquipmentInstRS","GEEI_2004","GEEI_2004_args","GEEI_2004_status","GEEI_2004_status_atk_a_start","GEEI_2004_status_atk_b_ing","GEEI_2004_status_atk_c_end","GEEI_2004_status_cd","GEEI_2004_status_keep","GEEI_2004_status_ready","GEEI_2005","GEEI_2005_args","GEEI_2005_status","GEEI_2005_status_atk_a_start","GEEI_2005_status_atk_b_ing","GEEI_2005_status_atk_c_end","GEEI_2005_status_cd","GEEI_2005_status_keep","GEEI_2005_status_ready","GEEI_2006","GEEI_2006_args","GEEI_2006_status","GEEI_2006_status_atk_a_start","GEEI_2006_status_atk_b_ing","GEEI_2006_status_atk_c_end","GEEI_2006_status_cd","GEEI_2006_status_keep","GEEI_2006_status_ready","GEEI_2007","GEEI_2007_args","GEEI_2007_status","GEEI_2007_status_atk_a_start","GEEI_2007_status_atk_b_ing","GEEI_2007_status_atk_c_end","GEEI_2007_status_cd","GEEI_2007_status_keep","GEEI_2007_status_ready","GameElementParticle","GameElementParticleRain","GameElementParticleRainMgr","GameElementParticleSnow","GameElementParticleSnowMgr","PlayOrdinary","PlayOrdinaryEnemyCall","PlayOrdinaryEnemyCallItem","PlayOrdinaryRS","PlayOrdinaryStatus","PlayOrdinaryStatusDestory","PlayOrdinaryStatusFailed","PlayOrdinaryStatusFailing","PlayOrdinaryStatusPaused","PlayOrdinaryStatusPlaying","PlayOrdinaryStatusRelife","PlayOrdinaryStatusSuccessed","PlayOrdinaryStatusSuccessing","BackpackPropPreviewView","BackpackPropPreviewViewState","BlurView","BlurViewScreenShot","BlurViewState","BlurViewStateIdxData","BookViewDropBackpackProp","BookViewDropEquipment","BookViewMonster","ChallengeSelectView","ChallengeSelectViewBgLeft","ChallengeSelectViewBgRight","ChallengeSelectViewBook","ChallengeSelectViewChapter","ChallengeSelectViewChapterUnlock","ChallengeSelectViewState","ChallengeSelectViewStateRS","ChapterUnlockView","ChapterUnlockViewCard","ChapterUnlockViewState","RewardGrid","RewardGridArgs","ConfirmView","ConfirmViewState","EquipmentLvUpSumView","EquipmentLvUpSumViewItem","EquipmentLvUpSumViewState","EquipmentLvUpView","EquipmentLvUpViewState","EquipmentPreviewView","EquipmentPreviewViewState","EquipmentView","EquipmentViewBackpackProp","EquipmentViewBackpackPropArgs","EquipmentViewBtnEquip","EquipmentViewDetailBackpackProp","EquipmentViewDetailEquip","EquipmentViewEquip","EquipmentViewItem","EquipmentViewItemBackpackProp","EquipmentViewNodeSelect","EquipmentViewSelectStatus","EquipmentViewSelectStatusBackpackProp","EquipmentViewSelectStatusEquipment","EquipmentViewState","EquipmentViewStateItem","ExitView","ExitViewState","FlashView","FlashViewState","FontView","FontViewState","GameFailedView","GameFailedViewState","GameOptionsView","GameOptionsViewState","GamePlayView","GamePlayViewBossBoard","GamePlayViewEquipmentBtn","GamePlayViewMachine","GamePlayViewState","GamePlayViewStateMgrTrace","GamePlayViewStateMgrTraceRecord","GamePlayViewTrace","GameSuccessedView","GameSuccessedViewState","GuideMgr","GuideMgrStatus","GuideMgrStatusIdle","GuideMgrStatusP1U10Wait","GuideMgrStatusP1U11DefendAgain","GuideMgrStatusP1U1TouchStart","GuideMgrStatusP1U2Wait","GuideMgrStatusP1U3Atk","GuideMgrStatusP1U4Wait","GuideMgrStatusP1U5Atk","GuideMgrStatusP1U6Warning","GuideMgrStatusP1U7Wait","GuideMgrStatusP1U8Defend","GuideMgrStatusP1U9WarningAgain","GuideMgrView","IndexViewBtn","IndexViewRS","IndexViewState","IndexViewStateStatus","IndexViewStateStatusIdle","IndexViewStateStatusMoving","IndexViewTag","LoadingView","LoadingViewState","LockView","LockViewState","LotteryTipsView","LotteryTipsViewState","LotteryView","LotteryViewBubble","LotteryViewBubbleData","LotteryViewState","LvUpBatchMachineTouch","LvUpBatchMachineTouchStatus","LvUpBatchMachineTouchStatus1FadeIn","LvUpBatchMachineTouchStatus2FlashIn","LvUpBatchMachineTouchStatus3FlashOut","LvUpBatchMachineTouchStatus4Sort","LvUpBatchMachineTouchStatus5Idle","LvUpBatchMachineTouchStatus6TipsOut","LvUpBatchMachineTouchStatusEmpty","LvUpBatchView","LvUpBatchViewItem","LvUpBatchViewState","LvUpBatchViewStateItemRecord","RewardView","RewardViewParticle","RewardViewParticleData","RewardViewState","RewardViewStateReport","RewardViewStateReportEquipment","ScreenShotView","ScreenShotViewState","SecondsStatus","SecondsStatus1","SecondsStatus2","SecondsStatus3","SecondsView","SecondsViewState","SettingView","SettingViewState","ShareView","ShareViewGroup","ShareViewItem","ShareViewRS","ShareViewState","StoreTipsView","StoreTipsViewState","StoreView","StoreViewItemEquipment","StoreViewState","TipsView","TipsViewLine","TipsViewState","VideoCertainView","VideoCertainViewState","VideoRelifeView","VideoRelifeViewState","VoiceOggInfo","VoiceOggInfoStatus","VoiceOggInfoStatusDisplaying","VoiceOggInfoStatusWaitDisplay","VoiceOggTypeRS","VoiceOggView","VoiceOggViewItem","VoiceOggViewState","VoiceOggVolumeStatus","VoiceOggVolumeStatusCD","VoiceOggVolumeStatusIdle","YesView","YesViewState"]);